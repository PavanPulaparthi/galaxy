!function(e){function t(t){for(var a,s,r=t[0],l=t[1],c=t[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);h.length;)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={2:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=a);var o,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=function(e){return s.p+""+({6:"ruleCollectionBuilder",7:"vendors~ruleCollectionBuilder"}[e]||e)+".chunk.js"}(e);var l=new Error;o=function(t){r.onerror=r.onload=null,clearTimeout(c);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}i[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:r})}),12e4);r.onerror=r.onload=o,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/dist/",s.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;o.push([950,0,1]),n()}([,,function(e,t,n){var a,i;a=[n(235)],void 0===(i=function(e){if(Object.prototype.hasOwnProperty.call(e,"__root")){var t=sessionStorage.getItem("currentLocale");t&&(e=e["__"+t]||e["__"+t.split("-")[0]]||e.__root)}var n=function(t){return e[t]||t};return n.cacheNonLocalized=!1,n}.apply(t,a))||(e.exports=i)},,function(e,t,n){(function(t){e.exports=t.config=n(252)}).call(this,n(81))},function(e,t,n){"use strict";var a=n(86),i=n(0),o=n.n(i),s=n(1),r=n.n(s),l=n(3),c=n.n(l),d=n(7),u=n(4),h=n(2),p=n.n(h),m=c.a.Model.extend(d.a.LoggableMixin).extend({_logNamespace:"user",urlRoot:function(){return"".concat(Object(u.getAppRoot)(),"api/users")},defaults:{id:null,username:"(".concat(p()("anonymous user"),")"),email:"",total_disk_usage:0,nice_total_disk_usage:"",quota_percent:null,is_admin:!1,preferences:{}},initialize:function(e){this.log("User.initialize:",e),this.on("loaded",(function(e,t){this.log("".concat(this," has loaded:"),e,t)})),this.on("change",(function(e,t){this.log("".concat(this," has changed:"),e,t.changes)}))},isAnonymous:function(){return!this.get("email")},isAdmin:function(){return this.get("is_admin")},updatePreferences:function(e,t){var n=this.get("preferences");n[e]=JSON.stringify(t),this.preferences=n},getFavorites:function(){var e=this.get("preferences");return e&&e.favorites?JSON.parse(e.favorites):{tools:[]}},updateFavorites:function(e,t){var n=this.getFavorites();n[e]=t[e],this.updatePreferences("favorites",n)},loadFromApi:function(e,t){e=e||m.CURRENT_ID_STR;var n=this,a=(t=t||{}).success;return t.success=function(e,t){n.trigger("loaded",e,t),a&&a(e,t)},e===m.CURRENT_ID_STR&&(t.url="".concat(this.urlRoot,"/").concat(m.CURRENT_ID_STR)),c.a.Model.prototype.fetch.call(this,t)},clearSessionStorage:function(){for(var e in sessionStorage)0===e.indexOf("history:")?sessionStorage.removeItem(e):"history-panel"===e&&sessionStorage.removeItem(e)},toString:function(){var e=[this.get("username")];return this.get("id")&&(e.unshift(this.get("id")),e.push(this.get("email"))),"User(".concat(e.join(":"),")")}});m.CURRENT_ID_STR="current",m.getCurrentUserFromApi=function(e){var t=new m;return t.loadFromApi(m.CURRENT_ID_STR,e),t};var f={User:m};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){e=e||{};return this.userId=window.bootstrapped&&window.bootstrapped.user?window.bootstrapped.user.id:null,this.userId=this.userId||e.userId||null,this.consoleLogger=e.consoleLogger||null,this._init(e),this}function v(e){var t=String(e);return"[object Object]"==t&&(t=JSON.stringify(e)),t}function y(e){return this._init(e||{})}g.ALL=0,g.LOG=0,g.DEBUG=10,g.INFO=20,g.WARN=30,g.ERROR=40,g.METRIC=50,g.NONE=100,g.defaultOptions={logLevel:g.NONE,consoleLevel:g.NONE,defaultNamespace:"Galaxy",consoleNamespaceWhitelist:null,consoleFlattenMessages:!1,clientPrefix:"client.",maxCacheSize:3e3,postSize:1e3,addTime:!0,cacheKeyPrefix:"logs-",postUrl:"/api/metrics",delayPostInMs:6e5,getPingData:void 0,onServerResponse:void 0},g.prototype._init=function(e){for(var t in this.options={},g.defaultOptions)Object.prototype.hasOwnProperty.call(g.defaultOptions,t)&&(this.options[t]=Object.prototype.hasOwnProperty.call(e,t)?e[t]:g.defaultOptions[t]);return this.options.logLevel=this._parseLevel(this.options.logLevel),this.options.consoleLevel=this._parseLevel(this.options.consoleLevel),this._sending=!1,this._waiting=null,this._postSize=this.options.postSize,this._initCache(),this},g.prototype._initCache=function(){try{this.cache=new y({maxSize:this.options.maxCacheSize,key:this.options.cacheKeyPrefix+this.userId})}catch(e){this._emitToConsole("warn","MetricsLogger",["Could not intitialize logging cache:",e]),this.options.logLevel=g.NONE}},g.prototype._parseLevel=function(e){var t=_(e);if("number"===t)return e;if("string"===t){var n=e.toUpperCase();if(Object.prototype.hasOwnProperty.call(g,n))return g[n]}throw new Error("Unknown log level: ".concat(e))},g.prototype.emit=function(e,t,n){return t=t||this.options.defaultNamespace,e&&n?((e=this._parseLevel(e))>=this.options.logLevel&&this._addToCache(e,t,n),this.consoleLogger&&e>=this.options.consoleLevel&&this._emitToConsole(e,t,n),this):this},g.prototype._addToCache=function(e,t,n){this._emitToConsole("debug","MetricsLogger",["_addToCache:",arguments,this.options.addTime,this.cache.length()]);var a=this;try{var i=a.cache.add(a._buildEntry(e,t,n));i>=a._postSize&&a._postCache()}catch(e){a._emitToConsole("warn","MetricsLogger",["Metrics logger could not stringify logArguments:",t,n]),a._emitToConsole("error","MetricsLogger",[e])}return a},g.prototype._buildEntry=function(e,t,n){this._emitToConsole("debug","MetricsLogger",["_buildEntry:",arguments]);var a={level:e,namespace:this.options.clientPrefix+t,args:n};return this.options.addTime&&(a.time=(new Date).toISOString()),a},g.prototype._postCache=function(e){if(e=e||{},this._emitToConsole("info","MetricsLogger",["_postCache",e,this._postSize]),!this.options.postUrl||this._sending)return o.a.when({});var t=this,n=e.count||t._postSize,a=t.cache.get(n),i=a.length,s="function"==typeof t.options.getPingData?t.options.getPingData():{};return s.metrics=JSON.stringify(a),t._sending=!0,o.a.post(t.options.postUrl,s).always((function(){t._sending=!1})).fail((function(e,n,a){t._postSize=t.options.maxCacheSize,t.emit("error","MetricsLogger",["_postCache error:",e.readyState,e.status,e.responseJSON||e.responseText])})).done((function(e){"function"==typeof t.options.onServerResponse&&t.options.onServerResponse(e),t.cache.remove(i),t._postSize=t.options.postSize}))},g.prototype._delayPost=function(){var e=this;e._waiting=window.setTimeout((function(){e._waiting=null}),e.options.delayPostInMs)},g.prototype._emitToConsole=function(e,t,n){var a=this.options.consoleNamespaceWhitelist;if(!this.consoleLogger)return this;if(a&&-1===a.indexOf(t))return this;var i=Array.prototype.slice.call(n,0);return i.unshift(t),this.options.consoleFlattenMessages&&(i=[i.map(v).join(" ")]),e>=g.METRIC&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,i):e>=g.ERROR&&"function"==typeof this.consoleLogger.error?this.consoleLogger.error.apply(this.consoleLogger,i):(e>=g.WARN&&"function"==typeof this.consoleLogger.warn?this.consoleLogger.warn.apply(this.consoleLogger,i):e>=g.INFO&&"function"==typeof this.consoleLogger.info?this.consoleLogger.info.apply(this.consoleLogger,i):e>=g.DEBUG&&"function"==typeof this.consoleLogger.debug?this.consoleLogger.debug.apply(this.consoleLogger,i):"function"==typeof this.consoleLogger.log&&this.consoleLogger.log.apply(this.consoleLogger,i),this)},g.prototype.log=function(){this.emit(1,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.debug=function(){this.emit(g.DEBUG,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.info=function(){this.emit(g.INFO,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.warn=function(){this.emit(g.WARN,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.error=function(){this.emit(g.ERROR,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},g.prototype.metric=function(){this.emit(g.METRIC,this.options.defaultNamespace,Array.prototype.slice.call(arguments,0))},y.defaultOptions={maxSize:5e3},y.prototype._init=function(e){if(!this._hasStorage())throw new Error("LoggingCache needs localStorage");if(!e.key)throw new Error("LoggingCache needs key for localStorage");return this.key=e.key,this._initStorage(),this.maxSize=e.maxSize||y.defaultOptions.maxSize,this},y.prototype._hasStorage=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},y.prototype._initStorage=function(){return null===localStorage.getItem(this.key)?this.empty():this},y.prototype.add=function(e){var t=this._fetchAndParse(),n=t.length+1-this.maxSize;return n>0&&t.splice(0,n),t.push(e),this._unparseAndStore(t),t.length},y.prototype._fetchAndParse=function(){return JSON.parse(localStorage.getItem(this.key))},y.prototype._unparseAndStore=function(e){return localStorage.setItem(this.key,JSON.stringify(e))},y.prototype.length=function(){return this._fetchAndParse().length},y.prototype.get=function(e){return this._fetchAndParse().slice(0,e)},y.prototype.remove=function(e){var t=this._fetchAndParse(),n=t.splice(0,e);return this._unparseAndStore(t),n},y.prototype.empty=function(){return localStorage.setItem(this.key,"[]"),this},y.prototype.stringify=function(e){return JSON.stringify(this.get(e))},y.prototype.print=function(){console.log(JSON.stringify(this._fetchAndParse(),null,"  "))};var b={MetricsLogger:g,LoggingCache:y},w=n(73);function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._init(e,t)}Object(a.a)(k,"GalaxyApp");var M="".concat("galaxy:debug",":namespaces"),x="".concat("galaxy:debug",":flatten"),L=!1;try{L="true"==localStorage.getItem("galaxy:debug")}catch(e){console.log(p()("localStorage not available for debug flag retrieval"))}k.prototype._init=function(e,t){r.a.extend(this,c.a.Events),L&&(this.logger=console,console.debug("debugging galaxy:","options:",e,"bootstrapped:",t)),this._processOptions(e),this._initConfig(e.config||{});var n=D();return n&&this._patchGalaxy(n),this.root=e.root||"/",this.params=e.params||{},this.session_csrf_token=e.session_csrf_token||null,this._initLogger(this.options.loggerOptions||{}),this.debug("GalaxyApp.options: ",this.options),this.debug("GalaxyApp.config: ",this.config),this.debug("GalaxyApp.logger: ",this.logger),this._initLocale(),this.debug("GalaxyApp.localize: ",this.localize),this.config=e.config||{},this.debug("GalaxyApp.config: ",this.config),this._initUser(e.user||{}),this.debug("GalaxyApp.user: ",this.user),this._initUserLocale(),this.debug("currentLocale: ",sessionStorage.getItem("currentLocale")),this._setUpListeners(),this.trigger("ready",this),this.data={},this.data.create=w.a,this.data.dialog=w.c,this},k.prototype.defaultOptions={patchExisting:!0,root:"/",session_csrf_token:null},k.prototype._processOptions=function(e){var t=this.defaultOptions;for(var n in this.options={},t)Object.prototype.hasOwnProperty.call(t,n)&&(this.options[n]=Object.prototype.hasOwnProperty.call(e,n)?e[n]:t[n]);return this},k.prototype._initConfig=function(e){return this.config=e,this.config.debug=L||this.config.debug,this},k.prototype._patchGalaxy=function(e){if(this.options.patchExisting&&e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t])},k.prototype._initLogger=function(e){var t=arguments,n=this;if(this.config.debug){e.consoleLogger=e.consoleLogger||console,e.consoleLevel=e.consoleLevel||b.MetricsLogger.ALL;try{e.consoleNamespaceWhitelist=localStorage.getItem(M).split(",")}catch(e){console.debug(e)}try{e.consoleFlattenMessages="true"==localStorage.getItem(x)}catch(e){console.debug(e)}console.log(e.consoleFlattenMessages)}return this.logger=new b.MetricsLogger(e),this.emit={},["log","debug","info","warn","error","metric"].map((function(e){n.emit[e]=function(a){n.logger.emit(e,t[0],Array.prototype.slice.call(t,1))}})),this.config.debug&&(d.a.LoggableMixin.logger=this.logger),this},k.prototype._initLocale=function(e){return this.debug("_initLocale:",e),this.localize=p.a,window._l=this.localize,this},k.prototype._initUserLocale=function(e){var t=!(!this.config.default_locale||"auto"==this.config.default_locale)&&this.config.default_locale.toLowerCase(),n={};this.user&&this.user.attributes.preferences&&"extra_user_preferences"in this.user.attributes.preferences&&(n=JSON.parse(this.user.attributes.preferences.extra_user_preferences));var a="localization|locale"in n&&n["localization|locale"].toLowerCase();"auto"==a&&(a=!1);var i="undefined"==typeof navigator?"__root":(navigator.language||navigator.userLanguage||"__root").toLowerCase(),o=a||i||t;sessionStorage.setItem("currentLocale",o)},k.prototype._initUser=function(e){return this.debug("_initUser:",e),this.user=new f.User(e),this.user.logger=this.logger,this},k.prototype._setUpListeners=function(){var e=this;return this.lastAjax={},o()(document).bind("ajaxSend",(function(t,n,a){var i=a.data;try{i=JSON.parse(i)}catch(e){}e.lastAjax={url:location.href.slice(0,-1)+a.url,data:i}})),this},k.prototype.debugging=function(e){try{if(void 0===e)return"true"===localStorage.getItem("galaxy:debug");if(e)return localStorage.setItem("galaxy:debug",!0),!0;localStorage.removeItem("galaxy:debug"),this.debuggingNamespaces(null)}catch(e){console.log(p()("localStorage not available for debug flag retrieval"))}return!1},k.prototype.debuggingNamespaces=function(e){try{if(void 0===e){var t=localStorage.getItem(M);return"string"==typeof t?t.split(","):[]}null===e?localStorage.removeItem(M):localStorage.setItem(M,e);var n=this.debuggingNamespaces();return this.logger&&(this.logger.options.consoleNamespaceWhitelist=n),n}catch(e){console.log(p()("localStorage not available for debug namespace retrieval"))}},k.prototype.toString=function(){var e=this.user?this.user.get("email")||"(anonymous)":"uninitialized";return"GalaxyApp(".concat(e,")")};var T=n(52);function S(e){console.warn("setGalaxyInstance",Object(T.a)());var t=C(),n=e(k);return n instanceof k||(n=new k(n)),void 0===n.debug&&Object(a.a)(n,"GalaxyApp"),t._galaxyInstance=n,t._galaxyInstance}function D(){return C()._galaxyInstance}function C(){return window}var j={root:Object(u.getAppRoot)(),config:{}};window.Galaxy?console.error("Detected redefinition of window.Galaxy -- skipping, but this should be investigated.",Object(T.a)()):Object.defineProperty(window,"Galaxy",{enumerable:!0,get:function(){return console.warn("accessing (get) window.Galaxy",Object(T.a)()),D()||j},set:function(e){console.warn("accessing (set) window.Galaxy",Object(T.a)()),S(e)}});window.Galaxy;n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return D}))},,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(86),d=n(2),u=n.n(d),h={logger:null,_logNamespace:"."};Object(c.a)(h);var p=l.a.Model.extend({initialize:function(e){if(this._checkEnabledSessionStorage(),!e.id)throw new Error("SessionStorageModel requires an id in the initial attributes");this.id=e.id;var t=this.isNew()?{}:this._read(this);this.clear({silent:!0}),this.save(s.a.extend({},this.defaults,t,e),{silent:!0}),this.on("change",(function(){this.save()}))},_checkEnabledSessionStorage:function(){try{return window.sessionStorage.length>=0}catch(e){return alert("Please enable cookies in your browser for this Galaxy site"),!1}},sync:function(e,t,n){n.silent||t.trigger("request",t,{},n);var a={};switch(e){case"create":a=this._create(t);break;case"read":a=this._read(t);break;case"update":a=this._update(t);break;case"delete":a=this._delete(t)}return void 0!==a||null!==a?n.success&&n.success():n.error&&n.error(),a},_create:function(e){try{var t=e.toJSON(),n=sessionStorage.setItem(e.id,JSON.stringify(t));return null===n?n:t}catch(e){if(!(e instanceof DOMException&&navigator.userAgent.indexOf("Safari")>-1))throw e}return null},_read:function(e){return JSON.parse(sessionStorage.getItem(e.id))},_update:function(e){return e._create(e)},_delete:function(e){return sessionStorage.removeItem(e.id)},isNew:function(){return!Object.prototype.hasOwnProperty.call(sessionStorage,this.id)},_log:function(){return JSON.stringify(this.toJSON(),null,"  ")},toString:function(){return"SessionStorageModel(".concat(this.id,")")}});p.prototype=s.a.omit(p.prototype,"url","urlRoot");var m={searchAttributes:[],searchAliases:{},searchAttribute:function(e,t){var n=this.get(e);return!(!t||null==n)&&(s.a.isArray(n)?this._searchArrayAttribute(n,t):-1!==n.toString().toLowerCase().indexOf(t.toLowerCase()))},_searchArrayAttribute:function(e,t){return t=t.toLowerCase(),s.a.any(e,(function(e){return-1!==e.toString().toLowerCase().indexOf(t.toLowerCase())}))},search:function(e){var t=this;return s.a.filter(this.searchAttributes,(function(n){return t.searchAttribute(n,e)}))},matches:function(e){var t=e.split("=");if(t.length>=2){var n=t[0];return n=this.searchAliases[n]||n,this.searchAttribute(n,t[1])}return!!this.search(e).length},matchesAll:function(e){var t=this;return e=e.match(/(".*"|\w*=".*"|\S*)/g).filter((function(e){return!!e})),s.a.all(e,(function(e){return e=e.replace(/"/g,""),t.matches(e)}))}},f={hiddenUntilActivated:function(e,t){if(t=t||{},this.HUAVOptions={$elementShown:this.$el,showFn:i.a.prototype.toggle,showSpeed:"fast"},s.a.extend(this.HUAVOptions,t||{}),this.HUAVOptions.hasBeenShown=this.HUAVOptions.$elementShown.is(":visible"),this.hidden=this.isHidden(),e){var n=this;e.on("click",(function(e){n.toggle(n.HUAVOptions.showSpeed)}))}},isHidden:function(){return this.HUAVOptions.$elementShown.is(":hidden")},toggle:function(){return this.hidden?(this.HUAVOptions.hasBeenShown||s.a.isFunction(this.HUAVOptions.onshowFirstTime)&&(this.HUAVOptions.hasBeenShown=!0,this.HUAVOptions.onshowFirstTime.call(this)),s.a.isFunction(this.HUAVOptions.onshow)&&(this.HUAVOptions.onshow.call(this),this.trigger("hiddenUntilActivated:shown",this)),this.hidden=!1):(s.a.isFunction(this.HUAVOptions.onhide)&&(this.HUAVOptions.onhide.call(this),this.trigger("hiddenUntilActivated:hidden",this)),this.hidden=!0),this.HUAVOptions.showFn.apply(this.HUAVOptions.$elementShown,arguments)}},_={initialize:function(e){this.draggable=e.draggable||!1},$dragHandle:function(){return this.$(".title-bar")},toggleDraggable:function(){this.draggable?this.draggableOff():this.draggableOn()},draggableOn:function(){this.draggable=!0,this.dragStartHandler=s.a.bind(this._dragStartHandler,this),this.dragEndHandler=s.a.bind(this._dragEndHandler,this);var e=this.$dragHandle().attr("draggable",!0).get(0);e.addEventListener("dragstart",this.dragStartHandler,!1),e.addEventListener("dragend",this.dragEndHandler,!1)},draggableOff:function(){this.draggable=!1;var e=this.$dragHandle().attr("draggable",!1).get(0);e.removeEventListener("dragstart",this.dragStartHandler,!1),e.removeEventListener("dragend",this.dragEndHandler,!1)},_dragStartHandler:function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text",JSON.stringify(this.model.toJSON())),this.trigger("draggable:dragstart",e,this),!1},_dragEndHandler:function(e){return this.trigger("draggable:dragend",e,this),!1}},g={initialize:function(e){this.selectable=e.selectable||!1,this.selected=e.selected||!1},$selector:function(){return this.$(".selector")},_renderSelected:function(){this.$selector().find("span").toggleClass("fa-check-square-o",this.selected).toggleClass("fa-square-o",!this.selected)},toggleSelector:function(){this.$selector().is(":visible")?this.hideSelector():this.showSelector()},showSelector:function(e){e=void 0!==e?e:this.fxSpeed,this.selectable=!0,this.trigger("selectable",!0,this),this._renderSelected(),e?this.$selector().show(e):this.$selector().show()},hideSelector:function(e){e=void 0!==e?e:this.fxSpeed,this.selectable=!1,this.trigger("selectable",!1,this),e?this.$selector().hide(e):this.$selector().hide()},toggleSelect:function(e){this.selected?this.deselect(e):this.select(e)},select:function(e){return this.selected||(this.trigger("selected",this,e),this.selected=!0,this._renderSelected()),!1},deselect:function(e){return this.selected&&(this.trigger("de-selected",this,e),this.selected=!1,this._renderSelected()),!1}};t.a={LoggableMixin:h,SessionStorageModel:p,mixin:function(e,t){var n=Array.prototype.slice.call(arguments,0),a=n.pop();return n.unshift(a),s.a.defaults.apply(s.a,n)},SearchableModelMixin:m,HiddenUntilActivatedViewMixin:f,DraggableViewMixin:_,SelectableViewMixin:g,wrapTemplate:function(e,t){t=t||"model";var n=s.a.template(e.join(""));return function(e,a){var i={view:a||{},_l:u.a};return i[t]=e||{},n(i)}},buildComparator:function(e,t){var n=(t=t||{}).ascending?1:-1;return function(t,a){return((t=t.get(e))<(a=a.get(e))?-1:t>a?1:0)*n}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return _}));var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(4),l=n(5),c=n(2),d=n.n(c);function u(e){var t={contentType:"application/json",type:e.type||"GET",data:e.data||{},url:e.url};"GET"==t.type||"DELETE"==t.type?(s.a.isEmptyObject(t.data)||(t.url+=-1==t.url.indexOf("?")?"?":"&",t.url+=s.a.param(t.data,!0)),t.data=null):(t.dataType="json",t.data=JSON.stringify(t.data)),s.a.ajax(t).done((function(t){if("string"==typeof t)try{t=t.replace("Infinity,",'"Infinity",'),t=s.a.parseJSON(t)}catch(e){console.debug(e)}e.success&&e.success(t)})).fail((function(t){var n=null;try{n=s.a.parseJSON(t.responseText)}catch(e){n=t.responseText}e.error&&e.error(n,t.status)})).always((function(){e.complete&&e.complete()}))}var h=1024,p=h*h,m=p*h,f=m*h;function _(e){var t,n,a=2166136261;for(t=0,n=e.length;t<n;t++)a^=e.charCodeAt(t),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return a>>>0}t.a={cssLoadFile:function(e){s()('link[href^="'.concat(e,'"]')).length||s()('<link href="'.concat(Object(r.getAppRoot)()).concat(e,'" rel="stylesheet">')).appendTo("head")},cssGetAttribute:function(e,t){var n=s()('<div class="'.concat(e,'"></div>'));n.appendTo(":eq(0)");var a=n.css(t);return n.remove(),a},get:function(e){top.__utils__get__=top.__utils__get__||{};var t=JSON.stringify(e);e.cache&&top.__utils__get__[t]?(e.success&&e.success(top.__utils__get__[t]),window.console.debug("utils.js::get() - Fetching from cache [".concat(e.url,"]."))):u({url:e.url,data:e.data,success:function(n){top.__utils__get__[t]=n,e.success&&e.success(n)},error:function(t,n){e.error&&e.error(t,n)}})},merge:function(e,t){return e?i.a.defaults(e,t):t},iframe:function(e){return'<iframe src="'.concat(e,'" frameborder="0" style="width: 100%; height: 100%;"/>')},bytesToString:function(e,t,n){n=void 0!==n?n:1;var a="";if(e>=f)e/=f,a="TB";else if(e>=m)e/=m,a="GB";else if(e>=p)e/=p,a="MB";else if(e>=h)e/=h,a="KB";else{if(!(e>0))return t?"0 b":"<strong>-</strong>";a="b"}var i="b"==a?e:function(e,t){for(var n=1,a=0;a<t;a++)n*=10;return Math.round(e*n)/n}(e,n);return t?"".concat(i," ").concat(a):"<strong>".concat(i,"</strong> ").concat(a)},uid:function(){return top.__utils__uid__=top.__utils__uid__||0,"uid-".concat(top.__utils__uid__++)},time:function(){var e=new Date,t=(e.getHours()<10?"0":"")+e.getHours(),n=(e.getMinutes()<10?"0":"")+e.getMinutes();return"".concat(e.getDate(),"/").concat(e.getMonth()+1,"/").concat(e.getFullYear(),", ").concat(t,":").concat(n)},request:u,sanitize:function(e){return s()("<div/>").text(e).html()},textify:function(e){if(s.a.isArray(e)){var t=(e=e.toString().replace(/,/g,", ")).lastIndexOf(", ");return-1!=t&&(e="".concat(e.substr(0,t)," or ").concat(e.substr(t+2))),e}return""},isEmpty:function(e){if(e instanceof Array||(e=[e]),0===e.length)return!0;for(var t in e)if(["__null__","__undefined__",null,void 0].indexOf(e[t])>-1)return!0;return!1},deepeach:function e(t,n){for(var a in t){var o=t[a];if(i.a.isObject(o)){var s=n(o);s&&(t[a]=s),e(o,n)}}},isJSON:function(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))},clone:function(e){return JSON.parse(JSON.stringify(e)||null)},linkify:function(e){var t,n,a;return t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gim,n=/(^|[^/])(www\.[\S]+(\b|$))/gim,a=/(([a-zA-Z0-9\-_.])+@[a-zA-Z_]+?(\.[a-zA-Z]{2,6})+)/gim,e.replace(t,'<a href="$1" target="_blank">$1</a>').replace(n,'$1<a href="http://$2" target="_blank">$2</a>').replace(a,'<a href="mailto:$1">$1</a>')},appendScriptStyle:function(e){e.script&&""!==e.script&&s()("<script/>",{type:"text/javascript"}).text(e.script).appendTo("head"),e.styles&&""!==e.styles&&s()("<style/>",{type:"text/css"}).text(e.styles).appendTo("head")},getQueryString:function(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]".concat(encodeURIComponent(e).replace(/[.+*]/g,"\\$&"),"(?:\\=([^&]*))?)?.*$"),"i"),"$1"))},setWindowTitle:function(e){var t=Object(l.a)();window.document.title=e?"Galaxy ".concat(t.config.brand?" | ".concat(t.config.brand):""," | ").concat(d()(e)):"Galaxy ".concat(t.config.brand?" | ".concat(t.config.brand):"")}}},,,,,function(e,t,n){(function(e){e.exports=function(){"use strict";var t,a;function i(){return t.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return void 0===e}function l(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,a=[];for(n=0;n<e.length;++n)a.push(t(e[n],n));return a}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var n in t)u(t,n)&&(e[n]=t[n]);return u(t,"toString")&&(e.toString=t.toString),u(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,a){return At(e,t,n,a,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function f(e){if(null==e._isValid){var t=m(e),n=a.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function _(e){var t=p(NaN);return null!=e?h(m(t),e):m(t).userInvalidated=!0,t}a=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,a=0;a<n;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};var g=i.momentProperties=[];function v(e,t){var n,a,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=m(t)),r(t._locale)||(e._locale=t._locale),g.length>0)for(n=0;n<g.length;n++)r(i=t[a=g[n]])||(e[a]=i);return e}var y=!1;function b(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function w(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function k(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function M(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=k(t)),n}function x(e,t,n){var a,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(a=0;a<i;a++)(n&&e[a]!==t[a]||!n&&M(e[a])!==M(t[a]))&&s++;return s+o}function L(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,t){var n=!0;return h((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){for(var a,o=[],s=0;s<arguments.length;s++){if(a="","object"==typeof arguments[s]){for(var r in a+="\n["+s+"] ",arguments[0])a+=r+": "+arguments[0][r]+", ";a=a.slice(0,-2)}else a=arguments[s];o.push(a)}L(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var S,D={};function C(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),D[e]||(L(t),D[e]=!0)}function j(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function Y(e,t){var n,a=h({},e);for(n in t)u(t,n)&&(s(e[n])&&s(t[n])?(a[n]={},h(a[n],e[n]),h(a[n],t[n])):null!=t[n]?a[n]=t[n]:delete a[n]);for(n in e)u(e,n)&&!u(t,n)&&s(e[n])&&(a[n]=h({},a[n]));return a}function O(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)u(e,t)&&n.push(t);return n};var A={};function I(e,t){var n=e.toLowerCase();A[n]=A[n+"s"]=A[t]=e}function E(e){return"string"==typeof e?A[e]||A[e.toLowerCase()]:void 0}function H(e){var t,n,a={};for(n in e)u(e,n)&&(t=E(n))&&(a[t]=e[n]);return a}var $={};function P(e,t){$[e]=t}function R(e,t,n){var a=""+Math.abs(e),i=t-a.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+a}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},V={};function U(e,t,n,a){var i=a;"string"==typeof a&&(i=function(){return this[a]()}),e&&(V[e]=i),t&&(V[t[0]]=function(){return R(i.apply(this,arguments),t[1],t[2])}),n&&(V[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function W(e,t){return e.isValid()?(t=B(t,e.localeData()),F[t]=F[t]||function(e){var t,n,a,i=e.match(N);for(t=0,n=i.length;t<n;t++)V[i[t]]?i[t]=V[i[t]]:i[t]=(a=i[t]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(t){var a,o="";for(a=0;a<n;a++)o+=j(i[a])?i[a].call(t,e):i[a];return o}}(t),F[t](e)):e.localeData().invalidDate()}function B(e,t){var n=5;function a(e){return t.longDateFormat(e)||e}for(z.lastIndex=0;n>=0&&z.test(e);)e=e.replace(z,a),z.lastIndex=0,n-=1;return e}var q=/\d/,J=/\d\d/,G=/\d{3}/,K=/\d{4}/,Q=/[+-]?\d{6}/,X=/\d\d?/,Z=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,te=/\d{1,3}/,ne=/\d{1,4}/,ae=/[+-]?\d{1,6}/,ie=/\d+/,oe=/[+-]?\d+/,se=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,le=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ce={};function de(e,t,n){ce[e]=j(t)?t:function(e,a){return e&&n?n:t}}function ue(e,t){return u(ce,e)?ce[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,a,i){return t||n||a||i}))))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pe={};function me(e,t){var n,a=t;for("string"==typeof e&&(e=[e]),l(t)&&(a=function(e,n){n[t]=M(e)}),n=0;n<e.length;n++)pe[e[n]]=a}function fe(e,t){me(e,(function(e,n,a,i){a._w=a._w||{},t(e,a._w,a,i)}))}function _e(e,t,n){null!=t&&u(pe,e)&&pe[e](t,n._a,n,e)}var ge=0,ve=1,ye=2,be=3,we=4,ke=5,Me=6,xe=7,Le=8;function Te(e){return Se(e)?366:365}function Se(e){return e%4==0&&e%100!=0||e%400==0}U("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),U(0,["YY",2],0,(function(){return this.year()%100})),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),I("year","y"),P("year",1),de("Y",oe),de("YY",X,J),de("YYYY",ne,K),de("YYYYY",ae,Q),de("YYYYYY",ae,Q),me(["YYYYY","YYYYYY"],ge),me("YYYY",(function(e,t){t[ge]=2===e.length?i.parseTwoDigitYear(e):M(e)})),me("YY",(function(e,t){t[ge]=i.parseTwoDigitYear(e)})),me("Y",(function(e,t){t[ge]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return M(e)+(M(e)>68?1900:2e3)};var De,Ce=je("FullYear",!0);function je(e,t){return function(n){return null!=n?(Oe(this,e,n),i.updateOffset(this,t),this):Ye(this,e)}}function Ye(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Oe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&Se(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ae(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Ae(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,a=(t%(n=12)+n)%n;return e+=(t-a)/12,1===a?Se(e)?29:28:31-a%7%2}De=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",(function(){return this.month()+1})),U("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),U("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),I("month","M"),P("month",8),de("M",X),de("MM",X,J),de("MMM",(function(e,t){return t.monthsShortRegex(e)})),de("MMMM",(function(e,t){return t.monthsRegex(e)})),me(["M","MM"],(function(e,t){t[ve]=M(e)-1})),me(["MMM","MMMM"],(function(e,t,n,a){var i=n._locale.monthsParse(e,a,n._strict);null!=i?t[ve]=i:m(n).invalidMonth=e}));var Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),He="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function $e(e,t,n){var a,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)o=p([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=De.call(this._shortMonthsParse,s))?i:null:-1!==(i=De.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=De.call(this._shortMonthsParse,s))?i:-1!==(i=De.call(this._longMonthsParse,s))?i:null:-1!==(i=De.call(this._longMonthsParse,s))?i:-1!==(i=De.call(this._shortMonthsParse,s))?i:null}function Pe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=M(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Re(e){return null!=e?(Pe(this,e),i.updateOffset(this,!0),this):Ye(this,"Month")}var Ne=le,ze=le;function Fe(){function e(e,t){return t.length-e.length}var t,n,a=[],i=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),a.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(a.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)a[t]=he(a[t]),i[t]=he(i[t]);for(t=0;t<24;t++)o[t]=he(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ve(e,t,n,a,i,o,s){var r;return e<100&&e>=0?(r=new Date(e+400,t,n,a,i,o,s),isFinite(r.getFullYear())&&r.setFullYear(e)):r=new Date(e,t,n,a,i,o,s),r}function Ue(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function We(e,t,n){var a=7+t-n;return-(7+Ue(e,0,a).getUTCDay()-t)%7+a-1}function Be(e,t,n,a,i){var o,s,r=1+7*(t-1)+(7+n-a)%7+We(e,a,i);return r<=0?s=Te(o=e-1)+r:r>Te(e)?(o=e+1,s=r-Te(e)):(o=e,s=r),{year:o,dayOfYear:s}}function qe(e,t,n){var a,i,o=We(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?a=s+Je(i=e.year()-1,t,n):s>Je(e.year(),t,n)?(a=s-Je(e.year(),t,n),i=e.year()+1):(i=e.year(),a=s),{week:a,year:i}}function Je(e,t,n){var a=We(e,t,n),i=We(e+1,t,n);return(Te(e)-a+i)/7}function Ge(e,t){return e.slice(t,7).concat(e.slice(0,t))}U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),P("week",5),P("isoWeek",5),de("w",X),de("ww",X,J),de("W",X),de("WW",X,J),fe(["w","ww","W","WW"],(function(e,t,n,a){t[a.substr(0,1)]=M(e)})),U("d",0,"do","day"),U("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),U("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),U("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),P("day",11),P("weekday",11),P("isoWeekday",11),de("d",X),de("e",X),de("E",X),de("dd",(function(e,t){return t.weekdaysMinRegex(e)})),de("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),de("dddd",(function(e,t){return t.weekdaysRegex(e)})),fe(["dd","ddd","dddd"],(function(e,t,n,a){var i=n._locale.weekdaysParse(e,a,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),fe(["d","e","E"],(function(e,t,n,a){t[a]=M(e)}));var Ke="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xe="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ze(e,t,n){var a,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)o=p([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=De.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=De.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=De.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=De.call(this._weekdaysParse,s))?i:-1!==(i=De.call(this._shortWeekdaysParse,s))?i:-1!==(i=De.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=De.call(this._shortWeekdaysParse,s))?i:-1!==(i=De.call(this._weekdaysParse,s))?i:-1!==(i=De.call(this._minWeekdaysParse,s))?i:null:-1!==(i=De.call(this._minWeekdaysParse,s))?i:-1!==(i=De.call(this._weekdaysParse,s))?i:-1!==(i=De.call(this._shortWeekdaysParse,s))?i:null}var et=le,tt=le,nt=le;function at(){function e(e,t){return t.length-e.length}var t,n,a,i,o,s=[],r=[],l=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),a=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),s.push(a),r.push(i),l.push(o),c.push(a),c.push(i),c.push(o);for(s.sort(e),r.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)r[t]=he(r[t]),l[t]=he(l[t]),c[t]=he(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function it(){return this.hours()%12||12}function ot(e,t){U(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function st(e,t){return t._meridiemParse}U("H",["HH",2],0,"hour"),U("h",["hh",2],0,it),U("k",["kk",2],0,(function(){return this.hours()||24})),U("hmm",0,0,(function(){return""+it.apply(this)+R(this.minutes(),2)})),U("hmmss",0,0,(function(){return""+it.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),U("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),U("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),ot("a",!0),ot("A",!1),I("hour","h"),P("hour",13),de("a",st),de("A",st),de("H",X),de("h",X),de("k",X),de("HH",X,J),de("hh",X,J),de("kk",X,J),de("hmm",Z),de("hmmss",ee),de("Hmm",Z),de("Hmmss",ee),me(["H","HH"],be),me(["k","kk"],(function(e,t,n){var a=M(e);t[be]=24===a?0:a})),me(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),me(["h","hh"],(function(e,t,n){t[be]=M(e),m(n).bigHour=!0})),me("hmm",(function(e,t,n){var a=e.length-2;t[be]=M(e.substr(0,a)),t[we]=M(e.substr(a)),m(n).bigHour=!0})),me("hmmss",(function(e,t,n){var a=e.length-4,i=e.length-2;t[be]=M(e.substr(0,a)),t[we]=M(e.substr(a,2)),t[ke]=M(e.substr(i)),m(n).bigHour=!0})),me("Hmm",(function(e,t,n){var a=e.length-2;t[be]=M(e.substr(0,a)),t[we]=M(e.substr(a))})),me("Hmmss",(function(e,t,n){var a=e.length-4,i=e.length-2;t[be]=M(e.substr(0,a)),t[we]=M(e.substr(a,2)),t[ke]=M(e.substr(i))}));var rt,lt=je("Hours",!0),ct={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:He,week:{dow:0,doy:6},weekdays:Ke,weekdaysMin:Xe,weekdaysShort:Qe,meridiemParse:/[ap]\.?m?\.?/i},dt={},ut={};function ht(e){return e?e.toLowerCase().replace("_","-"):e}function pt(t){var a=null;if(!dt[t]&&void 0!==e&&e&&e.exports)try{a=rt._abbr,n(469)("./"+t),mt(a)}catch(e){}return dt[t]}function mt(e,t){var n;return e&&((n=r(t)?_t(e):ft(e,t))?rt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rt._abbr}function ft(e,t){if(null!==t){var n,a=ct;if(t.abbr=e,null!=dt[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=dt[e]._config;else if(null!=t.parentLocale)if(null!=dt[t.parentLocale])a=dt[t.parentLocale]._config;else{if(null==(n=pt(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;a=n._config}return dt[e]=new O(Y(a,t)),ut[e]&&ut[e].forEach((function(e){ft(e.name,e.config)})),mt(e),dt[e]}return delete dt[e],null}function _t(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rt;if(!o(e)){if(t=pt(e))return t;e=[e]}return function(e){for(var t,n,a,i,o=0;o<e.length;){for(t=(i=ht(e[o]).split("-")).length,n=(n=ht(e[o+1]))?n.split("-"):null;t>0;){if(a=pt(i.slice(0,t).join("-")))return a;if(n&&n.length>=t&&x(i,n,!0)>=t-1)break;t--}o++}return rt}(e)}function gt(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[ye]<1||n[ye]>Ae(n[ge],n[ve])?ye:n[be]<0||n[be]>24||24===n[be]&&(0!==n[we]||0!==n[ke]||0!==n[Me])?be:n[we]<0||n[we]>59?we:n[ke]<0||n[ke]>59?ke:n[Me]<0||n[Me]>999?Me:-1,m(e)._overflowDayOfYear&&(t<ge||t>ye)&&(t=ye),m(e)._overflowWeeks&&-1===t&&(t=xe),m(e)._overflowWeekday&&-1===t&&(t=Le),m(e).overflow=t),e}function vt(e,t,n){return null!=e?e:null!=t?t:n}function yt(e){var t,n,a,o,s,r=[];if(!e._d){for(a=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ye]&&null==e._a[ve]&&function(e){var t,n,a,i,o,s,r,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,s=4,n=vt(t.GG,e._a[ge],qe(It(),1,4).year),a=vt(t.W,1),((i=vt(t.E,1))<1||i>7)&&(l=!0);else{o=e._locale._week.dow,s=e._locale._week.doy;var c=qe(It(),o,s);n=vt(t.gg,e._a[ge],c.year),a=vt(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o}a<1||a>Je(n,o,s)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(r=Be(n,a,i,o,s),e._a[ge]=r.year,e._dayOfYear=r.dayOfYear)}(e),null!=e._dayOfYear&&(s=vt(e._a[ge],a[ge]),(e._dayOfYear>Te(s)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Ue(s,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[be]&&0===e._a[we]&&0===e._a[ke]&&0===e._a[Me]&&(e._nextDay=!0,e._a[be]=0),e._d=(e._useUTC?Ue:Ve).apply(null,r),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[be]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(m(e).weekdayMismatch=!0)}}var bt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kt=/Z|[+-]\d\d(?::?\d\d)?/,Mt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],xt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Lt=/^\/?Date\((\-?\d+)/i;function Tt(e){var t,n,a,i,o,s,r=e._i,l=bt.exec(r)||wt.exec(r);if(l){for(m(e).iso=!0,t=0,n=Mt.length;t<n;t++)if(Mt[t][1].exec(l[1])){i=Mt[t][0],a=!1!==Mt[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=xt.length;t<n;t++)if(xt[t][1].exec(l[3])){o=(l[2]||" ")+xt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!a&&null!=o)return void(e._isValid=!1);if(l[4]){if(!kt.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),Yt(e)}else e._isValid=!1}var St=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function Dt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var Ct={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function jt(e){var t,n,a,i,o,s,r,l=St.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(l){var c=(t=l[4],n=l[3],a=l[2],i=l[5],o=l[6],s=l[7],r=[Dt(t),He.indexOf(n),parseInt(a,10),parseInt(i,10),parseInt(o,10)],s&&r.push(parseInt(s,10)),r);if(!function(e,t,n){return!e||Qe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],c,e))return;e._a=c,e._tzm=function(e,t,n){if(e)return Ct[e];if(t)return 0;var a=parseInt(n,10),i=a%100;return(a-i)/100*60+i}(l[8],l[9],l[10]),e._d=Ue.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Yt(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],m(e).empty=!0;var t,n,a,o,s,r=""+e._i,l=r.length,c=0;for(a=B(e._f,e._locale).match(N)||[],t=0;t<a.length;t++)o=a[t],(n=(r.match(ue(o,e))||[])[0])&&((s=r.substr(0,r.indexOf(n))).length>0&&m(e).unusedInput.push(s),r=r.slice(r.indexOf(n)+n.length),c+=n.length),V[o]?(n?m(e).empty=!1:m(e).unusedTokens.push(o),_e(o,n,e)):e._strict&&!n&&m(e).unusedTokens.push(o);m(e).charsLeftOver=l-c,r.length>0&&m(e).unusedInput.push(r),e._a[be]<=12&&!0===m(e).bigHour&&e._a[be]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[be]=function(e,t,n){var a;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((a=e.isPM(n))&&t<12&&(t+=12),a||12!==t||(t=0),t):t}(e._locale,e._a[be],e._meridiem),yt(e),gt(e)}else jt(e);else Tt(e)}function Ot(e){var t=e._i,n=e._f;return e._locale=e._locale||_t(e._l),null===t||void 0===n&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),w(t)?new b(gt(t)):(c(t)?e._d=t:o(n)?function(e){var t,n,a,i,o;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Yt(t),f(t)&&(o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,(null==a||o<a)&&(a=o,n=t));h(e,n||t)}(e):n?Yt(e):function(e){var t=e._i;r(t)?e._d=new Date(i.now()):c(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=Lt.exec(e._i);null===t?(Tt(e),!1===e._isValid&&(delete e._isValid,jt(e),!1===e._isValid&&(delete e._isValid,i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):o(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),yt(e)):s(t)?function(e){if(!e._d){var t=H(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),yt(e)}}(e):l(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),f(e)||(e._d=null),e))}function At(e,t,n,a,i){var r,l={};return!0!==n&&!1!==n||(a=n,n=void 0),(s(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=i,l._l=n,l._i=e,l._f=t,l._strict=a,(r=new b(gt(Ot(l))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function It(e,t,n,a){return At(e,t,n,a,!1)}i.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Et=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()})),Ht=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}));function $t(e,t){var n,a;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return It();for(n=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](n)||(n=t[a]);return n}var Pt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rt(e){var t=H(e),n=t.year||0,a=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,r=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===De.call(Pt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,a=0;a<Pt.length;++a)if(e[Pt[a]]){if(n)return!1;parseFloat(e[Pt[a]])!==M(e[Pt[a]])&&(n=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*r*60*60,this._days=+s+7*o,this._months=+i+3*a+12*n,this._data={},this._locale=_t(),this._bubble()}function Nt(e){return e instanceof Rt}function zt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,t){U(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)}))}Ft("Z",":"),Ft("ZZ",""),de("Z",re),de("ZZ",re),me(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Ut(re,e)}));var Vt=/([\+\-]|\d\d)/gi;function Ut(e,t){var n=(t||"").match(e);if(null===n)return null;var a=((n[n.length-1]||[])+"").match(Vt)||["-",0,0],i=60*a[1]+M(a[2]);return 0===i?0:"+"===a[0]?i:-i}function Wt(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(w(e)||c(e)?e.valueOf():It(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),i.updateOffset(n,!1),n):It(e).local()}function Bt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function qt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Jt=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Gt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Kt(e,t){var n,a,i,o,s,r,c=e,d=null;return Nt(e)?c={ms:e._milliseconds,d:e._days,M:e._months}:l(e)?(c={},t?c[t]=e:c.milliseconds=e):(d=Jt.exec(e))?(n="-"===d[1]?-1:1,c={y:0,d:M(d[ye])*n,h:M(d[be])*n,m:M(d[we])*n,s:M(d[ke])*n,ms:M(zt(1e3*d[Me]))*n}):(d=Gt.exec(e))?(n="-"===d[1]?-1:1,c={y:Qt(d[2],n),M:Qt(d[3],n),w:Qt(d[4],n),d:Qt(d[5],n),h:Qt(d[6],n),m:Qt(d[7],n),s:Qt(d[8],n)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(o=It(c.from),s=It(c.to),i=o.isValid()&&s.isValid()?(s=Wt(s,o),o.isBefore(s)?r=Xt(o,s):((r=Xt(s,o)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0},(c={}).ms=i.milliseconds,c.M=i.months),a=new Rt(c),Nt(e)&&u(e,"_locale")&&(a._locale=e._locale),a}function Qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Xt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Zt(e,t){return function(n,a){var i;return null===a||isNaN(+a)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=a,a=i),en(this,Kt(n="string"==typeof n?+n:n,a),e),this}}function en(e,t,n,a){var o=t._milliseconds,s=zt(t._days),r=zt(t._months);e.isValid()&&(a=null==a||a,r&&Pe(e,Ye(e,"Month")+r*n),s&&Oe(e,"Date",Ye(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),a&&i.updateOffset(e,s||r))}Kt.fn=Rt.prototype,Kt.invalid=function(){return Kt(NaN)};var tn=Zt(1,"add"),nn=Zt(-1,"subtract");function an(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(n,"months");return-(n+(t-a<0?(t-a)/(a-e.clone().add(n-1,"months")):(t-a)/(e.clone().add(n+1,"months")-a)))||0}function on(e){var t;return void 0===e?this._locale._abbr:(null!=(t=_t(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sn=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function rn(){return this._locale}var ln=1e3,cn=60*ln,dn=60*cn,un=3506328*dn;function hn(e,t){return(e%t+t)%t}function pn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-un:new Date(e,t,n).valueOf()}function mn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-un:Date.UTC(e,t,n)}function fn(e,t){U(0,[e,e.length],0,t)}function _n(e,t,n,a,i){var o;return null==e?qe(this,a,i).year:(t>(o=Je(e,a,i))&&(t=o),gn.call(this,e,t,n,a,i))}function gn(e,t,n,a,i){var o=Be(e,t,n,a,i),s=Ue(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}U(0,["gg",2],0,(function(){return this.weekYear()%100})),U(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),fn("gggg","weekYear"),fn("ggggg","weekYear"),fn("GGGG","isoWeekYear"),fn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),P("weekYear",1),P("isoWeekYear",1),de("G",oe),de("g",oe),de("GG",X,J),de("gg",X,J),de("GGGG",ne,K),de("gggg",ne,K),de("GGGGG",ae,Q),de("ggggg",ae,Q),fe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,a){t[a.substr(0,2)]=M(e)})),fe(["gg","GG"],(function(e,t,n,a){t[a]=i.parseTwoDigitYear(e)})),U("Q",0,"Qo","quarter"),I("quarter","Q"),P("quarter",7),de("Q",q),me("Q",(function(e,t){t[ve]=3*(M(e)-1)})),U("D",["DD",2],"Do","date"),I("date","D"),P("date",9),de("D",X),de("DD",X,J),de("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),me(["D","DD"],ye),me("Do",(function(e,t){t[ye]=M(e.match(X)[0])}));var vn=je("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),P("dayOfYear",4),de("DDD",te),de("DDDD",G),me(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=M(e)})),U("m",["mm",2],0,"minute"),I("minute","m"),P("minute",14),de("m",X),de("mm",X,J),me(["m","mm"],we);var yn=je("Minutes",!1);U("s",["ss",2],0,"second"),I("second","s"),P("second",15),de("s",X),de("ss",X,J),me(["s","ss"],ke);var bn,wn=je("Seconds",!1);for(U("S",0,0,(function(){return~~(this.millisecond()/100)})),U(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),U(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),U(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),U(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),U(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),U(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),I("millisecond","ms"),P("millisecond",16),de("S",te,q),de("SS",te,J),de("SSS",te,G),bn="SSSS";bn.length<=9;bn+="S")de(bn,ie);function kn(e,t){t[Me]=M(1e3*("0."+e))}for(bn="S";bn.length<=9;bn+="S")me(bn,kn);var Mn=je("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var xn=b.prototype;function Ln(e){return e}xn.add=tn,xn.calendar=function(e,t){var n=e||It(),a=Wt(n,this).startOf("day"),o=i.calendarFormat(this,a)||"sameElse",s=t&&(j(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,It(n)))},xn.clone=function(){return new b(this)},xn.diff=function(e,t,n){var a,i,o;if(!this.isValid())return NaN;if(!(a=Wt(e,this)).isValid())return NaN;switch(i=6e4*(a.utcOffset()-this.utcOffset()),t=E(t)){case"year":o=an(this,a)/12;break;case"month":o=an(this,a);break;case"quarter":o=an(this,a)/3;break;case"second":o=(this-a)/1e3;break;case"minute":o=(this-a)/6e4;break;case"hour":o=(this-a)/36e5;break;case"day":o=(this-a-i)/864e5;break;case"week":o=(this-a-i)/6048e5;break;default:o=this-a}return n?o:k(o)},xn.endOf=function(e){var t;if(void 0===(e=E(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?mn:pn;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=dn-hn(t+(this._isUTC?0:this.utcOffset()*cn),dn)-1;break;case"minute":t=this._d.valueOf(),t+=cn-hn(t,cn)-1;break;case"second":t=this._d.valueOf(),t+=ln-hn(t,ln)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},xn.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)},xn.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||It(e).isValid())?Kt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},xn.fromNow=function(e){return this.from(It(),e)},xn.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||It(e).isValid())?Kt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},xn.toNow=function(e){return this.to(It(),e)},xn.get=function(e){return j(this[e=E(e)])?this[e]():this},xn.invalidAt=function(){return m(this).overflow},xn.isAfter=function(e,t){var n=w(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},xn.isBefore=function(e,t){var n=w(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},xn.isBetween=function(e,t,n,a){var i=w(e)?e:It(e),o=w(t)?t:It(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(a=a||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===a[1]?this.isBefore(o,n):!this.isAfter(o,n))},xn.isSame=function(e,t){var n,a=w(e)?e:It(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=E(t)||"millisecond")?this.valueOf()===a.valueOf():(n=a.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},xn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},xn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},xn.isValid=function(){return f(this)},xn.lang=sn,xn.locale=on,xn.localeData=rn,xn.max=Ht,xn.min=Et,xn.parsingFlags=function(){return h({},m(this))},xn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:$[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=H(e)),a=0;a<n.length;a++)this[n[a].unit](e[n[a].unit]);else if(j(this[e=E(e)]))return this[e](t);return this},xn.startOf=function(e){var t;if(void 0===(e=E(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?mn:pn;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hn(t+(this._isUTC?0:this.utcOffset()*cn),dn);break;case"minute":t=this._d.valueOf(),t-=hn(t,cn);break;case"second":t=this._d.valueOf(),t-=hn(t,ln)}return this._d.setTime(t),i.updateOffset(this,!0),this},xn.subtract=nn,xn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},xn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},xn.toDate=function(){return new Date(this.valueOf())},xn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):j(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},xn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+a+"-MM-DD[T]HH:mm:ss.SSS"+i)},xn.toJSON=function(){return this.isValid()?this.toISOString():null},xn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},xn.unix=function(){return Math.floor(this.valueOf()/1e3)},xn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},xn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},xn.year=Ce,xn.isLeapYear=function(){return Se(this.year())},xn.weekYear=function(e){return _n.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},xn.isoWeekYear=function(e){return _n.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},xn.quarter=xn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},xn.month=Re,xn.daysInMonth=function(){return Ae(this.year(),this.month())},xn.week=xn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},xn.isoWeek=xn.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},xn.weeksInYear=function(){var e=this.localeData()._week;return Je(this.year(),e.dow,e.doy)},xn.isoWeeksInYear=function(){return Je(this.year(),1,4)},xn.date=vn,xn.day=xn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},xn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},xn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},xn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},xn.hour=xn.hours=lt,xn.minute=xn.minutes=yn,xn.second=xn.seconds=wn,xn.millisecond=xn.milliseconds=Mn,xn.utcOffset=function(e,t,n){var a,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ut(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(a=Bt(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),o!==e&&(!t||this._changeInProgress?en(this,Kt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Bt(this)},xn.utc=function(e){return this.utcOffset(0,e)},xn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Bt(this),"m")),this},xn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ut(se,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},xn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?It(e).utcOffset():0,(this.utcOffset()-e)%60==0)},xn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},xn.isLocal=function(){return!!this.isValid()&&!this._isUTC},xn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},xn.isUtc=qt,xn.isUTC=qt,xn.zoneAbbr=function(){return this._isUTC?"UTC":""},xn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},xn.dates=T("dates accessor is deprecated. Use date instead.",vn),xn.months=T("months accessor is deprecated. Use month instead",Re),xn.years=T("years accessor is deprecated. Use year instead",Ce),xn.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),xn.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Ot(e))._a){var t=e._isUTC?p(e._a):It(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var Tn=O.prototype;function Sn(e,t,n,a){var i=_t(),o=p().set(a,t);return i[n](o,e)}function Dn(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return Sn(e,t,n,"month");var a,i=[];for(a=0;a<12;a++)i[a]=Sn(e,a,n,"month");return i}function Cn(e,t,n,a){"boolean"==typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,o=_t(),s=e?o._week.dow:0;if(null!=n)return Sn(t,(n+s)%7,a,"day");var r=[];for(i=0;i<7;i++)r[i]=Sn(t,(i+s)%7,a,"day");return r}Tn.calendar=function(e,t,n){var a=this._calendar[e]||this._calendar.sameElse;return j(a)?a.call(t,n):a},Tn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},Tn.invalidDate=function(){return this._invalidDate},Tn.ordinal=function(e){return this._ordinal.replace("%d",e)},Tn.preparse=Ln,Tn.postformat=Ln,Tn.relativeTime=function(e,t,n,a){var i=this._relativeTime[n];return j(i)?i(e,t,n,a):i.replace(/%d/i,e)},Tn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return j(n)?n(t):n.replace(/%s/i,t)},Tn.set=function(e){var t,n;for(n in e)j(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Tn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ie).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},Tn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ie.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Tn.monthsParse=function(e,t,n){var a,i,o;if(this._monthsParseExact)return $e.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(i=p([2e3,a]),n&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[a]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[a]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(n&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!n&&this._monthsParse[a].test(e))return a}},Tn.monthsRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Fe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=ze),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Tn.monthsShortRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Fe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Ne),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Tn.week=function(e){return qe(e,this._week.dow,this._week.doy).week},Tn.firstDayOfYear=function(){return this._week.doy},Tn.firstDayOfWeek=function(){return this._week.dow},Tn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ge(n,this._week.dow):e?n[e.day()]:n},Tn.weekdaysMin=function(e){return!0===e?Ge(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Tn.weekdaysShort=function(e){return!0===e?Ge(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Tn.weekdaysParse=function(e,t,n){var a,i,o;if(this._weekdaysParseExact)return Ze.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(i=p([2e3,1]).day(a),n&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[a].test(e))return a;if(n&&"ddd"===t&&this._shortWeekdaysParse[a].test(e))return a;if(n&&"dd"===t&&this._minWeekdaysParse[a].test(e))return a;if(!n&&this._weekdaysParse[a].test(e))return a}},Tn.weekdaysRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||at.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=et),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Tn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||at.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=tt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Tn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||at.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Tn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Tn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},mt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===M(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=T("moment.lang is deprecated. Use moment.locale instead.",mt),i.langData=T("moment.langData is deprecated. Use moment.localeData instead.",_t);var jn=Math.abs;function Yn(e,t,n,a){var i=Kt(t,n);return e._milliseconds+=a*i._milliseconds,e._days+=a*i._days,e._months+=a*i._months,e._bubble()}function On(e){return e<0?Math.floor(e):Math.ceil(e)}function An(e){return 4800*e/146097}function In(e){return 146097*e/4800}function En(e){return function(){return this.as(e)}}var Hn=En("ms"),$n=En("s"),Pn=En("m"),Rn=En("h"),Nn=En("d"),zn=En("w"),Fn=En("M"),Vn=En("Q"),Un=En("y");function Wn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Bn=Wn("milliseconds"),qn=Wn("seconds"),Jn=Wn("minutes"),Gn=Wn("hours"),Kn=Wn("days"),Qn=Wn("months"),Xn=Wn("years"),Zn=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,M:11};function ta(e,t,n,a,i){return i.relativeTime(t||1,!!n,e,a)}var na=Math.abs;function aa(e){return(e>0)-(e<0)||+e}function ia(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=na(this._milliseconds)/1e3,a=na(this._days),i=na(this._months);e=k(n/60),t=k(e/60),n%=60,e%=60;var o=k(i/12),s=i%=12,r=a,l=t,c=e,d=n?n.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var h=u<0?"-":"",p=aa(this._months)!==aa(u)?"-":"",m=aa(this._days)!==aa(u)?"-":"",f=aa(this._milliseconds)!==aa(u)?"-":"";return h+"P"+(o?p+o+"Y":"")+(s?p+s+"M":"")+(r?m+r+"D":"")+(l||c||d?"T":"")+(l?f+l+"H":"")+(c?f+c+"M":"")+(d?f+d+"S":"")}var oa=Rt.prototype;return oa.isValid=function(){return this._isValid},oa.abs=function(){var e=this._data;return this._milliseconds=jn(this._milliseconds),this._days=jn(this._days),this._months=jn(this._months),e.milliseconds=jn(e.milliseconds),e.seconds=jn(e.seconds),e.minutes=jn(e.minutes),e.hours=jn(e.hours),e.months=jn(e.months),e.years=jn(e.years),this},oa.add=function(e,t){return Yn(this,e,t,1)},oa.subtract=function(e,t){return Yn(this,e,t,-1)},oa.as=function(e){if(!this.isValid())return NaN;var t,n,a=this._milliseconds;if("month"===(e=E(e))||"quarter"===e||"year"===e)switch(t=this._days+a/864e5,n=this._months+An(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(In(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}},oa.asMilliseconds=Hn,oa.asSeconds=$n,oa.asMinutes=Pn,oa.asHours=Rn,oa.asDays=Nn,oa.asWeeks=zn,oa.asMonths=Fn,oa.asQuarters=Vn,oa.asYears=Un,oa.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12):NaN},oa._bubble=function(){var e,t,n,a,i,o=this._milliseconds,s=this._days,r=this._months,l=this._data;return o>=0&&s>=0&&r>=0||o<=0&&s<=0&&r<=0||(o+=864e5*On(In(r)+s),s=0,r=0),l.milliseconds=o%1e3,e=k(o/1e3),l.seconds=e%60,t=k(e/60),l.minutes=t%60,n=k(t/60),l.hours=n%24,s+=k(n/24),i=k(An(s)),r+=i,s-=On(In(i)),a=k(r/12),r%=12,l.days=s,l.months=r,l.years=a,this},oa.clone=function(){return Kt(this)},oa.get=function(e){return e=E(e),this.isValid()?this[e+"s"]():NaN},oa.milliseconds=Bn,oa.seconds=qn,oa.minutes=Jn,oa.hours=Gn,oa.days=Kn,oa.weeks=function(){return k(this.days()/7)},oa.months=Qn,oa.years=Xn,oa.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var a=Kt(e).abs(),i=Zn(a.as("s")),o=Zn(a.as("m")),s=Zn(a.as("h")),r=Zn(a.as("d")),l=Zn(a.as("M")),c=Zn(a.as("y")),d=i<=ea.ss&&["s",i]||i<ea.s&&["ss",i]||o<=1&&["m"]||o<ea.m&&["mm",o]||s<=1&&["h"]||s<ea.h&&["hh",s]||r<=1&&["d"]||r<ea.d&&["dd",r]||l<=1&&["M"]||l<ea.M&&["MM",l]||c<=1&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=n,ta.apply(null,d)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},oa.toISOString=ia,oa.toString=ia,oa.toJSON=ia,oa.locale=on,oa.localeData=rn,oa.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ia),oa.lang=sn,U("X",0,0,"unix"),U("x",0,0,"valueOf"),de("x",oe),de("X",/[+-]?\d+(\.\d{1,3})?/),me("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),me("x",(function(e,t,n){n._d=new Date(M(e))})),i.version="2.24.0",t=It,i.fn=xn,i.min=function(){return $t("isBefore",[].slice.call(arguments,0))},i.max=function(){return $t("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=p,i.unix=function(e){return It(1e3*e)},i.months=function(e,t){return Dn(e,t,"months")},i.isDate=c,i.locale=mt,i.invalid=_,i.duration=Kt,i.isMoment=w,i.weekdays=function(e,t,n){return Cn(e,t,n,"weekdays")},i.parseZone=function(){return It.apply(null,arguments).parseZone()},i.localeData=_t,i.isDuration=Nt,i.monthsShort=function(e,t){return Dn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return Cn(e,t,n,"weekdaysMin")},i.defineLocale=ft,i.updateLocale=function(e,t){if(null!=t){var n,a,i=ct;null!=(a=pt(e))&&(i=a._config),t=Y(i,t),(n=new O(t)).parentLocale=dt[e],dt[e]=n,mt(e)}else null!=dt[e]&&(null!=dt[e].parentLocale?dt[e]=dt[e].parentLocale:null!=dt[e]&&delete dt[e]);return dt[e]},i.locales=function(){return S(dt)},i.weekdaysShort=function(e,t,n){return Cn(e,t,n,"weekdaysShort")},i.normalizeUnits=E,i.relativeTimeRounding=function(e){return void 0===e?Zn:"function"==typeof e&&(Zn=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=xn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}).call(this,n(257)(e))},,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(104),d=n(195),u=n.n(d),h=n(8),p={View:l.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new l.a.Model({id:h.a.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element"),u()(this.$text[0],{mask:function(e){return!!t._isParameter(e)||!(!t.model.get("precise")&&e!=e.split(".")[0])&&e==e.replace(/[^0-9eE.-]/g,"")}}),this.$text[0].addEventListener("change",(function(e){t.value(e.currentTarget.value)}));var n=this.model.attributes;this.has_slider=null!==n.max&&null!==n.min&&n.max>n.min;var a=n.step;a||(a=n.precise&&this.has_slider?(n.max-n.min)/n.split:1),this.has_slider&&this.$slider.slider({min:n.min,max:n.max,step:a}).on("slide",(function(e,n){t.value(n.value)})),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.get("value");this.has_slider?(this.$slider.slider("value",e),this.$slider.show(),this.$text.addClass("col-3 mr-3")):(this.$slider.hide(),this.$text.removeClass("col-3 mr-3")),e!==this.$text.val()&&this.$text.val(e)},value:function(e){if(void 0!==e){var t=this.model.attributes,n=e,a=null!==e&&""!==e&&!this._isParameter(e);a&&(isNaN(e)&&(e=0),t.precise||(e=Math.round(e)),null===t.max||isNaN(t.max)||(e=Math.min(e,t.max)),null===t.min||isNaN(t.min)||(e=Math.max(e,t.min))),this.model.set("value",e),this.model.trigger("change"),t.onchange(e);var i=a&&parseInt(n)!==parseInt(e)?"This value was invalid or out-of-range. It has been auto-corrected.":null;this.model.trigger("error",i)}return this.model.get("value")},_isParameter:function(e){return this.model.get("is_workflow")&&"$"===String(e).substring(0,1)},_template:function(){return'<div class="ui-form-slider container-fluid">\n                    <div class="row">\n                        <input class="ui-input ui-form-slider-text" type="text"/>\n                        <div class="ui-form-slider-element col mt-1"/>\n                    </div>\n                </div>'}})},m=n(36),f=l.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new l.a.Model({visible:!0,cls:null,data:[],id:h.a.uid(),error_text:"No options available.",wait_text:"Please wait...",multiple:!1,optional:!1,onchange:function(){}}).set(e),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.on("change",(function(){t.model.get("onchange")(t.value())})),this.render()},render:function(){var e=this;this.$el.empty().removeClass().addClass("ui-options").addClass(this.model.get("cls")).append(this.$message=i()("<div/>").addClass("mt-2")).append(this.$menu=i()("<div/>").addClass("ui-options-menu")).append(this.$options=i()(this._template())),this.all_button=null,this.model.get("multiple")&&(this.all_button=new m.a.ButtonCheck({onclick:function(){e.$("input").prop("checked",0!==e.all_button.value()),e.value(e._getValue()),e.trigger("change")}}),this.$menu.append(this.all_button.$el)),this._changeData(),this._changeWait(),this._changeVisible()},update:function(e){e.data&&this.model.set("data",e.data)},_changeData:function(){var e=this;this.$options.empty(),this._templateOptions?this.$options.append(this._templateOptions(this.model.get("data"))):s.a.each(this.model.get("data"),(function(t){e.$options.append(i()(e._templateOption(t)).addClass("ui-option").tooltip({title:t.tooltip||"",placement:"bottom"}))})),this.$("input").on("change",(function(){e.value(e._getValue()),e.trigger("change")})),this._changeValue(),this._changeWait()},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"]()},_changeWait:function(){this.model.get("wait")?0===this.length()&&(this._messageShow(this.model.get("wait_text"),"info"),this.$options.hide(),this.$menu.hide()):0===this.length()?(this._messageShow(this.model.get("error_text"),"danger"),this.$options.hide(),this.$menu.hide()):(this.$message.hide(),this.$options.css("display","inline-block"),this.$menu.show())},_changeValue:function(){this._setValue(this.model.get("value")),null!==this._getValue()||this.model.get("multiple")||this.model.get("optional")||this._setValue(this.first()),this.all_button&&this.all_button.value(i.a.isArray(this._getValue())?this._getValue().length:0,this.length())},value:function(e){return void 0!==e&&this.model.set("value",e),this._getValue()},first:function(){var e=this.$("input").first();return e.length>0?e.val():null},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},length:function(){return this.$(".ui-option").length},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},_setValue:function(e){var t=this;if(void 0!==e&&(this.$("input").prop("checked",!1),null!==e)){var n=i.a.isArray(e)?e:[e];s.a.each(n,(function(e){t.$('input[value="'.concat(e,'"]')).first().prop("checked",!0)}))}},_getValue:function(){var e=[];return this.$(":checked").each((function(){e.push(i()(this).val())})),h.a.isEmpty(e)?null:this.model.get("multiple")?e:e[0]},_messageShow:function(e,t){this.$message.show().removeClass().addClass("alert alert-".concat(t)).html(e)},_template:function(){return i()("<div/>").addClass("ui-options-list")}}),_=f.extend({_templateOption:function(e){var t=h.a.uid();return i()("<div/>").addClass("ui-option").append(i()("<input/>").attr({id:t,type:this.model.get("type"),name:this.model.id,value:e.value})).append(i()("<label/>").addClass("ui-options-label").attr("for",t).html(e.label))}}),g={};g.View=_.extend({initialize:function(e){e.type="radio",_.prototype.initialize.call(this,e)}});var v={};v.View=_.extend({initialize:function(e){e.type="checkbox",e.multiple=!0,_.prototype.initialize.call(this,e)}});var y={};y.View=f.extend({initialize:function(e){f.prototype.initialize.call(this,e)},_setValue:function(e){void 0!==e&&(this.$("input").prop("checked",!1),this.$("label").removeClass("active"),this.$('[value="'.concat(e,'"]')).prop("checked",!0).closest("label").addClass("active"))},_templateOption:function(e){var t=i()("<label/>").addClass("btn btn-secondary m-0").attr("role","button");return e.icon&&t.append(i()("<i/>").addClass("fa").addClass(e.icon).addClass(!e.label&&"no-padding")),t.append(i()("<input/>").attr({type:"radio",name:this.model.id,value:e.value}).hide()),e.label&&t.append(e.label),t},_template:function(){return i()("<div/>").addClass("btn-group ui-radiobutton")}});var b={Base:f,BaseIcons:_,Radio:g,RadioButton:y,Checkbox:v},w={View:b.BaseIcons.extend({initialize:function(e){e.type=e.display||"checkbox",e.multiple="checkbox"==e.type,b.BaseIcons.prototype.initialize.call(this,e)},update:function(e){this.model.set("data",e.options)},_setValue:function(e){if(b.BaseIcons.prototype._setValue.call(this,e),null!=e&&this.header_index){var t=this,n=i.a.isArray(e)?e:[e];s.a.each(n,(function(e){var n=t.header_index[e];s.a.each(n,(function(e){t._setState(e,!0)}))}))}},_setState:function(e,t){var n=this.$(".button-".concat(e)),a=this.$(".subgroup-".concat(e));n.data("is_expanded",t),t?(a.show(),n.removeClass("fa-plus-square").addClass("fa-minus-square")):(a.hide(),n.removeClass("fa-minus-square").addClass("fa-plus-square"))},_templateOptions:function(){var e=this;function t(t,n){var a=t.find(".button-".concat(n));a.on("click",(function(){e._setState(n,!a.data("is_expanded"))}))}this.header_index={};var n=i()("<div/>");return function n(a,o,s){for(var r in s=s||[],o){var l=o[r],c=l.options&&l.options.length>0,d=s.slice(0);e.header_index[l.value]=d.slice(0);var u=i()("<div/>");if(c){var p=h.a.uid(),m=i()("<span/>").addClass("button-".concat(p)).addClass("ui-drilldown-button fa fa-plus-square"),f=i()("<div/>").addClass("subgroup-".concat(p)).addClass("ui-drilldown-subgroup");u.append(i()("<div/>").append(m).append(e._templateOption({label:l.name,value:l.value}))),d.push(p),n(f,l.options,d),u.append(f),t(u,p)}else u.append(e._templateOption({label:l.name,value:l.value}));a.append(u)}}(n,this.model.get("data")),n},_template:function(){return i()("<div/>").addClass("ui-options-list drilldown-container").attr("id",this.model.id)}})},k=n(37),M=l.a.View.extend({initialize:function(e){this.model=e&&e.model||new l.a.Model({message:null,status:"info",cls:"",persistent:!1,fade:!0}).set(e),this.listenTo(this.model,"change",this.render,this),e&&e.active_tab&&(this.active_tab=e.active_tab),this.render()},update:function(e){this.model.set(e)},render:function(){var e=this.model.get("status");if(this.$el.removeClass().addClass("alert alert-".concat(e," mt-2")).addClass(this.model.get("cls")),this.model.get("message")){if(this.$el.html(this.messageForDisplay()),this.$el[this.model.get("fade")?"fadeIn":"show"](),this.timeout&&window.clearTimeout(this.timeout),!this.model.get("persistent")){var t=this;this.timeout=window.setTimeout((function(){t.model.set("message","")}),3e3)}}else this.$el.hide();return this},messageForDisplay:function(){return s.a.escape(this.model.get("message"))}}),x=M.extend({messageForDisplay:function(){return this.model.get("message")}}),L=l.a.View.extend({initialize:function(e){this.model=e&&e.model||new l.a.Model({type:"text",placeholder:"",disabled:!1,readonly:!1,visible:!0,cls:"",area:!1,color:null,style:null}).set(e),this.tagName=this.model.get("area")?"textarea":"input",this.setElement(i()("<".concat(this.tagName,"/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},events:{input:"_onchange"},value:function(e){return void 0!==e&&this.model.set("value","string"==typeof e?e:""),this.model.get("value")},render:function(){var e=this;this.$el.removeClass().addClass("ui-".concat(this.tagName)).addClass(this.model.get("cls")).addClass(this.model.get("style")).attr("id",this.model.id).attr("type",this.model.get("type")).attr("placeholder",this.model.get("placeholder")).css("color",this.model.get("color")||"").css("border-color",this.model.get("color")||"");var t=this.model.get("datalist");return i.a.isArray(t)&&t.length>0&&this.$el.autocomplete({source:function(t,n){n(e.model.get("datalist"))},change:function(){e._onchange()}}),this.model.get("value")!==this.$el.val()&&this.$el.val(this.model.get("value")),s.a.each(["readonly","disabled"],(function(t){e.model.get(t)?e.$el.attr(t,!0):e.$el.removeAttr(t)})),this.$el[this.model.get("visible")?"show":"hide"](),this},_onchange:function(){this.value(this.$el.val()),this.model.get("onchange")&&this.model.get("onchange")(this.model.get("value"))}}),T=l.a.View.extend({initialize:function(e){this.model=e&&e.model||new l.a.Model(e),this.setElement(i()("<div/>").append(this.$info=i()("<div/>")).append(this.$hidden=i()("<div/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.$hidden.val(this.model.get("value")),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this}}),S=l.a.View.extend({initialize:function(e){var t=this;this.select=new e.SelectClass.View(e),this.model=this.select.model,this.text=new L({onchange:this.model.get("onchange")}),this.on("change",(function(){t.model.get("onchange")&&t.model.get("onchange")(t.value())})),this.setElement(i()("<div/>").append(this.select.$el).append(this.text.$el)),this.update(e)},wait:function(){this.select.wait()},unwait:function(){this.select.unwait()},value:function(e){return(this.textmode?this.text:this.select).value(e)},update:function(e){var t=e.data;t||(t=[],s.a.each(e.options,(function(e){t.push({label:e[0],value:e[1]})})));var n=this.value();this.textmode=e.textable&&(!i.a.isArray(t)||0===t.length),this.text.$el[this.textmode?"show":"hide"](),this.select.$el[this.textmode?"hide":"show"](),this.select.update({data:t}),this.value(n)}}),D=l.a.View.extend({initialize:function(e){var t=this;this.model=e&&e.model||new l.a.Model(e),this.setElement(i()("<div/>").append(this.$info=i()("<div/>")).append(this.$file=i()("<input/>").attr("type","file").addClass("mb-1")).append(this.$text=i()("<textarea/>").addClass("ui-textarea").attr("disabled",!0)).append(this.$wait=i()("<i/>").addClass("fa fa-spinner fa-spin"))),this.listenTo(this.model,"change",this.render,this),this.$file.on("change",(function(e){t._readFile(e)})),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){return this.$el.attr("id",this.model.id),this.model.get("info")?this.$info.show().text(this.model.get("info")):this.$info.hide(),this.model.get("value")?this.$text.text(this.model.get("value")).show():this.$text.hide(),this.model.get("wait")?this.$wait.show():this.$wait.hide(),this},_readFile:function(e){var t=this,n=e.target.files&&e.target.files[0];if(n){var a=new FileReader;a.onload=function(){t.model.set({wait:!1,value:this.result})},this.model.set({wait:!0,value:null}),a.readAsText(n)}}});m.a.Button,m.a.ButtonCheck,m.a.ButtonMenu,m.a.ButtonLink,b.Checkbox,b.RadioButton,b.Radio,t.a={Button:m.a.Button,ButtonCheck:m.a.ButtonCheck,ButtonMenu:m.a.ButtonMenu,ButtonLink:m.a.ButtonLink,Input:L,Message:M,UnescapedMessage:x,Upload:D,Modal:k.a,RadioButton:b.RadioButton,Checkbox:b.Checkbox,Radio:b.Radio,Select:c.a,TextSelect:S,Hidden:T,Slider:p,Drilldown:w}},function(e,t,n){"use strict";var a={UPLOAD:"upload",QUEUED:"queued",RUNNING:"running",SETTING_METADATA:"setting_metadata",NEW:"new",EMPTY:"empty",OK:"ok",PAUSED:"paused",FAILED_METADATA:"failed_metadata",NOT_VIEWABLE:"noPermission",DISCARDED:"discarded",ERROR:"error"};a.READY_STATES=[a.OK,a.EMPTY,a.PAUSED,a.FAILED_METADATA,a.NOT_VIEWABLE,a.DISCARDED,a.ERROR],a.NOT_READY_STATES=[a.UPLOAD,a.QUEUED,a.RUNNING,a.SETTING_METADATA,a.NEW],t.a=a},,,,,function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(2),u=n.n(d),h=n(30),p=n(28),m=n(46),f=n(50),_=n(112),g=n(5),v={toJSON:function(){var e=this,t={};return i.a.each(e.constructor.to_json_keys,(function(n){var a=e.get(n);n in e.constructor.to_json_mappers&&(a=e.constructor.to_json_mappers[n](a,e)),t[n]=a})),t}},y=function(e){this.default_font=void 0!==e?e:"9px Monaco, Lucida Console, monospace",this.dummy_canvas=this.new_canvas(),this.dummy_context=this.dummy_canvas.getContext("2d"),this.dummy_context.font=this.default_font,this.char_width_px=this.dummy_context.measureText("A").width,this.patterns={},this.load_pattern("right_strand","/visualization/strand_right.png"),this.load_pattern("left_strand","/visualization/strand_left.png"),this.load_pattern("right_strand_inv","/visualization/strand_right_inv.png"),this.load_pattern("left_strand_inv","/visualization/strand_left_inv.png")};i.a.extend(y.prototype,{load_pattern:function(e,t){var n=this.patterns,a=this.dummy_context,i=new Image;i.src="".concat(Object(c.getAppRoot)(),"static/images").concat(t),i.onload=function(){n[e]=a.createPattern(i,"repeat")}},get_pattern:function(e){return this.patterns[e]},new_canvas:function(){var e=s()("<canvas/>")[0];return e.manager=this,e}});var b=l.a.Model.extend({defaults:{num_elements:20,obj_cache:null,key_ary:null},initialize:function(e){this.clear()},get_elt:function(e){var t=this.attributes.obj_cache,n=this.attributes.key_ary,a=e.toString(),o=i.a.indexOf(n,(function(e){return e.toString()===a}));return-1!==o&&(t[a].stale?(n.splice(o,1),delete t[a]):this.move_key_to_end(e,o)),t[a]},set_elt:function(e,t){var n=this.attributes.obj_cache,a=this.attributes.key_ary,i=e.toString(),o=this.attributes.num_elements;if(!n[i]){if(a.length>=o)delete n[a.shift().toString()];a.push(e)}return n[i]=t,t},move_key_to_end:function(e,t){this.attributes.key_ary.splice(t,1),this.attributes.key_ary.push(e)},clear:function(){this.attributes.obj_cache={},this.attributes.key_ary=[]},size:function(){return this.attributes.key_ary.length},most_recently_added:function(){return 0===this.size()?null:this.attributes.key_ary[this.attributes.key_ary.length-1]}}),w=b.extend({defaults:i.a.extend({},b.prototype.defaults,{dataset:null,genome:null,init_data:null,min_region_size:200,filters_manager:null,data_type:"data",data_mode_compatible:function(e,t){return!0},can_subset:function(e){return!1}}),initialize:function(e){b.prototype.initialize.call(this);var t=this.get("init_data");t&&this.add_data(t)},add_data:function(e){this.get("num_elements")<e.length&&this.set("num_elements",e.length);var t=this;i.a.each(e,(function(e){t.set_data(e.region,e)}))},data_is_ready:function(){var e=this.get("dataset"),t=s.a.Deferred(),n="raw_data"===this.get("data_type")?"state":"data"===this.get("data_type")?"converted_datasets_state":"error",a=new p.a.ServerStateDeferred({ajax_settings:{url:this.get("dataset").url(),data:{hda_ldda:e.get("hda_ldda"),data_type:n},dataType:"json"},interval:5e3,success_fn:function(e){return"pending"!==e}});return s.a.when(a.go()).then((function(e){t.resolve("ok"===e||"data"===e)})),t},search_features:function(e){var t=this.get("dataset"),n={query:e,hda_ldda:t.get("hda_ldda"),data_type:"features"};return s.a.getJSON(t.url(),n)},load_data:function(e,t,n,a){var i=this.get("dataset"),o={data_type:this.get("data_type"),chrom:e.get("chrom"),low:e.get("start"),high:e.get("end"),mode:t,resolution:n,hda_ldda:i.get("hda_ldda")};s.a.extend(o,a);var r=this.get("filters_manager");if(r){for(var l=[],c=r.filters,d=0;d<c.length;d++)l.push(c[d].name);o.filter_cols=JSON.stringify(l)}var u=this,h=s.a.getJSON(i.url(),o,(function(t){t.region=e,u.set_data(e,t)}));return this.set_data(e,h),h},get_data:function(e,t,n,a){var i=this.get_elt(e);if(i&&(p.a.is_deferred(i)||this.get("data_mode_compatible")(i,t)))return i;for(var o,s,r=this.get("key_ary"),l=this.get("obj_cache"),c=0;c<r.length;c++)if((o=r[c]).contains(e)&&(s=!0,i=l[o.toString()],p.a.is_deferred(i)||this.get("data_mode_compatible")(i,t)&&this.get("can_subset")(i))){if(this.move_key_to_end(o,c),!p.a.is_deferred(i)){var d=this.subset_entry(i,e);this.set_data(e,d),i=d}return i}if(!s&&e.length()<this.attributes.min_region_size){e=e.copy();var u=this.most_recently_added();!u||e.get("start")>u.get("start")?e.set("end",e.get("start")+this.attributes.min_region_size):e.set("start",e.get("end")-this.attributes.min_region_size),e.set("genome",this.attributes.genome),e.trim()}return this.load_data(e,t,n,a)},set_data:function(e,t){this.set_elt(e,t)},DEEP_DATA_REQ:"deep",BROAD_DATA_REQ:"breadth",get_more_data:function(e,t,n,a,i){var o=this._mark_stale(e);if(o&&this.get("data_mode_compatible")(o,t)){var r=e.get("start");i===this.DEEP_DATA_REQ?s.a.extend(a,{start_val:o.data.length+1}):i===this.BROAD_DATA_REQ&&(r=(o.max_high?o.max_high:o.data[o.data.length-1][2])+1);var l=e.copy().set("start",r),c=this,d=this.load_data(l,t,n,a),u=s.a.Deferred();return this.set_data(e,u),s.a.when(d).then((function(t){t.data&&(t.data=o.data.concat(t.data),t.max_low&&(t.max_low=o.max_low),t.message&&(t.message=t.message.replace(/[0-9]+/,t.data.length))),c.set_data(e,t),u.resolve(t)})),u}console.log("ERROR: problem with getting more data: current data is not compatible")},can_get_more_detailed_data:function(e){var t=this.get_elt(e);return"bigwig"===t.dataset_type&&t.data.length<8e3},get_more_detailed_data:function(e,t,n,a,i){var o=this._mark_stale(e);if(o)return i||(i={}),"bigwig"===o.dataset_type&&(i.num_samples=1e3*a),this.load_data(e,t,n,i);console.log("ERROR getting more detailed data: no current data")},_mark_stale:function(e){var t=this.get_elt(e);return t||console.log("ERROR: no data to mark as stale: ",this.get("dataset"),e.toString()),t.stale=!0,t},get_genome_wide_data:function(e){var t=this,n=!0,a=i.a.map(e.get("chroms_info").chrom_info,(function(e){var a=t.get_elt(new x({chrom:e.chrom,start:0,end:e.len}));return a||(n=!1),a}));if(n)return a;var o=s.a.Deferred();return s.a.getJSON(this.get("dataset").url(),{data_type:"genome_data"},(function(e){t.add_data(e.data),o.resolve(e.data)})),o},subset_entry:function(e,t){var n={bigwig:function(e,t){return i.a.filter(e,(function(e){return e[0]>=t.get("start")&&e[0]<=t.get("end")}))},refseq:function(t,n){var a=n.get("start")-e.region.get("start");return e.data.slice(a,a+n.length())}},a=e.data;return!e.region.same(t)&&e.dataset_type in n&&(a=n[e.dataset_type](e.data,t)),{region:t,data:a,dataset_type:e.dataset_type}}}),k=w.extend({initialize:function(e){var t=new l.a.Model;t.urlRoot=e.data_url,this.set("dataset",t)},load_data:function(e,t,n,a){return e.length()<=1e5?w.prototype.load_data.call(this,e,t,n,a):{data:null,region:e}}}),M=l.a.Model.extend({defaults:{name:null,key:null,chroms_info:null},initialize:function(e){this.id=e.dbkey},get_chroms_info:function(){return this.attributes.chroms_info.chrom_info},get_chrom_region:function(e){var t=i.a.find(this.get_chroms_info(),(function(t){return t.chrom===e}));return new x({chrom:t.chrom,end:t.len})},get_chrom_len:function(e){return i.a.find(this.get_chroms_info(),(function(t){return t.chrom===e})).len}}),x=l.a.Model.extend({defaults:{chrom:null,start:0,end:0,str_val:null,genome:null},same:function(e){return this.attributes.chrom===e.get("chrom")&&this.attributes.start===e.get("start")&&this.attributes.end===e.get("end")},initialize:function(e){if(e.from_str){var t=e.from_str.split(":"),n=t[0],a=t[1].split("-");this.set({chrom:n,start:parseInt(a[0],10),end:parseInt(a[1],10)})}this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end")),this.on("change",(function(){this.attributes.str_val="".concat(this.get("chrom"),":").concat(this.get("start"),"-").concat(this.get("end"))}),this)},copy:function(){return new x({chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")})},length:function(){return this.get("end")-this.get("start")},toString:function(){return this.attributes.str_val},toJSON:function(){return{chrom:this.get("chrom"),start:this.get("start"),end:this.get("end")}},compute_overlap:function(e){var t=this.get("chrom"),n=e.get("chrom"),a=this.get("start"),i=e.get("start"),o=this.get("end"),s=e.get("end");return t&&n&&t!==n?x.overlap_results.DIF_CHROMS:a<i?o<i?x.overlap_results.BEFORE:o<s?x.overlap_results.OVERLAP_START:x.overlap_results.CONTAINS:a>i?a>s?x.overlap_results.AFTER:o<=s?x.overlap_results.CONTAINED_BY:x.overlap_results.OVERLAP_END:o>=s?x.overlap_results.CONTAINS:x.overlap_results.CONTAINED_BY},trim:function(e){if(this.attributes.start<0&&(this.attributes.start=0),this.attributes.genome){var t=this.attributes.genome.get_chrom_len(this.attributes.chrom);this.attributes.end>t&&(this.attributes.end=t-1)}return this},contains:function(e){return this.compute_overlap(e)===x.overlap_results.CONTAINS},overlaps:function(e){return 0===i.a.intersection([this.compute_overlap(e)],[x.overlap_results.DIF_CHROMS,x.overlap_results.BEFORE,x.overlap_results.AFTER]).length}},{overlap_results:{DIF_CHROMS:1e3,BEFORE:1001,CONTAINS:1002,OVERLAP_START:1003,OVERLAP_END:1004,CONTAINED_BY:1005,AFTER:1006}}),L=l.a.Collection.extend({model:x}),T=l.a.Model.extend({defaults:{region:null,note:""},initialize:function(e){this.set("region",new x(e.region))}}),S=l.a.Collection.extend({model:T}),D=l.a.Model.extend(v).extend({defaults:{mode:"Auto"},initialize:function(e){this.set("dataset",new h.a(e.dataset));var t=[{key:"name",default_value:this.get("dataset").get("name")},{key:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:0},{key:"max_value",label:"Max Value",type:"float",default_value:1}];this.set("config",m.a.ConfigSettingCollection.from_models_and_saved_values(t,e.prefs));var n=this.get("preloaded_data");n=n?n.data:[],this.set("data_manager",new w({dataset:this.get("dataset"),init_data:n}))}},{to_json_keys:["track_type","dataset","prefs","mode","filters","tool_state"],to_json_mappers:{prefs:function(e,t){return 0===i.a.size(e)&&(e={name:t.get("config").get("name").get("value"),color:t.get("config").get("color").get("value")}),e},dataset:function(e){return{id:e.id,hda_ldda:e.get("hda_ldda")}}}}),C=l.a.Collection.extend({model:D}),j=l.a.Model.extend({defaults:{title:"",type:""},urlRoot:"".concat(Object(c.getAppRoot)(),"api/visualizations"),save:function(){return s.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{vis_json:JSON.stringify(this)}})}}),Y=j.extend(v).extend({defaults:i.a.extend({},j.prototype.defaults,{dbkey:"",drawables:null,bookmarks:null,viewport:null}),initialize:function(e){this.set("drawables",new C(e.tracks));this.set("config",m.a.ConfigSettingCollection.from_models_and_saved_values([],e.prefs)),this.unset("tracks"),this.get("drawables").each((function(e){e.unset("preloaded_data")}))},add_tracks:function(e){this.get("drawables").add(e)}},{to_json_keys:["view","viewport","bookmarks"],to_json_mappers:{view:function(e,t){return{obj_type:"View",prefs:{name:t.get("title"),content_visible:!0},drawables:t.get("drawables")}}}}),O=l.a.Router.extend({initialize:function(e){var t=this;this.view=e.view,this.route(/([\w]+)$/,"change_location"),this.route(/([\w+]+:[\d,]+-[\d,]+)$/,"change_location"),this.view.on("navigate",(function(e){t.navigate(e)}))},change_location:function(e){this.view.go_to(e)}});t.a={BackboneTrack:D,BrowserBookmark:T,BrowserBookmarkCollection:S,Cache:b,CanvasManager:y,Genome:M,GenomeDataManager:w,GenomeRegion:x,GenomeRegionCollection:L,GenomeVisualization:Y,GenomeReferenceDataManager:k,TrackBrowserRouter:O,Visualization:j,select_datasets:function(e,t){var n=new f.a({url_base:"".concat(Object(c.getAppRoot)(),"visualization/list_history_datasets"),filters:e,embedded:!0}),a=new f.a({url_base:"".concat(Object(c.getAppRoot)(),"visualization/list_library_datasets"),embedded:!0}),i=new _.a.View;i.add({id:"histories",title:u()("Histories"),$el:s()("<div/>").append(n.$el)}),i.add({id:"libraries",title:u()("Libraries"),$el:s()("<div/>").append(a.$el)});var o=Object(g.a)();o.modal.show({title:u()("Select datasets for new tracks"),body:i.$el,closing_events:!0,buttons:{Cancel:function(){o.modal.hide()},Add:function(){var e=[];i.$("input.grid-row-select-checkbox[name=id]:checked").each((function(){window.console.log(s()(this).val()),e[e.length]=s.a.ajax({url:"".concat(Object(c.getAppRoot)(),"api/datasets/").concat(s()(this).val()),dataType:"json",data:{data_type:"track_config",hda_ldda:"histories"==i.current()?"hda":"ldda"}})})),s.a.when.apply(s.a,e).then((function(){var e=arguments[0]instanceof Array?s.a.map(arguments,(function(e){return e[0]})):[arguments[0]];t(e)})),o.modal.hide()}}})}}},,,,function(e,t,n){"use strict";function a(e){var t="Request failed.";return e.response?t=e.response.data.err_msg||"".concat(e.response.statusText," (").concat(e.response.status,")"):"string"==typeof e&&(t=e),t}function i(e){throw console.debug(e),a(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},function(e,t,n){"use strict";var a=n(3),i=n.n(a),o=n(1),s=n.n(o),r=n(8),l=i.a.View.extend({optionsDefault:{css:"",placeholder:"No data available",data:[],value:null,multiple:!1,minimumInputLength:0,maximumTextLength:100,initialData:""},initialize:function(e){if(this.options=r.a.merge(e,this.optionsDefault),this.setElement(this._template(this.options)),this.options.container){if(this.options.container.append(this.$el),this.select_data=this.options.data,this._refresh(),!this.options.multiple){this.options.value&&this._setValue(this.options.value);var t=this;this.options.onchange&&this.$el.on("change",(function(){t.options.onchange(t.value())}))}}else console.log("ui-select::initialize() : container not specified.")},value:function(e){var t=this._getValue();void 0!==e&&this._setValue(e);var n=this._getValue();return n!=t&&this.options.onchange&&this.options.onchange(n),n},text:function(){return this.$el.select2("data").text},disabled:function(){return!this.$el.select2("enable")},enable:function(){this.$el.select2("enable",!0)},disable:function(){this.$el.select2("enable",!1)},add:function(e){this.select_data.push({id:e.id,text:e.text}),this._refresh()},del:function(e){var t=this._getIndex(e);-1!=t&&(this.select_data.splice(t,1),this._refresh())},remove:function(){this.$el.select2("destroy")},update:function(e){for(var t in this.select_data=[],e.data)this.select_data.push(e.data[t]);this._refresh()},_refresh:function(){var e,t=this;if(this.options.multiple)e={multiple:this.options.multiple,containerCssClass:this.options.css,placeholder:this.options.placeholder,minimumInputLength:this.options.minimumInputLength,ajax:this.options.ajax,dropdownCssClass:this.options.dropdownCssClass,escapeMarkup:this.options.escapeMarkup,formatResult:this.options.formatResult,formatSelection:this.options.formatSelection,initSelection:this.options.initSelection,initialData:this.options.initialData},this.$el.select2(e);else{this.select_data&&this.select_data.map((function(e){var n=t.options.maximumTextLength+3;if(e.text&&e.text.length>n){var a=e.text.indexOf("(".concat(e.id,")"));a=-1!=a&&a<n?a:n;var i=e.text.substring(0,a).replace(/[ .]*$/,"");e.text="".concat(i,"...(").concat(e.id,")")}}));var n=this._getValue();e={data:this.select_data,containerCssClass:this.options.css,placeholder:this.options.placeholder,dropdownAutoWidth:!0},this.$el.select2(e),this._setValue(n)}},_getIndex:function(e){s.a.findIndex(this.select_data,{id:e})},_getValue:function(){return this.$el.select2("val")},_setValue:function(e){-1==this._getIndex(e)&&this.select_data.length>0&&(e=this.select_data[0].id),this.$el.select2("val",e)},_template:function(e){return'<input type="hidden" value="'.concat(this.options.initialData,'"/>')}});t.a={View:l}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3);var s=n.n(o).a.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(e){return!0}},go:function(){var e=i.a.Deferred(),t=this.get("ajax_settings"),n=this.get("success_fn"),a=this.get("interval");return function o(){i.a.ajax(t).success((function(t){n(t)?e.resolve(t):setTimeout(o,a)}))}(),e}});t.a={commatize:function(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},is_deferred:function(e){return"promise"in e},ServerStateDeferred:s,get_random_color:function(e){e||(e="#ffffff"),"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)e[t]=parseInt(e[t].slice(1),16);var n,a,i,o,s,r,l,c,d,u,h,p,m,f,_,g,v,y=function(e,t,n){return(299*e+587*t+114*n)/1e3},b=!1,w=0;do{for(d=y(a=(16711680&(n=Math.round(16777215*Math.random())))>>16,i=(65280&n)>>8,o=255&n),b=!0,t=0;t<e.length;t++)if(u=y(r=(16711680&(s=e[t]))>>16,l=(65280&s)>>8,c=255&s),p=a,m=i,f=o,_=r,g=l,v=c,h=Math.max(p,_)-Math.min(p,_)+(Math.max(m,g)-Math.min(m,g))+(Math.max(f,v)-Math.min(f,v)),Math.abs(d-u)<40||h<200){b=!1;break}w++}while(!b&&w<=10);return"#".concat((16777216+n).toString(16).substr(1,6))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=i.a;function l(e,t){var n=e.data("menu_options");e.data("menu_options",t),n||e.bind("click.show_popup",(function(t){return r(".popmenu-wrapper").remove(),setTimeout((function(){var n=r('<div class="dropdown-menu" id="'.concat(e.attr("id"),'-menu"/>')),a=e.data("menu_options");s.a.size(a)<=0&&r('<div class="dropdown-item">No Options.</div>').appendTo(n),r.each(a,(function(e,t){if(t){var a=t.action||t,i=t.url||"javascript:void(0);",o=r("<a>").addClass("dropdown-item").attr("href",i).html(e).click(a);t.class&&o.addClass(t.class),n.append(o)}else n.append(r("<div/>").addClass("dropdown-item head").append(r("<a href='javascript:void(0)' role='button'></a>").html(e)))}));var i=r("<div class='popmenu-wrapper' style='position: absolute;left: 0;'></div>").append(n).appendTo("body"),o=t.pageX-i.width()/2;o=Math.min(o,r(document).scrollLeft()+r(window).width()-r(i).width()-5),o=Math.max(o,r(document).scrollLeft()+5),i.css({top:t.pageY,left:o})}),10),setTimeout((function(){var e=function(e){r(e).bind("click.close_popup",(function(){r(".popmenu-wrapper").remove(),e.unbind("click.close_popup")}))};e(r(window.document)),e(r(window.top.document));for(var t=window.top.frames.length;t--;){e(r(window.top.frames[t].document))}}),50),!1}))}function c(){r("div[popupmenu]").each((function(){var e={},t=r(this);t.find("a").each((function(){var t=r(this),n=t.get(0),a=n.getAttribute("confirm"),i=n.getAttribute("href"),o=n.getAttribute("target");e[t.text()]=i?{url:i,action:function(e){if(!a||confirm(a)){if(o)return window.open(i,o),!1;t.click()}else e.preventDefault()}}:null}));var n=r("#".concat(t.attr("popupmenu")));n.find("a").bind("click",(function(e){return e.stopPropagation(),!0})),l(n,e),n.addClass("popup"),t.remove()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return M}));var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(2),u=n.n(d),h=n(35),p=n(5),m=l.a.Model.extend({}),f=l.a.Model.extend({defaults:{id:"",type:"",name:"",hda_ldda:"hda",metadata:null},initialize:function(){this.get("metadata")||this._set_metadata(),this.on("change",this._set_metadata,this)},_set_metadata:function(){var e=new m;i.a.each(i.a.keys(this.attributes),(function(t){if(0===t.indexOf("metadata_")){var n=t.split("metadata_")[1];e.set(n,this.attributes[t]),delete this.attributes[t]}}),this),this.set("metadata",e,{silent:!0})},get_metadata:function(e){return this.attributes.metadata.get(e)},urlRoot:"".concat(Object(c.getAppRoot)(),"api/datasets")}),_=f.extend({defaults:i.a.extend({},f.prototype.defaults,{chunk_url:null,first_data_chunk:null,offset:0,at_eof:!1}),initialize:function(e){f.prototype.initialize.call(this),this.attributes.first_data_chunk&&(this.attributes.offset=this.attributes.first_data_chunk.offset),this.attributes.chunk_url="".concat(Object(c.getAppRoot)(),"dataset/display?dataset_id=").concat(this.id),this.attributes.url_viz="".concat(Object(c.getAppRoot)(),"visualization")},get_next_chunk:function(){if(this.attributes.at_eof)return null;var e=this,t=s.a.Deferred();return s.a.getJSON(this.attributes.chunk_url,{offset:e.attributes.offset}).success((function(n){var a;""!==n.ck_data?(a=n,e.attributes.offset=n.offset):(e.attributes.at_eof=!0,a=null),t.resolve(a)})),t}}),g=l.a.Collection.extend({model:f}),v=l.a.View.extend({initialize:function(e){this.row_count=0,this.loading_chunk=!1,new k({model:e.model,$el:this.$el})},expand_to_container:function(){this.$el.height()<this.scroll_elt.height()&&this.attempt_to_fetch()},attempt_to_fetch:function(e){var t=this;!this.loading_chunk&&this.scrolled_to_bottom()&&(this.loading_chunk=!0,this.loading_indicator.show(),s.a.when(t.model.get_next_chunk()).then((function(e){e&&(t._renderChunk(e),t.loading_chunk=!1),t.loading_indicator.hide(),t.expand_to_container()})))},render:function(){this.loading_indicator=s()("<div/>").attr("id","loading_indicator"),this.$el.append(this.loading_indicator);var e=s()("<table/>").attr({id:"content_table",cellpadding:0});this.$el.append(e);var t=this.model.get_metadata("column_names"),n=s()("<thead/>").appendTo(e),a=s()("<tr/>").appendTo(n);if(t)a.append("<th>".concat(t.join("</th><th>"),"</th>"));else for(var i=1;i<=this.model.get_metadata("columns");i++)a.append("<th>".concat(i,"</th>"));var o=this,r=this.model.get("first_data_chunk");r?this._renderChunk(r):s.a.when(o.model.get_next_chunk()).then((function(e){o._renderChunk(e)})),this.scroll_elt.scroll((function(){o.attempt_to_fetch()}))},scrolled_to_bottom:function(){return!1},_renderCell:function(e,t,n){var a=s()("<td>").text(e),i=this.model.get_metadata("column_types");return void 0!==n?a.attr("colspan",n).addClass("stringalign"):i&&t<i.length&&("str"!==i[t]&&"list"!==i[t]||a.addClass("stringalign")),a},_renderRow:function(e){var t=e.split("\t"),n=s()("<tr>"),a=this.model.get_metadata("columns");return this.row_count%2!=0&&n.addClass("dark_row"),t.length===a?i.a.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):t.length>a?(i.a.each(t.slice(0,a-1),(function(e,t){n.append(this._renderCell(e,t))}),this),n.append(this._renderCell(t.slice(a-1).join("\t"),a-1))):1===t.length?(t=e.split(",")).length===a?i.a.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):(t=e.split(" ")).length===a?i.a.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this):n.append(this._renderCell(e,0,a)):(i.a.each(t,(function(e,t){n.append(this._renderCell(e,t))}),this),i.a.each(i.a.range(a-t.length),(function(){n.append(s()("<td>"))}))),this.row_count++,n},_renderChunk:function(e){var t=this.$el.find("table");i.a.each(e.ck_data.split("\n"),(function(e,n){""!==e&&t.append(this._renderRow(e))}),this)}}),y=v.extend({initialize:function(e){v.prototype.initialize.call(this,e);var t=i.a.find(this.$el.parents(),(function(e){return"auto"===s()(e).css("overflow")}));t||(t=window),this.scroll_elt=s()(t)},scrolled_to_bottom:function(){return this.$el.height()-this.scroll_elt.scrollTop()-this.scroll_elt.height()<=0}}),b=v.extend({initialize:function(e){v.prototype.initialize.call(this,e),this.scroll_elt=this.$el.css({position:"relative",overflow:"scroll",height:e.height||"500px"})},scrolled_to_bottom:function(){return this.$el.scrollTop()+this.$el.innerHeight()>=this.el.scrollHeight}});function w(e,t){for(var n=0;n<t.length;n++)if(t[n].match(e))return n;return-1}var k=l.a.View.extend({col:{chrom:null,start:null,end:null},url_viz:null,dataset_id:null,genome_build:null,file_ext:null,initialize:function(e){var t=Object(p.a)();if(t&&t.modal&&(this.modal=t.modal),t&&t.frame&&(this.frame=t.frame),this.modal&&this.frame){var n=e.model,a=n.get("metadata");if(n.get("file_ext")){if(this.file_ext=n.get("file_ext"),"bed"==this.file_ext){if(!(a.get("chromCol")&&a.get("startCol")&&a.get("endCol")))return void console.log("TabularButtonTrackster : Bed-file metadata incomplete.");this.col.chrom=a.get("chromCol")-1,this.col.start=a.get("startCol")-1,this.col.end=a.get("endCol")-1}if("vcf"!=this.file_ext||(this.col.chrom=w("Chrom",a.get("column_names")),this.col.start=w("Pos",a.get("column_names")),this.col.end=null,-1!=this.col.chrom&&-1!=this.col.start)){if(void 0!==this.col.chrom)if(n.id)if(this.dataset_id=n.id,n.get("url_viz")){this.url_viz=n.get("url_viz"),n.get("genome_build")&&(this.genome_build=n.get("genome_build"));var i=new h.a.IconButtonView({model:new h.a.IconButton({title:u()("Visualize"),icon_class:"chart_curve",id:"btn_viz"})});this.setElement(e.$el),this.$el.append(i.render().$el),this.hide()}else console.log("TabularButtonTrackster : Url for visualization controller is missing.");else console.log("TabularButtonTrackster : Dataset identification is missing.")}else console.log("TabularButtonTrackster : VCF-file metadata incomplete.")}}},events:{"mouseover tr":"show",mouseleave:"hide"},show:function(e){var t=this;if(null!==this.col.chrom){var n,a=s()(e.target).parent(),i=a.children().eq(this.col.chrom).html(),o=a.children().eq(this.col.start).html(),r=this.col.end?a.children().eq(this.col.end).html():o;if(i.match("^#")||""===i||(n=o,isNaN(parseFloat(n))||!isFinite(n)))s()("#btn_viz").hide();else{var l={dataset_id:this.dataset_id,gene_region:"".concat(i,":").concat(o,"-").concat(r)},c=a.offset(),d=c.left-10,h=c.top-s()(window).scrollTop()+3;s()("#btn_viz").css({position:"fixed",top:"".concat(h,"px"),left:"".concat(d,"px")}),s()("#btn_viz").off("click"),s()("#btn_viz").click((function(){t.frame.add({title:u()("Trackster"),url:"".concat(t.url_viz,"/trackster?").concat(s.a.param(l))})})),s()("#btn_viz").show()}}},hide:function(){this.$("#btn_viz").hide()}}),M=function(e){e.model||(e.model=new _(e.dataset_config));var t=e.parent_elt,n=e.embedded;delete e.embedded,delete e.parent_elt,delete e.dataset_config;var a=n?new b(e):new y(e);return a.render(),t&&(t.append(a.$el),a.expand_to_container()),a}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=i.a;t.a=function(e){(e=e||{}).tooltipConfig=e.tooltipConfig||{placement:"bottom"},e.classes=["icon-btn"].concat(e.classes||[]),e.disabled&&e.classes.push("disabled");var t=['<a class="',e.classes.join(" "),'"',e.title?' title="'.concat(e.title,'"'):"",!e.disabled&&e.target?' target="'.concat(e.target,'"'):"",' href="',!e.disabled&&e.href?e.href:"javascript:void(0);",'">','<span class="fa ',e.faIcon,'"></span>',"</a>"].join(""),n=r(t).tooltip(e.tooltipConfig);return s.a.isFunction(e.onclick)&&n.click((function(t){n.tooltip("hide"),n.parent().attr("tabindex",-1).focus(),e.onclick.apply(this,arguments)})),n}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(1),l=n.n(r),c=n(7),d=s.a.View.extend(c.a.LoggableMixin).extend({_logNamespace:"list",initialize:function(e){this.expanded=e.expanded||!1,this.log("\t expanded:",this.expanded),this.fxSpeed=void 0!==e.fxSpeed?e.fxSpeed:this.fxSpeed},fxSpeed:"fast",render:function(e){var t=this._buildNewRender();return this._setUpBehaviors(t),this._queueNewRender(t,e),this},_buildNewRender:function(){var e=i()(this.templates.el(this.model.toJSON(),this));return this.expanded&&this.$details(e).replaceWith(this._renderDetails().show()),e},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;var n=this;0===t?(n._swapNewRender(e),n.trigger("rendered",n)):i()(n).queue("fx",[function(e){n.$el.fadeOut(t,e)},function(t){n._swapNewRender(e),t()},function(e){n.$el.fadeIn(t,e)},function(e){n.trigger("rendered",n),e()}])},_swapNewRender:function(e){return this.$el.empty().attr("class",l.a.isFunction(this.className)?this.className():this.className).append(e.children())},_setUpBehaviors:function(e){(e=e||this.$el).find("[title]").tooltip({placement:"bottom"})},$details:function(e){return(e=e||this.$el).find("> .details")},_renderDetails:function(){var e=i()(this.templates.details(this.model.toJSON(),this));return this._setUpBehaviors(e),e},toggleExpanded:function(e){return(e=void 0===e?!this.expanded:e)?this.expand():this.collapse(),this},expand:function(){var e=this;return e._fetchModelDetails().always((function(){e._expand()}))},_fetchModelDetails:function(){return this.model.hasDetails()?i.a.when():this.model.fetch()},_expand:function(){var e=this,t=e._renderDetails();e.$details().replaceWith(t),e.expanded=!0,e.$details().slideDown(e.fxSpeed,(function(){e.trigger("expanded",e)}))},collapse:function(){this.debug("".concat(this,"(ExpandableView).collapse"));var e=this;e.expanded=!1,this.$details().slideUp(e.fxSpeed,(function(){e.trigger("collapsed",e)}))}}),u=d.extend(c.a.mixin(c.a.SelectableViewMixin,c.a.DraggableViewMixin,{tagName:"div",className:"list-item",initialize:function(e){d.prototype.initialize.call(this,e),c.a.SelectableViewMixin.initialize.call(this,e),c.a.DraggableViewMixin.initialize.call(this,e),this._setUpListeners()},_setUpListeners:function(){return this.on("selectable",(function(e){e?this.$(".primary-actions").hide():this.$(".primary-actions").show()}),this),this},_buildNewRender:function(){var e=d.prototype._buildNewRender.call(this);return e.children(".warnings").replaceWith(this._renderWarnings()),e.children(".title-bar").replaceWith(this._renderTitleBar()),e.children(".primary-actions").append(this._renderPrimaryActions()),e.find("> .title-bar .subtitle").replaceWith(this._renderSubtitle()),e},_swapNewRender:function(e){return d.prototype._swapNewRender.call(this,e),this.selectable&&this.showSelector(0),this.draggable&&this.draggableOn(),this.$el},_renderWarnings:function(){var e=this,t=i()('<div class="warnings"></div>'),n=e.model.toJSON();return l.a.each(e.templates.warnings,(function(a){t.append(i()(a(n,e)))})),t},_renderTitleBar:function(){return i()(this.templates.titleBar(this.model.toJSON(),this))},_renderPrimaryActions:function(){return[]},_renderSubtitle:function(){return i()(this.templates.subtitle(this.model.toJSON(),this))},events:{"click .title-bar":"_clickTitleBar","keydown .title-bar":"_keyDownTitleBar","click .selector":"toggleSelect"},_clickTitleBar:function(e){e.stopPropagation(),e.altKey?(this.toggleSelect(e),this.selectable||this.showSelector()):this.toggleExpanded()},_keyDownTitleBar:function(e){return!e||"keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode||(this.toggleExpanded(),e.stopPropagation(),!1)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"ListItemView(".concat(e,")")}}));u.prototype.templates={el:c.a.wrapTemplate(['<div class="list-element">','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]),warnings:{},titleBar:c.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element"),subtitle:c.a.wrapTemplate(['<div class="subtitle"></div>']),details:c.a.wrapTemplate(['<div class="details"></div>'])};var h,p=u.extend({foldoutStyle:"foldout",foldoutPanelClass:null,initialize:function(e){"drilldown"===this.foldoutStyle&&(this.expanded=!1),this.foldoutStyle=e.foldoutStyle||this.foldoutStyle,this.foldoutPanelClass=e.foldoutPanelClass||this.foldoutPanelClass,u.prototype.initialize.call(this,e),this.foldout=this._createFoldoutPanel()},_renderDetails:function(){if("drilldown"===this.foldoutStyle)return i()();var e=u.prototype._renderDetails.call(this);return this._attachFoldout(this.foldout,e)},_createFoldoutPanel:function(){var e=this.model,t=this._getFoldoutPanelClass(e),n=this._getFoldoutPanelOptions(e);return new t(l.a.extend(n,{model:e}))},_getFoldoutPanelClass:function(){return this.foldoutPanelClass},_getFoldoutPanelOptions:function(){return{foldoutStyle:this.foldoutStyle,fxSpeed:this.fxSpeed}},_attachFoldout:function(e,t){return t=t||this.$("> .details"),this.foldout=e.render(0),e.$("> .controls").hide(),t.append(e.$el)},expand:function(){var e=this;return e._fetchModelDetails().always((function(){"foldout"===e.foldoutStyle?e._expand():"drilldown"===e.foldoutStyle&&e._expandByDrilldown()}))},_expandByDrilldown:function(){var e=this;e.listenTo(e.foldout,"close",(function(){e.trigger("collapsed:drilldown",e,e.foldout)})),e.trigger("expanded:drilldown",e,e.foldout)}});p.prototype.templates=(h=c.a.wrapTemplate(['<div class="details">',"</div>"],"collection"),l.a.extend({},u.prototype.templates,{details:h})),t.c={ExpandableView:d,ListItemView:u,FoldoutListItemView:p}},function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return w}));var a=n(10),i=n.n(a),o=n(26),s=n(4);function r(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,l,"next",e)}function l(e){r(o,a,i,s,l,"throw",e)}s(void 0)}))}}function c(e){return d.apply(this,arguments)}function d(){return(d=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(Object(s.getAppRoot)(),"api/workflows/").concat(t,"/versions"));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),Object(o.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function u(){return h.apply(this,arguments)}function h(){return(h=l(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(Object(s.getAppRoot)(),"api/datatypes"));case 3:return t=e.sent,n=t.data,e.next=7,i.a.get("".concat(Object(s.getAppRoot)(),"api/datatypes/mapping"));case 7:return a=e.sent,r=a.data,e.abrupt("return",{datatypes:n,datatypes_mapping:r});case 12:e.prev=12,e.t0=e.catch(0),Object(o.b)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat(Object(s.getAppRoot)(),"api/workflows/build_module"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),Object(o.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function f(e,t,n){return _.apply(this,arguments)}function _(){return(_=l(regeneratorRuntime.mark((function e(t,n,a){var r,l,c,d,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(u.length>3&&void 0!==u[3])||u[3],e.prev=1,l=a?"version=".concat(a):"",e.next=5,i.a.get("".concat(Object(s.getAppRoot)(),"workflow/load_workflow?_=true&id=").concat(n,"&").concat(l));case 5:return c=e.sent,d=c.data,t.from_simple(d,r),t.has_changes=!1,t.fit_canvas_to_nodes(),t.scroll_to_nodes(),t.canvas_manager.draw_overview(),e.abrupt("return",d);case 15:e.prev=15,e.t0=e.catch(1),console.debug(e.t0),Object(o.b)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=l(regeneratorRuntime.mark((function e(t,n){var a,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.rectify_workflow_outputs(),!t.has_changes){e.next=18;break}return e.prev=2,a={workflow:t.to_simple(),from_tool_form:!0},e.next=6,i.a.put("".concat(Object(s.getAppRoot)(),"api/workflows/").concat(n),a);case 6:return r=e.sent,l=r.data,t.name=l.name,t.has_changes=!1,t.stored=!0,t.workflow_version=l.version,e.abrupt("return",l);case 15:e.prev=15,e.t0=e.catch(2),Object(o.b)(e.t0);case 18:return e.abrupt("return",{});case 19:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function y(){return b.apply(this,arguments)}function b(){return(b=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(Object(s.getAppRoot)(),"api/datatypes/mapping"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),Object(o.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("".concat(Object(s.getAppRoot)(),"api/workflows/get_tool_predictions"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),Object(o.b)(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(29),d=l.a.Model.extend({defaults:{title:"",icon_class:"",on_click:null,menu_options:null,is_menu_button:!0,id:null,href:null,target:null,enabled:!0,visible:!0,tooltip_config:{}}}),u=l.a.View.extend({initialize:function(){this.model.attributes.tooltip_config={placement:"bottom"},this.model.bind("change",this.render,this)},render:function(){this.$el.tooltip("hide");var e=this.template(this.model.toJSON());return e.tooltip(this.model.get("tooltip_config")),this.$el.replaceWith(e),this.setElement(e),this},events:{click:"click"},click:function(e){return!s.a.isFunction(this.model.get("on_click"))||(this.model.get("on_click")(e),!1)},template:function(e){var t='title="'.concat(e.title,'" class="icon-button');return e.is_menu_button&&(t+=" menu-button"),t+=" ".concat(e.icon_class),e.enabled||(t+="_disabled"),t+='"',e.id&&(t+=' id="'.concat(e.id,'"')),t+=' href="'.concat(e.href,'"'),e.target&&(t+=' target="'.concat(e.target,'"')),e.visible||(t+=' style="display: none;"'),t=e.enabled?"<a ".concat(t,"/>"):"<span ".concat(t,"/>"),i()(t)}}),h=l.a.Collection.extend({model:d}),p=l.a.View.extend({tagName:"div",initialize:function(){this.render()},render:function(){var e=this;return this.collection.each((function(t){var n=i()("<a/>").attr("href","javascript:void(0)").attr("title",t.attributes.title).addClass("icon-button menu-button").addClass(t.attributes.icon_class).appendTo(e.$el).click(t.attributes.on_click);t.attributes.tooltip_config&&n.tooltip(t.attributes.tooltip_config);var a=t.get("options");a&&Object(c.b)(n,a)})),this}});t.a={IconButton:d,IconButtonView:u,IconButtonCollection:h,IconButtonMenuView:p,create_icon_buttons_menu:function(e,t){t||(t={});var n=new h(s.a.map(e,(function(e){return new d(s.a.extend(e,t))})));return new p({collection:n})}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(8),s=n(3),r=n.n(s),l=r.a.View.extend({initialize:function(e){this.model=e&&e.model||new r.a.Model({id:o.a.uid(),title:"",icon:"",cls:"btn btn-secondary",wait:!1,wait_text:"Sending...",wait_cls:"btn btn-info",disabled:!1,percentage:-1,visible:!0}).set(e),this.setElement(i()("<button/>").attr("type","button").append(this.$icon=i()("<i/>")).append(this.$title=i()("<span/>")).append(this.$progress=i()("<div/>").append(this.$progress_bar=i()("<div/>")))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this,t=this.model.attributes;this.$el.removeClass().addClass("ui-button-default").addClass(t.disabled&&"disabled").attr("id",t.id).attr("disabled",t.disabled).css("display",t.visible?"inline-block":"none").off("click").on("click",(function(){i()(".tooltip").hide(),t.onclick&&!e.disabled&&t.onclick()})).tooltip({title:t.tooltip||"",placement:"bottom"}),this.$progress.addClass("progress").css("display",-1!==t.percentage?"block":"none"),this.$progress_bar.addClass("progress-bar").css({width:"".concat(t.percentage,"%")}),this.$icon.removeClass().addClass("icon fa"),this.$title.removeClass().addClass("title"),t.wait?(this.$el.addClass(t.wait_cls).prop("disabled",!0),this.$icon.addClass("fa-spinner fa-spin mr-1"),this.$title.html(t.wait_text)):(this.$el.addClass(t.cls),this.$icon.addClass(t.icon),t.title&&(this.$title.html(t.title),t.icon&&this.$icon.addClass("mr-1")))},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},disable:function(){this.model.set("disabled",!0)},enable:function(){this.model.set("disabled",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},setIcon:function(e){this.model.set("icon",e)}}),c=l.extend({initialize:function(e){this.model=e&&e.model||new r.a.Model({id:o.a.uid(),visible:!0,title:"",icon:"",cls:""}).set(e),this.setElement(i()("<a/>").append(this.$icon=i()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.attributes;this.$el.removeClass().addClass(e.cls).attr({id:e.id,href:e.href||"javascript:void(0)",title:e.title,target:e.target||"_top",disabled:e.disabled}).css("display",e.visible?"inline-block":"none").tooltip({placement:"bottom"}).off("click").on("click",(function(){e.onclick&&!e.disabled&&e.onclick()})),this.$icon.removeClass().addClass(e.icon)}}),d=r.a.View.extend({initialize:function(e){this.model=e&&e.model||new r.a.Model({id:o.a.uid(),title:"Select/Unselect all",icons:["fa-square-o","fa-minus-square-o","fa-check-square-o"],value:0,visible:!0,onchange:function(){}}).set(e),this.setElement(i()("<div/>").addClass("mb-2").append(this.$icon=i()("<span/>")).append(this.$title=i()("<span/>"))),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(e){var t=this;e=this.model.attributes,this.$el.addClass("ui-button-check").css("display",e.visible?"inline-block":"none").off("click").on("click",(function(){t.model.set("value",0===t.model.get("value")?2:0),e.onclick&&e.onclick()})),this.$title.html(e.title),this.$icon.removeClass().addClass("icon fa mr-1").addClass(e.icons[e.value])},value:function(e,t){return void 0!==e&&(t&&0!==e&&(e=e!==t?1:2),this.model.set("value",e),this.model.get("onchange")(this.model.get("value"))),this.model.get("value")}}),u=r.a.View.extend({$menu:null,initialize:function(e){this.model=e&&e.model||new r.a.Model({id:"",title:"",pull:"right",icon:null,onclick:null,cls:"btn btn-secondary float-right",tooltip:"",target:"",href:"",onunload:null,visible:!0,tag:""}).set(e),this.collection=new r.a.Collection,this.setElement(i()("<div/>").append(this.$root=i()("<button/>").append(this.$icon=i()("<i/>")).append(this.$title=i()("<span/>")))),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"change add remove reset",this.render,this),this.render()},render:function(){var e=this,t=this.model.attributes;this.$el.removeClass().addClass("dropdown").attr("id",t.id).css({display:t.visible&&this.collection.where({visible:!0}).length>0?"block":"none"}),this.$root.addClass(t.cls).attr("data-toggle","dropdown").tooltip({title:t.tooltip||"",placement:"bottom"}).off("click").on("click",(function(e){i()(".tooltip").hide(),e.preventDefault(),t.onclick&&t.onclick()})),this.$icon.removeClass().addClass("icon fa").addClass(t.icon),t.title&&this.$title.removeClass().addClass("title ml-1").html(t.title),this.$menu&&this.$menu.remove(),this.collection.length>0&&(this.$menu=i()("<div/>").addClass("menu dropdown-menu dropdown-menu-right").addClass("pull-".concat(this.model.get("pull"))).attr("role","menu"),this.$el.append(this.$menu)),this.collection.each((function(t){var n=t.attributes;if(n.visible){var a=i()("<a/>").addClass("dropdown-item").attr({href:n.href,target:n.target}).append(i()("<i/>").addClass("fa mr-2").addClass(n.icon).css("display",n.icon?"inline-block":"none")).append(n.title).on("click",(function(e){n.onclick&&(e.preventDefault(),n.onclick())}));e.$menu.append(a),n.divider&&e.$menu.append(i()("<div/>").addClass("divider"))}}))},addMenu:function(e){this.collection.add(o.a.merge(e,{title:"",target:"",href:"",onclick:null,divider:!1,visible:!0,icon:null,cls:"button-menu btn-group"}))}});t.a={Button:l,ButtonLink:c,ButtonCheck:d,ButtonMenu:u}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r).a.View.extend({className:"ui-modal",optionsDefault:{container:"body",title:"ui-modal",cls:"ui-modal",body:"",backdrop:!0,height:null,width:null,xlarge:!1,closing_events:!1,closing_callback:null,title_separator:!0},buttonList:{},initialize:function(e){this.options=s.a.defaults(e||{},this.optionsDefault),i()(this.options.container).prepend(this.el),e&&this.render()},show:function(e){var t=this;e&&(this.options=s.a.defaults(e,this.optionsDefault),this.render()),this.visible||(this.visible=!0,this.$el.fadeIn("fast")),this.options.closing_events&&(i()(document).on("keyup.ui-modal",(function(e){27==e.keyCode&&t.hide(!0)})),this.$backdrop.on("click",(function(){t.hide(!0)}))),this.$el.find(".title").focus()},hide:function(e){this.visible=!1,this.$el.fadeOut("fast"),this.options.closing_callback&&this.options.closing_callback(e),i()(document).off("keyup.ui-modal"),this.$backdrop.off("click")},render:function(){var e=this;if(this.$el.html(this._template()),this.$header=this.$(".modal-header"),this.$dialog=this.$(".modal-dialog"),this.options.extra_class&&this.$dialog.addClass(this.options.extra_class),this.$body=this.$(".modal-body"),this.$footer=this.$(".modal-footer"),this.$backdrop=this.$(".modal-backdrop"),this.$buttons=this.$(".buttons"),"progress"==this.options.body&&(this.options.body=i()('<div class="progress progress-striped active"><div class="progress-bar progress-bar-info" style="width:100%"/></div>')),this.$el.removeClass().addClass("modal").addClass(this.options.cls),this.$header.find(".title").html(this.options.title),this.$body.html(this.options.body),this.$buttons.empty(),this.buttonList={},this.options.buttons){var t=0;i.a.each(this.options.buttons,(function(n,a){var o=i()("<button/>").attr("id","button-".concat(t++)).text(n).click(a);e.$buttons.append(o).append("&nbsp;"),e.buttonList[n]=o}))}else this.$footer.hide();this.$backdrop[this.options.backdrop?"addClass":"removeClass"]("in"),this.$header[this.options.title_separator?"removeClass":"addClass"]("no-separator"),this.$body.removeAttr("style"),this.options.height?(this.$body.css("height",this.options.height),this.$body.css("overflow","hidden")):this.$body.css("max-height",i()(window).height()/2),this.options.width&&this.$dialog.css("width",this.options.width),this.options.xlarge&&this.$dialog.css("max-width","3000px")},getButton:function(e){return this.buttonList[e]},enableButton:function(e){this.getButton(e).prop("disabled",!1)},disableButton:function(e){this.getButton(e).prop("disabled",!0)},showButton:function(e){this.getButton(e).show()},hideButton:function(e){this.getButton(e).hide()},scrollTop:function(){return this.$body.scrollTop()},_template:function(){return'<div class="modal-backdrop fade"/><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="title" tabindex="0"/></div><div class="modal-body"/><div class="modal-footer"><div class="buttons"/></div></div></div>'}});t.a={View:l}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(90),d=n(16),u=n(8),h=n(144),p=l.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.app_options=e.model?e.model.attributes:{},this.field=t&&t.field||new l.a.View,this.model=t&&t.model||new l.a.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",text_connected_enable:this.app_options.text_connected_enable||"Add connection to module",text_connected_disable:this.app_options.text_connected_disable||"Remove connection from module",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(t),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$connected_icon=this.$(".ui-form-connected-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var a=this.model.get("collapsible_value"),i=JSON.stringify(this.model.get("value"));this.field.connected=i==JSON.stringify({__class__:"ConnectedValue"}),this.field.collapsed=this.field.connected||void 0!==a&&JSON.stringify(this.model.get("value"))==JSON.stringify(a),this.listenTo(this.model,"change",this.render,this),this.render();var o=this;this.$collapsible_icon.on("click",(function(){o.field.collapsed=!o.field.collapsed,o.field.connected=!1,e.trigger&&e.trigger("change"),o.render()})),this.$connected_icon.on("click",(function(){o.field.connected=!o.field.connected,o.field.collapsed=o.field.connected,e.trigger&&e.trigger("change"),o.render()})),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",(function(){o.reset()})),this.field.model&&this.listenTo(this.field.model,"error",(function(e){e?n.error(e):n.reset()}))},backdrop:function(){this.model.set("backdrop",!0)},error:function(e){this.model.set("error_text",e)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){i()(".tooltip").hide();var e=this.model.get("help",""),t=this.model.get("argument");t&&-1==e.indexOf("(".concat(t,")"))&&(e+=" (".concat(t,")")),this.$info.html(e),this.$el[this.model.get("hidden")?"hide":"show"]();var n=s.a.escape(this.model.get("text_value")).replace(/\n/g,"<br />");this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(n);var a=this.model.get("error_text");this.$error[a?"show":"hide"](),this.$el[a?"addClass":"removeClass"]("alert alert-danger"),this.$error_text.html(a),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")});var o=this.field.connected,r=!this.field.collapsible_disabled&&!this.model.get("disabled")&&void 0!==this.model.get("collapsible_value"),l=r&&this.model.get("connectable");if(r||l){var c=this.field.collapsed?"enable":"disable";if(this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),r&&!o?this.$collapsible_icon.removeClass().addClass("icon ui-form-collapsible-icon").addClass(this.model.get("cls_".concat(c))).tooltip("dispose").attr("data-original-title",this.model.get("text_".concat(c))).tooltip({placement:"bottom"}).show():this.$collapsible_icon.hide(),l){var d=this.field.connected?"fa fa-times":"fa fa-arrows-h",u=!o&&r?"ml-1":"",h=this.field.connected?"disable":"enable";this.$connected_icon.removeClass().addClass("icon ui-form-connected-icon").addClass(d).addClass(u).tooltip("dispose").attr("data-original-title",this.model.get("text_connected_".concat(h))).tooltip({placement:"bottom"}).show()}else this.$connected_icon.hide()}else this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide();this.$field.attr("data-label",this.model.get("label"))},_template:function(){return i()("<div/>").addClass("ui-form-element").append(i()("<div/>").addClass("ui-form-error").append(i()("<span/>").addClass("fa fa-arrow-down mr-1")).append(i()("<span/>").addClass("ui-form-error-text"))).append(i()("<div/>").addClass("ui-form-title").append(i()("<div/>").addClass("ui-form-collapsible").append(i()("<i/>").addClass("ui-form-collapsible-icon")).append(i()("<i/>").addClass("ui-form-connected-icon")).append(i()("<span/>").addClass("ui-form-collapsible-text ml-1"))).append(i()("<span/>").addClass("ui-form-title-text"))).append(i()("<div/>").addClass("ui-form-field").append(i()("<span/>").addClass("ui-form-info form-text text-muted mt-2")).append(i()("<div/>").addClass("ui-form-backdrop"))).append(i()("<div/>").addClass("ui-form-preview"))}}),m=n(5),f=n(2),_=n.n(f),g=n(104),v="disabled",y="enabled",b="linked",w={data:[{src:"hda",icon:"fa-file-o",tooltip:_()("Single dataset"),library:!0,multiple:!1,batch:v},{src:"hda",icon:"fa-files-o",tooltip:_()("Multiple datasets"),multiple:!0,batch:b},{src:"hdca",icon:"fa-folder-o",tooltip:_()("Dataset collection"),multiple:!1,batch:b}],data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:_()("Multiple datasets"),multiple:!0,batch:v},{src:"hdca",icon:"fa-folder-o",tooltip:_()("Dataset collections"),multiple:!0,batch:v}],data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:_()("Dataset collection"),multiple:!1,batch:v}],workflow_data:[{src:"hda",icon:"fa-file-o",tooltip:_()("Single dataset"),multiple:!1,batch:v}],workflow_data_multiple:[{src:"hda",icon:"fa-files-o",tooltip:_()("Multiple datasets"),multiple:!0,batch:v}],workflow_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:_()("Dataset collection"),multiple:!1,batch:v}],module_data:[{src:"hda",icon:"fa-file-o",tooltip:_()("Single dataset"),multiple:!1,batch:v},{src:"hda",icon:"fa-files-o",tooltip:_()("Multiple datasets"),multiple:!0,batch:y}],module_data_collection:[{src:"hdca",icon:"fa-folder-o",tooltip:_()("Dataset collection"),multiple:!1,batch:v},{src:"hdca",icon:"fa-folder",tooltip:_()("Multiple collections"),multiple:!0,batch:y}]},k={View:l.a.View.extend({initialize:function(e){var t=this,n=this;this.model=e&&e.model||new l.a.Model({src_labels:{hda:"dataset",hdca:"dataset collection"},pagelimit:100,statustimer:1e3}).set(e),this.setElement(i()("<div/>").addClass("ui-select-content")),this.button_product=new d.a.RadioButton.View({value:"false",data:[{icon:"fa fa-chain",value:"false",tooltip:"Linked inputs will be run in matched order with other datasets e.g. use this for matching forward and reverse reads."},{icon:"fa fa-chain-broken",value:"true",tooltip:"Unlinked dataset inputs will be run against *all* other inputs."}]}),this.$batch={linked:i()(this._templateBatch()).clone(),enabled:i()(this._templateBatch()).clone().append(this.button_product.$el)};var a=this.$el.get(0);a.addEventListener("dragenter",(function(e){t.lastenter=e.target,n.$el.addClass("ui-dragover")})),a.addEventListener("dragover",(function(e){e.preventDefault()})),a.addEventListener("dragleave",(function(e){t.lastenter===e.target&&n.$el.removeClass("ui-dragover")})),a.addEventListener("drop",(function(e){e.preventDefault();try{var n=JSON.parse(e.dataTransfer.getData("text"))[0];t._handleDropValues(n)}catch(e){t._handleDropStatus("danger")}})),this.cache={},this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:current",this._changeCurrent,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:type change:optional change:multiple change:extensions",this._changeType,this),this.render(),this.on("change",(function(){e.onchange&&e.onchange(n.value())}))},render:function(){this._changeType(),this._changeValue(),this._changeWait()},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},update:function(e){this.model.set("data",e.options)},value:function(e){var t=Object(m.a)();void 0!==e&&this.model.set("value",e);var n=this.model.get("current");if(this.config[n]){var a=this.fields[n].value();if(null!==a&&(a=i.a.isArray(a)?a:[a]).length>0){var o=this._batch({values:[]});for(var s in a){var r=this.cache["".concat(a[s],"_").concat(this.config[n].src)];if(!r)return t.emit.debug("ui-select-content::value()","Requested details not found for '".concat(a[s],"'.")),null;var l=this._unpatchValue(r);o.values.push(l)}return o.values.sort((function(e,t){return e.hid-t.hid})),o}}else t.emit.debug("ui-select-content::value()","Invalid value/source '".concat(e,"'."));return null},_changeCurrent:function(){var e=this;s.a.each(this.fields,(function(t,n){var a=e.config[n];e.model.get("current")==n?(t.$el.show(),s.a.each(e.$batch,(function(e,t){a.batch==t?e.show():e.hide()})),"hda"==a.src?e.button_dialog.show():e.button_dialog.hide(),e.button_type.value(n)):t.$el.hide()})),this.fields.length>1?this.button_type.show():this.button_type.hide()},_changeType:function(){var e=this,t=this,n=Object(m.a)(),a=(this.model.get("flavor")?"".concat(this.model.get("flavor"),"_"):"")+String(this.model.get("type"))+(this.model.get("multiple")?"_multiple":"");w[a]?this.config=w[a]:(this.config=w.data,n.emit.debug("ui-select-content::_changeType()","Invalid configuration/type id '".concat(a,"'.")));var o=t.model.get("data"),r=u.a.textify(this.model.get("extensions")),l=this.model.get("src_labels");this.fields=[],this.button_data=[],s.a.each(this.config,(function(e,n){t.button_data.push({value:n,icon:e.icon,tooltip:e.tooltip}),t.fields.push(new g.a.View({optional:t.model.get("optional"),multiple:e.multiple,searchable:!e.multiple||o&&o[e.src]&&o[e.src].length>t.model.get("pagelimit"),individual:!0,error_text:"No ".concat(r?"".concat(r," "):"").concat(l[e.src]||"content"," available."),onchange:function(){t.trigger("change")}}))})),this.button_type=new d.a.RadioButton.View({value:this.model.get("current"),data:this.button_data,cls:"pr-lg-2",onchange:function(e){t.model.set("current",e),t.trigger("change")}}),this.button_dialog=new d.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",onclick:function(){var t=e.model.get("current"),a=e.config[t];n.data.dialog((function(t){e._handleDropValues(t,!1)}),{multiple:a.multiple,library:!!a.library,format:null})}});var c=i()("<div/>").addClass("overflow-auto w-100 py-2 py-lg-0 pr-lg-2 ");this.$el.empty().addClass("d-flex flex-row flex-wrap flex-lg-nowrap").append(i()("<div/>").append(this.button_type.$el)).append(c).append(i()("<div/>").append(this.button_dialog.$el)),s.a.each(this.fields,(function(e){c.append(e.$el)})),s.a.each(this.$batch,(function(e,t){c.append(e)})),this.model.set("current",0),this._changeCurrent(),this._changeData()},_changeWait:function(){var e=this;s.a.each(this.fields,(function(t){t[e.model.get("wait")?"wait":"unwait"]()}))},_changeData:function(){var e=this.model.get("data"),t=this,n={};s.a.each(e,(function(e,a){n[a]=[],s.a.each(e,(function(e){n[a].push({hid:e.hid,keep:e.keep,label:"".concat(e.hid,": ").concat(e.name),value:e.id,origin:e.origin,tags:e.tags}),t.cache["".concat(e.id,"_").concat(a)]=e}))})),s.a.each(this.config,(function(e,a){n[e.src]&&t.fields[a].add(n[e.src],(function(e,t){return t.hid-e.hid}))}))},_changeValue:function(){var e=this.model.get("value");if(e&&e.values&&e.values.length>0){var t=[];s.a.each(e.values,(function(e){t.push(e.id)}));for(var n=e.values[0].src,a=e.values.length>1,i=0;i<this.config.length;i++){var o=this.fields[i],r=this.config[i];if(r.src==n&&-1!==[a,!0].indexOf(r.multiple)){this.model.set("current",i),o.value(t);break}}}else s.a.each(this.fields,(function(e){e.value(null)}))},_getSource:function(e){return"dataset_collection"==e.history_content_type?"hdca":"hda"},_patchValue:function(e){"ldda"==e.src&&(e.src="hda",e.origin="ldda",e.id="".concat(e.origin).concat(e.id))},_unpatchValue:function(e){if(e.origin){var t=Object.assign({},e);return t.id=t.id.substr(t.origin.length),t.src=t.origin,t}return e},_handleDropValues:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,o=this.model.get("data"),r=this.model.get("current"),l=this.config[r],c=this.fields[r];if(o){var d=i.a.isArray(e)?e:[e];if(d.length>0){var u=!1;s.a.each(d,(function(e){a._patchValue(e);var n=e.id,i=e.src=t._getSource(e),r={id:n,src:i};s.a.findWhere(o[i],r)||(u=!0,o[i].push({id:n,src:i,hid:e.hid||"Selected",name:e.name?e.name:n,origin:e.origin,keep:!0,tags:[]}))})),u&&this._changeData();var h=d[0].id,p=d[0].src;if(l.src==p&&n){var m=c.value();m&&l.multiple?s.a.each(d,(function(e){-1==m.indexOf(e.id)&&m.push(e.id)})):m=h,c.value(m)}else this.model.set("value",{values:d}),this.model.trigger("change:value");this.trigger("change")}}this._handleDropStatus("success")},_handleDropStatus:function(e){var t=this;this.$el.removeClass("ui-dragover").addClass("ui-dragover-".concat(e)),setTimeout((function(){t.$el.removeClass("ui-dragover-".concat(e))}),this.model.get("statustimer"))},_batch:function(e){e.batch=!1;var t=this.model.get("current"),n=this.config[t];if("hdca"==n.src){var a=this.cache["".concat(this.fields[t].value(),"_hdca")];a&&a.map_over_type&&(e.batch=!0)}return n.batch!=b&&n.batch!=y||(e.batch=!0,n.batch==y&&"true"===this.button_product.value()&&(e.product=!0)),e},_templateBatch:function(){return'<div class="form-text text-muted" style="clear: both;">\n                    <i class="fa fa-sitemap"/>\n                    <span>\n                        This is a batch mode input field. Separate jobs will be triggered for each dataset selection.\n                    </span>\n                </div>'}})},M={View:l.a.View.extend({initialize:function(e){var t=this;this.options=e,this.name=e.name||"element",this.multiple=e.multiple||!1,this.message=new d.a.Message({cls:"col mb-0"}),this.selections=i()("<div/>"),this.select=new d.a.Select.View({optional:e.optional}),this.$button=i()('<button class="fa fa-sign-in"/>'),this.$button.on("click",(function(){t.add({id:t.select.value(),name:t.select.text()})})),this.setElement(this._template(e)),this.$(".ui-list-message").append(this.message.$el),this.$(".ui-list-selections").append(this.selections),this.$(".ui-list-button").append(this.$button),this.$(".ui-list-select").append(this.select.$el)},value:function(e){if(void 0!==e){if(this.selections.empty(),i.a.isArray(e))for(var t in e){var n=e[t],a=null,o=null;"string"!=i.a.type(n)?(a=n.id,o=n.name):a=o=n,null!=a&&this.add({id:a,name:o})}this._refresh()}var s=[];return this.$(".ui-list-id").each((function(){s.push({id:i()(this).prop("id"),name:i()(this).find(".ui-list-name").html()})})),0==s.length?null:s},add:function(e){var t=this;if(0===this.$('[id="'.concat(e.id,'"]')).length)if(u.a.isEmpty(e.id))this.message.update({message:"Please select a valid ".concat(this.name,"."),status:"danger"});else{var n=i()(this._templateRow({id:e.id,name:e.name}));n.find("button").on("click",(function(){n.remove(),t._refresh()})),this.selections.append(n),this._refresh()}else this.message.update({message:"This ".concat(this.name," is already in the list.")})},update:function(e){this.select.update(e)},_refresh:function(){this.$(".ui-list-id").length>0?!this.multiple&&this.$button.attr("disabled",!0):this.$button.attr("disabled",!1),this.options.onchange&&this.options.onchange()},_template:function(e){return'<div class="ui-list container">\n                    <div class="row">\n                        <div class="col-1 pl-0 mb-2">\n                            <div class="ui-list-button"/>\n                        </div>\n                        <div class="ui-list-select col pr-0"/>\n                    </div>\n                    <div class="ui-list-message mt-2 row"/>\n                    <div class="ui-list-selections mt-2"/>\n                </div>'},_templateRow:function(e){return'<div id="'.concat(e.id,'" class="ui-list-id row mt-2">\n                    <button class="ui-list-delete fa fa-trash mr-3"/>\n                    <div class="ui-list-name">').concat(e.name,"</span>\n                </div>")}})},x=n(4),L=l.a.Collection.extend({url:"".concat(Object(x.getAppRoot)(),"api/libraries?deleted=false")}),T=l.a.Collection.extend({initialize:function(){var e=this;this.config=new l.a.Model({library_id:null}),this.config.on("change",(function(){e.fetch({reset:!0})}))},url:function(){return"".concat(Object(x.getAppRoot)(),"api/libraries/").concat(this.config.get("library_id"),"/contents")}}),S={View:l.a.View.extend({initialize:function(e){var t=this;this.libraries=new L,this.datasets=new T,this.options=e,this.library_select=new d.a.Select.View({onchange:function(e){t.datasets.config.set("library_id",e)}}),this.dataset_list=new M.View({name:"dataset",optional:e.optional,multiple:e.multiple,onchange:function(){t.trigger("change")}}),this.libraries.on("reset",(function(){var e=[];t.libraries.each((function(t){e.push({value:t.id,label:t.get("name")})})),t.library_select.update({data:e})})),this.datasets.on("reset",(function(){var e=[];null!==t.library_select.text()&&t.datasets.each((function(t){"file"===t.get("type")&&e.push({value:t.id,label:t.get("name")})})),t.dataset_list.update({data:e})})),this.on("change",(function(){e.onchange&&e.onchange(t.value())})),this.setElement(this._template()),this.$(".library-select").append(this.library_select.$el),this.$el.append(this.dataset_list.$el),this.libraries.fetch({reset:!0,success:function(){t.library_select.trigger("change"),void 0!==t.options.value&&t.value(t.options.value)}})},value:function(e){return this.dataset_list.value(e)},_template:function(){return'<div class="ui-select-library">\n                    <div class="library-select mb-2"/>\n                </div>'}})},D={View:l.a.View.extend({initialize:function(e){var t=this;this.ftpfile_list=new M.View({name:"file",optional:e.optional,multiple:e.multiple,onchange:function(){e.onchange&&e.onchange(t.value())}}),this.setElement(this.ftpfile_list.$el),u.a.get({url:"".concat(Object(x.getAppRoot)(),"api/remote_files"),success:function(e){var n=[];for(var a in e)n.push({value:e[a].path,label:e[a].path});t.ftpfile_list.update(n)}})},value:function(e){return this.ftpfile_list.value(e)}})},C=n(10),j=n.n(C),Y=n(11),O=n(41),A=n(72),I={data:function(){return{}},computed:{mapping:function(){return this.inputRules?this.inputRules.mapping:[]},rules:function(){return this.inputRules?this.inputRules.rules:[]},columnData:function(){var e=[];return{colHeadersPerRule:e,columns:A.a.applyRules([],[],[],this.rules,e).columns}},colHeaders:function(){var e=this.columnData.columns;return A.a.colHeadersFor([],e)}},props:{inputRules:{required:!1,type:Object}},components:{RuleDisplayPreview:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"rule"},[n("span",{staticClass:"rule-display"},[e._v(e._s(e.title)+"\n            ")]),e._v(" "),e.rule.warn?n("span",{staticClass:"rule-warning"},[e._v("\n                "+e._s(e.rule.warn)+"\n            ")]):e._e(),e._v(" "),e.rule.error?n("span",{staticClass:"rule-error"},[n("span",{staticClass:"alert-message"},[e._v(e._s(e.rule.error))])]):e._e()])},staticRenderFns:[],props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!1}},computed:{title:function(){var e=this.rule.type;return A.a.RULES[e].display(this.rule,this.colHeaders)}},methods:{}},IdentifierDisplayPreview:{render:function(){var e=this.$createElement;return(this._self._c||e)("li",{staticClass:"rule",attrs:{title:this.help}},[this._v("\n        Set "+this._s(this.columnsLabel)+" as "+this._s(this.typeDisplay)+"\n      ")])},staticRenderFns:[],props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},computed:{typeDisplay:function(){return A.a.MAPPING_TARGETS[this.type].label},help:function(){return A.a.MAPPING_TARGETS[this.type].help||""},columnsLabel:function(){return A.a.columnDisplay(this.columns,this.colHeaders)}}}}},E=n(6),H=Object(E.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ol",{staticClass:"rules"},[e._l(e.rules,(function(t,a){return n("rule-display-preview",{key:a,attrs:{rule:t,index:a,"col-headers":e.columnData.colHeadersPerRule[a]}})})),e._v(" "),e._l(e.mapping,(function(t,a){return n("identifier-display-preview",e._b({key:t.type,attrs:{index:a,"col-headers":e.colHeaders}},"identifier-display-preview",t,!1))}))],2)])}),[],!1,null,null,null).exports,$={View:l.a.View.extend({initialize:function(e){var t=this;this.model=new l.a.Model,this.target=e.target;var n=this;this.browse_button=new d.a.Button({title:_()("Edit"),icon:"fa fa-edit",tooltip:_()("Edit Rules"),onclick:function(){n.target?n._fetcCollectionAndEdit():n._showRuleEditor(null)}}),this.on("change",(function(){e.onchange&&e.onchange(t.value())})),this.setElement(this._template(e)),this.$(".ui-rules-edit-button").append(this.browse_button.$el);var a=Y.default.extend(H),i=document.createElement("div");this.$(".ui-rules-preview").append(i),this.instance=new a({propsData:{initialRules:{rules:[],mapping:[]}}}),this.instance.$mount(i),this.collapsible_disabled=!0},_fetcCollectionAndEdit:function(){var e=this,t="".concat(Object(x.getAppRoot)(),"api/dataset_collections/").concat(this.target.id,"?instance_type=history");j.a.get(t).then((function(t){return e._showCollection(t)})).catch(this._renderFetchError)},_showCollection:function(e){var t=e.data;this._showRuleEditor(t)},_showRuleEditor:function(e){var t=this,n={saveRulesFn:function(e){return t._handleRulesSave(e)},initialRules:this._value};O.a.ruleBasedCollectionCreatorModal(e,"collection_contents","collections",n).done((function(){}))},_handleRulesSave:function(e){this._setValue(e)},_renderFetchError:function(e){console.log(e),console.log("problem fetching collection")},_template:function(e){return'\n            <div class="ui-rules-edit clearfix">\n                <span class="ui-rules-preview" />\n                <span class="ui-rules-edit-button float-left" />\n            </div>\n        '},value:function(e){if(void 0===e)return this._getValue();this._setValue(e)},update:function(e){this.target=e.target},_getValue:function(){return this._value},_setValue:function(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this._value=e,this.model.trigger("error",null),this.trigger("change"),this.instance.inputRules=e)},validate:function(){var e=this._value,t=null;if(e&&0!==e.rules.length)if(0===e.mapping.length)t="No collection identifiers defined, specify at least one collection identifier.";else{var n=!0,a=!1,i=void 0;try{for(var o,s=e.rules[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){if(o.value.error){t="One or more rules in error.";break}}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}else t="No rules defined, define at least one rule.";return t}})};function P(e){return"0".concat(parseInt(e).toString(16)).slice(-2)}var R=l.a.View.extend({colors:{standard:["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],base:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],theme:[["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada"],["d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5"],["bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f"],["a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09"],["7f7f7e","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"]]},initialize:function(e){this.options=u.a.merge(e,{}),this.setElement(this._template()),this.$panel=this.$(".ui-color-picker-panel"),this.$view=this.$(".ui-color-picker-view"),this.$value=this.$(".ui-color-picker-value"),this.$header=this.$(".ui-color-picker-header"),this._build(),this.visible=!1,this.value(this.options.value),this.$boxes=this.$(".ui-color-picker-box");var t=this;this.$boxes.on("click",(function(){t.value(i()(this).css("background-color")),t.$header.trigger("click")})),this.$header.on("click",(function(){t.visible=!t.visible,t.visible?t.$view.fadeIn("fast"):t.$view.fadeOut("fast")}))},value:function(e){return null!=e&&(this.$value.css("background-color",e),this.$(".ui-color-picker-box").empty(),this.$(this._getValue()).html(this._templateCheck()),this.options.onchange&&this.options.onchange(e)),this._getValue()},_getValue:function(){var e=this.$value.css("background-color");return(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?"#".concat(P(e[1])).concat(P(e[2])).concat(P(e[3])):null},_build:function(){for(var e in this._content({colors:this.colors.base}),this.colors.theme){var t={};0==e?t.bottom=!0:e!=this.colors.theme.length-1?(t.top=!0,t.bottom=!0):t.top=!0,t.colors=this.colors.theme[e],this._content(t)}this._content({colors:this.colors.standard})},_content:function(e){var t=e.colors,n=i()(this._templateContent()),a=n.find(".line");for(var o in this.$panel.append(n),t){var s=i()(this._templateBox(t[o]));e.top&&(s.css("border-top","none"),s.css("border-top-left-radius","0px"),s.css("border-top-right-radius","0px")),e.bottom&&(s.css("border-bottom","none"),s.css("border-bottom-left-radius","0px"),s.css("border-bottom-right-radius","0px")),a.append(s)}return n},_templateCheck:function(){return'<div class="ui-color-picker-check fa fa-check"/>'},_templateContent:function(){return'<div class="ui-color-picker-content"><div class="line"/></div>'},_templateBox:function(e){return'<div id="'.concat(e,'" class="ui-color-picker-box" style="background-color: #').concat(e,';"/>')},_template:function(){return'\n            <div class="ui-color-picker">\n                <div class="ui-color-picker-header">\n                    <div class="ui-color-picker-value"/>\n                    <div class="ui-color-picker-label">Select a color</div>\n                </div>\n                <div class="ui-color-picker-view ui-input">\n                    <div class="ui-color-picker-panel"/>\n                </div>\n            </div>\n            '}}),N=n(36),z=l.a.View.extend({constructor:function(e){var t=this,n=Object(m.a)();this.model=e&&e.model||new l.a.Model(e),this.button_dialog=new N.a.Button({icon:"fa-folder-open-o",tooltip:"Browse Datasets",cls:"btn btn-secondary float-left mr-2",onclick:function(){n.data.dialog((function(e){t.model.set("value",e),t.model.get("onchange")&&t.model.get("onchange")(e)}),{multiple:Boolean(t.model.get("multiple"))})}}),this.$info=i()("<input disabled/>").addClass("ui-input float-left"),this.setElement(i()("<div/>").addClass("d-flex").append(this.button_dialog.$el).append(this.$info)),this.listenTo(this.model,"change",this.render,this),this.render()},value:function(e){return void 0!==e&&this.model.set("value",e),this.model.get("value")},render:function(){this.$el.attr("id",this.model.id);var e=this.model.get("value");return e&&this.model.get("multiple")&&(e=e.join(", ")),this.$info.val(e||"Empty"),this}}),F=l.a.Model.extend({types:{text:"_fieldText",password:"_fieldText",select:"_fieldSelect",data_column:"_fieldSelect",genomebuild:"_fieldSelect",data:"_fieldData",data_collection:"_fieldData",integer:"_fieldSlider",float:"_fieldSlider",boolean:"_fieldBoolean",drill_down:"_fieldDrilldown",color:"_fieldColor",group_tag:"_fieldSelect",hidden:"_fieldHidden",hidden_data:"_fieldHidden",baseurl:"_fieldHidden",library_data:"_fieldLibrary",ftpfile:"_fieldFtp",upload:"_fieldUpload",rules:"_fieldRulesEdit",data_dialog:"_fieldDialog"},create:function(e){var t=Object(m.a)(),n=this.types[e.type],a="function"==typeof this[n]?this[n].call(this,e):null;return a||(a=e.options?this._fieldSelect(e):this._fieldText(e),t.emit.debug("form-parameters::_addRow()","Auto matched field type (".concat(e.type,")."))),void 0===e.value&&(e.value=null),a.value(e.value),a},_fieldData:function(e){return new k.View({id:"field-".concat(e.id),extensions:e.extensions,optional:e.optional,multiple:e.multiple,type:e.type,flavor:e.flavor,data:e.options,onchange:e.onchange})},_fieldSelect:function(e){if(e.is_workflow)return this._fieldText(e);"data_column"==e.type&&(e.error_text="Missing columns in referenced dataset.");var t={checkboxes:d.a.Checkbox,radio:d.a.Radio,radiobutton:d.a.RadioButton}[e.display]||d.a.Select,n=Object(m.a)(),a=!0;return"workflow"==e.flavor&&(-1==n.config.select_type_workflow_threshold?a=!1:0==n.config.select_type_workflow_threshold?a=!0:n.config.select_type_workflow_threshold<e.options.length&&(a=!1)),new d.a.TextSelect({id:"field-".concat(e.id),data:e.data,options:e.options,display:e.display,error_text:e.error_text||"No options available",readonly:e.readonly,multiple:e.multiple,optional:e.optional,onchange:e.onchange,individual:e.individual,searchable:a,textable:e.textable,SelectClass:t})},_fieldDrilldown:function(e){return e.is_workflow?this._fieldText(e):new d.a.Drilldown.View({id:"field-".concat(e.id),data:e.options,display:e.display,optional:e.optional,onchange:e.onchange})},_fieldText:function(e){if("SelectTagParameter"===e.model_class||e.options&&e.data)if(e.area=e.multiple,u.a.isEmpty(e.value))e.value=null;else if(i.a.isArray(e.value)){var t="";for(var n in e.value){if(t+=String(e.value[n]),!e.multiple)break;t+="\n"}e.value=t}return new d.a.Input({id:"field-".concat(e.id),type:e.type,area:e.area,readonly:e.readonly,placeholder:e.placeholder,datalist:e.datalist,onchange:e.onchange})},_fieldSlider:function(e){return new d.a.Slider.View({id:"field-".concat(e.id),precise:"float"==e.type,is_workflow:e.is_workflow,min:e.min,max:e.max,onchange:e.onchange})},_fieldHidden:function(e){return new d.a.Hidden({id:"field-".concat(e.id),info:e.info})},_fieldBoolean:function(e){return new d.a.RadioButton.View({id:"field-".concat(e.id),data:[{label:"Yes",value:"true"},{label:"No",value:"false"}],onchange:e.onchange})},_fieldColor:function(e){return new R({id:"field-".concat(e.id),onchange:e.onchange})},_fieldDialog:function(e){return new z({id:"field-".concat(e.id),multiple:e.multiple,onchange:e.onchange})},_fieldLibrary:function(e){return new S.View({id:"field-".concat(e.id),optional:e.optional,multiple:e.multiple,onchange:e.onchange})},_fieldFtp:function(e){return new D.View({id:"field-".concat(e.id),optional:e.optional,multiple:e.multiple,onchange:e.onchange})},_fieldRulesEdit:function(e){return new $.View({id:"field-".concat(e.id),onchange:e.onchange,target:e.target})},_fieldUpload:function(e){return new d.a.Upload({id:"field-".concat(e.id),onchange:e.onchange})}}),V=l.a.View.extend({initialize:function(e,t){this.app=e,this.inputs=t.inputs,this.parameters=new F,this.setElement(i()("<div/>")),this.render()},render:function(){var e=this;this.$el.empty(),s.a.each(this.inputs,(function(t){e.add(t)}))},add:function(e){var t=i.a.extend({},e);switch(t.id=u.a.uid(),this.app.input_list[t.id]=t,t.type){case"conditional":this._addConditional(t);break;case"repeat":this._addRepeat(t);break;case"section":this._addSection(t);break;default:this._addRow(t)}},_addConditional:function(e){var t=this;e.test_param.id=e.id,e.test_param.textable=!1,this.app.model.get("sustain_conditionals")&&(e.test_param.disabled=!0);var n=this._addRow(e.test_param);if(n.model){for(var a in e.cases){var i=new V(this.app,{inputs:e.cases[a].inputs});this._append(i.$el.addClass("ui-portlet-section pl-2"),"".concat(e.id,"-section-").concat(a))}n.model.set("onchange",(function(n){var a=t.app.data.matchCase(e,n);for(var i in e.cases){var o=e.cases[i],s=t.$("#".concat(e.id,"-section-").concat(i)),r=!1;for(var l in o.inputs)if(!o.inputs[l].hidden){r=!0;break}i==a&&r?s.fadeIn("fast"):s.hide()}t.app.trigger("change")})),n.trigger("change")}},_addRepeat:function(e){var t=this,n=0,a=new h.a.View({title:e.title||"Repeat",min:e.min,max:e.max,onnew:function(){i(e.inputs),t.app.trigger("change")}});function i(i){var o="".concat(e.id,"-section-").concat(n++),s=new V(t.app,{inputs:i});a.add({id:o,$el:s.$el,ondel:function(){a.del(o),t.app.trigger("change")}})}for(var o=s.a.size(e.cache),r=0;r<Math.max(Math.max(o,e.min||0),e.default||0);r++)i(r<o?e.cache[r]:e.inputs);this.app.model.get("sustain_repeats")&&a.hideOptions();var l=new p(this.app,{label:e.title||e.name,help:e.help,field:a});this._append(l.$el,e.id)},_addSection:function(e){var t=new c.a.View({title:e.title||e.name,cls:"ui-portlet-section",collapsible:!0,collapsible_button:!0,collapsed:!e.expanded});t.append(new V(this.app,{inputs:e.inputs}).$el),t.append(i()("<div/>").addClass("form-text text-muted").html(e.help)),this.app.on("expand",(function(e){t.$("#".concat(e)).length>0&&t.expand()})),this._append(t.$el,e.id)},_addRow:function(e){var t=this,n=e.id;e.onchange=e.onchange||function(){t.app.trigger("change",n)};var a=this.parameters.create(e);this.app.field_list[n]=a;var i=new p(this.app,{name:e.name,label:e.hide_label?"":e.label||e.name,value:e.value,text_value:e.text_value,collapsible_value:e.collapsible_value,collapsible_preview:e.collapsible_preview,connectable:e.connectable,help:e.help,argument:e.argument,disabled:e.disabled,color:e.color,style:e.style,backdrop:e.backdrop,hidden:e.hidden,fixed:e.fixed,field:a});return this.app.element_list[n]=i,this._append(i.$el,e.id),a},_append:function(e,t){this.$el.append(e.addClass("section-row").attr("id",t))}}),U={View:V},W=n(79);t.a=l.a.View.extend({initialize:function(e){this.model=new l.a.Model({initial_errors:!1,cls:"ui-portlet",icon:null,always_refresh:!0,status:"warning",hide_operations:!1,onchange:function(){}}).set(e),this.setElement("<div/>"),this.render()},update:function(e){var t=this;this.data.matchModel(e,(function(e,n){var a=t.field_list[n];a.update&&(a.update(e),a.trigger("change"),Object(m.a)().emit.debug("form-view::update()","Updating input: ".concat(n)))}))},wait:function(e){for(var t in this.input_list){var n=this.field_list[t];this.input_list[t].is_dynamic&&n.wait&&n.unwait&&n[e?"wait":"unwait"]()}},highlight:function(e,t,n){var a=this.element_list[e];if(a&&(a.error(t||"Please verify this parameter."),this.portlet.expand(),this.trigger("expand",e),!n)){var o=this.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(i()(this).css("overflow"))})).first();o.animate({scrollTop:o.scrollTop()+a.$el.offset().top-o.position().top-120},500)}},errors:function(e){if(this.trigger("reset"),e&&e.errors){var t=this.data.matchResponse(e.errors);for(var n in this.element_list)t[n]&&this.highlight(n,t[n],!0)}},render:function(){var e=this;this.off("change"),this.off("reset"),this.field_list={},this.input_list={},this.element_list={},this.data=new W.a.Manager(this),this._renderForm(),this.data.create(),this.model.get("initial_errors")&&this.errors(this.model.attributes);var t=this.data.checksum();return this.on("change",(function(n){var a=e.input_list[n];if(!a||a.refresh_on_change||e.model.get("always_refresh")){var i=e.data.checksum();i!=t&&(t=i,e.model.get("onchange")())}})),this.on("reset",(function(){s.a.each(e.element_list,(function(e){e.reset()}))})),this},_renderForm:function(){i()(".tooltip").remove();var e=this.model.attributes;this.message=new d.a.UnescapedMessage,this.section=new U.View(this,{inputs:e.inputs}),this.portlet=new c.a.View({icon:e.icon,title:e.title,title_id:e.title_id,operations:!e.hide_operations&&e.operations,cls:e.cls,buttons:e.buttons,collapsible:e.collapsible,collapsed:e.collapsed,onchange_title:e.onchange_title}),this.portlet.append(this.message.$el),this.portlet.append(this.section.$el),this.$el.empty(),e.inputs&&this.$el.append(this.portlet.$el),e.message&&this.message.update({persistent:!0,status:e.status,message:e.message}),Object(m.a)().emit.debug("form-view::initialize()","Completed")}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));var a=n(89);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.text="",e.text&&e.text.startsWith("#")&&(e.text=e.text.replace("#","name:")),Object.assign(this,e),Object.defineProperty(this,"style",{enumerable:!0,get:function(){if(this.text.startsWith("name:")){var e=Object(a.a)(this.text),t={"background-color":e.primary,color:e.contrasting,"border-color":e.darker};return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join(";")}return""}}),Object.defineProperty(this,"label",{enumerable:!0,get:function(){return this.text.startsWith("name:")?this.text.replace("name:","#"):this.text}}),Object.defineProperty(this,"valid",{enumerable:!1,get:function(){return!!this.text.length&&"name:"!=this.text}})}function s(e){var t={};switch(i(e)){case"string":t={text:e};break;case"object":t=Object.assign({},e)}return new o(t)}o.prototype.equals=function(e){return this.text==e.text},o.prototype.toString=function(){return this.text};var r=function(e,t){var n=e.map(s),a=t.map(s);return n.filter((function(e){return!a.some((function(t){return t.equals(e)}))}))}},function(e,t,n){"use strict";n(207),n(434),n(250);var a=n(61);n.p="".concat(Object(a.a)().replace(/\/+$/,""),"/static/dist/");var i=n(1031),o=n(456),s=n(52),r=n(5),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Galaxy";return Object(r.b)((function(n){var a=new n(e.options,e.bootstrapped);return a.debug("".concat(t," app")),a}))},c=n(45),d=function(){return null},u=function(e){return Object.keys(e).filter((function(t){return"function"==typeof e[t]})).reduce((function(e,t){return e[t]=d,e}),{})};function h(e){"Galaxy"!=e&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="window.".concat(e),i=(o=e,1==f()[o]?console:u(console));var o;Object.defineProperty(window,e,{enumerable:!0,configurable:!1,get:function(){var n=void 0;i.groupCollapsed("".concat(a," read")),i.trace();try{n=t?t():window._monitorStorage[e],i.log(n)}catch(e){i.warn("Unable to retrieve"),i.warn(e)}return i.groupEnd(),n},set:function(t){i.groupCollapsed("".concat(a," write..."),String(t)),i.trace();try{n?n(t):window._monitorStorage[e]=t}catch(e){i.log("Unable to set value on window facade"),i.warn(e)}i.groupEnd()}})}(e)}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=f();return t?n[e]=!0:e in n&&delete n[e],function(e){sessionStorage.setItem("global_monitors",JSON.stringify(e))}(n),n}function m(){var e=f();console.log(e)}function f(){var e=sessionStorage.getItem("global_monitors");return e?JSON.parse(e):{}}function _(){var e=Object.keys(f());console.groupCollapsed("monitor init"),console.log("The following global properties are monitored because they were setup in the javascript source manually:",e),console.log("To toggle messages on/off, type toggleGlobalMonitor('Galaxy', true|false) into the console"),console.log("You can set up any other variable by typing installMonitor('a window variable name')"),console.groupEnd(),e.forEach(h),window.installMonitor=h,window.showMonitorToggles=m,window.toggleGlobalMonitor=p}window._monitorStorage=window._monitorStorage||{};var g=n(177),v=n.n(g),y=function(e,t){if(console.log("initSentry"),t.sentry){var n=t.sentry,a=n.sentry_dsn_public,i=n.email;v.a.config(a).install(),i&&v.a.setUser({email:i})}},b=n(0),w=n.n(b);function k(){console.log("initTooltips"),w.a.fn.tooltip&&(w()(".unified-panel-header [title]").tooltip({placement:"bottom"}),w()("[title]").tooltip())}function M(){console.log("adjustIframeLinks"),w()("a").click((function(){var e=w()(this),t=window.parent.frames&&window.parent.frames.galaxy_main;if("galaxy_main"==e.attr("target")&&!t){var n=e.attr("href");-1==n.indexOf("?")?n+="?":n+="&",n+="use_panels=True",e.attr("href",n),e.attr("target","_self")}return e}))}function x(){console.log("addIframeClass"),window.self!==window.top&&(console.log(">>> We are in an iframe"),document.body.classList.add("framed"))}var L=n(87),T=n(66),S=n(8);function D(e){console.log("onloadWebhooks"),e.config.enable_webhooks&&T.a.load({type:"onload",callback:function(e){e.each((function(e){var t=e.toJSON();t.activate&&t.script&&S.a.appendScriptStyle(t)}))}})}function C(e,t,n){console.log("replace_big_select_inputs"),w.a.fn.select2?(void 0===e&&(e=20),void 0===t&&(t=3e3),(n=n||w()("select")).each((function(){var n,a,i=w()(this).not("[multiple]"),o=i.find("option").length;o<e||o>t||(i.hasClass("no-autocomplete")||(n=i,a={placeholder:"Click to select",closeOnSelect:!w()(n).is("[MULTIPLE]"),dropdownAutoWidth:!0,containerCssClass:"select2-minwidth"},n.select2(a)))}))):console.warn("No select 2")}var j=n(29),Y=n(147);function O(e){console.log("initTours"),Y.a.activeGalaxyTourRunner(),e.giveTourWithData=Y.a.giveTourWithData}var A=n(37);function I(e){console.log("initModals"),e.modal||(e.modal=new A.a.View)}var E=n(4);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Galaxy",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;Object(c.d)(_,y,x,M,I,k,L.a,(function(){return C(20,1500)}),j.a,O,D);var n=E.config$.pipe(Object(o.a)((function(n){return t(n,e)})));Object(i.a)(E.config$,n,c.c).subscribe((function(t){var n=H(t,3),a=n[0],i=n[1],o=n[2];console.groupCollapsed("runInitializations",e,Object(s.a)()),o.forEach((function(e){return e(i,a)})),Object(c.b)(),console.groupEnd()}))}var P={name:"production configs"};n.d(t,"d",(function(){return $})),n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return E.getAppRoot})),n.d(t,"c",(function(){return a.a})),console.log("Configs:",P.name,P)},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(51),d=n(17),u=n(7),h=n(93),p=n(37),m=n(2),f=n.n(m),_=n(11),g=n(5),v=(n(179),s.a),y=l.a.View.extend(u.a.LoggableMixin).extend({_logNamespace:"collections",tagName:"li",className:"collection-element",initialize:function(e){this.element=e.element||{},this.selected=e.selected||!1},render:function(){this.dragStartHandler=i.a.bind(this._dragstart,this),this.dragEndHandler=i.a.bind(this._dragend,this);var e=this.$el.attr("data-element-id",this.element.id).attr("draggable",!0).html(this.template({element:this.element})).get(0);return e.addEventListener("dragstart",this.dragStartHandler,!1),e.addEventListener("dragend",this.dragEndHandler,!1),this.selected&&this.$el.addClass("selected"),this},template:i.a.template(['<a class="name" title="',f()("Click to rename"),'" href="javascript:void(0)" role="button">',"<%- element.name %>","</a>",'<button class="discard btn btn-sm" title="',f()("Remove this dataset from the list"),'">',f()("Discard"),"</button>"].join("")),select:function(e){this.$el.toggleClass("selected",e),this.trigger("select",{source:this,selected:this.$el.hasClass("selected")})},discard:function(){var e=this,t=this.$el.parent().width();this.$el.animate({"margin-right":t},"fast",(function(){e.trigger("discard",{source:e}),e.destroy()}))},destroy:function(){this.off(),this.$el.remove()},events:{click:"_click","click .name":"_clickName","click .discard":"_clickDiscard",dragover:"_sendToParent",drop:"_sendToParent"},_click:function(e){e.stopPropagation(),this.select(e)},_clickName:function(e){e.stopPropagation(),e.preventDefault();var t=prompt("".concat(f()("Enter a new name for the element"),":"),this.element.name);t&&(this.element.name=t,this.render())},_clickDiscard:function(e){e.stopPropagation(),this.discard()},_dragstart:function(e){e.originalEvent&&(e=e.originalEvent),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify(this.element)),this.$el.addClass("dragging"),this.$el.parent().trigger("collection-element.dragstart",[this])},_dragend:function(e){this.$el.removeClass("dragging"),this.$el.parent().trigger("collection-element.dragend",[this])},_sendToParent:function(e){this.$el.parent().trigger(e)},toString:function(){return"DatasetCollectionElementView()"}}),b=l.a.View.extend(u.a.LoggableMixin).extend(h.a.CollectionCreatorMixin).extend({_logNamespace:"collections",elementViewClass:y,collectionClass:c.a.HistoryDatasetCollection,className:"list-collection-creator collection-creator flex-row-container",minElements:1,defaultAttributes:{creationFn:function(){throw new TypeError("no creation fn for creator")},oncreate:function(){},oncancel:function(){},autoscrollDist:24,highlightClr:"rgba( 64, 255, 255, 1.0 )"},footerSettings:{".hide-originals":"hideOriginals"},initialize:function(e){this.metric("ListCollectionCreator.initialize",e);var t=this;i.a.each(this.defaultAttributes,(function(n,a){n=e[a]||n,t[a]=n})),t.initialElements=e.elements||[],this._setUpCommonSettings(e),this._instanceSetUp(),this._elementsSetUp(),this._setUpBehaviors()},_instanceSetUp:function(){this.selectedIds={},this.$dragging=null,this.blocking=!1},_elementsSetUp:function(){this.invalidElements=[],this.workingElements=[],this.elementViews=[],this.workingElements=this.initialElements.slice(0),this._ensureElementIds(),this._validateElements(),this._mangleDuplicateNames(),this._sortElements()},_ensureElementIds:function(){return this.workingElements.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=i.a.uniqueId())})),this.workingElements},_validateElements:function(){var e=this;return e.invalidElements=[],this.workingElements=this.workingElements.filter((function(t){var n=e._isElementInvalid(t);return n&&e.invalidElements.push({element:t,text:n}),!n})),this.workingElements},_isElementInvalid:function(e){return"dataset_collection"===e.history_content_type?f()("is a collection, this is not allowed"):e.state===d.a.OK||i.a.contains(d.a.NOT_READY_STATES,e.state)?e.deleted||e.purged?f()("has been deleted or purged"):null:f()("has errored, is paused, or is not accessible")},_mangleDuplicateNames:function(){var e=1,t={};this.workingElements.forEach((function(n){for(var a=n.name;Object.prototype.hasOwnProperty.call(t,a);)if(a="".concat(n.name," (").concat(e,")"),(e+=1)>=900)throw new Error("Safety hit in while loop - thats impressive");n.name=a,t[n.name]=!0}))},_sortElements:function(e){},render:function(e,t){return this.workingElements.length<this.minElements?this._renderInvalid(e,t):(this.$el.empty().html(this.templates.main()),this._renderHeader(e),this._renderMiddle(e),this._renderFooter(e),this._addPluginComponents(),this.$(".collection-name").focus(),this.trigger("rendered",this),this)},_renderInvalid:function(e,t){return this.$el.empty().html(this.templates.invalidInitial({problems:this.invalidElements,elements:this.workingElements})),"function"==typeof this.oncancel&&this.$(".cancel-create.btn").show(),this.trigger("rendered",this),this},_renderHeader:function(e,t){var n=this.$(".header").empty().html(this.templates.header()).find(".help-content").prepend(v(this.templates.helpContent()));return this.invalidElements.length&&this._invalidElementsAlert(),n},_renderMiddle:function(e,t){var n=this.$(".middle").empty().html(this.templates.middle());return this._renderList(e),n},_addPluginComponents:function(){this.$(".help-content i").hoverhighlight(".collection-creator",this.highlightClr)},_invalidElementsAlert:function(){this._showAlert(this.templates.invalidElements({problems:this.invalidElements}),"alert-warning")},_disableNameAndCreate:function(e){(e=!!i.a.isUndefined(e)||e)&&(this.$(".collection-name").prop("disabled",!0),this.$(".create-collection").toggleClass("disabled",!0))},$list:function(){return this.$(".collection-elements")},_renderClearSelected:function(){i.a.size(this.selectedIds)?this.$(".collection-elements-controls > .clear-selected").show():this.$(".collection-elements-controls > .clear-selected").hide()},_renderList:function(e,t){var n=this,a=s()("<div/>"),o=n.$list();i.a.each(this.elementViews,(function(e){e.destroy(),n.removeElementView(e)})),n.workingElements.forEach((function(e){var t=n._createElementView(e);a.append(t.$el)})),n._renderClearSelected(),o.empty().append(a.children()),i.a.invoke(n.elementViews,"render"),o.height()>o.css("max-height")?o.css("border-width","1px 0px 1px 0px"):o.css("border-width","0px")},_createElementView:function(e){var t=new this.elementViewClass({element:e,selected:i.a.has(this.selectedIds,e.id)});return this.elementViews.push(t),this._listenToElementView(t),t},_listenToElementView:function(e){var t=this;t.listenTo(e,{select:function(e){var n=e.source.element;e.selected?t.selectedIds[n.id]=!0:delete t.selectedIds[n.id],t.trigger("elements:select",e)},discard:function(e){t.trigger("elements:discard",e)}})},addElementView:function(e){},removeElementView:function(e){delete this.selectedIds[e.element.id],this._renderClearSelected(),this.elementViews=i.a.without(this.elementViews,e),this.stopListening(e)},_renderNoElementsLeft:function(){this._disableNameAndCreate(!0),this.$(".collection-elements").append(this.templates.noElementsLeft())},_elementToJSON:function(e){return e},createList:function(e){if(!this.workingElements.length){var t="".concat(f()("No valid elements for final list"),". ");return t+='<a class="cancel-create" href="javascript:void(0);" role="button">'.concat(f()("Cancel"),"</a> "),t+=f()("or"),t+=' <a class="reset" href="javascript:void(0);" role="button">'.concat(f()("start over"),"</a>."),void this._showAlert(t)}var n=this,a=this.workingElements.map((function(e){return n._elementToJSON(e)}));return n.blocking=!0,n.creationFn(a,e,n.hideOriginals).always((function(){n.blocking=!1})).fail((function(e,t,a){n.trigger("error",{xhr:e,status:t,message:f()("An error occurred while creating this collection")})})).done((function(e,t,a){n.trigger("collection:created",e,t,a),n.metric("collection:created",e),"function"==typeof n.oncreate&&n.oncreate.call(this,e,t,a)}))},_setUpBehaviors:function(){return this.on("error",this._errorHandler),this.once("rendered",(function(){this.trigger("rendered:initial",this)})),this.on("elements:select",(function(e){this._renderClearSelected()})),this.on("elements:discard",(function(e){var t=e.source.element;this.removeElementView(e.source),this.workingElements=i.a.without(this.workingElements,t),this.workingElements.length||this._renderNoElementsLeft()})),this},_errorHandler:function(e){this.error(e);var t=e.message||f()("An error occurred");if(e.xhr){var n=e.xhr,a=e.message;0===n.readyState&&0===n.status?t+=": ".concat(f()("Galaxy could not be reached and may be updating.")).concat(f()(" Try again in a few minutes.")):n.responseJSON?t+=":<br /><pre>".concat(JSON.stringify(n.responseJSON),"</pre>"):t+=": ".concat(a)}this._showAlert(t,"alert-danger")},events:{"click .more-help":"_clickMoreHelp","click .less-help":"_clickLessHelp","click .main-help":"_toggleHelp","click .header .alert button":"_hideAlert","click .reset":"reset","click .clear-selected":"clearSelectedElements","click .collection-elements":"clearSelectedElements","dragover .collection-elements":"_dragoverElements","drop .collection-elements":"_dropElements","collection-element.dragstart .collection-elements":"_elementDragstart","collection-element.dragend   .collection-elements":"_elementDragend","change .collection-name":"_changeName","keydown .collection-name":"_nameCheckForEnter","change .hide-originals":"_changeHideOriginals","click .cancel-create":"_cancelCreate","click .create-collection":"_clickCreate"},reset:function(){this._instanceSetUp(),this._elementsSetUp(),this.render()},clearSelectedElements:function(e){this.$(".collection-elements .collection-element").removeClass("selected"),this.$(".collection-elements-controls > .clear-selected").hide()},_dragoverElements:function(e){e.preventDefault();var t=this.$list();this._checkForAutoscroll(t,e.originalEvent.clientY);var n=this._getNearestElement(e.originalEvent.clientY);this.$(".element-drop-placeholder").remove();var a=v('<div class="element-drop-placeholder"></div>');n.length?n.before(a):t.append(a)},_checkForAutoscroll:function(e,t){var n=e.offset(),a=e.scrollTop(),i=t-n.top,o=n.top+e.outerHeight()-t;i>=0&&i<this.autoscrollDist?e.scrollTop(a-2):o>=0&&o<this.autoscrollDist&&e.scrollTop(a+2)},_getNearestElement:function(e){for(var t=this.$(".collection-elements li.collection-element").toArray(),n=0;n<t.length;n++){var a=v(t[n]),i=a.offset().top,o=Math.floor(a.outerHeight()/2)+4;if(i+o>e&&i-o<e)return a}return v()},_dropElements:function(e){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),e.dataTransfer.dropEffect="move";var t=this._getNearestElement(e.clientY);return t.length?this.$dragging.insertBefore(t):this.$dragging.insertAfter(this.$(".collection-elements .collection-element").last()),this._syncOrderToDom(),!1},_syncOrderToDom:function(){var e=this,t=[];this.$(".collection-elements .collection-element").each((function(){var n=v(this).attr("data-element-id"),a=i.a.findWhere(e.workingElements,{id:n});a?t.push(a):console.error("missing element: ",n)})),this.workingElements=t,this._renderList()},_elementDragstart:function(e,t){t.select(!0),this.$dragging=this.$(".collection-elements .collection-element.selected")},_elementDragend:function(e,t){v(".element-drop-placeholder").remove(),this.$dragging=null},templates:i.a.extend({},h.a.CollectionCreatorMixin._creatorTemplates,{header:i.a.template(['<div class="main-help well clear">','<a class="more-help" href="javascript:void(0);" role="button">',f()("More help"),"</a>",'<div class="help-content">','<a class="less-help" href="javascript:void(0);" role="button">',f()("Less"),"</a>","</div>","</div>",'<div class="alert alert-dismissable">','<button type="button" class="close" data-dismiss="alert" ','title="',f()("Close and show more help"),'" aria-hidden="true">&times;</button>','<span class="alert-message"></span>',"</div>"].join("")),middle:i.a.template(['<div class="collection-elements-controls">','<a class="reset" href="javascript:void(0);" role="button" ','title="',f()("Undo all reordering and discards"),'">',f()("Start over"),"</a>",'<a class="clear-selected" href="javascript:void(0);" role="button" ','title="',f()("De-select all selected datasets"),'">',f()("Clear selected"),"</a>","</div>",'<div class="collection-elements scroll-container flex-row">',"</div>"].join("")),footer:i.a.template(['<div class="attributes clear">','<div class="clear">','<label class="setting-prompt float-right">',f()("Hide original elements"),"?",'<input class="hide-originals float-right" type="checkbox" />',"</label>","</div>",'<div class="clear">','<input class="collection-name form-control float-right" ','placeholder="',f()("Enter a name for your new collection"),'" />','<div class="collection-name-prompt float-right">',f()("Name"),":</div>","</div>","</div>",'<div class="actions clear vertically-spaced">','<div class="other-options float-left">','<button class="cancel-create btn" tabindex="-1">',f()("Cancel"),"</button>",'<div class="create-other btn-group dropup">','<button class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">',f()("Create a different kind of collection"),' <span class="caret"></span>',"</button>",'<div class="dropdown-menu" role="menu">','<a class="dropdown-item" href="javascript:void(0)" role="button">',f()("Create a <i>single</i> pair"),"</a>",'<a class="dropdown-item" href="javascript:void(0)" role="button">',f()("Create a list of <i>unpaired</i> datasets"),"</a>","</div>","</div>","</div>",'<div class="main-options float-right">','<button class="create-collection btn btn-primary">',f()("Create list"),"</button>","</div>","</div>"].join("")),helpContent:i.a.template(["<p>",f()(["Collections of datasets are permanent, ordered lists of datasets that can be passed to tools and ","workflows in order to have analyses done on each member of the entire group. This interface allows ","you to create a collection and re-order the final collection."].join("")),"</p>","<ul>","<li>",f()(["Rename elements in the list by clicking on ",'<i data-target=".collection-element .name">the existing name</i>.'].join("")),"</li>","<li>",f()(["Discard elements from the final created list by clicking on the ",'<i data-target=".collection-element .discard">"Discard"</i> button.'].join("")),"</li>","<li>",f()(["Reorder the list by clicking and dragging elements. Select multiple elements by clicking on ",'<i data-target=".collection-element">them</i> and you can then move those selected by dragging the ',"entire group. Deselect them by clicking them again or by clicking the ",'the <i data-target=".clear-selected">"Clear selected"</i> link.'].join("")),"</li>","<li>",f()(['Click the <i data-target=".reset">"Start over"</i> link to begin again as if you had just opened ',"the interface."].join("")),"</li>","<li>",f()(['Click the <i data-target=".cancel-create">"Cancel"</i> button to exit the interface.'].join("")),"</li>","</ul><br />","<p>",f()(['Once your collection is complete, enter a <i data-target=".collection-name">name</i> and ','click <i data-target=".create-collection">"Create list"</i>.'].join("")),"</p>"].join("")),invalidElements:i.a.template([f()("The following selections could not be included due to problems:"),"<ul><% _.each( problems, function( problem ){ %>","<li><b><%- problem.element.name %></b>: <%- problem.text %></li>","<% }); %></ul>"].join("")),noElementsLeft:i.a.template(['<li class="no-elements-left-message">',f()("No elements left! "),f()("Would you like to "),'<a class="reset" href="javascript:void(0)" role="button">',f()("start over"),"</a>?","</li>"].join("")),invalidInitial:i.a.template(['<div class="header flex-row no-flex">','<div class="alert alert-warning" style="display: block">','<span class="alert-message">',"<% if( _.size( problems ) ){ %>",f()("The following selections could not be included due to problems"),":","<ul><% _.each( problems, function( problem ){ %>","<li><b><%- problem.element.name %></b>: <%- problem.text %></li>","<% }); %></ul>","<% } else if( _.size( elements ) < 1 ){ %>",f()("No datasets were selected"),".","<% } %>","<br />",f()("At least one element is needed for the collection"),". ",f()("You may need to "),'<a class="cancel-create" href="javascript:void(0)" role="button">',f()("cancel"),"</a> ",f()("and reselect new elements"),".","</span>","</div>","</div>",'<div class="footer flex-row no-flex">','<div class="actions clear vertically-spaced">','<div class="other-options float-left">','<button class="cancel-create btn" tabindex="-1">',f()("Cancel"),"</button>","</div>","</div>","</div>"].join(""))}),toString:function(){return"ListCollectionCreator"}}),w=function(e){var t=s.a.Deferred(),n=Object(g.a)().modal||new p.a.View,a=i.a.defaults(e||{},{oncancel:function(){n.hide(),t.reject("cancelled")},oncreate:function(e,a){n.hide(),t.resolve(a)}});return{deferred:t,creatorOptions:a,showEl:function(t){n.show({title:e.title||f()("Create a collection"),body:t,width:"85%",height:"100%",xlarge:!0,closing_events:!0})}}},k=function(e,t,n){t=i.a.defaults(t||{},{elements:e});var a=w(t),o=a.deferred,s=a.creatorOptions,r=a.showEl,l=new n(s);return r(l.$el),l.render(),o},M=function(e,t,a,o){var s;s="datasets"==a?f()("Build Rules for Uploading Datasets"):"collection_contents"==t?f()("Build Rules for Applying to Existing Collection"):"datasets"==t||"library_datasets"==t?f()("Build Rules for Creating Collection(s)"):f()("Build Rules for Uploading Collections"),o=i.a.defaults(o||{},{title:s});var r=w(o),l=r.deferred,c=(r.creatorOptions,r.showEl);return Promise.all([n.e(0),n.e(1),n.e(7),n.e(6)]).then(n.bind(null,470)).then((function(n){var i=_.default.extend(n.default),s=document.createElement("div");return c(s),new i({propsData:{initialElements:e,elementsType:t,importType:a,ftpUploadSite:o.ftpUploadSite,creationFn:o.creationFn,oncancel:o.oncancel,oncreate:o.oncreate,defaultHideSourceItems:o.defaultHideSourceItems,saveRulesFn:o.saveRulesFn,initialRules:o.initialRules}}).$mount(s),l}))},x=function(e,t){return(t=t||{}).title=f()("Create a collection from a list of datasets"),k(e,t,b)};t.a={DatasetCollectionElementView:y,ListCollectionCreator:b,collectionCreatorModal:k,listCollectionCreatorModal:x,createListCollection:function(e,t){var n=e.toJSON(),a=!t;return x(n,{defaultHideSourceItems:t,creationFn:function(t,n,i){return t=t.map((function(e){return{id:e.id,name:e.name,src:"dataset"===e.history_content_type?"hda":"hdca"}})),e.createHDCA(t,"list",n,i,a)}})},createCollectionViaRules:function(e,t){var n,a,i,o=e.selectionType,s=!t;if(o)if(e.elements)a=e.selectionType,i=e.dataType||"collections",n=e.elements;else{var r=RegExp(/[^\s]/),l=e.content.split(/[\n\r]/).filter((function(e){return e.length>0&&r.exec(e)})),c=!1;if(l.length>0)l[0].indexOf("\t")>=0&&(c=!0);var d=c?/\t/:/\s+/;n=l.map((function(e){return e.split(d)})),a=e.selectionType,i=e.dataType||"collections"}else n=e.toJSON(),a="datasets",i="collections";return M(n,a,i,{ftpUploadSite:e.ftpUploadSite,defaultHideSourceItems:t,creationFn:function(t,n,a,i){return e.createHDCA(t,n,a,i,s)}})},ruleBasedCollectionCreatorModal:M}},function(e,t,n){"use strict";t.a=function(e){var t=document.createElement("p");t.textContent=e,t.setAttribute("role","alert"),document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),2e3)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(11),i=n(92),o=n(2),s=n.n(o);a.default.filter("localize",(function(e){return s()(e)}));var r=function(e){return function(t,n){return new(a.default.extend(e))({store:i.a,propsData:t,el:n})}}},function(e,t,n){"use strict";var a=n(1),i=n.n(a);t.a={get:function(e,t){t=t||window.location.search.substr(1);var n=new RegExp("".concat(e,"=([^&#$]+)"),"g"),a=t.match(n);if(a&&a.length)return 1===(a=i.a.map(a,(function(t){return decodeURIComponent(t.substr(e.length+1).replace(/\+/g," "))}))).length?a[0]:a},parse:function(e){if(!e)return{};var t={};return e.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=decodeURI(n[1])})),t}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n(467),i=n(468);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=new a.a([]),r=s.pipe(Object(i.a)((function(e){return e.length>0}))),l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=[].concat(o(s.getValue()),t);s.next(a)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=[].concat(t,o(s.getValue()));s.next(a)},d=function(){return s.next([])}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(28),d=n(5),u=l.a.Model.extend({initialize:function(e){var t=this.get("key");this.set("id",t);var n=s.a.find([{key:"name",label:"Name",type:"text",default_value:""},{key:"color",label:"Color",type:"color",default_value:null},{key:"min_value",label:"Min Value",type:"float",default_value:null},{key:"max_value",label:"Max Value",type:"float",default_value:null},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:32,hidden:!0},{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"block_color",label:"Block color",type:"color",default_value:null},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"reverse_strand_color",label:"Antisense strand color",type:"color",default_value:null},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0}],(function(e){return e.key===t}));n&&this.set(s.a.extend({},n,e)),void 0===this.get("value")&&void 0!==this.get("default_value")&&(this.set_value(this.get("default_value")),this.get("value")||"color"!==this.get("type")||this.set("value",c.a.get_random_color()))},set_value:function(e,t){var n=this.get("type");"float"===n?e=parseFloat(e):"int"===n&&(e=parseInt(e,10)),this.set({value:e},t)}}),h=l.a.Collection.extend({model:u,to_key_value_dict:function(){var e={};return this.each((function(t){e[t.get("key")]=t.get("value")})),e},get_value:function(e){var t=this.get(e);if(t)return t.get("value")},set_value:function(e,t,n){var a=this.get(e);if(a)return a.set_value(t,n)},set_default_value:function(e,t){var n=this.get(e);if(n)return n.set("default_value",t)}},{from_models_and_saved_values:function(e,t){return t&&(e=s.a.map(e,(function(e){return s.a.extend({},e,{value:t[e.key]})}))),new h(e)}}),p=l.a.View.extend({className:"config-settings-view",render:function(){var e=this.$el;return this.collection.each((function(t,n){if(!t.get("hidden")){var a,o="param_".concat(n),r=t.get("type"),l=t.get("value"),d=i()("<div class='form-row' />").appendTo(e);if(d.append(i()("<label />").attr("for",o).text("".concat(t.get("label"),":"))),"bool"===r)d.append(i()('<input type="checkbox" />').attr("id",o).attr("name",o).attr("checked",l));else if("text"===r)d.append(i()('<input type="text"/>').attr("id",o).val(l).click((function(){i()(this).select()})));else if("select"===r){var u=i()("<select />").attr("id",o);s.a.each(t.get("options"),(function(e){i()("<option/>").text(e.label).attr("value",e.value).appendTo(u)})),u.val(l),d.append(u)}else if("color"===r){var h=i()("<div/>").appendTo(d),p=i()("<input />").attr("id",o).attr("name",o).val(l).css("float","left").appendTo(h).click((function(e){i()(".tooltip").removeClass("in");var t=i()(this).siblings(".tooltip").addClass("in");t.css({left:i()(this).position().left+i()(this).width()+5,top:i()(this).position().top-i()(t).height()/2+i()(this).height()/2}).show(),t.click((function(e){e.stopPropagation()})),i()(document).bind("click.color-picker",(function(){t.hide(),i()(document).unbind("click.color-picker")})),e.stopPropagation()})),m=i()("<a href='javascript:void(0)'/>").addClass("icon-button arrow-circle").appendTo(h).attr("title","Set new random color").tooltip(),f=i()("<div class='tooltip right' style='position: absolute;' />").appendTo(h).hide(),_=i()("<div class='tooltip-inner' style='text-align: inherit'></div>").appendTo(f);i()("<div class='tooltip-arrow'></div>").appendTo(f);var g=i.a.farbtastic(_,{width:100,height:100,callback:p,color:l});h.append(i()("<div/>").css("clear","both")),a=g,m.click((function(){a.setColor(c.a.get_random_color())}))}else d.append(i()("<input />").attr("id",o).attr("name",o).val(l));t.help&&d.append(i()("<div class='help'/>").text(t.help))}})),this},render_in_modal:function(e){var t=this,n=Object(d.a)(),a=function(){n.modal.hide(),i()(window).unbind("keypress.check_enter_esc")},o=function(){n.modal.hide(),i()(window).unbind("keypress.check_enter_esc"),t.update_from_form()};i()(window).bind("keypress.check_enter_esc",(function(e){27===(e.keyCode||e.which)?a():13===(e.keyCode||e.which)&&o()})),0===this.$el.children().length&&this.render(),n.modal.show({title:e||"Configure",body:this.$el,buttons:{Cancel:a,OK:o}})},update_from_form:function(){var e=this;this.collection.each((function(t,n){if(!t.get("hidden")){var a="param_".concat(n),i=e.$el.find("#".concat(a)).val();"bool"===t.get("type")&&(i=e.$el.find("#".concat(a)).is(":checked")),t.set_value(i)}}))}});t.a={ConfigSetting:u,ConfigSettingCollection:h,ConfigSettingCollectionView:p}},,function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(2),l=n.n(r),c=n(5),d=l()("Please contact a Galaxy administrator if the problem persists."),u=l()("An error occurred while updating information with the server."),h=l()("The following information can assist the developers in finding the source of the error:");function p(e,t,n){if(e){var a=Object(c.a)();if(e=l()(e),t=l()(t)||l()("Error:"),a&&a.modal)return function(e,t,n){var a=Object(c.a)();return a.modal.show({title:t,body:e,closing_events:!0,buttons:{Ok:function(){a.modal.hide()}}}),a.modal.$el.addClass("error-modal"),n&&(a.modal.$(".error-details").add(a.modal.$('button:contains("Details")')).remove(),s()("<div/>").addClass("error-details").hide().appendTo(a.modal.$(".modal-content")).append([s()("<p/>").text(h),s()("<pre/>").text(JSON.stringify(n,null,"  "))]),s()('<button id="button-1" class="float-left">'.concat(l()("Details"),"</button>")).appendTo(a.modal.$(".buttons")).click((function(){a.modal.$(".error-details").toggle()}))),a.modal}(e,t,n);alert("".concat(t,"\n\n").concat(e)),console.log("error details:",JSON.stringify(n))}}t.a={errorModal:p,offlineErrorModal:function(){return p(l()("You appear to be offline. Please check your connection and try again."),l()("Offline?"))},badGatewayErrorModal:function(){return p("".concat(l()("Galaxy is currently unreachable. Please try again in a few minutes.")," ").concat(d),l()("Cannot connect to Galaxy"))},ajaxErrorModal:function(e,t,n,a,o){return a=a||u,p(a+=" ".concat(d),o=o||l()("An error occurred"),function(e,t,n){var a=Object(c.a)();return{raven:i.a.result(window.Raven,"lastEventId"),userAgent:navigator.userAgent,onLine:navigator.onLine,version:i.a.result(a.config,"version_major"),xhr:i.a.omit(t,i.a.functions(t)),options:i.a.omit(n,"xhr"),url:i.a.result(a.lastAjax,"url"),data:i.a.result(a.lastAjax,"data"),model:i.a.result(e,"toJSON","".concat(e)),user:i.a.omit(i.a.result(a.user,"toJSON"),"email")}}(e,t,n))}}},,function(e,t,n){"use strict";var a=n(3),i=n.n(a),o=n(1),s=n.n(o),r=n(0),l=n.n(r),c=n(5),d=n(8),u=i.a.Model.extend({defaults:{url_base:"",title_id:void 0,async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},add_filter:function(e,t,n){if(n){var a,i=this.attributes.filters[e];if(null==i)a=t;else if("string"==typeof i)if("All"==i||i==t)a=t;else{var o=[];o[0]=i,o[1]=t,a=o}else-1===(a=i).indexOf(t)&&a.push(t);this.attributes.filters[e]=a}else this.attributes.filters[e]=t},remove_filter:function(e,t){var n=this.attributes.filters[e];if(null==n)return!1;if("string"==typeof n)this.attributes.filters[e]="";else{var a=s.a.indexOf(n,t);-1!==a&&(n[a]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return s.a.each(s.a.pairs(this.attributes.filters),(function(t){e["f-".concat(t[0])]=t[1]})),e},get_url:function(e){return"".concat(this.get("url_base"),"?").concat(l.a.param(this.get_url_data()),"&").concat(l.a.param(e))}}),h={grid:function(e){var t;return t=e.embedded?this.grid_header(e)+this.grid_table(e):'\n                <div class="loading-elt-overlay"></div>\n                <table class="grid-table">\n                    <tr>\n                        <td width="75%">'.concat(this.grid_header(e),'</td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td width="100%" id="grid-message" valign="top"></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </table>\n                ').concat(this.grid_table(e),"\n            "),e.info_text&&(t+='<br><div class="toolParamHelp" style="clear: both;">'.concat(e.info_text,"</div>")),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(!e.embedded){var n="";e.title_id&&(n+=' id="'.concat(e.title_id,'"')),t+="<h2".concat(n,">").concat(e.title,"</h2>")}if(e.global_actions){t+='<ul class="manage-table-actions">';var a=e.global_actions.length>=3;a&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var i=!0,o=!1,s=void 0;try{for(var r,l=e.global_actions[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var c=r.value;t+='<li><a class="action-button use-target" target="'.concat(c.target,'" href="').concat(c.url_args,'" onclick="return false;" >').concat(c.label,"</a></li>")}}catch(e){o=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}a&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");var n=!0,a=!1,i=void 0;try{for(var o,s=e.columns[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;r.visible&&(t+='<th id="'.concat(r.key,'-header">'),r.sortable?t+='<a href="javascript:void(0)" class="sort-link" sort_key="'.concat(r.key,'">').concat(r.label,"</a>"):t+=r.label,t+='<span class="sort-arrow">'.concat(r.extra,"</span></th>"))}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t+="</tr>"},body:function(e){var t="";0===e.items.length&&(t+='<tr><td colspan="100"><em>No Items</em></td></tr>');var n=!0,a=!1,i=void 0;try{for(var o,s=e.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;t+="<tr ",e.current_item_id==r.id&&(t+='class="current"'),t+=">",e.show_item_checkboxes&&(t+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(r.encode_id,'" id="').concat(r.encode_id,'" class="grid-row-select-checkbox" /></td>'));var c=!0,d=!1,u=void 0;try{for(var h,p=e.columns[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var m=h.value;if(m.visible){var f="";m.nowrap&&(f='style="white-space:nowrap;"');var _=r.column_config[m.label],g=_.link,v=_.value,y=_.target;"string"===l.a.type(v)&&(v=v.replace(/\/\//g,"/"));var b="";m.attach_popup&&(b="grid-".concat(r.encode_id,"-popup")),t+="<td ".concat(f,">"),m.delayed?t+='<div class="delayed-value-'.concat(m.key,'" data-id="').concat(r.encode_id,'" data-value="').concat(v,'"><span class="fa fa-spinner fa-spin"></span></div>'):m.attach_popup&&g?t+='<div class="btn-group">\n                                    <button class="btn btn-secondary use-target" target="'.concat(y,'" href="').concat(g,'" onclick="return false;">').concat(v,'</button>\n                                    <button id="').concat(b,'" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"/>\n                                </div>'):m.attach_popup?t+='<button id="'.concat(b,'" class="btn dropdown-toggle" data-toggle="dropdown">').concat(v,"</button>"):t+=g?'<a class="use-target" target="'.concat(y,'" href="').concat(g,'" onclick="return false;">').concat(v,"</a>"):"<label>".concat(v||"","</label>"),t+="</td>"}}}catch(e){d=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}t+="</tr>"}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,a=e.cur_page_num,i=e.num_pages,o=n/2,s=a-o,r=0;s<=0&&(r=o-(a-(s=1)));var l,c=o+r,d=a+c;0!==(l=d<=i?0:c-((d=i)+1-a))&&(s-=l)<1&&(s=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',s>1&&(t+='<span class="page-link-grid" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var u=s;u<d+1;u++)u==e.cur_page_num?t+='<span class="page-link-grid inactive-link" id="page-link-'.concat(u,'">').concat(u,"</span>"):t+='<span class="page-link-grid" id="page-link-'.concat(u,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(u,'">').concat(u,"</a></span>");d<i&&(t+='...<span class="page-link-grid" id="page-link-'.concat(i,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(i,'">').concat(i,"</a></span>")),t+="</span>",t+='\n                    <span class="page-link-grid" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var h=!0,p=!1,m=void 0;try{for(var f,_=e.operations[Symbol.iterator]();!(h=(f=_.next()).done);h=!0){var g=f.value;g.allow_multiple&&(t+='<input type="button" value="'.concat(g.label,'" class="operation-button action-button">&nbsp;'))}}catch(e){p=!0,m=e}finally{try{h||null==_.return||_.return()}finally{if(p)throw m}}t+="</td></tr>"}var v=!1,y=!0,b=!1,w=void 0;try{for(var k,M=e.operations[Symbol.iterator]();!(y=(k=M.next()).done);y=!0){if(k.value.global_operation){v=!0;break}}}catch(e){b=!0,w=e}finally{try{y||null==M.return||M.return()}finally{if(b)throw w}}if(v){t+='<tr><td colspan="100">';var x=!0,L=!1,T=void 0;try{for(var S,D=e.operations[Symbol.iterator]();!(x=(S=D.next()).done);x=!0){var C=S.value;C.global_operation&&(t+='<a class="action-button" href="'.concat(C.global_operation,'">').concat(C.label,"</a>"))}}catch(e){L=!0,T=e}finally{try{x||null==D.return||D.return()}finally{if(L)throw T}}t+="</td></tr>"}return e.legend&&(t+='<tr><td colspan="100">'.concat(e.legend,"</td></tr>")),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),'<p><div class="'.concat(t,'message transient-message">').concat(s.a.escape(e.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,a="none";e.advanced_search&&(a="block");var i=!1,o=!0,s=!1,r=void 0;try{for(var l,c=e.columns[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;if("advanced"==d.filterable){var u=d.key,h=n[u],p=t[u];h&&p&&h!=p&&(a="block"),i=!0}}}catch(e){s=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw r}}var m="block";"block"==a&&(m="none");var f='<div id="standard-search" style="display: '.concat(m,';"><table><tr><td style="padding: 0;"><table>'),_=!0,g=!1,v=void 0;try{for(var y,b=e.columns[Symbol.iterator]();!(_=(y=b.next()).done);_=!0){var w=y.value;"standard"==w.filterable&&(f+=this.grid_column_filter(e,w))}}catch(e){g=!0,v=e}finally{try{_||null==b.return||b.return()}finally{if(g)throw v}}f+="</table></td></tr><tr><td>",i&&(f+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),f+="</td></tr></table></div>",f+='<div id="advanced-search" style="display: '.concat(a,'; margin-top: 5px;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var k=!0,M=!1,x=void 0;try{for(var L,T=e.columns[Symbol.iterator]();!(k=(L=T.next()).done);k=!0){var S=L.value;"advanced"==S.filterable&&(f+=this.grid_column_filter(e,S))}}catch(e){M=!0,x=e}finally{try{k||null==T.return||T.return()}finally{if(M)throw x}}return f+="</table></div>"},grid_column_filter:function(e,t){var n=e.filters,a=t.label,i=t.key;"advanced"==t.filterable&&(a=a.toLowerCase());var o="<tr>";if("advanced"==t.filterable&&(o+='<td align="left" style="padding-left: 10px">'.concat(a,":</td>")),o+='<td style="padding-bottom: 1px;">',t.is_text){o+='<form class="text-filter-form" column_key="'.concat(i,'" action="').concat(e.url,'" method="get" >');var s=!0,r=!1,c=void 0;try{for(var d,u=e.columns[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var h=d.value,p=n[h.key];p&&"All"!=p&&(h.is_text&&(p=JSON.stringify(p)),o+='<input type="hidden" id="'.concat(h.key,'" name="f-').concat(h.key,'" value="').concat(p,'"/>'))}}catch(e){r=!0,c=e}finally{try{s||null==u.return||u.return()}finally{if(r)throw c}}o+='<span id="'.concat(i,'-filtering-criteria">');var m=n[i];if(m){var f=l.a.type(m);if("string"==f&&"All"!=m&&(o+=this.filter_element(i,m)),"array"==f)for(var _ in m){m.slice(_),o+=this.filter_element(i,m[_])}}o+="</span>";var g="",v=20;"standard"==t.filterable&&((g=t.label.toLowerCase()).length<20&&(v=g.length),v+=4),o+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(i,'-filter" name="f-').concat(i,'" type="text" placeholder="').concat(g,'" size="').concat(v,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{o+='<span id="'.concat(i,'-filtering-criteria">');var y=!1;for(var b in e.categorical_filters[i]){var w=e.categorical_filters[i][b],k="",M="";for(var x in w)k=x,M=w[x];y&&(o+=" | "),y=!0;var L=n[i];L&&w[i]&&L==M?o+='<span class="categorical-filter '.concat(i,'-filter current-filter">').concat(b,"</span>"):o+='<span class="categorical-filter '.concat(i,'-filter"><a href="javascript:void(0);" filter_key="').concat(k,'" filter_val="').concat(M,'">').concat(b,"</a></span>")}o+="</span>"}return o+="</td></tr>"},filter_element:function(e,t){return t=d.a.sanitize(t),'<span class="text-filter-val">'.concat(t,'<a href="javascript:void(0);" filter_key="').concat(e,'" filter_val="').concat(t,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}},p=n(111),m=n(105),f=n(87),_=n(92),g=n(211),v=n.n(g);l.a.ajaxSettings.traditional=!0;t.a=i.a.View.extend({grid:null,initialize:function(e){this.grid=new u,this.title=e.title,this.active_tab=e.active_tab;var t=this;if(_.a.watch((function(e){return e.gridSearch.searchTags}),(function(e){var n=Array.from(e);t.grid.add_filter("tags",n,!1),t.openAdvancedSearch(),t.render_filter_button("tags",n),t.go_page_one(),t.execute()})),e.url_base&&!e.items){m.a.markViewAsLoading(this);var n=e.url_data||{};s.a.each(e.filters,(function(e,t){n["f-".concat(t)]=e})),l.a.ajax({url:"".concat(e.url_base,"?").concat(l.a.param(n)),success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.setElement("<div>"),this.init_grid(e);e.use_panels&&l()("#center").css({padding:"10px",overflow:"auto"})},openAdvancedSearch:function(){l()("#advanced-search").is(":visible")||(l()("#standard-search").slideToggle("fast"),l()("#advanced-search").slideToggle("fast"))},handle_refresh:function(e){if(e&&l.a.inArray("history",e)>-1){var t=Object(c.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.loadCurrentHistory()}},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&d.a.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^/]+/,""),this.grid.set("url_base",n),this.$el.html(h.grid(t)),this.$el.addClass(this.getRootClassName(e)),this.$el.find("#grid-table-header").html(h.header(t)),this.$el.find("#grid-table-body").html(h.body(t)),this.$el.find("#grid-table-footer").html(h.footer(t)),t.message){this.$el.find("#grid-message").html(h.message(t));var a=this;t.use_hide_message&&window.setTimeout((function(){a.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(f.a)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){l()(this).off(),l()(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){l()(this).off(),l()(this).click((function(){l()(this).select()})).keyup((function(){l()(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){l()(this).off(),l()(this).click((function(){return e.set_sort_condition(l()(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){l()(this).off(),l()(this).submit((function(){var t=l()(this).attr("column_key"),n=l()("#input-".concat(t,"-filter")),a=n.val();return n.val(""),e.add_filter_condition(t,a),!1}))})),this.$el.find(".text-filter-val > a").each((function(){l()(this).off(),l()(this).click((function(){return l()(this).parent().remove(),e.remove_filter_condition(l()(this).attr("filter_key"),l()(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){l()(this).off(),l()(this).click((function(){return e.set_categorical_filter(l()(this).attr("filter_key"),l()(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){l()(this).off(),l()(this).click((function(){return e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=l()(this).find("input.grid-row-select-checkbox"),t=l()(this).find("span.grid-selected-count"),n=function(){t.text(l()(e).filter(":checked").length)};l()(e).each((function(){l()(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link-grid > a").each((function(){l()(this).click((function(){return t.set_page(l()(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){l()(this).click((function(){return t.execute({href:l()(this).attr("href"),target:l()(this).attr("target")}),!1}))})),0!==e.items.length&&s.a.each(e.items,(function(n,a){var i=t.$("#grid-".concat(n.encode_id,"-popup")).off(),o=new p.a(i);s.a.each(e.operations,(function(e){t.add_operation(o,e,n)}))}))},add_operation:function(e,t,n){var a=this,i=n.operation_config[t.label];i.allowed&&t.allow_popup&&e.addItem({html:t.label,href:i.url_args,target:i.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var i=l()(e.target).html();t.onclick?t.onclick(n.encode_id):a.execute(this.findItemByHtml(i))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0),this.render_filter_button(e,t),this.go_page_one(),this.execute()},render_filter_button:function(e,t){var n=l()(h.filter_element(e,t)),a=this;n.click((function(){l()(this).remove(),a.remove_filter_condition(e,t)})),this.$el.find("#".concat(e,"-filtering-criteria")).append(n)},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),"tags"==e&&_.a.dispatch("removeSearchTag",{text:t}),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n="-".concat(e)),this.$el.find(".sort-arrow").remove();var a="-"==n.substring(0,1)?"&uarr;":"&darr;",i=l()("<span>".concat(a,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(e,"-header")).append(i),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],a=this.grid.get("filters")[e],i=this;this.$el.find(".".concat(e,"-filter")).each((function(){var o=l.a.trim(l()(this).text()),s=n[o][e];if(s==t)l()(this).empty(),l()(this).addClass("current-filter"),l()(this).append(o);else if(s==a){l()(this).empty();var r=l()('<a href="javascript:void(0)" role="button">'.concat(o,"</a>"));r.click((function(){i.set_categorical_filter(e,s)})),l()(this).removeClass("current-filter"),l()(this).append(r)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,a=l()(this).attr("id"),i=parseInt(a.split("-")[2],10),o=t.grid.get("cur_page");if(i===e)n=l()(this).children().text(),l()(this).empty(),l()(this).addClass("inactive-link"),l()(this).text(n);else if(i===o){n=l()(this).text(),l()(this).empty(),l()(this).removeClass("inactive-link");var s=l()('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));s.click((function(){t.set_page(i)})),l()(this).append(s)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=l()(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var a=s.a.findWhere(this.grid.attributes.operations,{label:n});a&&!t&&(t=a.confirm||"");var i=[];this.$el.find("input[name=id]:checked").each((function(){i.push(l()(this).val())}));var o={operation:n,id:i,confirmation_text:t};return"top"!=a.target&&"center"!=a.target||(o=s.a.extend(o,{href:a.href,target:a.target})),this.execute(o),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");s.a.each(e,(function(e){l()(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,a=null,i=null,o=null;if(e&&(n=e.href,a=e.operation,t=e.id,i=e.confirmation_text,o=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var s=n.split("?");if(s.length>1)for(var r=s[1].split("&"),c=0;c<r.length;c++)-1!=r[c].indexOf("operation")?a=(a=r[c].split("=")[1]).replace(/\+/g," "):-1!=r[c].indexOf("id")&&(t=r[c].split("=")[1])}return a&&t?!(i&&""!==i&&"None"!=i&&"null"!=i&&!window.confirm(i))&&(a=a.toLowerCase(),this.grid.set({operation:a,item_ids:t}),"top"==o?window.top.location="".concat(n,"?").concat(l.a.param(this.grid.get_url_data())):"center"==o?l()("#galaxy_main").attr("src","".concat(n,"?").concat(l.a.param(this.grid.get_url_data()))):this.update_grid(),!1):n?(this.go_to(o,n),!1):(this.update_grid(),!1)},go_to:function(e,t){var n=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",n),t||(t="".concat(this.grid.get("url_base"),"?").concat(l.a.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0}),e){case"center":l()("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;l.a.ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),a=t.grid.get("insert"),i=t.$el.find("#advanced-search").is(":visible"),o=e;o.embedded=n,o.insert=a,o.advanced_search=i,t.init_grid(o),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})},getRootClassName:function(e){var t=e.title,n=void 0===t?"grid":t;return v()(n).toLowerCase()}})},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(106),u=n(7),h=n(8),p={defaults:{model_class:"DatasetCollectionElement",element_identifier:null,element_index:null,element_type:null},_mergeObject:function(e){var t=e.object,n=this.elementId;return t&&(n=e.object.id,delete e.object.id),i.a.extend(e,e.object,{element_id:n}),delete e.object,e},constructor:function(e,t){e=this._mergeObject(e),this.idAttribute="element_id",l.a.Model.apply(this,arguments)},parse:function(e,t){var n=e;return n=this._mergeObject(n)}},m=l.a.Model.extend(u.a.LoggableMixin).extend(p).extend({_logNamespace:"collections"}),f=l.a.Collection.extend(u.a.LoggableMixin).extend({_logNamespace:"collections",model:m,toString:function(){return["DatasetCollectionElementCollection(",this.length,")"].join("")}}),_=d.a.DatasetAssociation.extend(u.a.mixin(p,{url:function(){if(!this.has("history_id"))return console.warn("no endpoint for non-hdas within a collection yet"),"".concat(Object(c.getAppRoot)(),"api/datasets");var e=this._getDatasetId();return"".concat(Object(c.getAppRoot)(),"api/histories/").concat(this.get("history_id"),"/contents/").concat(e)},_getDatasetId:function(){return this.get("element_id")},defaults:i.a.extend({},d.a.DatasetAssociation.prototype.defaults,p.defaults),_downloadQueryParameters:function(){var e=this.get("file_ext")||"data",t=this.get("element_identifier"),n=this.get("parent_hdca_id");return"?to_ext=".concat(e,"&hdca_id=").concat(n,"&element_identifier=").concat(t)},constructor:function(e,t){this.debug("\t DatasetDCE.constructor:",e,t),p.constructor.call(this,e,t)},hasDetails:function(){return this.elements&&this.elements.length},toString:function(){var e=this.get("element_identifier");return"DatasetDCE(".concat(e,")")}})),g=f.extend({model:_,toString:function(){return["DatasetDCECollection(",this.length,")"].join("")}}),v=l.a.Model.extend(u.a.LoggableMixin).extend(u.a.SearchableModelMixin).extend({_logNamespace:"collections",defaults:{collection_type:null,deleted:!1},collectionClass:function(){return this.attributes.collection_type.indexOf(":")>0?b:g},initialize:function(e,t){this.debug("".concat(this,"(DatasetCollection).initialize:"),e,t,this),this.elements=this._createElementsModel(),this.on("change:elements",(function(){this.log("change:elements"),this.elements=this._createElementsModel()}))},_createElementsModel:function(){var e=this.collectionClass();this.debug("".concat(this,"._createElementsModel"),e,this.get("elements"),this.elements);var t=this.get("elements")||[];this.unset("elements",{silent:!0});var n=this.get("parent_hdca_id")||this.get("id");return i.a.each(t,(function(e,t){i.a.extend(e,{parent_hdca_id:n})})),this.elements=new e(t),this.elements},toJSON:function(){var e=l.a.Model.prototype.toJSON.call(this);return this.elements&&(e.elements=this.elements.toJSON()),e},inReadyState:function(){var e=this.get("populated");return this.isDeletedOrPurged()||e},hasDetails:function(){return 0!==this.elements.length},getVisibleContents:function(e){return this.elements},parse:function(e,t){var n=l.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},delete:function(e,t,n){return e=e||!1,t=t||!1,this.get("deleted")?s.a.when():(n=h.a.merge(n,{method:"delete"}),this.save({deleted:!0,recursive:e,purge:t},n))},undelete:function(e){return this.get("deleted")?this.save({deleted:!1},e):s.a.when()},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},searchAttributes:["name","tags"],toString:function(){var e=[this.get("id"),this.get("name")||this.get("element_identifier")];return"DatasetCollection(".concat(e.join(","),")")}}),y=v.extend(u.a.mixin(p,{constructor:function(e,t){this.debug("\t NestedDCDCE.constructor:",e,t),p.constructor.call(this,e,t)},toString:function(){return["NestedDCDCE(",this.object?"".concat(this.object):this.get("element_identifier"),")"].join("")}})),b=f.extend({model:y,toString:function(){return["NestedDCDCECollection(",this.length,")"].join("")}}),w={DatasetCollection:v},k=n(138).a.HistoryContentMixin,M=w.DatasetCollection,x=M.extend(k).extend({defaults:i.a.extend(i.a.clone(M.prototype.defaults),{history_content_type:"dataset_collection",model_class:"HistoryDatasetCollectionAssociation"}),save:function(e,t){return this.isNew()&&((t=t||{}).url="".concat(this.urlRoot+this.get("history_id"),"/contents"),(e=e||{}).type="dataset_collection"),M.prototype.save.call(this,e,t)},toString:function(){return"History".concat(M.prototype.toString.call(this))}});t.a={HistoryDatasetCollection:x}},function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return new URL(e).pathname}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";var a,i,o,s=n(1),r=n.n(s),l=n(0),c=n.n(l),d=n(33),u=n(58),h=n(7),p=n(2),m=n.n(p),f=d.a.extend({className:"".concat(d.a.prototype.className," dataset-collection"),id:function(){return["dataset_collection",this.model.get("id")].join("-")},initialize:function(e){this.linkTarget=e.linkTarget||"_blank",this.hasUser=e.hasUser,d.a.prototype.initialize.call(this,e)},_setUpListeners:function(){d.a.prototype._setUpListeners.call(this),this.listenTo(this.model,"change",(function(e,t){r.a.has(e.changed,"deleted")?this.render():r.a.has(e.changed,"element_count")&&this.$("> .title-bar .subtitle").replaceWith(this._renderSubtitle())}))},_renderSubtitle:function(){return c()(this.templates.subtitle(this.model.toJSON(),this))},_getFoldoutPanelOptions:function(){var e=d.a.prototype._getFoldoutPanelOptions.call(this);return r.a.extend(e,{linkTarget:this.linkTarget,hasUser:this.hasUser})},$selector:function(){return this.$("> .selector")},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCListItemView(".concat(e,")")}});f.prototype.templates=(a=r.a.extend({},d.a.prototype.templates.warnings,{error:h.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',m()("There was an error getting the data for this collection"),": <%- model.error %>","</div>","<% } %>"]),purged:h.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',m()("This collection has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:h.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',m()("This collection has been deleted"),"</div>","<% } %>"])}),i=h.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection"),o=h.a.wrapTemplate(['<div class="subtitle">','<% var countText = collection.element_count? ( collection.element_count + " " ) : ""; %>','<%        if( collection.collection_type === "list" ){ %>',m()("a list of <%- countText %>datasets"),'<% } else if( collection.collection_type === "paired" ){ %>',m()("a pair of datasets"),'<% } else if( collection.collection_type === "list:paired" ){ %>',m()("a list of <%- countText %>dataset pairs"),'<% } else if( collection.collection_type === "list:list" ){ %>',m()("a list of <%- countText %>dataset lists"),"<% } %>","</div>"],"collection"),r.a.extend({},d.a.prototype.templates,{warnings:a,titleBar:i,subtitle:o}));var _=d.b.extend({className:"".concat(d.b.prototype.className," dataset-collection-element"),initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DCEListItemView.initialize:",e),d.b.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCEListItemView(".concat(e,")")}});_.prototype.templates=function(){var e=h.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return r.a.extend({},d.b.prototype.templates,{titleBar:e})}();var g=u.a.extend({className:"".concat(u.a.prototype.className," dataset-collection-element"),initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("DatasetDCEListItemView.initialize:",e),u.a.prototype.initialize.call(this,e)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):c.a.when()},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemView(".concat(e,")")}});g.prototype.templates=function(){var e=h.a.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return r.a.extend({},u.a.prototype.templates,{titleBar:e})}();var v=f.extend({className:"".concat(f.prototype.className," dataset-collection-element"),_swapNewRender:function(e){f.prototype._swapNewRender.call(this,e);var t=this.model.get("state")||"ok";return this.$el.addClass("state-".concat(t)),this.$el},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemView(".concat(e,")")}});t.a={DCListItemView:f,DCEListItemView:_,DatasetDCEListItemView:g,NestedDCDCEListItemView:v}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y}));var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(5),d=n(4),u=n(85),h=n(140),p=n(8),m=n(7),f=n(2),_=n.n(f),g=l.a.Model.extend(m.a.LoggableMixin).extend(m.a.mixin(m.a.SearchableModelMixin,{_logNamespace:"history",UPDATE_DELAY:4e3,defaults:{model_class:"History",id:null,name:"Unnamed History",state:"new",deleted:!1,contents_active:{},contents_states:{}},contentsClass:u.a,searchAttributes:["name","annotation","tags"],searchAliases:{title:"name",tag:"tags"},initialize:function(e,t){t=t||{},this.logger=t.logger||null,this.log("".concat(this,".initialize:"),e,t),this.urlRoot="".concat(Object(d.getAppRoot)(),"api/histories"),this.contents=new this.contentsClass([],{history:this,historyId:this.get("id"),order:t.order}),this._setUpListeners(),this._setUpCollectionListeners(),this.updateTimeoutId=null},_setUpListeners:function(){return this.on({error:function(e,t,n,a,i){this.clearUpdateTimeout()},"change:id":function(e,t){this.contents&&(this.contents.historyId=t)}})},_setUpCollectionListeners:function(){return this.contents?this.listenTo(this.contents,{error:function(){this.trigger.apply(this,s.a.makeArray(arguments))}}):this},contentsShown:function(){var e=this.get("contents_active"),t=e.active||0;return t+=this.contents.includeDeleted?e.deleted:0,t+=this.contents.includeHidden?e.hidden:0},nice_size:function(){var e=this.get("size");return e?p.a.bytesToString(e,!0,2):_()("(empty)")},toJSON:function(){return i.a.extend(l.a.Model.prototype.toJSON.call(this),{nice_size:this.nice_size()})},get:function(e){return"nice_size"===e?this.nice_size():l.a.Model.prototype.get.apply(this,arguments)},ownedByCurrUser:function(){var e=Object(c.a)();return!(!e||!e.user)&&(!e.user.isAnonymous()&&e.user.id===this.get("user_id"))},numOfUnfinishedJobs:function(){var e=this.get("non_ready_jobs");return e?e.length:0},numOfUnfinishedShownContents:function(){return this.contents.runningAndActive().length||0},_fetchContentRelatedAttributes:function(){return this.fetch({data:s.a.param({keys:["size","non_ready_jobs","contents_active","hid_counter"].join(",")})})},refresh:function(e){var t=this;e=e||{};var n=this.lastUpdateTime;return this.contents.allFetched=!1,(0!==this.contents.currentPage?function(){return t.contents.fetchPage(t.contents.currentPage)}:function(){return t.contents.fetchUpdated(n)})().done((function(n,a,i){var o;try{o=new Date(i.getResponseHeader("Date"))}catch(e){console.error(e)}t.lastUpdateTime=o||new Date,t.checkForUpdates(e)}))},checkForUpdates:function(e){var t=this;e=e||{};var n=this.UPDATE_DELAY;if(this.id){var a=function(){t.clearUpdateTimeout(),t.updateTimeoutId=setTimeout((function(){t.refresh(e)}),n)};this.numOfUnfinishedShownContents()>0?a():this._fetchContentRelatedAttributes().done((function(e){t.numOfUnfinishedJobs()>0?a():t.trigger("ready")}))}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},stopPolling:function(){this.clearUpdateTimeout(),this.contents&&this.contents.stopPolling()},parse:function(e,t){var n=l.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},fetchWithContents:function(e,t){var n=this;return(e=e||{}).view="dev-detailed",this.fetch(e).then((function(e){return n.contents.history=n,n.contents.setHistoryId(e.id),n.fetchContents(t)}))},fetchContents:function(e){return e=e||{},this.lastUpdateTime=new Date,this.contents.fetchCurrentPage(e)},_delete:function(e){return this.get("deleted")?s.a.when():this.save({deleted:!0},e)},purge:function(e){return this.get("purged")?s.a.when():this.save({deleted:!0,purged:!0},e)},undelete:function(e){return this.get("deleted")?this.save({deleted:!1},e):s.a.when()},copy:function(e,t,n){if(e=void 0===e||e,!this.id)throw new Error("You must set the history ID before copying it.");var a={history_id:this.id};e&&(a.current=!0),t&&(a.name=t),n||(a.all_datasets=!1),a.view="dev-detailed";var i=this,o=s.a.post(this.urlRoot,a);return e?o.then((function(e){return new g(e).setAsCurrent().done((function(){i.trigger("copied",i,e)}))})):o.done((function(e){i.trigger("copied",i,e)}))},setAsCurrent:function(){var e=this,t=s.a.getJSON("".concat(Object(d.getAppRoot)(),"history/set_as_current?id=").concat(this.id));return t.done((function(){e.trigger("set-as-current",e)})),t},toString:function(){return"History(".concat(this.get("id"),",").concat(this.get("name"),")")}})),v=h.a.InfinitelyScrollingCollection,y=v.extend(m.a.LoggableMixin).extend({_logNamespace:"history",model:g,order:"update_time",limitOnFirstFetch:10,limitPerFetch:10,initialize:function(e,t){t=t||{},this.log("HistoryCollection.initialize",e,t),this.urlRoot="".concat(Object(d.getAppRoot)(),"api/histories"),v.prototype.initialize.call(this,e,t),this.includeDeleted=t.includeDeleted||!1,this.currentHistoryId=t.currentHistoryId,this.setUpListeners()},url:function(){return this.urlRoot},setUpListeners:function(){return this.on({"change:deleted":function(e){this.debug("change:deleted",this.includeDeleted,e.get("deleted")),!this.includeDeleted&&e.get("deleted")&&this.remove(e)},copied:function(e,t){this.setCurrent(new g(t,[]))},"set-as-current":function(e){var t=this.currentHistoryId;this.trigger("no-longer-current",t),this.currentHistoryId=e.id}})},_buildFetchData:function(e){return i.a.extend(v.prototype._buildFetchData.call(this,e),{view:"dev-detailed"})},_buildFetchFilters:function(e){var t=v.prototype._buildFetchFilters.call(this,e)||{},n={};return!0!==this.includeDeleted?(n.deleted=!1,n.purged=!1):n.deleted=null,i.a.defaults(t,n)},fetchFirst:function(e){var t=this,n=s.a.when();return this.currentHistoryId&&(n=v.prototype.fetchFirst.call(this,{silent:!0,limit:1,filters:{"encoded_id-in":this.currentHistoryId,deleted:null,purged:""}})),n.then((function(){return(e=e||{}).offset=0,t.fetchMore(e)}))},comparators:i.a.extend(i.a.clone(v.prototype.comparators),{name:m.a.buildComparator("name",{ascending:!0}),"name-dsc":m.a.buildComparator("name",{ascending:!1}),size:m.a.buildComparator("size",{ascending:!1}),"size-asc":m.a.buildComparator("size",{ascending:!0})}),sort:function(e){var t=(e=e||{}).silent,n=this.remove(this.get(this.currentHistoryId));return v.prototype.sort.call(this,i.a.defaults({silent:!0},e)),this.unshift(n,{silent:!0}),t||this.trigger("sort",this,e),this},create:function(e,t,n,a){var i=this;return s.a.getJSON("".concat(Object(d.getAppRoot)(),"history/create_new_current")).done((function(e){i.setCurrent(new g(e,[],n||{}))}))},setCurrent:function(e,t){return t=t||{},this.unshift(e,t),this.currentHistoryId=e.get("id"),t.silent||this.trigger("new-current",e,this),this},toString:function(){return"HistoryCollection(".concat(this.length,",current:").concat(this.currentHistoryId,")")}})},,,function(e,t,n){"use strict";var a={props:{classes:{type:String,required:!1,default:null},message:{type:String,required:!0}},computed:{spinnerClasses:function(){return["loading-icon","fa","fa-spinner","fa-spin"].concat(this.classes?this.classes.split(" "):[])}}},i=n(6),o=Object(i.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{class:this.spinnerClasses}),this._v(" "),t("span",{staticClass:"loading-message"},[this._v(this._s(this.message)+"."),t("span",{staticClass:"blinking"},[this._v("..")])])])}),[],!1,null,null,null);t.a=o.exports},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(5),d=n(33),u=n(17),h=n(31),p=n(7),m=n(2),f=n.n(m),_=n(63),g=d.c.ListItemView,v=g.extend({_logNamespace:"dataset",className:"".concat(g.prototype.className," dataset"),id:function(){return["dataset",this.model.get("id")].join("-")},initialize:function(e){e.logger&&(this.logger=this.model.logger=e.logger),this.log("".concat(this,".initialize:"),e),g.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank"},render:function(){var e=g.prototype.render.apply(this,arguments);return this._mountVueNametags(),e},_mountVueNametags:function(){var e=this.$(".nametags")[0],t=this.model.attributes,n=t.id,a=t.model_class,i=t.tags,o="".concat(a,"-").concat(n);Object(_.a)({storeKey:o,tags:i},e)},_setUpListeners:function(){g.prototype._setUpListeners.call(this);var e=this;return e.listenTo(e.model,{change:function(t){e.model.changedAttributes().state&&e.model.inReadyState()&&e.expanded&&!e.model.hasDetails()?e.model.fetch({silent:!0}).done((function(){e.render()})):i.a.has(e.model.changed,"tags")&&2===i.a.keys(e.model.changed).length?e._mountVueNametags():e.render()}})},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):s.a.when()},remove:function(e,t){var n=this;e=e||this.fxSpeed,this.$el.fadeOut(e,(function(){l.a.View.prototype.remove.call(n),t&&t.call(n)}))},_swapNewRender:function(e){return g.prototype._swapNewRender.call(this,e),this.model.has("state")&&this.$el.addClass("state-".concat(this.model.get("state"))),this.$el},_renderPrimaryActions:function(){return[this._renderDisplayButton()]},_renderDisplayButton:function(){var e=this.model.get("state");if(e===u.a.NOT_VIEWABLE||e===u.a.DISCARDED||!this.model.get("accessible"))return null;var t={target:this.linkTarget,classes:"display-btn"};if(this.model.get("purged"))t.disabled=!0,t.title=f()("Cannot display datasets removed from disk");else if(e===u.a.UPLOAD)t.disabled=!0,t.title=f()("This dataset must finish uploading before it can be viewed");else if(e===u.a.NEW)t.disabled=!0,t.title=f()("This dataset is not yet viewable");else{t.title=f()("View data"),t.href=this.model.urls.display;var n=this;t.onclick=function(e){var t=Object(c.a)();t.frame&&t.frame.active&&(t.frame.addDataset(n.model.get("id")),e.preventDefault())}}return t.faIcon="fa-eye",Object(h.a)(t)},_renderDetails:function(){if(this.model.get("state")===u.a.NOT_VIEWABLE)return s()(this.templates.noAccess(this.model.toJSON(),this));var e=g.prototype._renderDetails.call(this);return e.find(".actions .left").empty().append(this._renderSecondaryActions()),e.find(".summary").html(this._renderSummary()).prepend(this._renderDetailMessages()),e.find(".display-applications").html(this._renderDisplayApplications()),this._setUpBehaviors(e),e},_renderSummary:function(){var e=this.model.toJSON(),t=this.templates.summaries[e.state];return(t=t||this.templates.summaries.unknown)(e,this)},_renderDetailMessages:function(){var e=this,t=s()('<div class="detail-messages"></div>'),n=e.model.toJSON();return i.a.each(e.templates.detailMessages,(function(a){t.append(s()(a(n,e)))})),t},_renderDisplayApplications:function(){return this.model.isDeletedOrPurged()?"":[this.templates.displayApplications(this.model.get("display_apps"),this),this.templates.displayApplications(this.model.get("display_types"),this)].join("")},_renderSecondaryActions:function(){switch(this.debug("_renderSecondaryActions"),this.model.get("state")){case u.a.NOT_VIEWABLE:return[];case u.a.OK:case u.a.FAILED_METADATA:case u.a.ERROR:return[this._renderDownloadButton(),this._renderShowParamsButton()]}return[this._renderShowParamsButton()]},_renderShowParamsButton:function(){return Object(h.a)({title:f()("View details"),classes:"params-btn",href:this.model.urls.show_params,target:this.linkTarget,faIcon:"fa-info-circle",onclick:function(e){var t=Object(c.a)();t.frame&&t.frame.active&&(t.frame.add({title:f()("Dataset details"),url:this.href}),e.preventDefault(),e.stopPropagation())}})},_renderDownloadButton:function(){return this.model.get("purged")||!this.model.hasData()?null:i.a.isEmpty(this.model.get("meta_files"))?s()('\n                <a class="download-btn icon-btn" href="'.concat(this.model.urls.download,'" title="').concat(f()("Download"),'">\n                    <span class="fa fa-floppy-o"></span>\n                </a>')):this._renderMetaFileDownloadButton()},_renderMetaFileDownloadButton:function(){var e=this.model.urls;return s()('\n                <div class="metafile-dropdown dropdown">\n                    <a class="download-btn icon-btn" href="'.concat(e.download,'" data-toggle="dropdown" title="').concat(f()("Download"),'">\n                        <span class="fa fa-floppy-o"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                        <a class="dropdown-item" href="').concat(e.download,'">\n                            ').concat(f()("Download dataset"),"\n                        </a>\n                        ").concat(i.a.map(this.model.get("meta_files"),(function(t){return'<a class="dropdown-item" href="'.concat(e.meta_download+t.file_type,'">\n                                    ').concat(f()("Download")," ").concat(t.file_type,"\n                                </a>")})),"\n                    </div>\n                </div>"))},events:i.a.extend(i.a.clone(g.prototype.events),{"click .display-btn":function(e){this.trigger("display",this,e)},"click .params-btn":function(e){this.trigger("params",this,e)},"click .download-btn":function(e){this.trigger("download",this,e)}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetListItemView(".concat(e,")")}});v.prototype.templates=function(){var e=i.a.extend({},g.prototype.templates.warnings,{failed_metadata:p.a.wrapTemplate(['<% if( model.state === "failed_metadata" ){ %>','<div class="warningmessagesmall">',f()("An error occurred setting the metadata for this dataset"),"</div>","<% } %>"]),error:p.a.wrapTemplate(["<% if( model.error ){ %>",'<div class="errormessagesmall">',f()("There was an error getting the data for this dataset"),": <%- model.error %>","</div>","<% } %>"]),purged:p.a.wrapTemplate(["<% if( model.purged ){ %>",'<div class="purged-msg warningmessagesmall">',f()("This dataset has been deleted and removed from disk"),"</div>","<% } %>"]),deleted:p.a.wrapTemplate(["<% if( model.deleted && !model.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',f()("This dataset has been deleted"),"</div>","<% } %>"])}),t=p.a.wrapTemplate(['<div class="details">','<div class="summary"></div>','<div class="actions clear">','<div class="left"></div>','<div class="right"></div>',"</div>","<% if( !dataset.deleted && !dataset.purged ){ %>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="display-applications"></div>',"<% if( dataset.peek ){ %>",'<pre class="dataset-peek"><%= dataset.peek %></pre>',"<% } %>","<% } %>","</div>"],"dataset"),n=p.a.wrapTemplate(['<div class="details">','<div class="summary">',f()("You do not have permission to view this dataset"),"</div>","</div>"],"dataset"),a={};a[u.a.OK]=a[u.a.FAILED_METADATA]=p.a.wrapTemplate(["<% if( dataset.misc_blurb ){ %>",'<div class="blurb">','<span class="value"><%- dataset.misc_blurb %></span>',"</div>","<% } %>","<% if( dataset.file_ext ){ %>",'<div class="datatype">','<label class="prompt">',f()("format"),"</label>",'<span class="value"><%- dataset.file_ext %></span>',"</div>","<% } %>","<% if( dataset.metadata_dbkey ){ %>",'<div class="dbkey">','<label class="prompt">',f()("database"),"</label>",'<span class="value">',"<%- dataset.metadata_dbkey %>","</span>","</div>","<% } %>","<% if( dataset.misc_info ){ %>",'<div class="info">','<span class="value"><%- dataset.misc_info %></span>',"</div>","<% } %>"],"dataset"),a[u.a.NEW]=p.a.wrapTemplate(["<div>",f()("This is a new dataset and not all of its data are available yet"),"</div>"],"dataset"),a[u.a.NOT_VIEWABLE]=p.a.wrapTemplate(["<div>",f()("You do not have permission to view this dataset"),"</div>"],"dataset"),a[u.a.DISCARDED]=p.a.wrapTemplate(["<div>",f()("The job creating this dataset was cancelled before completion"),"</div>"],"dataset"),a[u.a.QUEUED]=p.a.wrapTemplate(["<div>",f()("This job is waiting to run"),"</div>"],"dataset"),a[u.a.RUNNING]=p.a.wrapTemplate(["<div>",f()("This job is currently running"),"</div>"],"dataset"),a[u.a.UPLOAD]=p.a.wrapTemplate(["<div>",f()("This dataset is currently uploading"),"</div>"],"dataset"),a[u.a.SETTING_METADATA]=p.a.wrapTemplate(["<div>",f()("Metadata is being auto-detected"),"</div>"],"dataset"),a[u.a.PAUSED]=p.a.wrapTemplate(["<div>",f()('This job is paused. Use the "Resume Paused Jobs" in the history menu to resume'),"</div>",'<div class="info"><%- dataset.misc_info %></div>'],"dataset"),a[u.a.ERROR]=p.a.wrapTemplate(["<% if( !dataset.purged ){ %>","<div><%- dataset.misc_blurb %></div>","<% } %>",'<span class="help-text">',f()("An error occurred with this dataset"),":</span>",'<div class="job-error-text"><%- dataset.misc_info %></div>'],"dataset"),a[u.a.EMPTY]=p.a.wrapTemplate(["<div>",f()("No data"),": <i><%- dataset.misc_blurb %></i></div>"],"dataset"),a.unknown=p.a.wrapTemplate(['<div>Error: unknown dataset state: "<%- dataset.state %>"</div>'],"dataset");var o={resubmitted:p.a.wrapTemplate(["<% if( model.resubmitted ){ %>",'<div class="resubmitted-msg infomessagesmall">',f()("The job creating this dataset has been resubmitted"),"</div>","<% } %>"])},s=p.a.wrapTemplate(["<% _.each( apps, function( app ){ %>",'<div class="display-application">','<span class="display-application-location"><%- app.label %></span> ','<span class="display-application-links">',"<% _.each( app.links, function( link ){ %>",'<a target="<%- link.target %>" href="<%- link.href %>">',"<% print( _l( link.text ) ); %>","</a> ","<% }); %>","</span>","</div>","<% }); %>"],"apps");return i.a.extend({},g.prototype.templates,{warnings:e,details:t,noAccess:n,summaries:a,detailMessages:o,displayApplications:s})}(),t.b={DatasetListItemView:v}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(5),u=n(2),h=n.n(u),p=n(22),m=n(29),f={TrackHeaderView:l.a.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append(s()("<div/>").addClass(this.model.drag_handle_class)),this.$el.append(s()("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick((function(e){e.stopPropagation()})),this.$el.append(s()("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var e=this;this.icons_div=s()("<div/>").addClass("track-icons").hide().appendTo(this.$el),i.a.each(this.model.action_icons_def,(function(t){e.add_action_icon(t.name,t.title,t.css_class,t.on_click_fn,t.prepend,t.hide)})),this.set_display_modes(this.model.display_modes)},add_action_icon:function(e,t,n,a,i,o){var r=this;this.action_icons[e]=s()("<a/>").attr("title",t).addClass("icon-button").addClass(n).tooltip().click((function(){a(r.model)})).appendTo(this.icons_div),o&&this.action_icons[e].hide()},set_display_modes:function(e,t){if(e){this.model.display_modes=e,this.model.mode=t||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")"));for(var n=this.model,a={},i=0,o=n.display_modes.length;i<o;i++){var s=n.display_modes[i];a[s]=function(e){return function(){n.change_mode(e)}}(s)}Object(m.b)(this.action_icons.mode_icon,a)}}})},_=n(28),g=n(25),v=n.n(g),y=v.a.extend,b=function(e,t){this.slot=e,this.feature=t},w=function(e,t,n,a){this.slots={},this.start_end_dct={},this.w_scale=e,this.mode=t,this.include_label="Pack"===t,this.max_rows=n,this.measureText=a};y(w.prototype,{_get_draw_coords:function(e){var t=Math.floor(e[1]*this.w_scale),n=Math.ceil(e[2]*this.w_scale),a=e[3];if(void 0!==a&&this.include_label){var i=this.measureText(a).width+7;t-i>=0?t-=i:n+=i}return[t,n]},_find_slot:function(e){for(var t=e[0],n=e[1],a=0;a<=this.max_rows;a++){var i=!1,o=this.start_end_dct[a];if(void 0!==o)for(var s=0,r=o.length;s<r;s++){var l=o[s];if(n>l[0]&&t<l[1]){i=!0;break}}if(!i)return a}return-1},slot_features:function(e){for(var t,n,a=this.start_end_dct,i=[],o=0,s=0,r=e.length;s<r;s++){n=(t=e[s])[0];var l=this.slots[n];if(l){if(t[1]<l.feature[1]||l.feature[2]<t[2])for(var c=this._get_draw_coords(l.feature),d=this._get_draw_coords(t),u=this.start_end_dct[l.slot],h=0;h<u.length;h++){var p=u[h];p[0]===c[0]&&p[1]===c[1]&&(u[h]=d)}o=Math.max(o,this.slots[n].slot)}else i.push(s)}for(var m=0,f=i.length;m<f;m++){n=(t=e[i[m]])[0];var _=this._get_draw_coords(t),g=this._find_slot(_);g>=0&&(void 0===a[g]&&(a[g]=[]),a[g].push(_),this.slots[n]=new b(g,t),o=Math.max(o,g))}return o+1}});var k=w;function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}var Y=1001,O=1002,A=1003,I=1004,E=1005,H=1006;function $(e,t){var n=e[0],a=e[1],i=t[0],o=t[1];return n<i?a<=i?Y:a<=o?A:O:n>o?H:a<=o?E:I}function P(e,t){var n=$(e,t);return n!==Y&&n!==H}function R(e,t,n,a){var i=t-a/2,o=t+a/2,s=n-Math.sqrt(3*a/2);e.beginPath(),e.moveTo(i,s),e.lineTo(o,s),e.lineTo(t,n),e.lineTo(i,s),e.strokeStyle=this.fillStyle,e.fill(),e.stroke(),e.closePath()}var N=function(){function e(t){D(this,e),this.default_val=t||1}return j(e,[{key:"gen_val",value:function(e){return this.default_val}}]),e}(),z=function e(t){D(this,e),this.incomplete_features=t.incomplete_features,this.feature_mapper=t.feature_mapper},F=function(){function e(t,n,a,i,o){D(this,e),this.data=t,this.default_prefs={},this.view_start=n,this.view_end=a,this.prefs=v.a.extend({},this.default_prefs,i),this.mode=o}return j(e,[{key:"draw",value:function(e,t,n,a){}},{key:"get_start_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,-.5)}},{key:"get_end_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,.5)}},{key:"get_draw_pos",value:function(e,t){return this._chrom_pos_to_draw_pos(e,t,0)}},{key:"_chrom_pos_to_draw_pos",value:function(e,t,n){return Math.floor(t*(Math.max(0,e-this.view_start)+n))}}],[{key:"default_prefs",get:function(){return{}}}]),e}(),V=function(e){function t(e,n,a,i,o){return D(this,t),x(this,L(t).call(this,e,n,a,i,o))}return T(t,e),j(t,[{key:"draw",value:function(e,t,n,a){var i=!1,o=this.prefs.min_value,s=this.prefs.max_value,r=s-o,l=n,c=this.view_start,d=this.mode,u=this.data;e.save();var h,p,m,f=Math.round(n+o/r*n);"Intensity"!==d&&(e.fillStyle="#aaa",e.fillRect(0,f,t,1)),e.beginPath(),m=u.length>1?v.a.map(u.slice(0,-1),(function(e,t){return Math.ceil((u[t+1][0]-u[t][0])*a)})):[10];for(var _,g=this.prefs.block_color||this.prefs.color,y=parseInt(g.slice(1),16),b=(16711680&y)>>16,w=(65280&y)>>8,k=255&y,M=!1,x=!1,L=0,T=u.length;L<T;L++)if(e.fillStyle=e.strokeStyle=g,M=x=!1,_=m[L],h=Math.floor((u[L][0]-c-.5)*a),null!==(p=u[L][1])){if(p<o?(x=!0,p=o):p>s&&(M=!0,p=s),"Histogram"===d)p=Math.round(p/r*l),e.fillRect(h,f,_,-p);else if("Intensity"===d){var S=(p-o)/r,D=Math.round(b+(255-b)*(1-S)),C=Math.round(w+(255-w)*(1-S)),j=Math.round(k+(255-k)*(1-S));e.fillStyle="rgb(".concat(D,",").concat(C,",").concat(j,")"),e.fillRect(h,0,_,l)}else p=Math.round(l-(p-o)/r*l),i?e.lineTo(h,p):(i=!0,"Filled"===d?(e.moveTo(h,l),e.lineTo(h,p)):e.moveTo(h,p));var Y;if(e.fillStyle=this.prefs.overflow_color,M||x)"Histogram"===d||"Intensity"===d?Y=_:(h-=2,Y=4),M&&e.fillRect(h,0,Y,3),x&&e.fillRect(h,l-3,Y,3);e.fillStyle=g}else i&&"Filled"===d&&e.lineTo(h,l),i=!1;"Filled"===d?(i&&(e.lineTo(h,f),e.lineTo(0,f)),e.fill()):e.stroke(),e.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Histogram",color:"#000",overflow_color:"#F66"}}}]),t}(F),U=function(){function e(t){D(this,e),this.feature_positions={},this.slot_height=t,this.translation=0,this.y_translation=0}return j(e,[{key:"map_feature_data",value:function(e,t,n,a){this.feature_positions[t]||(this.feature_positions[t]=[]),this.feature_positions[t].push({data:e,x_start:n,x_end:a})}},{key:"get_feature_data",value:function(e,t){var n,a=Math.floor((t-this.y_translation)/this.slot_height);if(!this.feature_positions[a])return null;e+=this.translation;for(var i=0;i<this.feature_positions[a].length;i++)if(e>=(n=this.feature_positions[a][i]).x_start&&e<=n.x_end)return n.data}}]),e}(),W=function(e){function t(e,n,a,i,o,s,r){var l;return D(this,t),(l=x(this,L(t).call(this,e,n,a,i,o))).alpha_scaler=s||new N,l.height_scaler=r||new N,l.max_label_length=200,l}return T(t,e),j(t,[{key:"get_required_height",value:function(e,t){var n=this.get_row_height(),a=n,i=this.mode;return"no_detail"!==i&&"Squish"!==i&&"Pack"!==i||(n=e*a),n+this.get_top_padding(t)}},{key:"get_top_padding",value:function(e){return 0}},{key:"draw",value:function(e,t,n,a,i){e.save(),e.fillStyle=this.prefs.block_color,e.textAlign="right";for(var o,s=this.get_row_height(),r=new U(s),l=[],c=0,d=this.data.length;c<d;c++){var u=this.data[c],h=u[0],p=u[1],m=u[2],f=i&&void 0!==i[h]?i[h].slot:null;("Dense"===this.mode||null!==f)&&p<this.view_end&&m>this.view_start&&(o=this.draw_element(e,this.mode,u,f,this.view_start,this.view_end,a,s,t),r.map_feature_data(u,f,o[0],o[1]),(p<this.view_start||m>this.view_end)&&l.push(u))}return e.restore(),r.y_translation=this.get_top_padding(t),new z({incomplete_features:l,feature_mapper:r})}},{key:"draw_element",value:function(e,t,n,a,i,o,s,r,l){return[0,0]}}],[{key:"default_prefs",get:function(){return{block_color:"#FFF",connector_color:"#FFF"}}}]),t}(F),B=function(e){function t(e,n,a,i,o,s,r){var l;return D(this,t),(l=x(this,L(t).call(this,e,n,a,i,o,s,r))).draw_background_connector=!0,l.draw_individual_connectors=!1,l}return T(t,e),j(t,[{key:"get_row_height",value:function(){var e=this.mode;return"Dense"===e?10:"no_detail"===e?3:"Squish"===e?5:10}},{key:"draw_element",value:function(e,t,n,a,i,o,s,r,l){var c=n[1],d=n[2],u=n[3],h=n[4],p=Math.floor(Math.max(0,(c-i-.5)*s)),m=Math.ceil(Math.min(l,Math.max(0,(d-i-.5)*s))),f=p,_=m,g=("Dense"===t?0:0+a)*r+this.get_top_padding(l),v=null,y=null,b=h&&"+"!==h&&"."!==h?this.prefs.reverse_strand_color:this.prefs.block_color,w=this.prefs.label_color;if(e.globalAlpha=this.alpha_scaler.gen_val(n),"Dense"===t&&(a=1),"no_detail"===t)e.fillStyle=b,e.fillRect(p,g+5,m-p,1);else{var k,M,x=n[5],L=n[6],T=n[7],S=!0;if(x&&L&&(v=Math.floor(Math.max(0,(x-i)*s)),y=Math.ceil(Math.min(l,Math.max(0,(L-i)*s)))),"Squish"===t?(k=1,M=3,S=!1):(k=5,M=9),T){var D,C;"Squish"===t||"Dense"===t?(D=g+Math.floor(1.5)+1,C=1):h?(D=g,C=M):(D+=2.5,C=1),this.draw_background_connector&&("Squish"===t||"Dense"===t?e.fillStyle="#ccc":h?"+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand")):e.fillStyle="#ccc",e.fillRect(p,D,m-p,C));for(var j=0,Y=T.length;j<Y;j++){var O,A,I=T[j],E=Math.floor(Math.max(0,(I[0]-i-.5)*s)),H=Math.ceil(Math.min(l,Math.max((I[1]-i-.5)*s)));if(!(E>H)){if(e.fillStyle=b,e.fillRect(E,g+(M-k)/2+1,H-E,k),void 0!==v&&L>x&&!(E>y||H<v)){var $=Math.max(E,v),P=Math.min(H,y);e.fillRect($,g+1,P-$,M),1===T.length&&"Pack"===t&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),$+14<P&&($+=2,P-=2),e.fillRect($,g+1,P-$,M))}this.draw_individual_connectors&&O&&this.draw_connector(e,O,A,E,H,g),O=E,A=H}}if("Pack"===t){e.globalAlpha=1,e.fillStyle="white";var R=this.height_scaler.gen_val(n),N=Math.ceil(M*R),z=Math.round((M-N)/2);1!==R&&(e.fillRect(p,D+1,m-p,z),e.fillRect(p,D+M-z+1,m-p,z))}}else e.fillStyle=b,e.fillRect(p,g+1,m-p,M),h&&S&&("+"===h?e.fillStyle=e.canvas.manager.get_pattern("right_strand_inv"):"-"===h&&(e.fillStyle=e.canvas.manager.get_pattern("left_strand_inv")),e.fillRect(p,g+1,m-p,M));e.globalAlpha=1,u&&"Pack"===t&&c>i&&(e.fillStyle=w,0===i&&p-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,m+2,g+8,this.max_label_length),_+=e.measureText(u).width+2):(e.textAlign="right",e.fillText(u,p-2,g+8,this.max_label_length),f-=e.measureText(u).width+2))}return e.globalAlpha=1,[f,_]}}]),t}(W),q=function(e){function t(e,n,a,i,o,s,r,l,c){var d;return D(this,t),(d=x(this,L(t).call(this,e,n,a,i,o,s,r))).ref_seq=l?l.data:null,d.base_color_fn=c,d}return T(t,e),j(t,[{key:"get_row_height",value:function(){var e,t=this.mode;return"Dense"===t?e=10:"Squish"===t?e=5:(e=10,this.prefs.show_insertions&&(e*=2)),e}},{key:"_parse_cigar",value:function(e){var t=[[0,0]],n=t[0],a=0,i=v.a.map(e.match(/[0-9]+[MIDNSHP=X]/g),(function(e){var i=parseInt(e.slice(0,-1),10),o=e.slice(-1);return"N"===o?0!==n[1]&&(n=[a+i,a+i],t.push(n)):-1==="ISHP".indexOf(o)&&(n[1]+=i,a+=i),["MIDNSHP=X".indexOf(o),i]}));return{blocks:t,cigar:i}}},{key:"draw_read",value:function(e,t,n,a,i,o,s,r,l,c){var d=function(e,t,n){return-1!=="M=NXD".indexOf(t)&&(e+=n),e},u=function(e,t,n){return-1!=="IX".indexOf(t)&&(e+=n),e},h=function(e){return Math.floor(Math.max(0,(e-i-.5)*n))};e.textAlign="center";var p,m,f,_,g,v,y=[i,o],b=0,w=0,k=Math.round(n/2),M=e.canvas.manager.char_width_px,x="+"===l?this.prefs.detail_block_color:this.prefs.reverse_strand_color,L="Pack"===t,T=L?9:3,S=a+1,D=new Z(e,T,n,t),C=[],j=this._parse_cigar(r);r=j.cigar,p=j.blocks;for(var Y=0;Y<p.length;Y++){var H=p[Y];P([s+H[0],s+H[1]],y)&&((m=h(s+H[0]))===(f=h(s+H[1]))&&(f+=1),e.fillStyle=x,e.fillRect(m,S,f-m,T))}for(var N=0,z=r.length;N<z;N++){var F=r[N],V="MIDNSHP=X"[F[0]],U=F[1],W=s+b;if(m=h(W),f=h(W+U),P([W,W+U],y))switch(m===f&&(f+=1),V){case"H":case"S":case"P":break;case"M":b+=U;break;case"=":case"X":var B="";"X"===V?B=c.slice(w,w+U):this.ref_seq&&(B=this.ref_seq.slice(Math.max(0,W-i),Math.min(W-i+U,o-i)));for(var q=Math.max(W,i),J=0;J<B.length;J++)if(B&&!this.prefs.show_differences||"X"===V){var G=Math.floor(Math.max(0,(q+J-i)*n));e.fillStyle=this.base_color_fn(B[J]),L&&n>M?e.fillText(B[J],G,a+9):n>.05&&e.fillRect(G-k,S,Math.max(1,Math.round(n)),T)}"X"===V&&(w+=U),b+=U;break;case"N":e.fillStyle="#ccc",e.fillRect(m,S+(T-1)/2,f-m,1),b+=U;break;case"D":D.draw_deletion(m,S,U),b+=U;break;case"I":var K=m-k;if(P([W,W+U],y)){var Q=c.slice(w,w+U);if(this.prefs.show_insertions){var X=m-(f-m)/2;if(("Pack"===t||"Auto"===this.mode)&&void 0!==c&&n>M){switch(e.fillStyle="yellow",e.fillRect(X-k,a-9,f-m,9),C[C.length]={type:"triangle",data:[K,a+4,5]},e.fillStyle="#ccc",$([W,W+U],y)){case A:Q=Q.slice(i-W);break;case I:Q=Q.slice(0,W-o);break;case E:break;case O:Q=Q.slice(i-W,W-o)}for(var ee=0,te=Q.length;ee<te;ee++){var ne=Math.floor(Math.max(0,(W+ee-i)*n));e.fillText(Q[ee],ne-(f-m)/2,a)}}else e.fillStyle="yellow",e.fillRect(X,a+("Dense"!==this.mode?2:5),f-m,"Dense"!==t?3:9)}else("Pack"===t||"Auto"===this.mode)&&void 0!==c&&n>M&&C.push({type:"text",data:[Q.length,K,a+9]})}w+=U}else b=d(b,V,U),w=u(w,V,U)}e.fillStyle="yellow";for(var ae=0;ae<C.length;ae++)g=(_=C[ae]).type,v=_.data,"text"===g?(e.save(),e.font="bold ".concat(e.font),e.fillText(v[0],v[1],v[2]),e.restore()):"triangle"===g&&R(e,v[0],v[1],v[2])}},{key:"draw_element",value:function(e,t,n,a,i,o,s,r,l){var c=n[1],d=n[2],u=n[3],h=Math.floor(Math.max(-.5*s,(c-i-.5)*s)),p=Math.ceil(Math.min(l,Math.max(0,(d-i-.5)*s))),m=("Dense"===t?0:0+a)*r,f="Pack"===t?9:3;if(n[5]instanceof Array){var _=!0;n[4][1]>=i&&n[4][0]<=o&&n[4][2]?this.draw_read(e,t,s,m,i,o,n[4][0],n[4][2],n[4][3],n[4][4]):_=!1,n[5][1]>=i&&n[5][0]<=o&&n[5][2]?this.draw_read(e,t,s,m,i,o,n[5][0],n[5][2],n[5][3],n[5][4]):_=!1;var g=Math.ceil(Math.min(l,Math.max(-.5*s,(n[4][1]-i-.5)*s))),v=Math.floor(Math.max(-.5*s,(n[5][0]-i-.5)*s));if(_&&v>g){e.fillStyle="#ccc";var y=m+1+(f-1)/2;!function(e,t,n,a,i,o){void 0===o&&(o=4);var s,r=a-t,l=i-n,c=Math.floor(Math.sqrt(r*r+l*l)/o),d=r/c,u=l/c;for(s=0;s<c;s++,t+=d,n+=u)s%2==0&&e.fillRect(t,n,o,1)}(e,g,y,v,y)}}else this.draw_read(e,t,s,m,i,o,c,n[4],n[5],n[6]);return"Pack"===t&&c>=i&&"."!==u&&(e.fillStyle=this.prefs.label_color,0===i&&h-e.measureText(u).width<0?(e.textAlign="left",e.fillText(u,p+2,m+9,this.max_label_length)):(e.textAlign="right",e.fillText(u,h-2,m+9,this.max_label_length))),[0,0]}}]),t}(W),J=function(e){function t(e,n,a,i,o,s,r){var l;return D(this,t),(l=x(this,L(t).call(this,e,n,a,i,o,s,r))).longest_feature_length=l.calculate_longest_feature_length(),l.draw_background_connector=!1,l.draw_individual_connectors=!0,l}return T(t,e),j(t,[{key:"calculate_longest_feature_length",value:function(){for(var e=0,t=0,n=this.data.length;t<n;t++){var a=this.data[t],i=a[1],o=a[2];e=Math.max(e,o-i)}return e}},{key:"get_top_padding",value:function(e){var t=e/(this.view_end-this.view_start);return Math.min(128,Math.ceil(this.longest_feature_length/2*t))}},{key:"draw_connector",value:function(e,t,n,a,i,o){var s=(n+a)/2;a-s>0&&(e.beginPath(),e.arc(s,o,a-s,Math.PI,0),e.stroke())}}]),t}(B),G=function(){function e(t,n){D(this,e),Array.isArray(t)?this.rgb=t:6==t.length?this.rgb=t.match(/.{2}/g).map((function(e){return parseInt(e,16)})):7==t.length?this.rgb=t.substring(1,7).match(/.{2}/g).map((function(e){return parseInt(e,16)})):this.rgb=t.split("").map((function(e){return parseInt(e+e,16)})),this.alpha="number"==typeof n?n:1}return j(e,[{key:"eval",value:function(){return this}},{key:"toCSS",value:function(){return this.alpha<1?"rgba(".concat(this.rgb.map((function(e){return Math.round(e)})).concat(this.alpha).join(", "),")"):"#".concat(this.rgb.map((function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0".concat(e):e})).join(""))}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,a=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,s=Math.max(n,a,i),r=Math.min(n,a,i),l=(s+r)/2,c=s-r;if(s===r)e=t=0;else{switch(t=l>.5?c/(2-s-r):c/(s+r),s){case n:e=(a-i)/c+(a<i?6:0);break;case a:e=(i-n)/c+2;break;case i:e=(n-a)/c+4}e/=6}return{h:360*e,s:t,l:l,a:o}}},{key:"toARGB",value:function(){var e=[Math.round(255*this.alpha)].concat(this.rgb);return"#".concat(e.map((function(e){return 1===(e=((e=Math.round(e))>255?255:e<0?0:e).toString(16)).length?"0".concat(e):e})).join(""))}},{key:"mix",value:function(t,n){var a=n,i=2*a-1,o=this.toHSL().a-t.toHSL().a,s=((i*o==-1?i:(i+o)/(1+i*o))+1)/2,r=1-s;return new e([this.rgb[0]*s+t.rgb[0]*r,this.rgb[1]*s+t.rgb[1]*r,this.rgb[2]*s+t.rgb[2]*r],this.alpha*a+t.alpha*(1-a))}}]),e}(),K=function(){function e(t,n,a,i){D(this,e),this.start_color=new G(t),this.end_color=new G(n),this.start_value=a,this.end_value=i,this.value_range=i-a}return j(e,[{key:"map_value",value:function(e){return e=Math.max(e,this.start_value),e=((e=Math.min(e,this.end_value))-this.start_value)/this.value_range,this.start_color.mix(this.end_color,1-e).toCSS()}}]),e}(),Q=function(){function e(t,n,a,i,o){D(this,e),this.positive_ramp=new K(n,a,0,o),this.negative_ramp=new K(n,t,0,-i),this.start_value=i,this.end_value=o}return j(e,[{key:"map_value",value:function(e){return e=Math.max(e,this.start_value),(e=Math.min(e,this.end_value))>=0?this.positive_ramp.map_value(e):this.negative_ramp.map_value(-e)}}]),e}(),X=function(e){function t(e,n,a,i,o){var s,r,l;if(D(this,t),void 0===(s=x(this,L(t).call(this,e,n,a,i,o))).prefs.min_value){var c=1/0;for(r=0,l=s.data.length;r<l;r++)c=Math.min(c,s.data[r][6]);s.prefs.min_value=c}if(void 0===s.prefs.max_value){var d=-1/0;for(r=0,l=s.data.length;r<l;r++)d=Math.max(d,s.data[r][6]);s.prefs.max_value=d}return s}return T(t,e),j(t,[{key:"draw",value:function(e,t,n,a){var i,o,s,r,l,c,d=this.prefs.min_value,u=this.prefs.max_value,h=this.view_start,p=1/Math.sqrt(2),m=new Q(this.prefs.neg_color,"#FFFFFF",this.prefs.pos_color,d,u),f=function(e){return(e-h)*a};e.save(),e.rotate(-45*Math.PI/180),e.scale(p,p);for(var _=0,g=this.data.length;_<g;_++)o=f((i=this.data[_])[1]),s=f(i[2]),r=f(i[4]),l=f(i[5]),c=i[6],e.fillStyle=m.map_value(c),e.fillRect(o,r,s-o,l-r);e.restore()}}],[{key:"default_prefs",get:function(){return{min_value:void 0,max_value:void 0,mode:"Heatmap",pos_color:"#FF8C00",neg_color:"#4169E1"}}}]),t}(F),Z=function(){function e(t,n,a,i){D(this,e),this.ctx=t,this.row_height=n,this.px_per_base=a,this.draw_details=("Pack"===i||"Auto"===i)&&a>=t.canvas.manager.char_width_px,this.delete_details_thickness=.2}return j(e,[{key:"draw_deletion",value:function(e,t,n){this.ctx.fillStyle="black";var a=(this.draw_details?this.delete_details_thickness:1)*this.row_height;t+=.5*(this.row_height-a),this.ctx.fillRect(e,t,n*this.px_per_base,a)}}]),e}(),ee={Scaler:N,LinePainter:V,LinkedFeaturePainter:B,ReadPainter:q,ArcLinkedFeaturePainter:J,DiagonalHeatmapPainter:X,VariantPainter:function(e){function t(e,n,a,i,o,s){var r;return D(this,t),(r=x(this,L(t).call(this,e,n,a,i,o))).base_color_fn=s,r.divider_height=1,r}return T(t,e),j(t,[{key:"get_row_height",value:function(){var e=this.mode;return"Dense"===e?10:"Squish"===e?5:10}},{key:"get_required_height",value:function(e){var t=this.prefs.summary_height;return e>1&&this.prefs.show_sample_data&&(t+=this.divider_height+e*this.get_row_height()),t}},{key:"draw",value:function(e,t,n,a){e.save();var i,o,s,r,l,c,d,u,h,p,m,f=function(e,t){var n=e.length,a=t.length,i=0,o=1,s=null;return"-"===t?(s="deletion",o=e.length):0===e.indexOf(t)&&n>a?(s="deletion",o=n-a,i=a):0===t.indexOf(e)&&n<a&&(s="insertion",o=a-n,i=a),null!==s?{type:s,start:i,len:o}:{}},_=Math.max(1,Math.floor(a)),g=this.data.length?this.data[0][7].split(",").length:0,y="Squish"===this.mode?5:10,b=a<.1?y:"Squish"===this.mode?3:9,w=!0,k=new Z(e,y,a,this.mode);1===g&&(y=b=a<e.canvas.manager.char_width_px?this.prefs.summary_height:y,k.row_height=y,w=!1),this.prefs.show_sample_data&&w&&(e.fillStyle="#F3F3F3",e.globalAlpha=1,e.fillRect(0,this.prefs.summary_height-this.divider_height,t,this.divider_height)),e.textAlign="center";for(var M=0;M<this.data.length;M++)if(o=(i=this.data[M])[1],s=i[3],r=[i[4].split(",")],l=i[7].split(","),c=i.slice(8),r=v.a.map(v.a.flatten(r),(function(e){var t={type:"snp",value:e,start:0},n=f(s,e);return v.a.extend(t,n)})),!(o<this.view_start||o>this.view_end)){if(w)for(e.fillStyle="#999999",e.globalAlpha=1,m=0;m<r.length;m++)for(u=this.get_start_draw_pos(o+r[m].start,a),e.fillRect(u,0,_,this.prefs.summary_height),h=this.prefs.summary_height,m=0;m<r.length;m++){e.fillStyle="deletion"===r[m].type?"black":this.base_color_fn(r[m].value);var x=c/l.length,L=Math.ceil(this.prefs.summary_height*x);e.fillRect(u,h-L,_,L),h-=L}if(this.prefs.show_sample_data)for(h=w?this.prefs.summary_height+this.divider_height:0,m=0;m<l.length;m++,h+=y)if(d=null,(p=l[m]?l[m].split(/\/|\|/):["0","0"])[0]===p[1]?"."===p[0]||"0"!==p[0]&&(d=r[parseInt(p[0],10)-1],e.globalAlpha=1):(d="0"!==p[0]?p[0]:p[1],d=r[parseInt(d,10)-1],e.globalAlpha=.5),d)if(u=this.get_start_draw_pos(o+d.start,a),"snp"===d.type){var T=d.value;e.fillStyle=this.base_color_fn(T),k.draw_details?e.fillText(T,this.get_draw_pos(o,a),h+y):e.fillRect(u,h+1,_,b)}else"deletion"===d.type&&k.draw_deletion(u,h+1,d.len)}e.restore()}}]),t}(F)},te=function(e){this.manager=null,this.name=e.name,this.index=e.index,this.tool_id=e.tool_id,this.tool_exp_name=e.tool_exp_name};v.a.extend(te.prototype,{to_dict:function(){return{name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name}}});var ne=function(e,t,n){return s()("<a/>").attr("href","javascript:void(0);").attr("title",e).addClass("icon-button").addClass(t).tooltip().click(n)},ae=function(e){te.call(this,e),this.low="low"in e?e.low:-Number.MAX_VALUE,this.high="high"in e?e.high:Number.MAX_VALUE,this.min="min"in e?e.min:Number.MAX_VALUE,this.max="max"in e?e.max:-Number.MAX_VALUE,this.container=null,this.slider=null,this.slider_label=null;var t=this;t.parent_div=s()("<div/>").addClass("filter-row slider-row");var n=s()("<div/>").addClass("elt-label").appendTo(t.parent_div);s()("<span/>").addClass("slider-name").text("".concat(t.name,"  ")).appendTo(n);var a=s()("<span/>").text("".concat(this.low,"-").concat(this.high)),i=s()("<span/>").addClass("slider-value").appendTo(n).append("[").append(a).append("]");t.values_span=a;var o,r,l,c=s()("<div/>").addClass("slider").appendTo(t.parent_div);t.control_element=s()("<div/>").attr("id","".concat(t.name,"-filter-control")).appendTo(c),t.control_element.slider({range:!0,min:this.min,max:this.max,step:this.get_slider_step(this.min,this.max),values:[this.low,this.high],slide:function(e,n){t.slide(e,n)},change:function(e,n){t.control_element.slider("option","slide").call(t.control_element,e,n)}}),t.slider=t.control_element,t.slider_label=a,o=i,r=a,l=t.control_element,o.click((function(){var e=r.text(),t=parseFloat(l.slider("option","max")),n=t<=1?4:t<=1e6?t.toString().length:6,a=!1,i=s()(this).parents(".slider-row");i.addClass("input"),l.slider("option","values")&&(n=2*n+1,a=!0),r.text(""),s()("<input type='text'/>").attr("size",n).attr("maxlength",n).attr("value",e).appendTo(r).focus().select().click((function(e){e.stopPropagation()})).blur((function(){s()(this).remove(),r.text(e),i.removeClass("input")})).keyup((function(e){if(27===e.keyCode)s()(this).trigger("blur");else if(13===e.keyCode){var t=l.slider("option","min"),n=l.slider("option","max"),o=function(e){return isNaN(e)||e>n||e<t},r=s()(this).val();if(a){if(r=r.split("-"),o((r=[parseFloat(r[0]),parseFloat(r[1])])[0])||o(r[1]))return alert("Parameter value must be in the range [".concat(t,"-").concat(n,"]")),s()(this)}else if(o(r=parseFloat(r)))return alert("Parameter value must be in the range [".concat(t,"-").concat(n,"]")),s()(this);l.slider(a?"values":"value",r),i.removeClass("input")}}))}));var d=s()("<div/>").addClass("display-controls").appendTo(t.parent_div);this.transparency_icon=ne("Use filter for data transparency","layer-transparent",(function(){t.manager.alpha_filter!==t?(t.manager.alpha_filter=t,t.manager.parent_div.find(".layer-transparent").removeClass("active").hide(),t.transparency_icon.addClass("active").show()):(t.manager.alpha_filter=null,t.transparency_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),this.height_icon=ne("Use filter for data height","arrow-resize-090",(function(){t.manager.height_filter!==t?(t.manager.height_filter=t,t.manager.parent_div.find(".arrow-resize-090").removeClass("active").hide(),t.height_icon.addClass("active").show()):(t.manager.height_filter=null,t.height_icon.removeClass("active")),t.manager.track.request_draw({force:!0,clear_after:!0})})).appendTo(d).hide(),t.parent_div.hover((function(){t.transparency_icon.show(),t.height_icon.show()}),(function(){t.manager.alpha_filter!==t&&t.transparency_icon.hide(),t.manager.height_filter!==t&&t.height_icon.hide()})),s()("<div style='clear: both;'/>").appendTo(t.parent_div)};v.a.extend(ae.prototype,{to_dict:function(){var e=te.prototype.to_dict.call(this);return v.a.extend(e,{type:"number",min:this.min,max:this.max,low:this.low,high:this.high})},copy:function(){return new ae({name:this.name,index:this.index,tool_id:this.tool_id,tool_exp_name:this.tool_exp_name})},get_slider_step:function(e,t){return t-e<=2?.01:1},slide:function(e,t){var n=t.values;this.values_span.text("".concat(n[0],"-").concat(n[1])),this.low=n[0],this.high=n[1];var a=this;setTimeout((function(){n[0]===a.low&&n[1]===a.high&&a.manager.track.request_draw({force:!0,clear_after:!0})}),25)},applies_to:function(e){return e.length>this.index},_keep_val:function(e){return isNaN(e)||e>=this.low&&e<=this.high},keep:function(e){if(!this.applies_to(e))return!0;var t=e[this.index];if(t instanceof Array){for(var n=!0,a=0;a<t.length;a++)if(!this._keep_val(t[a])){n=!1;break}return n}return this._keep_val(e[this.index])},update_attrs:function(e){var t=!1;if(!this.applies_to(e))return t;var n=e[this.index];n instanceof Array||(n=[n]);for(var a=0;a<n.length;a++){var i=n[a];i<this.min&&(this.min=Math.floor(i),t=!0),i>this.max&&(this.max=Math.ceil(i),t=!0)}return t},update_ui_elt:function(){this.min<this.max?this.parent_div.show():this.parent_div.hide();var e=this.slider.slider("option","min"),t=this.slider.slider("option","max");(this.min<e||this.max>t)&&(this.slider.slider("option","min",this.min),this.slider.slider("option","max",this.max),this.slider.slider("option","step",this.get_slider_step(this.min,this.max)),this.slider.slider("option","values",[this.min,this.max]))}});var ie=function(e,t){if(this.track=e,this.alpha_filter=null,this.height_filter=null,this.filters=[],this.parent_div=s()("<div/>").addClass("filters").hide(),this.parent_div.bind("drag",(function(e){e.stopPropagation()})).click((function(e){e.stopPropagation()})).bind("dblclick",(function(e){e.stopPropagation()})).bind("keydown",(function(e){e.stopPropagation()})),t&&"filters"in t){for(var n,a=("alpha_filter"in t?t.alpha_filter:null),i=("height_filter"in t?t.height_filter:null),o=t.filters,r=0;r<o.length;r++)"number"===o[r].type?(n=new ae(o[r]),this.add_filter(n),n.name===a&&(this.alpha_filter=n,n.transparency_icon.addClass("active").show()),n.name===i&&(this.height_filter=n,n.height_icon.addClass("active").show())):console.log("ERROR: unsupported filter: ",o[r]);"visible"in t&&t.visible&&this.parent_div.show()}if(0!==this.filters.length){var l=s()("<div/>").addClass("param-row").appendTo(this.parent_div),c=s()("<input type='submit'/>").attr("value","Run on complete dataset").appendTo(l),d=this;c.click((function(){d.run_on_dataset()}))}};v.a.extend(ie.prototype,{show:function(){this.parent_div.show()},hide:function(){this.parent_div.hide()},toggle:function(){this.parent_div.toggle()},visible:function(){return this.parent_div.is(":visible")},to_dict:function(){for(var e,t={},n=[],a=0;a<this.filters.length;a++)e=this.filters[a],n.push(e.to_dict());return t.filters=n,t.alpha_filter=this.alpha_filter?this.alpha_filter.name:null,t.height_filter=this.height_filter?this.height_filter.name:null,t.visible=this.parent_div.is(":visible"),t},copy:function(e){for(var t=new ie(e),n=0;n<this.filters.length;n++)t.add_filter(this.filters[n].copy());return t},add_filter:function(e){e.manager=this,this.parent_div.append(e.parent_div),this.filters.push(e)},remove_all:function(){this.filters=[],this.parent_div.children().remove()},init_filters:function(){for(var e=0;e<this.filters.length;e++){this.filters[e].update_ui_elt()}},clear_filters:function(){for(var e=0;e<this.filters.length;e++){var t=this.filters[e];t.slider.slider("option","values",[t.min,t.max])}this.alpha_filter=null,this.height_filter=null,this.parent_div.find(".icon-button").hide()},run_on_dataset:function(){for(var e,t,n=function(e,t,n){return t in e||(e[t]=n),e[t]},a={},i=0;i<this.filters.length;i++)(e=this.filters[i]).tool_id&&(e.min!==e.low&&((t=n(a,e.tool_id,[]))[t.length]="".concat(e.tool_exp_name," >= ").concat(e.low)),e.max!==e.high&&((t=n(a,e.tool_id,[]))[t.length]="".concat(e.tool_exp_name," <= ").concat(e.high)));var o=[];for(var r in a)o[o.length]=[r,a[r]];!function e(t,n){var a=n[0],i=a[0],o=a[1],r={cond:"(".concat(o.join(") and ("),")"),input:t,target_dataset_id:t,tool_id:i};n=n.slice(1),s.a.getJSON(run_tool_url,r,(function(t){var a=Object(d.a)();t.error?a.modal.show({title:h()("Filter Dataset"),body:"Error running tool ".concat(i),buttons:{Close:a.modal.hide()}}):0===n.length?a.modal.show({title:h()("Filtering Dataset"),body:"Filter(s) are running on the complete dataset. Outputs are in dataset's history.",buttons:{Close:a.modal.hide()}}):e(t.dataset_id,n)}))}(this.track.dataset_id,o)}});var oe=ie,se=ae,re=n(30),le=n(64),ce=n(46),de=n(212),ue={BBIDataManager:p.a.GenomeDataManager.extend({load_data:function(e,t,n,a){var i=s.a.Deferred();this.set_data(e,i);var o="".concat(Object(c.getAppRoot)(),"datasets/").concat(this.get("dataset").id,"/display"),r=this;return s.a.when(de.makeBwg(o)).then((function(t,n){s.a.when(t.readWigData(e.get("chrom"),e.get("start"),e.get("end"))).then((function(t){var n=[],a={max:Number.MIN_VALUE};t.forEach((function(e){a.max!==e.min-1&&(n.push([a.max+1,0]),n.push([e.min-2,0])),n.push([e.min-1,e.score]),n.push([e.max,e.score]),a=e}));var o={data:n,region:e,dataset_type:"bigwig"};r.set_data(e,o),i.resolve(o)}))})),i}})},he=(n(103),i.a.extend),pe={};function me(e,t){pe[e.attr("id")]=t}function fe(e,t,n,a){pe[e.attr("id")]=a,e.bind("drag",{handle:".".concat(t),relative:!0},(function(e,t){var n,a,i,o,r,l=s()(this).parent(),c=l.children(".track,.group"),d=pe[s()(this).attr("id")];if(0!==(a=s()(this).parents(".group")).length){o=(i=a.position().top)+a.outerHeight();var u=pe[a.attr("id")];if(t.offsetY<i)return s()(this).insertBefore(a),u.remove_drawable(d),void u.container.add_drawable_before(d,u);if(t.offsetY>o)return s()(this).insertAfter(a),u.remove_drawable(d),void u.container.add_drawable(d)}for(a=null,r=0;r<c.length;r++)if(o=(i=(n=s()(c.get(r))).position().top)+n.outerHeight(),n.is(".group")&&this!==n.get(0)&&t.offsetY>=i&&t.offsetY<=o)return t.offsetY-i<o-t.offsetY?n.find(".content-div").prepend(this):n.find(".content-div").append(this),d.container&&d.container.remove_drawable(d),void pe[n.attr("id")].add_drawable(d);for(r=0;r<c.length&&(n=s()(c.get(r)),!(t.offsetY<n.position().top)||n.hasClass("reference-track")||n.hasClass("intro"));r++);r===c.length?this!==c.get(r-1)&&(l.append(this),pe[l.attr("id")].move_drawable(d,r)):this!==c.get(r)&&(s()(this).insertBefore(c.get(r)),pe[l.attr("id")].move_drawable(d,t.deltaY>0?r-1:r))})).bind("dragstart",(function(){s()(this).addClass("dragging")})).bind("dragend",(function(){s()(this).removeClass("dragging")}))}var _e="A converter for this dataset is not installed. Please check your datatypes_conf.xml file.",ge=["Histogram","Line","Filled","Intensity"];function ve(e,t){t||(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n}var ye=function e(t,n,a){if(e.id_counter||(e.id_counter=0),this.id=e.id_counter++,this.view=t,this.container=n,this.drag_handle_class=a.drag_handle_class,this.is_overview=!1,this.action_icons={},this.config=ce.a.ConfigSettingCollection.from_models_and_saved_values(this.build_config_params(),a.prefs),this.config.get_value("name")||this.config.set_value("name",a.name),this.config_onchange&&this.config.on("change",this.config_onchange,this),this.container_div=this.build_container_div(),this.header_div=null,!1!==a.header){var i=new f.TrackHeaderView({model:this,id:this.id});this.header_div=i.$el,this.container_div.append(this.header_div);var o=i.icons_div;this.action_icons=i.action_icons,this.container_div.hover((function(){o.show()}),(function(){o.hide()}))}};ye.prototype.action_icons_def=[{name:"toggle_icon",title:"Hide/show content",css_class:"toggle",on_click_fn:function(e){e.config.get_value("content_visible")?(e.action_icons.toggle_icon.addClass("toggle-expand").removeClass("toggle"),e.hide_contents(),e.config.set_value("content_visible",!1)):(e.action_icons.toggle_icon.addClass("toggle").removeClass("toggle-expand"),e.config.set_value("content_visible",!0),e.show_contents())}},{name:"settings_icon",title:h()("Edit settings"),css_class:"gear",on_click_fn:function(e){new ce.a.ConfigSettingCollectionView({collection:e.config}).render_in_modal("Configure Track")}},{name:"remove_icon",title:h()("Remove"),css_class:"remove-icon",on_click_fn:function(e){s()(".tooltip").remove(),e.remove()}}],he(ye.prototype,{config_params:[{key:"name",label:"Name",type:"text",default_value:""},{key:"content_visible",type:"bool",default_value:!0,hidden:!0}],build_config_params:function(){return this.config_params},config_onchange:function(){},init:function(){},changed:function(){this.view.changed()},can_draw:function(){return!(!this.enabled||!this.config.get_value("content_visible"))},request_draw:function(){},_draw:function(e){},to_dict:function(){},set_name:function(e){this.old_name=this.config.get_value("name"),this.config.set_value("name",e)},revert_name:function(){this.old_name&&this.config.set_value("name",this.old_name)},remove:function(){this.changed(),this.container.remove_drawable(this);var e=this.view;this.container_div.hide(0,(function(){s()(this).remove(),e.update_intro_div()}))},build_container_div:function(){},update_icons:function(){},hide_contents:function(){},show_contents:function(){},get_drawables:function(){}});var be=function(e,t,n){ye.call(this,e,t,n),this.obj_type=n.obj_type,this.drawables=[]};he(be.prototype,ye.prototype,{unpack_drawables:function(e){var t;this.drawables=[];for(var n=0;n<e.length;n++)t=ze(e[n],this.view,this),this.add_drawable(t)},init:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].init()},_draw:function(e){for(var t=0;t<this.drawables.length;t++)this.drawables[t]._draw(e)},to_dict:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].to_dict());return{prefs:this.config.to_key_value_dict(),obj_type:this.obj_type,drawables:e}},add_drawable:function(e){this.drawables.push(e),e.container=this,this.changed()},add_drawable_before:function(e,t){this.changed();var n=this.drawables.indexOf(t);return-1!==n&&(this.drawables.splice(n,0,e),!0)},replace_drawable:function(e,t,n){var a=this.drawables.indexOf(e);return-1!==a&&(this.drawables[a]=t,n&&e.container_div.replaceWith(t.container_div),this.changed()),a},remove_drawable:function(e){var t=this.drawables.indexOf(e);return-1!==t&&(this.drawables.splice(t,1),e.container=null,this.changed(),!0)},move_drawable:function(e,t){var n=this.drawables.indexOf(e);return-1!==n&&(this.drawables.splice(n,1),this.drawables.splice(t,0,e),this.changed(),!0)},get_drawables:function(){return this.drawables},get_tracks:function(e){for(var t,n=this.drawables.slice(0),a=[];0!==n.length;)(t=n.shift())instanceof e?a.push(t):t.drawables&&(n=n.concat(t.drawables));return a}});var we=function(e,t,n){if(he(n,{obj_type:"DrawableGroup",drag_handle_class:"group-handle"}),be.call(this,e,t,n),this.content_div=s()("<div/>").addClass("content-div").attr("id","group_".concat(this.id,"_content_div")).appendTo(this.container_div),me(this.container_div,this),me(this.content_div,this),fe(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new oe(this),this.header_div.after(this.filters_manager.parent_div),this.filters_manager.parent_div.after(s()("<div style='clear: both'/>")),this.saved_filters_managers=[],"drawables"in n&&this.unpack_drawables(n.drawables),"filters"in n){var a=this.filters_manager;this.filters_manager=new oe(this,n.filters),a.parent_div.replaceWith(this.filters_manager.parent_div),n.filters.visible&&this.setup_multitrack_filtering()}};he(we.prototype,ye.prototype,be.prototype,{action_icons_def:[ye.prototype.action_icons_def[0],ye.prototype.action_icons_def[1],{name:"composite_icon",title:h()("Show composite track"),css_class:"layers-stack",on_click_fn:function(e){s()(".tooltip").remove(),e.show_composite_track()}},{name:"filters_icon",title:h()("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?(e.filters_manager.clear_filters(),e._restore_filter_managers()):(e.setup_multitrack_filtering(),e.request_draw({clear_tile_cache:!0})),e.filters_manager.toggle()}},ye.prototype.action_icons_def[2]],build_container_div:function(){var e=s()("<div/>").addClass("group").attr("id","group_".concat(this.id));return this.container&&this.container.content_div.append(e),e},hide_contents:function(){this.tiles_div.hide()},show_contents:function(){this.tiles_div.show(),this.request_draw()},update_icons:function(){var e=this.drawables.length;if(0===e)this.action_icons.composite_icon.hide(),this.action_icons.filters_icon.hide();else if(1===e)this.action_icons.composite_icon.toggle(this.drawables[0]instanceof Ae),this.action_icons.filters_icon.hide();else{var t,n,a,i=this.drawables[0].get_type(),o=0;for(t=0;t<e&&(a=this.drawables[t]).get_type()===i;t++)a instanceof $e&&o++;if(this.drawables[0]instanceof Ee?this.action_icons.composite_icon.show():(this.action_icons.composite_icon.hide(),s()(".tooltip").remove()),o>1&&o===this.drawables.length){var r,l={};for(a=this.drawables[0],n=0;n<a.filters_manager.filters.length;n++)l[(r=a.filters_manager.filters[n]).name]=[r];for(t=1;t<this.drawables.length;t++)for(a=this.drawables[t],n=0;n<a.filters_manager.filters.length;n++)(r=a.filters_manager.filters[n]).name in l&&l[r.name].push(r);for(var c in this.filters_manager.remove_all(),l){var d=l[c];if(d.length===o){var u=new se({name:d[0].name,index:d[0].index});this.filters_manager.add_filter(u)}}this.action_icons.filters_icon.toggle(this.filters_manager.filters.length>0)}else this.action_icons.filters_icon.hide()}},_restore_filter_managers:function(){for(var e=0;e<this.drawables.length;e++)this.drawables[e].filters_manager=this.saved_filters_managers[e];this.saved_filters_managers=[]},setup_multitrack_filtering:function(){if(this.filters_manager.filters.length>0){this.saved_filters_managers=[];for(var e=0;e<this.drawables.length;e++){var t=this.drawables[e];this.saved_filters_managers.push(t.filters_manager),t.filters_manager=this.filters_manager}}this.filters_manager.init_filters()},show_composite_track:function(){var e=new Ae(this.view,this.view,{name:this.config.get_value("name"),drawables:this.drawables});this.container.replace_drawable(this,e,!0),e.request_draw()},add_drawable:function(e){be.prototype.add_drawable.call(this,e),this.update_icons()},remove_drawable:function(e){be.prototype.remove_drawable.call(this,e),this.update_icons()},to_dict:function(){this.filters_manager.visible()&&this._restore_filter_managers();var e=he(be.prototype.to_dict.call(this),{filters:this.filters_manager.to_dict()});return this.filters_manager.visible()&&this.setup_multitrack_filtering(),e},request_draw:function(e){i.a.each(this.drawables,(function(t){t.request_draw(e)}))}});var ke=l.a.View.extend({initialize:function(e){he(e,{obj_type:"View"}),be.call(this,"View",e.container,e),this.chrom=null,this.vis_id=e.vis_id,this.dbkey=e.dbkey,this.stand_alone=void 0===e.stand_alone||e.stand_alone,this.label_tracks=[],this.tracks_to_be_redrawn=[],this.max_low=0,this.max_high=0,this.zoom_factor=3,this.min_separation=30,this.has_changes=!1,this.load_chroms_deferred=null,this.render(),this.canvas_manager=new p.a.CanvasManager(this.container.get(0).ownerDocument),this.reset(),this.config=ce.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"}],{name:e.name})},render:function(){this.requested_redraw=!1;var e=this.container,t=this;this.top_container=s()("<div/>").addClass("top-container").appendTo(e),this.browser_content_div=s()("<div/>").addClass("content").appendTo(e),this.bottom_container=s()("<div/>").addClass("bottom-container").appendTo(e),this.top_labeltrack=s()("<div/>").addClass("top-labeltrack").appendTo(this.top_container),this.viewport_container=s()("<div/>").addClass("viewport-container").attr("id","viewport-container").appendTo(this.browser_content_div),this.content_div=this.viewport_container,me(this.viewport_container,t),this.intro_div=s()("<div/>").addClass("intro").appendTo(this.viewport_container),s()("<div/>").text("Add Datasets to Visualization").addClass("action-button").appendTo(this.intro_div).click((function(){p.a.select_datasets({dbkey:t.dbkey},(function(e){i.a.each(e,(function(e){t.add_drawable(ze(e,t,t))}))}))})),e.attr("style","overflow: visible !important"),this.nav_container=s()("<div/>").addClass("trackster-nav-container").prependTo(this.top_container),this.nav=s()("<div/>").addClass("trackster-nav").appendTo(this.nav_container),this.stand_alone&&(this.nav_container.addClass("stand-alone"),this.nav.addClass("stand-alone")),this.overview=s()("<div/>").addClass("overview").appendTo(this.bottom_container),this.overview_viewport=s()("<div/>").addClass("overview-viewport").appendTo(this.overview),this.overview_close=s()("<a/>").attr("title","Close overview").addClass("icon-button overview-close tooltip").hide().appendTo(this.overview_viewport),this.overview_highlight=s()("<div/>").addClass("overview-highlight").hide().appendTo(this.overview_viewport),this.overview_box_background=s()("<div/>").addClass("overview-boxback").appendTo(this.overview_viewport),this.overview_box=s()("<div/>").addClass("overview-box").appendTo(this.overview_viewport),this.default_overview_height=this.overview_box.height(),this.nav_controls=s()("<div/>").addClass("nav-controls").appendTo(this.nav),this.chrom_select=s()("<select/>").attr({name:"chrom"}).addClass("chrom-nav").append("<option value=''>Loading</option>").appendTo(this.nav_controls);this.nav_input=s()("<input/>").addClass("nav-input").hide().bind("keyup focusout",(function(e){"focusout"!==e.type&&13!==(e.keyCode||e.which)&&27!==(e.keyCode||e.which)||(27!==(e.keyCode||e.which)&&t.go_to(s()(this).val()),s()(this).hide(),s()(this).val(""),t.location_span.show(),t.chrom_select.show()),e.stopPropagation()})).appendTo(this.nav_controls),this.location_span=s()("<span/>").addClass("location").attr("title","Click to change location").tooltip({placement:"bottom"}).appendTo(this.nav_controls),this.location_span.click((function(){t.location_span.hide(),t.chrom_select.hide(),t.nav_input.val("".concat(t.chrom,":").concat(t.low,"-").concat(t.high)),t.nav_input.css("display","inline-block"),t.nav_input.select(),t.nav_input.focus(),t.nav_input.autocomplete({source:function(e,n){var a=[],i=s.a.map(t.get_tracks($e),(function(t){return t.data_manager.search_features(e.term).success((function(e){a=a.concat(e)}))}));s.a.when.apply(s.a,i).done((function(){n(s.a.map(a,(function(e){return{label:e[0],value:e[1]}})))}))},minLength:2})})),void 0!==this.vis_id&&(this.hidden_input=s()("<input/>").attr("type","hidden").val(this.vis_id).appendTo(this.nav_controls)),this.zo_link=s()("<a/>").attr("id","zoom-out").attr("title","Zoom out").tooltip({placement:"bottom"}).click((function(){t.zoom_out()})).appendTo(this.nav_controls),this.zi_link=s()("<a/>").attr("id","zoom-in").attr("title","Zoom in").tooltip({placement:"bottom"}).click((function(){t.zoom_in()})).appendTo(this.nav_controls),this.load_chroms_deferred=this.load_chroms({low:0}),this.chrom_select.bind("change",(function(){t.change_chrom(t.chrom_select.val())})),this.browser_content_div.click((function(e){s()(this).find("input").trigger("blur")})),this.browser_content_div.bind("dblclick",(function(e){t.zoom_in(e.pageX,this.viewport_container)})),this.overview_box.bind("dragstart",(function(e,t){this.current_x=t.offsetX})).bind("drag",(function(e,n){var a=n.offsetX-this.current_x;this.current_x=n.offsetX;var i=Math.round(a/t.viewport_container.width()*(t.max_high-t.max_low));t.move_delta(-i)})),this.overview_close.click((function(){t.reset_overview()})),this.viewport_container.bind("draginit",(function(e,n){if(e.clientX>t.viewport_container.width()-16)return!1})).bind("dragstart",(function(e,n){n.original_low=t.low,n.current_height=e.clientY,n.current_x=n.offsetX})).bind("drag",(function(e,n){var a=s()(this),i=n.offsetX-n.current_x,o=a.scrollTop()-(e.clientY-n.current_height);a.scrollTop(o),n.current_height=e.clientY,n.current_x=n.offsetX;var r=Math.round(i/t.viewport_container.width()*(t.high-t.low));t.move_delta(r)})),this.top_labeltrack.bind("dragstart",(function(e,n){return s()("<div/>").addClass("zoom-area").css("height",t.browser_content_div.height()+t.top_labeltrack.height()+1).appendTo(s()(this))})).bind("drag",(function(e,n){s()(n.proxy).css({left:Math.min(e.pageX,n.startX)-t.container.offset().left,width:Math.abs(e.pageX-n.startX)});var a=Math.min(e.pageX,n.startX)-t.container.offset().left,i=Math.max(e.pageX,n.startX)-t.container.offset().left,o=t.high-t.low,r=t.viewport_container.width();t.update_location(Math.round(a/r*o)+t.low,Math.round(i/r*o)+t.low)})).bind("dragend",(function(e,n){var a=Math.min(e.pageX,n.startX),i=Math.max(e.pageX,n.startX),o=t.high-t.low,r=t.viewport_container.width(),l=t.low;t.low=Math.round(a/r*o)+l,t.high=Math.round(i/r*o)+l,s()(n.proxy).remove(),t.request_redraw()})),this.add_label_track(new Oe(this,{content_div:this.top_labeltrack})),s()(window).bind("resize",(function(){this.resize_timer&&window.clearTimeout(this.resize_timer),this.resize_timer=window.setTimeout((function(){t.resize_window()}),500)})),s()(document).bind("redraw",(function(){t.redraw()})),this.reset(),s()(window).trigger("resize")},get_base_color:function(e){return this.config.get_value("".concat(e.toLowerCase(),"_color"))||this.config.get_value("n_color")}});he(ke.prototype,be.prototype,{changed:function(){this.has_changes=!0},update_intro_div:function(){this.intro_div.toggle(0===this.drawables.length)},trigger_navigate:function(e,t,n,a){var i=this;this.timer&&window.clearTimeout(this.timer),a?this.timer=window.setTimeout((function(){i.trigger("navigate","".concat(e,":").concat(t,"-").concat(n))}),500):this.trigger("navigate","".concat(e,":").concat(t,"-").concat(n))},update_location:function(e,t){this.location_span.text("".concat(_.a.commatize(e)," - ").concat(_.a.commatize(t))),this.nav_input.val("".concat(this.chrom,":").concat(_.a.commatize(e),"-").concat(_.a.commatize(t)));var n=this.chrom_select.val();""!==n&&this.trigger_navigate(n,this.low,this.high,!0)},load_chroms:function(e){var t=this;e.num=100;var n=s.a.Deferred();return s.a.ajax({url:"".concat(Object(c.getAppRoot)(),"api/genomes/").concat(this.dbkey),data:e,dataType:"json",success:function(e){if(0!==e.chrom_info.length){if(e.reference){var a=new Ie(t);t.add_label_track(a),t.reference_track=a}t.chrom_data=e.chrom_info,t.chrom_select.html(""),t.chrom_select.append(s()('<option value="">Select Chrom/Contig</option>'));for(var i=0,o=t.chrom_data.length;i<o;i++){var r=t.chrom_data[i].chrom,l=s()("<option>");l.text(r),l.val(r),t.chrom_select.append(l)}e.prev_chroms&&t.chrom_select.append(s()('<option value="previous">Previous '.concat(100,"</option>"))),e.next_chroms&&t.chrom_select.append(s()('<option value="next">Next '.concat(100,"</option>"))),t.chrom_start_index=e.start_index,n.resolve(e.chrom_info)}},error:function(){alert("Could not load chroms for this dbkey: ".concat(this.dbkey))}}),n},change_chrom:function(e,t,n){var a=this;if(a.chrom_data){if(e&&"None"!==e)if("previous"!==e)if("next"!==e){var i=s.a.grep(a.chrom_data,(function(t,n){return t.chrom===e}))[0];if(void 0!==i){if(e!==a.chrom){a.chrom=e,a.chrom_select.val(a.chrom),a.max_high=i.len-1,a.reset();for(var o=0,r=a.drawables.length;o<r;o++){var l=a.drawables[o];l.init&&l.init()}a.reference_track&&a.reference_track.init()}void 0===t&&void 0===n?(a.low=0,a.high=a.max_high):(a.low=void 0!==t?Math.max(t,0):0,void 0===n?(a.low=Math.max(a.low-15,0),a.high=a.low+30):a.high=Math.min(n,a.max_high)),a.request_redraw()}else a.load_chroms({chrom:e},(function(){a.change_chrom(e,t,n)}))}else a.load_chroms({low:this.chrom_start_index+100});else a.load_chroms({low:this.chrom_start_index-100})}else a.load_chroms_deferred.then((function(){a.change_chrom(e,t,n)}))},go_to:function(e){var t=(e=(e=e.replace(/,/g,"")).replace(/:|-/g," ")).split(/\s+/),n=t[0],a=t[1]?parseInt(t[1],10):void 0,i=t[2]?parseInt(t[2],10):void 0;this.change_chrom(n,a,i)},move_fraction:function(e){var t=this.high-this.low;this.move_delta(e*t)},move_delta:function(e){var t=this,n=t.high-t.low;t.low-e<t.max_low?(t.low=t.max_low,t.high=t.max_low+n):t.high-e>t.max_high?(t.high=t.max_high,t.low=t.max_high-n):(t.high-=e,t.low-=e),t.request_redraw({data_fetch:!1}),this.redraw_on_move_fn&&window.clearTimeout(this.redraw_on_move_fn),this.redraw_on_move_fn=window.setTimeout((function(){t.request_redraw()}),200);var a=t.chrom_select.val();this.trigger_navigate(a,t.low,t.high,!0)},add_drawable:function(e){be.prototype.add_drawable.call(this,e),e.init(),this.changed(),this.update_intro_div();var t=this;e.config.on("change",(function(){t.changed()}))},add_label_track:function(e){e.view=this,e.init(),this.label_tracks.push(e)},remove_drawable:function(e,t){if(be.prototype.remove_drawable.call(this,e),t){var n=this;e.container_div.hide(0,(function(){s()(this).remove(),n.update_intro_div()}))}},reset:function(){this.low=this.max_low,this.high=this.max_high,this.viewport_container.find(".yaxislabel").remove()},request_redraw:function(e,t){var n=this,a=t?[t]:n.drawables;i.a.each(a,(function(t){var a=i.a.find(n.tracks_to_be_redrawn,(function(e){return e[0]===t}));a?a[1]=e:n.tracks_to_be_redrawn.push([t,e])})),this.requested_redraw||(window.requestAnimationFrame((function(){n._redraw()})),this.requested_redraw=!0)},_redraw:function(){this.requested_redraw=!1;var e=this.low,t=this.high;e<this.max_low&&(e=this.max_low),t>this.max_high&&(t=this.max_high);var n=this.high-this.low;0!==this.high&&n<this.min_separation&&(t=e+this.min_separation),this.low=Math.floor(e),this.high=Math.ceil(t),this.update_location(this.low,this.high),this.resolution_px_b=this.viewport_container.width()/(this.high-this.low);var a=this.low/(this.max_high-this.max_low)*this.overview_viewport.width()||0,o=(this.high-this.low)/(this.max_high-this.max_low)*this.overview_viewport.width()||0;this.overview_box.css({left:a,width:Math.max(13,o)}).show(),o<13&&this.overview_box.css("left",a-(13-o)/2),this.overview_highlight&&this.overview_highlight.css({left:a,width:o}),i.a.each(this.tracks_to_be_redrawn,(function(e){var t=e[0],n=e[1];t&&t._draw(n)})),this.tracks_to_be_redrawn=[],i.a.each(this.label_tracks,(function(e){e._draw()}))},zoom_in:function(e,t){if(!(0===this.max_high||this.high-this.low<=this.min_separation)){var n=this.high-this.low,a=n/2+this.low,i=n/this.zoom_factor/2;e&&(a=e/this.viewport_container.width()*(this.high-this.low)+this.low),this.low=Math.round(a-i),this.high=Math.round(a+i),this.changed(),this.request_redraw()}},zoom_out:function(){if(0!==this.max_high){var e=this.high-this.low,t=e/2+this.low,n=e*this.zoom_factor/2;this.low=Math.round(t-n),this.high=Math.round(t+n),this.changed(),this.request_redraw()}},resize_viewport:function(){this.viewport_container.height(this.container.height()-this.top_container.height()-this.bottom_container.height())},resize_window:function(){this.resize_viewport(),this.request_redraw()},set_overview:function(e){if(this.overview_drawable){if(this.overview_drawable.dataset.id===e.dataset.id)return;this.overview_viewport.find(".track").remove()}var t=e.copy({content_div:this.overview_viewport}),n=this;t.header_div.hide(),t.is_overview=!0,n.overview_drawable=t,this.overview_drawable.postdraw_actions=function(){n.overview_highlight.show().height(n.overview_drawable.content_div.height()),n.overview_viewport.height(n.overview_drawable.content_div.height()+n.overview_box.outerHeight()),n.overview_close.show(),n.resize_window()},n.overview_drawable.request_draw(),this.changed()},reset_overview:function(){s()(".tooltip").remove(),this.overview_viewport.find(".track-tile").remove(),this.overview_viewport.height(this.default_overview_height),this.overview_box.height(this.default_overview_height),this.overview_close.hide(),this.overview_highlight.hide(),this.resize_window(),this.overview_drawable=null}});var Me=le.a.Tool.extend({defaults:{track:null},initialize:function(e){le.a.Tool.prototype.initialize.call(this,e);var t=!0;void 0!==e.tool_state&&void 0!==e.tool_state.hidden&&(t=e.tool_state.hidden),this.set("hidden",t),this.remove_inputs(["data","hidden_data","conditional"])},state_dict:function(e){return i.a.extend(this.get_inputs_dict(),{hidden:!this.is_visible()})}}),xe=l.a.View.extend({events:{"change :input":"update_value"},render:function(){var e=this.$el.addClass("param-row"),t=this.model;s()("<div>").addClass("param-label").text(t.get("label")).appendTo(e),s()("<div/>").addClass("param-input").html(t.get("html")).appendTo(e).find(":input").val(t.get("value")),s()("<div style='clear: both;'/>").appendTo(e)},update_value:function(e){this.model.set_value(s()(e.target).val())}}),Le=l.a.View.extend({initialize:function(e){this.model.on("change:hidden",this.set_visible,this)},render:function(){var e=this,t=this.model,n=this.$el.addClass("dynamic-tool").hide();n.bind("drag",(function(e){e.stopPropagation()})).click((function(e){e.stopPropagation()})).bind("dblclick",(function(e){e.stopPropagation()})).keydown((function(e){e.stopPropagation()})),s()("<div class='tool-name'>").appendTo(n).text(t.get("name")),t.get("inputs").each((function(e){var t=new xe({model:e});t.render(),n.append(t.$el)})),n.find("input").click((function(){s()(this).select()}));var a=s()("<div>").addClass("param-row").appendTo(n),i=s()("<input type='submit'>").attr("value","Run on complete dataset").appendTo(a);s()("<input type='submit'>").attr("value","Run on visible region").appendTo(a).click((function(){e.run_on_region()})),i.click((function(){e.run_on_dataset()})),t.is_visible()&&this.$el.show()},set_visible:function(){this.$el.toggle(this.model.is_visible())},update_params:function(){for(var e=0;e<this.params.length;e++)this.params[e].update_value()},run_on_dataset:function(){var e=this.model,t=Object(d.a)();this.run({target_dataset_id:this.model.get("track").dataset.id,action:"rerun",tool_id:e.id},null,(function(n){t.modal.show({title:"".concat(e.get("name")," is Running"),body:"".concat(e.get("name")," is running on the complete dataset. Tool outputs are in dataset's history."),buttons:{Close:function(){t.modal.hide()}}})}))},run_on_region:function(){var e,t=this.model.get("track"),n=this.model,a=new p.a.GenomeRegion({chrom:t.view.chrom,start:t.view.low,end:t.view.high}),i={target_dataset_id:t.dataset.id,action:"rerun",tool_id:n.id,regions:[a.toJSON()]},o=n.get("name")+t.tool_region_and_parameters_str(a);if(t.container===t.view){var s=new we(t.view,t.view,{name:t.config.get_value("name")}),r=t.container.replace_drawable(t,s,!1);s.container_div.insertBefore(t.view.content_div.children()[r]),s.add_drawable(t),t.container_div.appendTo(s.content_div),e=s}else e=t.container;var l=new t.constructor(t.view,e,{name:o,hda_ldda:"hda"});l.init_for_tool_data(),l.change_mode(t.mode),l.set_filters_manager(t.filters_manager.copy(l)),l.update_icons(),e.add_drawable(l),l.tiles_div.text("Starting job."),this.run(i,l,(function(e){l.set_dataset(new re.a(e)),l.tiles_div.text("Running job."),l.init()}))},run:function(e,t,n){e.inputs=this.model.get_inputs_dict();var a=new _.a.ServerStateDeferred({ajax_settings:{url:"".concat(Object(c.getAppRoot)(),"api/tools"),data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});s.a.when(a.go()).then((function(e){"no converter"===e?(t.container_div.addClass("error"),t.content_div.text(_e)):e.error?(t.container_div.addClass("error"),t.content_div.text("Tool cannot be rerun: "+e.message)):n(e)}))}}),Te=function(e,t){ee.Scaler.call(this,t),this.filter=e};Te.prototype.gen_val=function(e){return this.filter.high===Number.MAX_VALUE||this.filter.low===-Number.MAX_VALUE||this.filter.low===this.filter.high?this.default_val:(parseFloat(e[this.filter.index])-this.filter.low)/(this.filter.high-this.filter.low)};var Se=function(e,t,n,a,i){this.track=e,this.region=t,this.low=t.get("start"),this.high=t.get("end"),this.w_scale=n,this.canvas=a,this.html_elt=s()("<div class='track-tile'/>").append(a),this.data=i,this.stale=!1};Se.prototype.predisplay_actions=function(){};var De=function(e,t,n,a,i){Se.call(this,e,t,n,a,i)};De.prototype.predisplay_actions=function(){};var Ce=function(e,t,n,a,i,o,s,r,l,c,d){Se.call(this,e,t,n,a,i),this.mode=o,this.all_slotted=r,this.feature_mapper=l,this.has_icons=!1,this.incomplete_features=c,this.other_tiles_features_drawn={},this.seq_data=d};he(Ce.prototype,Se.prototype),Ce.prototype.predisplay_actions=function(){};var je=function(e,t,n){he(n,{drag_handle_class:"draghandle"}),ye.call(this,e,t,n),this.dataset=null,n.dataset&&(this.dataset=n.dataset instanceof l.a.Model?n.dataset:new re.a(n.dataset)),this.dataset_check_type="converted_datasets_state",this.data_url_extra_params={},this.data_query_wait="data_query_wait"in n?n.data_query_wait:5e3,this.data_manager="data_manager"in n?n.data_manager:new p.a.GenomeDataManager({dataset:this.dataset,genome:new p.a.Genome({key:e.dbkey,chroms_info:{chrom_info:e.chrom_data}}),data_mode_compatible:this.data_and_mode_compatible,can_subset:this.can_subset}),this.min_height_px=16,this.max_height_px=800,this.visible_height_px=this.config.get_value("height"),this.content_div=s()("<div class='track-content'>").appendTo(this.container_div),this.container&&(this.container.content_div.append(this.container_div),"resize"in n&&!n.resize||this.add_resize_handle())};he(je.prototype,ye.prototype,{action_icons_def:[{name:"mode_icon",title:h()("Set display mode"),css_class:"chevron-expand",on_click_fn:function(){}},ye.prototype.action_icons_def[0],{name:"overview_icon",title:h()("Set as overview"),css_class:"application-dock-270",on_click_fn:function(e){e.view.set_overview(e)}},ye.prototype.action_icons_def[1],{name:"filters_icon",title:h()("Filters"),css_class:"ui-slider-050",on_click_fn:function(e){e.filters_manager.visible()?e.filters_manager.clear_filters():e.filters_manager.init_filters(),e.filters_manager.toggle()}},{name:"tools_icon",title:h()("Tool"),css_class:"hammer",on_click_fn:function(e){e.tool.toggle(),e.tool.is_visible()?e.set_name(e.config.get_value("name")+e.tool_region_and_parameters_str()):e.revert_name(),s()(".tooltip").remove()}},{name:"param_space_viz_icon",title:h()("Tool parameter space visualization"),css_class:"arrow-split",on_click_fn:function(e){var t=Object(d.a)(),n="\n                    <strong>Tool</strong>:".concat(e.tool.get("name"),"<br/>\n                    <strong>Dataset</strong>:").concat(e.config.get_value("name"),'<br/>\n                    <strong>Region(s)</strong>:\n                        <select name="regions">\n                            <option value="cur">current viewing area</option>\n                            <option value="bookmarks">bookmarks</option>\n                            <option value="both">current viewing area and bookmarks</option>\n                        </select>\n                    ');t.modal.show({title:"Visualize tool parameter space and output from different parameter settings?",body:n,buttons:{No:function(){t.modal.hide(),s()(window).unbind("keypress.check_enter_esc")},Yes:function(){var n,a=s()('select[name="regions"] option:selected').val(),o=new p.a.GenomeRegion({chrom:(void 0).view.chrom,start:(void 0).view.low,end:(void 0).view.high}),r=i.a.map(s()(".bookmark"),(function(e){return new p.a.GenomeRegion({from_str:s()(e).children(".position").text()})}));n="cur"===a?[o]:"bookmarks"===a?r:[o].concat(r),t.modal.hide(),window.top.location.href="".concat(Object(c.getAppRoot)(),"visualization/sweepster?").concat(s.a.param({dataset_id:e.dataset.id,hda_ldda:e.dataset.get("hda_ldda"),regions:JSON.stringify(new l.a.Collection(n).toJSON())}))}}})}},ye.prototype.action_icons_def[2]],can_draw:function(){return this.dataset&&ye.prototype.can_draw.call(this)},build_container_div:function(){return s()("<div/>").addClass("track").attr("id","track_".concat(this.id))},set_dataset:function(e){this.dataset=e,this.data_manager.set("dataset",e)},on_resize:function(){this.request_draw({clear_tile_cache:!0})},add_resize_handle:function(){var e=this,t=!1,n=!1,a=s()("<div class='track-resize'>");s()(e.container_div).hover((function(){e.config.get_value("content_visible")&&(t=!0,a.show())}),(function(){t=!1,n||a.hide()})),a.hide().bind("dragstart",(function(t,a){n=!0,a.original_height=s()(e.content_div).height()})).bind("drag",(function(t,n){var a=Math.min(Math.max(n.original_height+n.deltaY,e.min_height_px),e.max_height_px);s()(e.tiles_div).css("height",a),e.visible_height_px=e.max_height_px===a?0:a,e.on_resize()})).bind("dragend",(function(i,o){e.tile_cache.clear(),n=!1,t||a.hide(),e.config.set_value("height",e.visible_height_px),e.changed()})).appendTo(e.container_div)},hide_contents:function(){this.tiles_div.hide(),this.container_div.find(".yaxislabel, .track-resize").hide()},show_contents:function(){this.tiles_div.show(),this.container_div.find(".yaxislabel, .track-resize").show(),this.request_draw()},get_type:function(){return this instanceof Oe?"LabelTrack":this instanceof Ie?"ReferenceTrack":this instanceof Ee?"LineTrack":this instanceof Re?"ReadTrack":this instanceof Pe?"VariantTrack":this instanceof Ae?"CompositeTrack":this instanceof $e?"FeatureTrack":""},show_message:function(e){return this.tiles_div.remove(),s()("<span/>").addClass("message").html(e).appendTo(this.content_div)},init:function(e){var t=this;if(t.enabled=!1,t.tile_cache.clear(),t.data_manager.clear(),t.content_div.children().remove(),t.container_div.removeClass("nodata error pending"),t.tiles_div=s()("<div/>").addClass("tiles").appendTo(t.content_div),t.dataset.id){var n=s.a.Deferred(),a={hda_ldda:t.dataset.get("hda_ldda"),data_type:this.dataset_check_type,chrom:t.view.chrom,retry:e};return s.a.getJSON(this.dataset.url(),a,(function(e){if(e&&"error"!==e&&"error"!==e.kind)"no converter"===e?(t.container_div.addClass("error"),t.show_message(_e)):"no data"===e||void 0!==e.data&&(null===e.data||0===e.data.length)?(t.container_div.addClass("nodata"),t.show_message("No data for this chrom/contig.")):"pending"===e?(t.container_div.addClass("pending"),t.show_message("Preparing data. This can take a while for a large dataset. If the visualization is saved and closed, preparation will continue in the background."),window.setTimeout((function(){t.init()}),t.data_query_wait)):"data"!==e&&"data"!==e.status||(e.valid_chroms&&(t.valid_chroms=e.valid_chroms,t.update_icons()),t.tiles_div.text("Ready for display"),t.view.chrom?(t.tiles_div.text(""),t.tiles_div.css("height","".concat(t.visible_height_px,"px")),t.enabled=!0,s.a.when.apply(s.a,t.predraw_init()).done((function(){n.resolve(),t.container_div.removeClass("nodata error pending"),t.request_draw()}))):n.resolve());else{t.container_div.addClass("error");var a=t.show_message("Cannot display dataset due to an error. ");e.message&&(a.append(s()("<a href='javascript:void(0);'></a>").text("View error").click((function(){var t=Object(d.a)();t.modal.show({title:h()("Trackster Error"),body:"<pre>".concat(e.message,"</pre>"),buttons:{Close:function(){t.modal.hide()}}})}))),a.append(s()("<span/>").text(" ")),a.append(s()("<a href='javascript:void(0);'></a>").text("Try again").click((function(){t.init(!0)}))))}})),this.update_icons(),n}},predraw_init:function(){var e=this;return s.a.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(function(t){var n=t.data;if(n&&void 0!==n.min&&void 0!==n.max){var a=n.min,i=n.max;a=Math.floor(Math.min(0,Math.max(a,n.mean-2*n.sd))),i=Math.ceil(Math.max(0,Math.min(i,n.mean+2*n.sd))),e.config.set_default_value("min_value",a),e.config.set_default_value("max_value",i),e.config.set_value("min_value",a),e.config.set_value("max_value",i)}}))},get_drawables:function(){return this}});var Ye=function(e,t,n){je.call(this,e,t,n);if(fe(this.container_div,this.drag_handle_class,0,this),this.filters_manager=new oe(this,"filters"in n?n.filters:null),this.data_manager.set("filters_manager",this.filters_manager),this.filters_available=!1,this.tool=n.tool?new Me(i.a.extend(n.tool,{track:this,tool_state:n.tool_state})):null,this.tile_cache=new p.a.Cache(10),this.left_offset=0,this.header_div&&(this.set_filters_manager(this.filters_manager),this.tool)){var a=new Le({model:this.tool});a.render(),this.dynamic_tool_div=a.$el,this.header_div.after(this.dynamic_tool_div)}this.tiles_div=s()("<div/>").addClass("tiles").appendTo(this.content_div),this.config.get_value("content_visible")||this.tiles_div.hide(),this.overlay_div=s()("<div/>").addClass("overlay").appendTo(this.content_div),n.mode&&this.change_mode(n.mode)};he(Ye.prototype,ye.prototype,je.prototype,{action_icons_def:je.prototype.action_icons_def.concat([{name:"show_more_rows_icon",title:"To minimize track height, not all feature rows are displayed. Click to display more rows.",css_class:"exclamation",on_click_fn:function(e){s()(".tooltip").remove(),e.slotters[e.view.resolution_px_b].max_rows*=2,e.request_draw({clear_tile_cache:!0})},hide:!0}]),copy:function(e){var t=this.to_dict();he(t,{data_manager:this.data_manager});var n=new this.constructor(this.view,e,t);return n.change_mode(this.mode),n.enabled=this.enabled,n},set_filters_manager:function(e){this.filters_manager=e,this.header_div.after(this.filters_manager.parent_div)},to_dict:function(){return{track_type:this.get_type(),dataset:{id:this.dataset.id,hda_ldda:this.dataset.get("hda_ldda")},prefs:this.config.to_key_value_dict(),mode:this.mode,filters:this.filters_manager.to_dict(),tool_state:this.tool?this.tool.state_dict():{}}},set_min_max:function(){var e=this;return s.a.getJSON(e.dataset.url(),{data_type:"data",stats:!0,chrom:e.view.chrom,low:0,high:e.view.max_high,hda_ldda:e.dataset.get("hda_ldda")},(function(t){var n=t.data;if(isNaN(parseFloat(e.config.get_value("min_value")))||isNaN(parseFloat(e.config.get_value("max_value")))){var a=n.min,i=n.max;a=Math.floor(Math.min(0,Math.max(a,n.mean-2*n.sd))),i=Math.ceil(Math.max(0,Math.min(i,n.mean+2*n.sd))),e.config.set_value("min_value",a),e.config.set_value("max_value",i)}}))},change_mode:function(e){return this.mode=e,this.config.set_value("mode",e),"Auto"===e&&this.data_manager.clear(),this.request_draw({clear_tile_cache:!0}),this.action_icons.mode_icon.attr("title","Set display mode (now: ".concat(this.mode,")")),this},update_icons:function(){this.action_icons.filters_icon.toggle(this.filters_available),this.action_icons.tools_icon.toggle(null!==this.tool),this.action_icons.param_space_viz_icon.toggle(null!==this.tool)},_gen_tile_cache_key:function(e,t){return"".concat(e,"_").concat(t)},request_draw:function(e){e&&e.clear_tile_cache&&this.tile_cache.clear(),this.view.request_redraw(e,this)},before_draw:function(){this.max_height_px=0},_draw:function(e){var t=this;if(this.can_draw()){var n=e&&e.clear_after,a=this.view.low,o=this.view.high,r=this.view.container.width(),l=this.view.resolution_px_b,c=1/l;this.is_overview&&(a=this.view.max_low,o=this.view.max_high,c=1/(l=r/(this.view.max_high-this.view.max_low))),this.before_draw(),this.tiles_div.children().addClass("remove");for(var d,u,h=Math.floor(400*c),m=Math.floor(a/h),f=[],_=[];m*h<o;)d=new p.a.GenomeRegion({chrom:this.view.chrom,start:m*h,end:Math.min((m+1)*h,this.view.max_high)}),u=this.draw_helper(d,l,e),f.push(u),s.a.when(u).then((function(e){_.push(e)})),m+=1;n||this.tiles_div.children(".remove").removeClass("remove").remove(),s.a.when.apply(s.a,f).then((function(){t.tiles_div.children(".remove").remove(),0!==(_=i.a.filter(_,(function(e){return null!==e}))).length&&t.postdraw_actions(_,r,l,n)}))}},_add_yaxis_label:function(e,t){var n=this,a="max"===e?"top":"bottom",i="max"===e?"max":"min",o="max"===e?"max_value":"min_value",r=this.container_div.find(".yaxislabel.".concat(a)),l=ve(this.config.get_value(o),1);t=t||function(){n.request_draw({clear_tile_cache:!0})},0!==r.length?r.text(l):(r=s()("<div/>").text(l).make_text_editable({num_cols:12,on_finish:function(e){s()(".tooltip").remove(),this.config.set_value(o,ve(e,1)),t()},help_text:"Set ".concat(i," value")}).addClass("yaxislabel ".concat(a)).css("color",this.config.get_value("label_color")),this.container_div.prepend(r))},postdraw_actions:function(e,t,n,a){var o=this;i.a.filter(e,(function(e){return e instanceof De})).length>0?(this.max_height_px=0,i.a.each(e,(function(e){e instanceof De||(e.html_elt.remove(),o.draw_helper(e.region,n,{force:!0,mode:"Coverage"}))})),this._add_yaxis_label("max")):(this.container_div.find(".yaxislabel").remove(),i.a.find(e,(function(e){return e.has_icons}))&&i.a.each(e,(function(e){e.has_icons||e.html_elt.css("padding-top",20)})))},get_mode:function(e){return this.mode},update_auto_mode:function(e){},_get_drawables:function(){return[this]},draw_helper:function(e,t,n){var a=this;n||(n={});var o,r=n.force,l=n.mode||this.mode,c=1/t,d=this._get_drawables(),u=this._gen_tile_cache_key(t,e),h=r?void 0:this.tile_cache.get_elt(u);if(h)return(o=h)&&"track"in o&&this.show_tile(h,t),h;if(!1===n.data_fetch)return null;var p=function(){var t=i.a.find(ge,(function(e){return e===l}))?"Coverage":l,n=i.a.map(d,(function(n){return n.data_manager.get_data(e,t,c,a.data_url_extra_params)}));return a.view.reference_track&&n.push(a.view.reference_track.data_manager.get_data(e,l,c,a.view.reference_track.data_url_extra_params)),n},m=s.a.Deferred();return this.tile_cache.set_elt(u,m),s.a.when.apply(s.a,p()).then((function(){var o,r=p(),l=r;if(i.a.find(r,(function(e){return _.a.is_deferred(e)})))return a.tile_cache.set_elt(u,void 0),void s.a.when(a.draw_helper(e,t,n)).then((function(e){m.resolve(e)}));a.view.reference_track&&(o=a.view.reference_track.data_manager.subset_entry(r.pop(),e));var c=[],h=[];i.a.each(d,(function(e,n){var a=l[n];"Auto"===e.mode&&(e.mode=e.get_mode(a),e.update_auto_mode(e.mode)),c.push(e.mode),h.push(e.get_canvas_height(a,e.mode,t,b))}));var f,g=a.view.canvas_manager.new_canvas(),v=e.get("start"),y=e.get("end"),b=Math.ceil((y-v)*t)+a.left_offset,w=i.a.max(h);g.width=b,g.height=n.height||w;var k=g.getContext("2d");k.translate(a.left_offset,0),d.length>1&&(k.globalAlpha=.5,k.globalCompositeOperation="source-over"),i.a.each(d,(function(n,a){f=n.draw_tile(l[a],k,c[a],e,t,o)})),void 0!==f&&(a.tile_cache.set_elt(u,f),a.show_tile(f,t)),m.resolve(f)})),m},get_canvas_height:function(e,t,n,a){return this.visible_height_px},_draw_line_track_tile:function(e,t,n,a,o){-1!==[void 0,null].indexOf(this.config.get_value("min_value"))&&this.config.set_value("min_value",0),-1!==[void 0,null,0].indexOf(this.config.get_value("max_value"))&&this.config.set_value("max_value",i.a.max(i.a.map(e.data,(function(e){return e[1]})))||0);var s=t.canvas;return new ee.LinePainter(e.data,a.get("start"),a.get("end"),this.config.to_key_value_dict(),n).draw(t,s.width,s.height,o),new De(this,a,o,s,e.data)},draw_tile:function(e,t,n,a,i,o){},show_tile:function(e,t){var n=e.html_elt;e.predisplay_actions();var a=Math.round((e.low-(this.is_overview?this.view.max_low:this.view.low))*t);this.left_offset&&(a-=this.left_offset),n.css("left",a),n.hasClass("remove")?n.removeClass("remove"):this.tiles_div.append(n),n.css("height","auto"),this.max_height_px=Math.max(this.max_height_px,n.height()-2),n.parent().children().css("height","".concat(this.max_height_px,"px"));var i=this.max_height_px;0!==this.visible_height_px&&(i=Math.min(this.max_height_px,this.visible_height_px)),this.tiles_div.css("height","".concat(i,"px"))},tool_region_and_parameters_str:function(e){var t=void 0!==e?e.toString():"all",n=i.a.values(this.tool.get_inputs_dict()).join(", ");return" - region=[".concat(t,"], parameters=[").concat(n,"]")},data_and_mode_compatible:function(e,t){return"Auto"===t||("Coverage"===t?"bigwig"===e.dataset_type:"bigwig"!==e.dataset_type&&"no_detail"!==e.extra_info)},can_subset:function(e){return!e.message&&"no_detail"!==e.extra_info&&("bigwig"!==e.dataset_type||e.data[1][0]-e.data[0][0]==1)},init_for_tool_data:function(){this.data_manager.set("data_type","raw_data"),this.data_query_wait=1e3,this.dataset_check_type="state"}});var Oe=function(e,t){je.call(this,e,t,{resize:!1,header:!1}),this.container_div.addClass("label-track")};he(Oe.prototype,je.prototype,{init:function(){this.enabled=!0},predraw_init:function(){},_draw:function(e){for(var t=this.view,n=t.high-t.low,a=Math.floor(Math.pow(10,Math.floor(Math.log(n)/Math.log(10)))),i=Math.floor(t.low/a)*a,o=this.view.container.width(),r=s()("<div/>").addClass("label-container");i<t.high;){var l=Math.floor((i-t.low)/n*o);r.append(s()("<div/>").addClass("pos-label").text(_.a.commatize(i)).css({left:l})),i+=a}this.content_div.children(":first").remove(),this.content_div.append(r)}});var Ae=function(e,t,n){if(Ye.call(this,e,t,n),this.drawables=[],"drawables"in n){for(var a,o=0;o<n.drawables.length;o++)a=n.drawables[o],this.drawables[o]=ze(a,e,null),a.left_offset>this.left_offset&&(this.left_offset=a.left_offset);this.enabled=!0}i.a.each(this.drawables,(function(e){(e instanceof $e||e instanceof Re)&&e.change_mode("Coverage")})),this.update_icons(),this.obj_type="CompositeTrack"};he(Ae.prototype,Ye.prototype,{display_modes:ge,build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},action_icons_def:[{name:"composite_icon",title:h()("Show individual tracks"),css_class:"layers-stack",on_click_fn:function(e){s()(".tooltip").remove(),e.show_group()}}].concat(Ye.prototype.action_icons_def),to_dict:be.prototype.to_dict,add_drawable:be.prototype.add_drawable,unpack_drawables:be.prototype.unpack_drawables,config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},on_resize:function(){var e=this.visible_height_px;i.a.each(this.drawables,(function(t){t.visible_height_px=e})),je.prototype.on_resize.call(this)},change_mode:function(e){Ye.prototype.change_mode.call(this,e);for(var t=0;t<this.drawables.length;t++)this.drawables[t].change_mode(e)},init:function(){for(var e=[],t=0;t<this.drawables.length;t++)e.push(this.drawables[t].init());var n=this;s.a.when.apply(s.a,e).then((function(){n.enabled=!0,n.request_draw()}))},update_icons:function(){this.action_icons.filters_icon.hide(),this.action_icons.tools_icon.hide(),this.action_icons.param_space_viz_icon.hide()},can_draw:ye.prototype.can_draw,_get_drawables:function(){return this.drawables},show_group:function(){for(var e,t=new we(this.view,this.container,{name:this.config.get_value("name")}),n=0;n<this.drawables.length;n++)(e=this.drawables[n]).update_icons(),t.add_drawable(e),e.container=t,t.content_div.append(e.container_div);this.container.replace_drawable(this,t,!0),t.request_draw({clear_tile_cache:!0})},before_draw:function(){var e=i.a.min(i.a.map(this.drawables,(function(e){return e.config.get_value("min_value")}))),t=i.a.max(i.a.map(this.drawables,(function(e){return e.config.get_value("max_value")})));this.config.set_value("min_value",e),this.config.set_value("max_value",t),i.a.each(this.drawables,(function(n){n.config.set_value("min_value",e),n.config.set_value("max_value",t)}))},update_all_min_max:function(){var e=this.config.get_value("min_value"),t=this.config.get_value("max_value");i.a.each(this.drawables,(function(n){n.config.set_value("min_value",e),n.config.set_value("max_value",t)})),this.request_draw({clear_tile_cache:!0})},postdraw_actions:function(e,t,n,a){var i,o=-1;for(i=0;i<e.length;i++){var s=e[i].html_elt.find("canvas").height();s>o&&(o=s)}for(i=0;i<e.length;i++){var r=e[i];r.html_elt.find("canvas").height()!==o&&(this.draw_helper(r.region,n,{force:!0,height:o}),r.html_elt.remove())}var l=this,c=function(){l.update_all_min_max()};this._add_yaxis_label("min",c),this._add_yaxis_label("max",c)}});var Ie=function(e){Ye.call(this,e,{content_div:e.top_labeltrack},{resize:!1,header:!1}),this.left_offset=e.canvas_manager.char_width_px,this.container_div.addClass("reference-track"),this.data_url="".concat(Object(c.getAppRoot)(),"api/genomes/").concat(this.view.dbkey),this.data_url_extra_params={reference:!0},this.data_manager=new p.a.GenomeReferenceDataManager({data_url:this.data_url,can_subset:this.can_subset}),this.hide_contents()};he(Ie.prototype,ye.prototype,Ye.prototype,{build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"height",type:"int",default_value:13,hidden:!0}])},init:function(){this.data_manager.clear(),this.enabled=!0},predraw_init:function(){},can_draw:ye.prototype.can_draw,draw_helper:function(e,t,n){var a,i=this.tiles_div.is(":visible"),o=null;return t>this.view.canvas_manager.char_width_px?(this.tiles_div.show(),a=!0,o=Ye.prototype.draw_helper.call(this,e,t,n)):(a=!1,this.tiles_div.hide()),i!==a&&this.view.resize_viewport(),o},can_subset:function(e){return!0},draw_tile:function(e,t,n,a,i){var o=this.data_manager.subset_entry(e,a),s=o.data,r=t.canvas;t.font=t.canvas.manager.default_font,t.textAlign="center";for(var l=0,c=s.length;l<c;l++)t.fillStyle=this.view.get_base_color(s[l]),t.fillText(s[l],Math.floor(l*i),10);return new Se(this,a,i,r,o)}});var Ee=function(e,t,n){this.mode="Histogram",Ye.call(this,e,t,n),this.left_offset=30;var a,i,o=this;s.a.when((a="".concat(Object(c.getAppRoot)(),"datasets/").concat(this.dataset.id,"/display"),i=s.a.Deferred(),s.a.ajax({type:"HEAD",url:a,beforeSend:function(e){e.setRequestHeader("Range","bytes=0-10")},success:function(e,t,n){i.resolve(206===n.status)}}),i)).then((function(e){e&&(o.data_manager=new ue.BBIDataManager({dataset:o.dataset}))}))};he(Ee.prototype,ye.prototype,Ye.prototype,{display_modes:ge,build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"color",label:"Color",type:"color"},{key:"min_value",label:"Min Value",type:"float",default_value:void 0},{key:"max_value",label:"Max Value",type:"float",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:30,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},before_draw:function(){},draw_tile:function(e,t,n,a,i){return this._draw_line_track_tile(e,t,n,a,i)},can_subset:function(e){return e.data[1][0]-e.data[0][0]==1},postdraw_actions:function(e,t,n,a){this._add_yaxis_label("max"),this._add_yaxis_label("min")}});var He=function(e,t,n){this.mode="Heatmap",Ye.call(this,e,t,n)};he(He.prototype,ye.prototype,Ye.prototype,{display_modes:["Heatmap"],build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"pos_color",label:"Positive Color",type:"color",default_value:"#FF8C00"},{key:"neg_color",label:"Negative Color",type:"color",default_value:"#4169E1"},{key:"min_value",label:"Min Value",type:"int",default_value:void 0},{key:"max_value",label:"Max Value",type:"int",default_value:void 0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:500,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},predraw_init:function(){return s.a.getJSON(this.dataset.url(),{data_type:"data",stats:!0,chrom:this.view.chrom,low:0,high:this.view.max_high,hda_ldda:this.dataset.get("hda_ldda")},(function(e){}))},draw_tile:function(e,t,n,a,i){var o=t.canvas;return new ee.DiagonalHeatmapPainter(e.data,a.get("start"),a.get("end"),this.config.to_key_value_dict(),n).draw(t,o.width,o.height,i),new Se(this,a,i,o,e.data)}});var $e=function(e,t,n){Ye.call(this,e,t,n),this.container_div.addClass("feature-track"),this.summary_draw_height=30,this.slotters={},this.start_end_dct={},this.left_offset=200,this.set_painter_from_config()};he($e.prototype,ye.prototype,Ye.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0,help:"Show the number of items in each bin when drawing summary histogram"},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"connector_style",label:"Connector style",type:"select",default_value:"fishbones",options:[{label:"Line with arrows",value:"fishbone"},{label:"Arcs",value:"arcs"}]},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.set_painter_from_config(),this.request_draw({clear_tile_cache:!0})},set_painter_from_config:function(){"arcs"===this.config.get_value("connector_style")?this.painter=ee.ArcLinkedFeaturePainter:this.painter=ee.LinkedFeaturePainter},postdraw_actions:function(e,t,n,a){var o=this;if(Ye.prototype.postdraw_actions.call(this,e,t,n,a),0===i.a.filter(e,(function(e){return e instanceof De})).length){var r={};i.a.each(i.a.pluck(e,"incomplete_features"),(function(e){i.a.each(e,(function(e){r[e[0]]=e}))})),i.a.each(e,(function(e){var t=i.a.omit(r,i.a.map(e.incomplete_features,(function(e){return e[0]})));if(t=i.a.omit(t,i.a.keys(e.other_tiles_features_drawn)),0!==i.a.size(t)){var n={data:i.a.values(t)},a=o.view.canvas_manager.new_canvas(),l=a.getContext("2d");a.height=Math.max(e.canvas.height,o.get_canvas_height(n,e.mode,e.w_scale,100)),a.width=e.canvas.width,l.drawImage(e.canvas,0,0),l.translate(o.left_offset,0);var c=o.draw_tile(n,l,e.mode,e.region,e.w_scale,e.seq_data);s()(e.canvas).replaceWith(s()(c.canvas)),e.canvas=a,i.a.extend(e.other_tiles_features_drawn,r)}}))}if(this.filters_manager){var l,c=this.filters_manager.filters;for(l=0;l<c.length;l++)c[l].update_ui_elt();for(var d,u,h=!1,p=0;p<e.length;p++)if(e[p].data.length)for(d=e[p].data[0],l=0;l<c.length;l++)if((u=c[l]).applies_to(d)&&u.min!==u.max){h=!0;break}this.filters_available!==h&&(this.filters_available=h,this.filters_available||this.filters_manager.hide(),this.update_icons())}if(e[0]instanceof Ce){for(var m=!0,f=0;f<e.length;f++)if(!e[f].all_slotted){m=!1;break}this.action_icons.show_more_rows_icon.toggle(!m)}else this.action_icons.show_more_rows_icon.hide()},update_auto_mode:function(e){"Auto"===this.mode&&("no_detail"===e&&(e="feature spans"),this.action_icons.mode_icon.attr("title","Set display mode (now: Auto/".concat(e,")")))},incremental_slots:function(e,t,n){var a=this.view.canvas_manager.dummy_context,i=this.slotters[e];return i&&i.mode===n||(i=new k(e,n,100,(function(e){return a.measureText(e)})),this.slotters[e]=i),i.slot_features(t)},get_mode:function(e){return"no_detail"===e.extra_info||this.is_overview?"no_detail":this.view.high-this.view.low>12e3?"Squish":"Pack"},get_canvas_height:function(e,t,n,a){if("Coverage"===t||"bigwig"===e.dataset_type)return this.summary_draw_height;var i=this.incremental_slots(n,e.data,t),o=new this.painter(null,null,null,this.config.to_key_value_dict(),t);return Math.max(this.min_height_px,o.get_required_height(i,a))},draw_tile:function(e,t,n,a,i,o,s){var r=this,l=t.canvas,c=a.get("start"),d=a.get("end"),u=this.left_offset;if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,n,a,i);var h=[],p=this.slotters[i].slots,m=!0;if(e.data)for(var f=this.filters_manager.filters,_=0,g=e.data.length;_<g;_++){for(var v,y=e.data[_],b=!1,w=0,k=f.length;w<k;w++)if((v=f[w]).update_attrs(y),!v.keep(y)){b=!0;break}b||(h.push(y),y[0]in p||(m=!1))}var M=this.filters_manager.alpha_filter?new Te(this.filters_manager.alpha_filter):null,x=this.filters_manager.height_filter?new Te(this.filters_manager.height_filter):null,L=new this.painter(h,c,d,this.config.to_key_value_dict(),n,M,x,o,(function(e){return r.view.get_base_color(e)})),T=null,S=null;if(t.fillStyle=this.config.get_value("block_color"),t.font=t.canvas.manager.default_font,t.textAlign="right",e.data){var D=L.draw(t,l.width,l.height,i,p);T=D.feature_mapper,S=D.incomplete_features,T.translation=-u}return s?void 0:new Ce(r,a,i,l,e.data,n,e.message,m,T,S,o)}});var Pe=function(e,t,n){Ye.call(this,e,t,n),this.painter=ee.VariantPainter,this.summary_draw_height=30,this.left_offset=30};he(Pe.prototype,ye.prototype,Ye.prototype,{display_modes:["Auto","Coverage","Dense","Squish","Pack"],build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"color",label:"Histogram color",type:"color"},{key:"show_sample_data",label:"Show sample data",type:"bool",default_value:!0},{key:"show_labels",label:"Show summary and sample labels",type:"bool",default_value:!0},{key:"summary_height",label:"Locus summary height",type:"float",default_value:20},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})},draw_tile:function(e,t,n,a,i){if("bigwig"===e.dataset_type)return this._draw_line_track_tile(e,t,"Histogram",a,i);var o=this.view;return new this.painter(e.data,a.get("start"),a.get("end"),this.config.to_key_value_dict(),n,(function(e){return o.get_base_color(e)})).draw(t,t.canvas.width,t.canvas.height,i),new Se(this,a,i,t.canvas,e.data)},get_canvas_height:function(e,t,n,a){if("bigwig"===e.dataset_type)return this.summary_draw_height;var i=this.dataset.get_metadata("sample_names")?this.dataset.get_metadata("sample_names").length:0;return 0===i&&0!==e.data.length&&(i=null===(i=e.data[0][7].match(/,/g))?1:i.length+1),new this.painter(null,null,null,this.config.to_key_value_dict(),t).get_required_height(i)},predraw_init:function(){var e=[je.prototype.predraw_init.call(this)];return this.dataset.get_metadata("sample_names")||e.push(this.dataset.fetch()),e},postdraw_actions:function(e,t,n,a){Ye.prototype.postdraw_actions.call(this,e,t,n,a);var o=i.a.filter(e,(function(e){return e instanceof De})),r=this.dataset.get_metadata("sample_names");if(0===o.length&&this.config.get_value("show_labels")&&r&&r.length>1){var l;if(0===this.container_div.find(".yaxislabel.variant").length&&(l=this.config.get_value("summary_height")/2,this.tiles_div.prepend(s()("<div/>").text("Summary").addClass("yaxislabel variant top").css({"font-size":"".concat(l,"px"),top:"".concat((this.config.get_value("summary_height")-l)/2,"px")})),this.config.get_value("show_sample_data"))){var c=r.join("<br/>");this.tiles_div.prepend(s()("<div/>").html(c).addClass("yaxislabel variant top sample").css({top:this.config.get_value("summary_height")}))}l="".concat("Squish"===this.mode?5:10,"px"),s()(this.tiles_div).find(".sample").css({"font-size":l,"line-height":l}),s()(this.tiles_div).find(".yaxislabel").css("color",this.config.get_value("label_color"))}else this.container_div.find(".yaxislabel.variant").remove()}});var Re=function(e,t,n){$e.call(this,e,t,n),this.painter=ee.ReadPainter,this.update_icons()};he(Re.prototype,ye.prototype,Ye.prototype,$e.prototype,{build_config_params:function(){return i.a.union(ye.prototype.config_params,[{key:"block_color",label:"Histogram color",type:"color"},{key:"detail_block_color",label:"Sense strand block color",type:"color",default_value:"#AAAAAA"},{key:"reverse_strand_color",label:"Antisense strand block color",type:"color",default_value:"#DDDDDD"},{key:"label_color",label:"Label color",type:"color",default_value:"black"},{key:"show_insertions",label:"Show insertions",type:"bool",default_value:!1},{key:"show_differences",label:"Show differences only",type:"bool",default_value:!0},{key:"show_counts",label:"Show summary counts",type:"bool",default_value:!0},{key:"mode",type:"string",default_value:this.mode,hidden:!0},{key:"min_value",label:"Histogram minimum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"max_value",label:"Histogram maximum",type:"float",default_value:void 0,help:"clear value to set automatically"},{key:"height",type:"int",default_value:0,hidden:!0}])},config_onchange:function(){this.set_name(this.config.get_value("name")),this.request_draw({clear_tile_cache:!0})}});var Ne={CompositeTrack:Ae,DrawableGroup:we,DiagonalHeatmapTrack:He,FeatureTrack:$e,LineTrack:Ee,ReadTrack:Re,VariantTrack:Pe,VcfTrack:Pe},ze=function(e,t,n){if("copy"in e)return e.copy(n);var a=e.obj_type;return a||(a=e.track_type),new Ne[a](t,n,e)};t.a={TracksterView:ke,DrawableGroup:we,LineTrack:Ee,FeatureTrack:$e,DiagonalHeatmapTrack:He,ReadTrack:Re,VariantTrack:Pe,CompositeTrack:Ae,object_from_template:ze}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(52);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=document.getElementsByTagName("link"),n=Array.from(t).find((function(e){return"index"==e.rel}));return n&&n.href?Object(a.a)(n.href):e}},function(e,t,n){"use strict";var a=n(84),i=n(11),o=n(220),s=n(47),r=n(456),l=n(39),c=n(10),d=n.n(c),u=n(268),h=n(468),p=n(1030),m=n(1028),f=n(1029);function _(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){_(o,a,i,s,r,"next",e)}function r(e){_(o,a,i,s,r,"throw",e)}s(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(t){var n=t.id,a=t.itemClass,i=t.context,o=t.debounceInterval,s=void 0===o?150:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.itemClass=a,this.context=i,this.debounceInterval=s,this._searchText=new u.a}var t,n,a,i,o,s;return t=e,(n=[{key:"save",value:(s=g(regeneratorRuntime.mark((function e(t){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.id,a=this.itemClass,i=this.context,(o=Object(l.a)(t)).valid){e.next=4;break}throw new Error("Invalid tag");case 4:return s="/tag/add_tag_async?item_id=".concat(n,"&item_class=").concat(a,"&context=").concat(i,"&new_tag=").concat(o.text),e.next=7,d.a.get(s);case 7:if(200===e.sent.status){e.next=10;break}throw new Error("Unable to save tag: ".concat(o));case 10:return e.abrupt("return",Object(l.a)(o));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:(o=g(regeneratorRuntime.mark((function e(t){var n,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.id,a=this.itemClass,i=this.context,o=Object(l.a)(t),s="/tag/remove_tag_async?item_id=".concat(n,"&item_class=").concat(a,"&context=").concat(i,"&tag_name=").concat(o.text),e.next=5,d.a.get(s);case 5:if(200===e.sent.status){e.next=8;break}throw new Error("Unable to delete tag: ".concat(o));case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"autocomplete",value:(i=g(regeneratorRuntime.mark((function e(t){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.id,a=this.itemClass,i="/tag/tag_autocomplete_data?item_id=".concat(n,"&item_class=").concat(a,"&q=").concat(t),e.next=4,d.a.get(i);case 4:if(200===(o=e.sent).status){e.next=7;break}throw new Error("Unable to retrieve autocomplete tags for search string: ".concat(t));case 7:return e.abrupt("return",(s=o.data,s.split("\n").filter((function(e){return e.includes("|")})).map((function(e){return e.split("|")[0]})).filter((function(e){return e.length})).filter((function(e){return"#Header"!==e}))).map(l.a));case 8:case"end":return e.stop()}var s}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"autocompleteOptions",get:function(){var e=this;return this._searchText.pipe(Object(r.a)((function(e){return e.replace("name:","")})),Object(h.a)((function(e){return e.length})),Object(p.a)(this.debounceInterval),Object(m.a)(),Object(f.a)((function(t){return e.autocomplete(t)})))}},{key:"autocompleteSearchText",set:function(e){this._searchText.next(e)}}])&&v(t.prototype,n),a&&v(t,a),e}();function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i.default.use(o.a);var k={components:{StatelessTags:a.a},props:{tags:{type:Array,required:!1,default:function(){return[]}},tagService:{type:y,required:!0},storeKey:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1}},computed:{observedTags:{get:function(){return this.$store.getters.getTagsById(this.storeKey)},set:function(e){this.updateTags({key:this.storeKey,tags:e})}}},subscriptions:function(){var e=this;return{autocompleteItems:this.tagService.autocompleteOptions.pipe(Object(r.a)((function(t){return Object(l.b)(t,e.tags)})))}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClick:function(e){this.$emit("tag-click",e)},beforeAddingTag:function(e){var t=e.tag,n=e.addTag;this.tagService.save(t).then((function(){return n(t)})).catch((function(e){return console.warn("Unable to save tag",e)}))},beforeDeletingTag:function(e){var t=e.tag,n=e.deleteTag;this.tagService.delete(t).then((function(){return n(t)})).catch((function(e){return console.warn("Unable to delete tag",e)}))},updateTagSearch:function(e){this.tagService.autocompleteSearchText=e}},Object(s.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},M=n(6),x=Object(M.a)(k,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("stateless-tags",{attrs:{disabled:e.disabled,"autocomplete-items":e.autocompleteItems},on:{"tag-click":e.onClick,"tag-input-changed":e.updateTagSearch,"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag},model:{value:e.observedTags,callback:function(t){e.observedTags=t},expression:"observedTags"}})}),[],!1,null,null,null).exports,L=n(43),T=n(88);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){D(o,a,i,s,r,"next",e)}function r(e){D(o,a,i,s,r,"throw",e)}s(void 0)}))}}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Y(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,O(t).call(this,e))).model=e.model,n}var n,a,i,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,(a=[{key:"save",value:(s=C(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(l.a)(t)).valid){e.next=3;break}throw new Error("Invalid tag");case 3:return(a=new Set(this.model.attributes.tags)).add(n.text),a=Array.from(a),e.next=8,this.model.save({tags:a});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"delete",value:(o=C(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.a)(t),(a=new Set(this.model.attributes.tags)).delete(n.text),a=Array.from(a),e.next=6,this.model.save({tags:a});case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}])&&j(n.prototype,a),i&&j(n,i),t}(y),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.id,a=e.itemClass,i=e.tags,o=void 0===i?[]:i,s=e.disabled,r=void 0!==s&&s,l=e.context,c=void 0===l?"unspecified":l,d={storeKey:"".concat(a,"-").concat(n),tagService:new y({id:n,itemClass:a,context:c}),tags:o,disabled:r},u=Object(L.a)(x),h=u(d,t);return h.$on("tag-click",H(e,h)),h},H=function(e,t){return function(n){if(n){var a=e.tagClickFn,i=void 0===a?"none":a,o=e.clickUrl;switch(i){case"community_tag_click":if(void 0!==o){var s=n.value?":".concat(n.value):"",r="".concat(o,"?f-tags=").concat(n.text).concat(s);Object(T.b)(r)}break;case"add_tag_to_grid_filter":t.$store.dispatch("toggleSearchTag",n)}}}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.model,a=e.disabled,i=void 0!==a&&a,o=e.context,s=void 0===o?"unspecified":o;if(n){var r=n.attributes,l=r.id,c=r.model_class,d=r.tags,u=void 0===d?[]:d,h={storeKey:"".concat(c,"-").concat(l),tagService:new I({id:l,itemClass:c,context:s,model:n}),tags:u,disabled:i},p=Object(L.a)(x);return p(h,t)}console.warn("Missing model in mountModelTags")};n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return $}))},function(e,t,n){"use strict";var a=n(89),i={props:{tag:{type:String,required:!0}},computed:{tagLabel:function(){return this.tag.startsWith("name:")?this.tag.replace("name:",""):this.tag},tagStyles:function(){var e=Object(a.a)(this.tag);return{"background-color":e.primary,color:e.contrasting,"border-color":e.darker}}}},o=(n(237),n(6)),s=Object(o.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"badge badge-tags",style:e.tagStyles,on:{click:function(t){return t.preventDefault(),e.$emit("tag-click",e.tag)}}},[e._v(" "+e._s(e.tagLabel)+" ")])}),[],!1,null,null,null).exports,r=n(47);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={components:{Nametag:s},props:{storeKey:{type:String,required:!0},tags:{type:Array,required:!1,default:function(){return[]}}},computed:{nameTags:function(){return this.$store.getters.getTagsById(this.storeKey).filter((function(e){return e.startsWith("name:")}))},title:function(){return"".concat(this.nameTags.length," nametags")}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.b)(["updateTags","initializeTags"])),mounted:function(){this.initializeTags({key:this.storeKey,tags:this.tags})}},u=(n(238),Object(o.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nametags",attrs:{title:this.title}},this._l(this.nameTags,(function(e){return t("nametag",{key:e,attrs:{tag:e}})})),1)}),[],!1,null,null,null).exports),h=n(43);n.d(t,"a",(function(){return p}));var p=Object(h.a)(u)},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(9),l=n.n(r),c=n(3),d=n.n(c),u=n(4),h=n(28),p=n(30),m=d.a.Model.extend({defaults:{name:null,label:null,type:null,value:null,html:null,num_samples:5},initialize:function(e){this.attributes.html=unescape(this.attributes.html)},copy:function(){return new m(this.toJSON())},set_value:function(e){this.set("value",e||"")}}),f=d.a.Collection.extend({model:m}),_=m.extend({}),g=m.extend({set_value:function(e){this.set("value",parseInt(e,10))},get_samples:function(){return l.a.scale.linear().domain([this.get("min"),this.get("max")]).ticks(this.get("num_samples"))}}),v=g.extend({set_value:function(e){this.set("value",parseFloat(e))}}),y=m.extend({get_samples:function(){return i.a.map(this.get("options"),(function(e){return e[0]}))}});m.subModelTypes={integer:g,float:v,data:_,select:y};var b=d.a.Model.extend({defaults:{id:null,name:null,description:null,target:null,inputs:[],outputs:[]},urlRoot:"".concat(Object(u.getAppRoot)(),"api/tools"),initialize:function(e){this.set("inputs",new f(i.a.map(e.inputs,(function(e){return new(m.subModelTypes[e.type]||m)(e)}))))},toJSON:function(){var e=d.a.Model.prototype.toJSON.call(this);return e.inputs=this.get("inputs").map((function(e){return e.toJSON()})),e},remove_inputs:function(e){var t=this.get("inputs").filter((function(t){return-1!==e.indexOf(t.get("type"))}));this.get("inputs").remove(t)},copy:function(e){var t=new b(this.toJSON());if(e){var n=new d.a.Collection;t.get("inputs").each((function(e){e.get_samples()&&n.push(e)})),t.set("inputs",n)}return t},apply_search_results:function(e){return-1!==i.a.indexOf(e,this.attributes.id)?this.show():this.hide(),this.is_visible()},set_input_value:function(e,t){this.get("inputs").find((function(t){return t.get("name")===e})).set("value",t)},set_input_values:function(e){var t=this;i.a.each(i.a.keys(e),(function(n){t.set_input_value(n,e[n])}))},run:function(){return this._run()},rerun:function(e,t){return this._run({action:"rerun",target_dataset_id:e.id,regions:t})},get_inputs_dict:function(){var e={};return this.get("inputs").each((function(t){e[t.get("name")]=t.get("value")})),e},_run:function(e){var t=i.a.extend({tool_id:this.id,inputs:this.get_inputs_dict()},e),n=s.a.Deferred(),a=new h.a.ServerStateDeferred({ajax_settings:{url:this.urlRoot,data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST"},interval:2e3,success_fn:function(e){return"pending"!==e}});return s.a.when(a.go()).then((function(e){n.resolve(new p.b(e))})),n}});i.a.extend(b.prototype,{hidden:!1,show:function(){this.set("hidden",!1)},hide:function(){this.set("hidden",!0)},toggle:function(){this.set("hidden",!this.get("hidden"))},is_visible:function(){return!this.attributes.hidden}});var w=d.a.View.extend({className:"toolForm",render:function(){this.$el.children().remove(),this.$el.append(k.tool_form(this.model.toJSON()))}}),k={tool_form:i.a.template(['<div class="toolFormTitle"><%- tool.name %> (version <%- tool.version %>)</div>','<div class="toolFormBody">',"<% _.each( tool.inputs, function( input ){ %>",'<div class="form-row">','<label for="<%- input.name %>"><%- input.label %>:</label>','<div class="form-row-input">',"<%= input.html %>","</div>",'<div class="toolParamHelp" style="clear: both;">',"<%- input.help %>","</div>",'<div style="clear: both;"></div>',"</div>","<% }); %>","</div>",'<div class="form-row form-actions">','<input type="submit" class="btn btn-primary" name="runtool_btn" value="Execute" />',"</div>",'<div class="toolHelp">','<div class="toolHelpBody"><% tool.help %></div>',"</div>"].join(""),{variable:"tool"})};t.a={ToolParameter:m,IntegerToolParameter:g,SelectToolParameter:y,Tool:b,ToolFormView:w}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(106),s=n(138),r=n(7),l=o.a.DatasetAssociation,c=s.a.HistoryContentMixin,d=l.extend(r.a.mixin(c,{defaults:i.a.extend({},l.prototype.defaults,c.defaults,{history_content_type:"dataset",model_class:"HistoryDatasetAssociation"})}));t.a={HistoryDatasetAssociation:d}},function(e,t,n){"use strict";var a=n(3),i=n.n(a),o=n(4),s=n(8);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=i.a.Collection.extend({url:function(){return"".concat(Object(o.getAppRoot)(),"api/webhooks")}}),c=i.a.View.extend({el:"#webhook-view",initialize:function(e){var t=this,n=e.toolId||"",a=e.toolVersion||"";this.$el.attr("tool_id",n),this.$el.attr("tool_version",a),(new l).fetch({success:function(n){e.type&&n.reset(d(n,e.type)),n.length>0&&t.render(function(e){var t=e.pluck("weight"),n=t.reduce((function(e,t){return e+t})),a=new Map;t.forEach((function(e,t){a.set(t,parseFloat((e/n).toFixed(2)))}));var i=[],o=!0,s=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(o=(c=d.next()).done);o=!0)for(var u=r(c.value,2),h=u[0],p=u[1],m=0;m<100*p;m++)i.push(h)}catch(e){s=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}return e.at(i[Math.floor(Math.random()*i.length)])}(n))}})},render:function(e){var t=e.toJSON();return this.$el.html('<div id="'.concat(t.id,'"></div>')),s.a.appendScriptStyle(t),this}});function d(e,t){return e.models.filter((function(e){var n=e.get("type");return!!n&&-1!==n.indexOf(t)}))}t.a={WebhookView:c,load:function(e){(new l).fetch({async:void 0===e.async||e.async,success:function(t){e.type&&t.reset(d(t,e.type)),e.callback(t)}})}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var p=function(){function e(t){d(this,e),this.deferred=i.a.Deferred(),this.queue=[],this.responses=[],this.numToProcess=0,this.running=!1,this.init(t||[]),this.start()}return h(e,[{key:"init",value:function(e){var t=this;e.forEach((function(e){t.add(e)}))}},{key:"add",value:function(e){var t=this,n=this.queue.length;return this.numToProcess+=1,this.queue.push((function(){var a=n,i=e();i.done((function(e){t.deferred.notify({curr:a,total:t.numToProcess,response:e})})),i.always((function(e){t.responses.push(e),t.queue.length?t.queue.shift()():t.stop()}))})),this}},{key:"start",value:function(){return this.queue.length&&(this.running=!0,this.queue.shift()()),this}},{key:"stop",value:function(e,t){return this.running=!1,this.queue=[],e?this.deferred.reject(t):this.deferred.resolve(this.responses),this.numToProcess=0,this.deferred=i.a.Deferred(),this}},{key:"done",value:function(e){return this.deferred.done(e)}},{key:"fail",value:function(e){return this.deferred.fail(e)}},{key:"always",value:function(e){return this.deferred.always(e)}},{key:"progress",value:function(e){return this.deferred.progress(e)}}],[{key:"create",value:function(t){return new e(t).deferred}}]),e}(),m=function(e){function t(e){var n;return d(this,t),(n=s(this,l(t).call(this,e))).names={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),h(t,[{key:"add",value:function(e){if(!Object.prototype.hasOwnProperty.call(e,"name")||!Object.prototype.hasOwnProperty.call(e,"fn"))throw new Error('NamedAjaxQueue.add requires an object with both "name" and "fn": '.concat(JSON.stringify(e)));if(!Object.prototype.hasOwnProperty.call(this.names,e.name))return this.names[e.name]=!0,r(l(t.prototype),"add",this).call(this,e.fn)}},{key:"clear",value:function(){return this.names={},this}}],[{key:"create",value:function(e){return new t(e).deferred}}]),t}(p);t.a={AjaxQueue:p,NamedAjaxQueue:m}},,function(e,t,n){"use strict";var a=n(37),i=n(48),o=n(2),s=n.n(o),r=n(1),l=n.n(r),c=n(0),d=n.n(c),u=n(5),h=n(4),p=d.a,m={defaultName:l.a.template("Copy of '<%- name %>'"),title:l.a.template("".concat(s()("Copying history"),' "<%- name %>"')),submitLabel:s()("Copy"),errorMessage:s()("History could not be copied."),progressive:s()("Copying history"),activeLabel:s()("Copy only the active, non-deleted datasets"),allLabel:s()("Copy all datasets including deleted ones"),anonWarning:s()("As an anonymous user, unless you login or register, you will lose your current history ")+s()("after copying this history. "),_template:l.a.template(["<% if( isAnon ){ %>",'<div class="warningmessage">',"<%- anonWarning %>",s()("You can"),' <a href="<%= galaxyRoot %>user/login">',s()("login here"),"</a> ",s()("or")," ",' <a href="<%= galaxyRoot %>user/create">',s()("register here"),"</a>.","</div>","<% } %>","<form>",'<label for="copy-modal-title">',s()("Enter a title for the new history"),":","</label><br />",'<input id="copy-modal-title" class="form-control" style="width: 100%" value="<%= name %>" />','<p class="invalid-title bg-danger" style="color: red; margin: 8px 0px 8px 0px; display: none">',s()("Please enter a valid history title"),"</p>","<% if( allowAll ){ %>","<br />","<p>",s()("Choose which datasets from the original history to include:"),"</p>",'<input name="copy-what" type="radio" id="copy-non-deleted" value="copy-non-deleted" ','<% if( copyWhat === "copy-non-deleted" ){ print( "checked" ); } %>/>','<label for="copy-non-deleted"> <%- activeLabel %></label>',"<br />",'<input name="copy-what" type="radio" id="copy-all" value="copy-all" ','<% if( copyWhat === "copy-all" ){ print( "checked" ); } %>/>','<label for="copy-all"> <%- allLabel %></label>',"<% } %>","</form>"].join("")),_showAjaxIndicator:function(){var e='<p><span class="fa fa-spinner fa-spin"></span> '.concat(this.progressive,"...</p>");this.modal.$(".modal-body").empty().append(e).css({"margin-top":"8px"})},dialog:function(e,t,n){n=n||{};var a=this,o=d.a.Deferred(),r=(n.nameFn||this.defaultName)({name:t.get("name")}),c=n.allDatasets?"copy-all":"copy-non-deleted",m=!!l.a.isUndefined(n.allowAll)||n.allowAll,f=!!l.a.isUndefined(n.autoClose)||n.autoClose;function _(){var n=e.$("#copy-modal-title").val();if(n){var s="copy-all"===e.$('input[name="copy-what"]:checked').val();e.$("button").prop("disabled",!0),a._showAjaxIndicator(),t.copy(!0,n,s).done((function(e){o.resolve(e)})).fail((function(e,r,l){var c={name:n,copyAllDatasets:s};i.a.ajaxErrorModal(t,e,c,a.errorMessage),o.rejectWith(o,arguments)})).done((function(){f&&e.hide()}))}else e.$(".invalid-title").show()}this.modal=e;var g=n.closing_callback,v=Object(u.a)();return e.show(l.a.extend(n,{title:this.title({name:t.get("name")}),body:p(a._template({galaxyRoot:Object(h.getAppRoot)(),name:r,isAnon:v.user.isAnonymous(),allowAll:m,copyWhat:c,activeLabel:this.activeLabel,allLabel:this.allLabel,anonWarning:this.anonWarning})),buttons:l.a.object([[s()("Cancel"),function(){e.hide()}],[this.submitLabel,_]]),height:"auto",closing_events:!0,closing_callback:function(e){e&&o.reject({cancelled:!0}),g&&g(e)}})),e.$("#copy-modal-title").focus().select(),e.$("#copy-modal-title").on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),_())})),o}},f=l.a.extend({},m,{defaultName:l.a.template("imported: <%- name %>"),title:l.a.template("".concat(s()("Importing history"),' "<%- name %>"')),submitLabel:s()("Import"),errorMessage:s()("History could not be imported."),progressive:s()("Importing history"),activeLabel:s()("Import only the active, non-deleted datasets"),allLabel:s()("Import all datasets including deleted ones"),anonWarning:s()("As an anonymous user, unless you login or register, you will lose your current history ")+s()("after importing this history. ")});t.a=function(e,t){t=t||{};var n=Object(u.a)().modal||new a.a.View({});return t.useImport?f.dialog(n,e,t):m.dialog(n,e,t)}},function(e,t,n){"use strict";var a=n(3),i=n.n(a),o=n(4),s=(n(67),["new","queued","running"]),r=["error","deleted"],l=i.a.Model.extend({url:function(){return"".concat(Object(o.getAppRoot)(),"api/histories/").concat(this.attributes.history_id,"/contents/dataset_collections/").concat(this.attributes.collection_id,"/jobs_summary")},hasDetails:function(){return this.has("populated_state")},new:function(){return!this.hasDetails()||"new"==this.get("populated_state")},errored:function(){return"error"===this.get("populated_state")||this.anyWithStates(r)},states:function(){return this.get("states")||{}},anyWithState:function(e){return(this.states()[e]||0)>0},anyWithStates:function(e){var t=this.states();for(var n in e)if((t[e[n]]||0)>0)return!0;return!1},numWithStates:function(e){var t=this.states(),n=0;for(var a in e)n+=t[e[a]]||0;return n},numInError:function(){return this.numWithStates(r)},running:function(){return this.anyWithState("running")},terminal:function(){return!this.new()&&!this.anyWithStates(s)},jobCount:function(){var e=this.states(),t=0;for(var n in e)t+=e[n];return t},toString:function(){return"JobStatesSummary(id=".concat(this.get("id"),")")}}),c=i.a.Collection.extend({model:l,initialize:function(){var e=this;this.on({add:function(t){e.active||t.fetch()}}),this.updateTimeoutId=null,this.active=!0},trackModel:function(e){if(!e.has("job_states_summary")){var t=this.historyId;if("dataset_collection"===e.attributes.history_content_type){var n=e.attributes.job_source_type,a=e.attributes.job_source_id;n&&(this.add({id:a,model:n,history_id:t,collection_id:e.attributes.id}),e.jobStatesSummary=this.get(a))}}},url:function(){var e=this.models.filter((function(e){return!e.terminal()})),t=e.map((function(e){return e.get("id")})).join(","),n=e.map((function(e){return e.get("model")})).join(",");return"".concat(Object(o.getAppRoot)(),"api/histories/").concat(this.historyId,"/jobs_summary?ids=").concat(t,"&types=").concat(n)},monitor:function(){var e=this;if(this.clearUpdateTimeout(),this.active){var t=function(){e.updateTimeoutId=setTimeout((function(){e.monitor()}),2e3)},n=this.models.filter((function(e){return!e.terminal()}));n.length,n.length>0?this.fetch({remove:!1}).done(t):t()}},clearUpdateTimeout:function(){this.updateTimeoutId&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)},toString:function(){return"JobStatesSummaryCollection()"}});t.a={JobStatesSummary:l,JobStatesSummaryCollection:c,FETCH_STATE_ON_ADD:!1,NON_TERMINAL_STATES:s,ERROR_STATES:r}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(4),s=n(141),r=n(53),l=n(2),c=n.n(l),d=s.a.ModelListPanel,u=d.extend({_logNamespace:"collections",className:"".concat(d.prototype.className," dataset-collection-panel"),DatasetDCEViewClass:r.a.DatasetDCEListItemView,modelCollectionKey:"elements",initialize:function(e){d.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank",this.dragItems=!0,this.hasUser=e.hasUser,this.panelStack=[],this.parentName=e.parentName,this.foldoutStyle=e.foldoutStyle||"foldout",this.downloadUrl="".concat(Object(o.getAppRoot)(),"api/dataset_collections/").concat(this.model.attributes.id,"/download")},getNestedDCDCEViewClass:function(){return r.a.NestedDCDCEListItemView.extend({foldoutPanelClass:u})},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;this.handleWarning(e),this.log("_queueNewRender:",e,t),this._swapNewRender(e),this.trigger("rendered",this)},handleWarning:function(e){var t=this.views.length,n=this.model.get("element_count");if(n&&n!==t){var a=c()("displaying only ".concat(t," of ").concat(n," items"));e.find(".elements-warning").html('<div class="warningmessagesmall">'.concat(a,"</div>"))}},_filterCollection:function(){return this.model.getVisibleContents()},_getItemViewClass:function(e){switch(e.get("element_type")){case"hda":return this.DatasetDCEViewClass;case"dataset_collection":return this.getNestedDCDCEViewClass()}throw new TypeError("Unknown element type:",e.get("element_type"))},_getItemViewOptions:function(e){var t=d.prototype._getItemViewOptions.call(this,e);return i.a.extend(t,{linkTarget:this.linkTarget,hasUser:this.hasUser,foldoutStyle:this.foldoutStyle})},_setUpItemViewListeners:function(e){return d.prototype._setUpItemViewListeners.call(this,e),this.listenTo(e,{"expanded:drilldown":function(e,t){this._expandDrilldownPanel(t)},"collapsed:drilldown":function(e,t){this._collapseDrilldownPanel(t)}}),this},_expandDrilldownPanel:function(e){this.panelStack.push(e),this.$("> .controls").add(this.$list()).hide(),e.parentName=this.model.get("name"),this.$el.append(e.render().$el)},_collapseDrilldownPanel:function(e){this.panelStack.pop(),this.render()},events:{"click .navigation .back":"close"},close:function(e){this.remove(),this.trigger("close")},toString:function(){return"CollectionView(".concat(this.model?this.model.get("name"):"",")")}});function h(e){var t=e.get("collection_type");return"list"==t?c()("list"):"paired"==t?c()("dataset pair"):"list:paired"==t?c()("list of pairs"):c()("nested list")}function p(e){var t,n=e.get("element_count"),a="a ".concat(h(e));n&&(1==n?t="with 1 item":n&&(t="with ".concat(n," items")),a="".concat(a," ").concat(c()(t)));return a}u.prototype.templates=i.a.extend(i.a.clone(d.prototype.templates),{controls:function(e,t){var n=p(t.model);return'\n        <div class="controls">\n            <div class="navigation">\n            <a class="back" href="javascript:void(0)">\n                <span class="fa fa-icon fa-angle-left"></span>\n                '.concat(c()("Back to "),"\n                ").concat(i.a.escape(t.parentName),'\n            </a>\n            </div>\n            <div class="title">\n                <div class="name">').concat(i.a.escape(e.name)||i.a.escape(e.element_identifier),'</div>\n                <div class="subtitle">\n                    ').concat(n,'\n                </div>\n            </div>\n            <div class="elements-warning">\n            </div>\n            <div class="tags-display"></div>\n            <div class="actions">\n                <a class="download-btn icon-btn" href="').concat(t.downloadUrl,'"\n                   title="" download="" data-original-title="Download Collection">\n                   <span class="fa fa-floppy-o"></span>\n                </a>\n            </div>\n        </div>')}}),t.a={collectionTypeDescription:h,collectionDescription:p,CollectionView:u}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(2),s=n.n(o),r=n(176),l=n.n(r);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=function(e,t){if(0==e.length)return"no columns";if(1==e.length)return"column ".concat(t[e[0]]);var n=e.map((function(e){return t[e]}));return"columns ".concat([n.slice(0,-1).join(", "),n.slice(-1)[0]].join(" and "))},u=function(e,t){var n=[];for(var a in e)-1===t.indexOf(a)&&n.push(e[a]);return n},h=function(e,t,n,a,i){var o;try{o=l()(String(e))}catch(e){return{error:"Invalid regular expression specified."}}var s=0;return n=n.map((function(e){var n=e[t],r=o.exec(n);return r?a?e.concat([o.pyreReplace(r[0],a)]):(i=i&&parseInt(i,10))?r.length!=i+1?(s++,null):e.concat(r.splice(1,r.length)):e.concat([r[0]]):(s++,null)})),s>0?{error:"".concat(s," row(s) failed to match specified regular expression.")}:{data:n}},p=function(e,t){return t.reduce((function(t,n){return t.concat(e(n))}),[])},m={add_column_basename:{title:s()("Basename of Path of URL"),display:function(e,t){return"Add column using basename of column ".concat(t[e.target_column])},init:function(e,t){e.addColumnBasenameTarget=t?t.target_column:0},save:function(e,t){t.target_column=e.addColumnBasenameTarget},apply:function(e,t,n,a){var i=e.target_column,o=h("[^/]*$",i,t);return a.push("new"),o.columns=a,o}},add_column_rownum:{title:s()("Row Number"),display:function(e,t){return"Add column for the current row number."},init:function(e,t){e.addColumnRownumStart=t?t.start:1},save:function(e,t){t.start=parseInt(e.addColumnRownumStart,10)},apply:function(e,t,n,a){var i=e.start;return t=t.map((function(e){var t=e.slice();return t.push(String(i)),i+=1,t})),a.push("new"),{data:t,columns:a}}},add_column_value:{title:s()("Fixed Value"),display:function(e,t){return"Add column for the constant value of ".concat(e.value,".")},init:function(e,t){e.addColumnValue=t?t.value:""},save:function(e,t){t.value=e.addColumnValue},apply:function(e,t,n,a){var i=e.value;return t=t.map((function(e){var t=e.slice();return t.push(i),t})),a.push("new"),{data:t,columns:a}}},add_column_metadata:{title:s()("Add Column from Metadata"),display:function(e,t){return"Add column for ".concat(e.value,".")},init:function(e,t){e.addColumnMetadataValue=t?t.value:null},save:function(e,t){t.value=e.addColumnMetadataValue},apply:function(e,t,n,a){var i,o=e.value;if(0==o.indexOf("identifier")){var s=parseInt(o.substring("identifier".length),10);i=function(e,t){var a=e.slice();return a.push(n[t].identifiers[s]),a}}else if("tags"==o)i=function(e,t){var a=e.slice(),i=n[t].tags;return i.sort(),a.push(i.join(",")),a};else{if("hid"!=o&&"name"!=o&&"path"!=o)return{error:"Unknown metadata type [".concat(o,"}]")};i=function(e,t){var a=e.slice();return a.push(n[t][o]),a}}return t=t.map(i),a.push("new"),{data:t,columns:a}}},add_column_group_tag_value:{title:s()("Add Column from Group Tag Value"),display:function(e,t){return"Add column for value of group tag ".concat(e.value,".")},init:function(e,t){t?(e.addColumnGroupTagValueValue=t.value,e.addColumnGroupTagValueDefault=t.default_value):(e.addColumnGroupTagValueValue=null,e.addColumnGroupTagValueDefault="")},save:function(e,t){t.value=e.addColumnGroupTagValueValue,t.default_value=e.addColumnGroupTagValueDefault},apply:function(e,t,n,a){var i=e.value,o="group:".concat(i,":");return t=t.map((function(t,a){var i=t.slice(),s=n[a].tags;s.sort();var r=e.default_value;for(var l in s){var c=s[l];if(0==c.indexOf(o)){r=c.substr(o.length);break}}return i.push(r),i})),a.push("new"),{data:t,columns:a}}},add_column_regex:{title:s()("Using a Regular Expression"),display:function(e,t){return"Add new column using ".concat(e.expression," applied to column ").concat(t[e.target_column])},init:function(e,t){t?(e.addColumnRegexTarget=t.target_column,e.addColumnRegexExpression=t.expression,e.addColumnRegexReplacement=t.replacement,e.addColumnRegexGroupCount=parseInt(t.group_count)):(e.addColumnRegexTarget=0,e.addColumnRegexExpression="",e.addColumnRegexReplacement=null,e.addColumnRegexGroupCount=null);var n="global";e.addColumnRegexGroupCount?n="groups":e.addColumnRegexReplacement&&(n="replacement"),e.addColumnRegexType=n},save:function(e,t){t.target_column=e.addColumnRegexTarget,t.expression=e.addColumnRegexExpression,e.addColumnRegexReplacement&&(t.replacement=e.addColumnRegexReplacement),e.addColumnRegexGroupCount&&(t.group_count=e.addColumnRegexGroupCount)},apply:function(e,t,n,a){var i=e.target_column,o=h(e.expression,i,t,e.replacement,e.group_count);return a.push("new"),o.columns=a,o}},add_column_concatenate:{title:s()("Concatenate Columns"),display:function(e,t){return"Concatenate column ".concat(t[e.target_column_0]," and column ").concat(t[e.target_column_1])},init:function(e,t){t?(e.addColumnConcatenateTarget0=t.target_column_0,e.addColumnConcatenateTarget1=t.target_column_1):(e.addColumnConcatenateTarget0=0,e.addColumnConcatenateTarget1=0)},save:function(e,t){t.target_column_0=e.addColumnConcatenateTarget0,t.target_column_1=e.addColumnConcatenateTarget1},apply:function(e,t,n,a){var i=e.target_column_0,o=e.target_column_1;return t=t.map((function(e){var t=e.slice();return t.push(e[i]+e[o]),t})),a.push("new"),{data:t,columns:a}}},add_column_substr:{title:s()("Keep or Trim Prefix or Suffix"),display:function(e,t){var n,a=e.substr_type;return n="keep_prefix"==a?"Keep only ".concat(e.length," characters from the start of column ").concat(t[e.target_column]):"drop_prefix"==a?"Remove ".concat(e.length," characters from the start of column ").concat(t[e.target_column]):"keep_suffix"==a?"Keep only ".concat(e.length," characters from the end of column ").concat(t[e.target_column]):"Remove ".concat(e.length," characters from the end of column ").concat(t[e.target_column]),n},init:function(e,t){t?(e.addColumnSubstrTarget=t.target_column,e.addColumnSubstrLength=t.length,e.addColumnSubstrType=t.substr_type):(e.addColumnSubstrTarget=0,e.addColumnSubstrType="keep_prefix",e.addColumnSubstrLength=1)},save:function(e,t){t.target_column=e.addColumnSubstrTarget,t.length=parseInt(e.addColumnSubstrLength,10),t.substr_type=e.addColumnSubstrType},apply:function(e,t,n,a){var i=e.target_column,o=e.length,s=e.substr_type;return t=t.map((function(e){var t=e.slice(),n=e[i],a=0,r=n.length;return"keep_prefix"==s?r=o:"drop_prefix"==s?a=o:"keep_suffix"==s?(a=r-o)<0&&(a=0):(r-=o)<0&&(r=0),t.push(n.substr(a,r)),t})),a.push("new"),{data:t}}},remove_columns:{title:s()("Remove Column(s)"),display:function(e,t){var n=e.target_columns;return"Remove ".concat(d(n,t))},init:function(e,t){e.removeColumnTargets=t?t.target_columns:[]},save:function(e,t){t.target_columns=e.removeColumnTargets},apply:function(e,t,n,a){var i=e.target_columns;return{data:t=t.map((function(e){var t=[];for(var n in e)-1==i.indexOf(parseInt(n,10))&&t.push(e[n]);return t})),columns:a=u(a,i)}}},add_filter_regex:{title:s()("Using a Regular Expression"),display:function(e,t){return"Filter rows using regular expression ".concat(e.expression," on column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterRegexTarget=t.target_column,e.addFilterRegexExpression=t.expression,e.addFilterRegexInvert=t.invert):(e.addFilterRegexTarget=0,e.addFilterRegexExpression="",e.addFilterRegexInvert=!1)},save:function(e,t){t.target_column=e.addFilterRegexTarget,t.expression=e.addFilterRegexExpression,t.invert=e.addFilterRegexInvert},apply:function(e,t,n,a){var i,o=String(e.expression);try{i=l()(o)}catch(e){return{error:"Invalid regular expression specified."}}var s=e.target_column,r=e.invert,c=function(e,n){var a=t[parseInt(n,10)];return i.exec(a[s])?!r:r};return n=n.filter(c),{data:t=t.filter(c),sources:n}}},add_filter_count:{title:s()("First or Last N Rows"),display:function(e,t){var n=e.which,a=e.invert;return"first"!=n||a?"first"==n&&a?"Keep only first ".concat(e.count," row(s)."):"last"!=n||a?"Keep only last ".concat(e.count," row(s)."):"Filter out last ".concat(e.count," row(s)."):"Filter out first ".concat(e.count," row(s).")},init:function(e,t){t?(e.addFilterCountN=parseInt(t.count,10),e.addFilterCountWhich=t.which,e.addFilterCountInvert=t.inverse):(e.addFilterCountN=0,e.addFilterCountWhich="first",e.addFilterCountInvert=!1)},save:function(e,t){t.count=parseInt(e.addFilterCountN,10),t.which=e.addFilterCountWhich,t.invert=e.addFilterCountInvert},apply:function(e,t,n,a){var i=e.count,o=e.invert,s=e.which,r=t.length,l=function(e,t){return("first"==s?t>=i:t<r-i)?!o:o};return n=n.filter(l),{data:t=t.filter(l),sources:n}}},add_filter_empty:{title:s()("On Emptiness"),display:function(e,t){return"Filter rows if no value for column ".concat(t[e.target_column])},init:function(e,t){t?(e.addFilterEmptyTarget=t.target_column,e.addFilterEmptyInvert=t.invert):(e.addFilterEmptyTarget=0,e.addFilterEmptyInvert=!1)},save:function(e,t){t.target_column=e.addFilterEmptyTarget,t.invert=e.addFilterEmptyInvert},apply:function(e,t,n,a){var i=e.target_column,o=e.invert,s=function(e,n){return t[parseInt(n,10)][i].length?!o:o};return n=n.filter(s),{data:t=t.filter(s),sources:n}}},add_filter_matches:{title:s()("Matching a Supplied Value"),display:function(e,t){return"Filter rows with value ".concat(e.value," for column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterMatchesTarget=t.target_column,e.addFilterMatchesValue=t.value,e.addFilterMatchesInvert=t.invert):(e.addFilterMatchesTarget=0,e.addFilterMatchesValue="",e.addFilterMatchesInvert=!1)},save:function(e,t){t.target_column=e.addFilterMatchesTarget,t.value=e.addFilterMatchesValue,t.invert=e.addFilterMatchesInvert},apply:function(e,t,n,a){var i=e.target_column,o=e.invert,s=e.value,r=function(e,n){return t[parseInt(n,10)][i]==s?!o:o};return n=n.filter(r),{data:t=t.filter(r),sources:n}}},add_filter_compare:{title:s()("By Comparing to a Numeric Value"),display:function(e,t){return"Filter rows with value ".concat(e.compare_type," ").concat(e.value," for column ").concat(t[e.target_column])},init:function(e,t){t?(e.addFilterCompareTarget=t.target_column,e.addFilterCompareValue=t.value,e.addFilterCompareType=t.compare_type):(e.addFilterCompareTarget=0,e.addFilterCompareValue=0,e.addFilterCompareType="less_than")},save:function(e,t){t.target_column=e.addFilterCompareTarget,t.value=e.addFilterCompareValue,t.compare_type=e.addFilterCompareType},apply:function(e,t,n,a){var i=e.target_column,o=e.compare_type,s=e.value,r=function(e,n){var a,r=t[parseInt(n,10)],l=parseFloat(r[i]);return"less_than"==o?a=l<s:"less_than_equal"==o?a=l<=s:"greater_than"==o?a=l>s:"greater_than_equal"==o&&(a=l>=s),a};return n=n.filter(r),{data:t=t.filter(r),sources:n}}},sort:{title:s()("Sort"),display:function(e,t){return"Sort on column ".concat(t[e.target_column])},init:function(e,t){t?(e.addSortingTarget=t.target_column,e.addSortingNumeric=t.numeric):(e.addSortingTarget=0,e.addSortingNumeric=!1)},save:function(e,t){t.target_column=e.addSortingTarget,t.numeric=e.addSortingNumeric},apply:function(e,t,n,a){var o=e.target_column,s=e.numeric,r=i.a.zip(t,n);r.sort((function(e,t){var n=e[0][o],a=t[0][o];return s&&(n=parseFloat(n),a=parseFloat(a)),n<a?-1:a<n?1:0}));var l=[],c=[];return r.map((function(e){l.push(e[0]),c.push(e[1])})),{data:l,sources:c}}},swap_columns:{title:s()("Swap Column(s)"),display:function(e,t){return"Swap ".concat(d([e.target_column_0,e.target_column_1],t))},init:function(e,t){t?(e.swapColumnsTarget0=t.target_column_0,e.swapColumnsTarget1=t.target_column_1):(e.swapColumnsTarget0=0,e.swapColumnsTarget1=0)},save:function(e,t){t.target_column_0=e.swapColumnsTarget0,t.target_column_1=e.swapColumnsTarget1},apply:function(e,t,n,a){var i=e.target_column_0,o=e.target_column_1;t=t.map((function(e){var t=e.slice();return t[i]=e[o],t[o]=e[i],t}));var s=a[i];return a[i]=a[o],a[o]=s,{data:t,columns:a}}},split_columns:{title:s()("Split Column(s)"),display:function(e,t){return"Duplicate each row and split up columns"},init:function(e,t){t?(e.splitColumnsTargets0=t.target_columns_0,e.splitColumnsTargets1=t.target_columns_1):(e.splitColumnsTargets0=[],e.splitColumnsTargets1=[])},save:function(e,t){t.target_columns_0=e.splitColumnsTargets0,t.target_columns_1=e.splitColumnsTargets1},apply:function(e,t,n,a){var i=e.target_columns_0,o=e.target_columns_1;return{data:t=p((function(e){var t=[],n=[];for(var a in e)a=parseInt(a,10),i.indexOf(a)>-1?t.push(e[a]):o.indexOf(a)>-1?n.push(e[a]):(t.push(e[a]),n.push(e[a]));return[t,n]}),t),sources:n=p((function(e){return[e,e]}),n),columns:a=u(a,i)}}}},f={list_identifiers:{multiple:!0,label:s()("List Identifier(s)"),columnHeader:s()("List Identifier"),help:s()("This should be a short description of the replicate, sample name, condition, etc... that describes each level of the list structure."),importType:"collections"},paired_identifier:{label:s()("Paired-end Indicator"),columnHeader:s()("Paired Indicator"),help:s()("This should be set to '1', 'R1', 'forward', 'f', or 'F' to indicate forward reads, and '2', 'r', 'reverse', 'R2', 'R', or 'R2' to indicate reverse reads."),importType:"collections"},collection_name:{label:s()("Collection Name"),help:s()("If this is set, all rows with the same collection name will be joined into a collection and it is possible to create multiple collections at once."),modes:["raw","ftp","datasets","library_datasets"],importType:"collections"},name_tag:{label:s()("Name Tag"),help:s()("Add a name tag or hash tag based on the specified column value for imported datasets."),importType:"datasets",modes:["raw","ftp"]},tags:{multiple:!0,label:s()("General Purpose Tag(s)"),help:s()("Add a general purpose tag based on the specified column value, use : to separate key-value pairs if desired. These tags are not propagated to derived datasets the way name and group tags are."),modes:["raw","ftp","datasets","library_datasets"]},group_tags:{multiple:!0,label:s()("Group Tag(s)"),help:s()("Add a group tag based on the specified column value, use : to separate key-value pairs. These tags are propagated to derived datasets and may be useful for factorial experiments."),modes:["raw","ftp","datasets","library_datasets"]},name:{label:s()("Name"),importType:"datasets"},dbkey:{label:s()("Genome"),modes:["raw","ftp"]},file_type:{label:s()("Type"),modes:["raw","ftp"],help:s()("This should be the Galaxy file type corresponding to this file.")},url:{label:s()("URL"),modes:["raw"],help:s()("This should be a URL the file can be downloaded from.")},info:{label:s()("Info"),help:s()("Unstructured text associated with the dataset that shows up in the history panel, this is optional and can be whatever you would like."),modes:["raw","ftp"]},ftp_path:{label:s()("FTP Path"),modes:["raw","ftp"],help:s()("This should be the path to the target file to include relative to your FTP directory on the Galaxy server"),requiresFtp:!0}},_=function(e,t){return 0==e.length?t?t.map((function(e,t){return String.fromCharCode(65+t)})):[]:e[0].map((function(e,t){return String.fromCharCode(65+t)}))};t.a={applyRules:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=Array.from(i),r=!1;for(var l in a){o[l]=_(e,n);var c=a[l];if(c.error=null,c.warn=null,r)c.warn=s()("Skipped due to previous errors.");else{var d=c.type,u=m[d],h=u.apply(c,e,t,n);h.error?(r=!0,c.error=h.error):(h.warn&&(c.warn=h.warn),e=h.data||e,t=h.sources||t,n=h.columns||n)}}return{data:e,sources:t,columns:n,colHeadersPerRule:o}},columnDisplay:function(e,t){var n;return 2==(n="object"==c(e)?e.map((function(e){return t[e]})):[t[e]]).length?"columns "+n[0]+" and "+n[1]:n.length>2?"columns "+n.slice(0,-1).join(", ")+", and "+n[n.length-1]:"column "+n[0]},colHeadersFor:_,RULES:m,MAPPING_TARGETS:f}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(10),s=n.n(o),r=n(11),l=n(18);r.default.use(l.a);var c={props:["value"],computed:{filter:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},d=n(6),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-input-group",[n("b-input",{attrs:{placeholder:"Type to Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[n("i",{staticClass:"fa fa-times"})])],1)],1)}),[],!1,null,null,null).exports;r.default.use(l.a);var h={props:{items:{type:Array,required:!0},filter:{type:String,default:null},multiple:{type:Boolean,default:!1},leafIcon:{type:String,default:"fa fa-file-o"}},data:function(){return{currentPage:1,fields:[{key:"label",sortable:!0},{key:"details",sortable:!0},{key:"time",sortable:!0}],nItems:0,perPage:100}},watch:{items:{immediate:!0,handler:function(e){this.filtered(e)}}},methods:{filtered:function(e){this.nItems=e.length,this.currentPage=1},clicked:function(e){this.$emit("clicked",e)}}},p=Object(d.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-table",{attrs:{small:"",hover:"",items:e.items,fields:e.fields,filter:e.filter,"per-page":e.perPage,"current-page":e.currentPage},on:{"row-clicked":e.clicked,filtered:e.filtered},scopedSlots:e._u([{key:"cell(label)",fn:function(t){return[t.item.isLeaf?n("i",{class:e.leafIcon}):n("i",{staticClass:"fa fa-folder"}),e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}},{key:"cell(details)",fn:function(t){return[e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}},{key:"cell(time)",fn:function(t){return[e._v("\n            "+e._s(t.value?t.value:"-")+"\n        ")]}}])}),e._v(" "),0===e.nItems?n("div",[e.filter?n("div",[e._v("\n            No search results found for: "),n("b",[e._v(e._s(this.filter))]),e._v(".\n        ")]):n("div",[e._v("No entries.")])]):e._e(),e._v(" "),e.nItems>e.perPage?n("b-pagination",{attrs:{"per-page":e.perPage,"total-rows":e.nItems},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)}),[],!1,null,null,null).exports;r.default.use(l.a);var m={props:{multiple:{type:Boolean,default:!1},modalStatic:{type:Boolean,default:!1},errorMessage:{type:String,default:null},optionsShow:{type:Boolean,default:!1},modalShow:{type:Boolean,default:!0},hideModal:{type:Function,required:!0}}},f=(n(236),{components:{"selection-dialog":Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.modalShow?n("b-modal",{attrs:{"modal-class":"selection-dialog-modal",visible:"","ok-only":"","ok-title":"Close",static:e.modalStatic},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._t("search")]},proxy:!0},e.errorMessage?null:{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[e._t("buttons"),e._v(" "),n("b-btn",{staticClass:"float-right selection-dialog-modal-cancel",attrs:{size:"sm"},on:{click:e.hideModal}},[e._v(" Cancel ")])],2)]},proxy:!0}],null,!0)},[e._v(" "),e.errorMessage?n("b-alert",{attrs:{variant:"danger",show:""},domProps:{innerHTML:e._s(e.errorMessage)}}):n("div",[e.optionsShow?e._t("options"):n("div",[n("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),n("span",[e._v("Please wait...")])])],2)],1):e._e()}),[],!1,null,null,null).exports,"data-dialog-table":p,"data-dialog-search":u},props:{callback:{type:Function,required:!0}}});function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.navigation=[]}var t,n,a;return t=e,(n=[{key:"getUrl",value:function(e){if(e)this.navigation.push(e);else{this.navigation.pop();var t=this.navigation.length;e=t>0?this.navigation[t-1]:this.root}return e}},{key:"atRoot",value:function(){return 0==this.navigation.length}}])&&_(t.prototype,n),a&&_(t,a),e}();function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.values={},this.multiple=t.multiple||!1,this.format=t.format||null}var t,n,a;return t=e,(n=[{key:"add",value:function(e){this.multiple||(this.values={});var t=e&&e.id;if(!t)throw"Invalid record with no <id>.";this.values[t]?delete this.values[t]:this.values[t]=e}},{key:"count",value:function(){return Object.keys(this.values).length}},{key:"exists",value:function(e){return!!this.values[e]}},{key:"finalize",value:function(){var e=this,t=[];return Object.values(this.values).forEach((function(n){var a=null;a=e.format?n[e.format]:n,t.push(a)})),t.length>0&&!this.multiple&&(t=t[0]),t}}])&&v(t.prototype,n),a&&v(t,a),e}();function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root,this.host=t.host}var t,n,a;return t=e,(n=[{key:"get",value:function(e){var t=this;return new Promise((function(n,a){s.a.get(e).then((function(e){var a=t.getItems(e.data);n(a)})).catch((function(e){var t="Request failed.";e.response&&(t=e.response.data.err_msg||"".concat(e.response.statusText," (").concat(e.response.status,")")),a(t)}))}))}},{key:"getItems",value:function(e){for(var t=[],n=[e];n.length>0;){var a=n.pop();if(Array.isArray(a))a.forEach((function(e){n.push(e)}));else if(a.elements)n.push(a.elements);else if(a.object)n.push(a.object);else{var i=this.getRecord(a);i&&t.push(i)}}return t}},{key:"getRecord",value:function(e){return e.details=e.extension||e.description,e.time=e.update_time||e.create_time,e.isLeaf=this.isDataset(e),e.time&&(e.time=e.time.substring(0,16).replace("T"," ")),"Library"==e.model_class?(e.label=e.name,e.url="".concat(this.root,"api/libraries/").concat(e.id,"/contents"),e):e.hid?(e.label="".concat(e.hid,": ").concat(e.name),e.download="".concat(this.host,"/api/histories/").concat(e.history_id,"/contents/").concat(e.id,"/display"),e):"file"==e.type?(e.src="ldda",e.label=e.name,e.download="".concat(this.host).concat(this.root,"api/libraries/datasets/download/uncompressed?ld_ids=").concat(e.id),e):void 0}},{key:"isDataset",value:function(e){return"dataset"==e.history_content_type||"file"==e.type}}])&&b(t.prototype,n),a&&b(t,a),e}();r.default.use(l.a);var k={mixins:[f],props:{multiple:{type:Boolean,default:!1},format:{type:String,default:"download"},library:{type:Boolean,default:!0},root:{type:String,required:!0},host:{type:String,required:!0},history:{type:String,required:!0},modalStatic:{type:Boolean,default:!1}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,undoShow:!1,hasValue:!1}},created:function(){this.services=new w({root:this.root,host:this.host}),this.urlTracker=new g(this.getHistoryUrl()),this.model=new y({multiple:this.multiple,format:this.format}),this.load()},methods:{getHistoryUrl:function(){return"".concat(this.root,"api/histories/").concat(this.history,"/contents?deleted=false")},formatRows:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.items[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,s="active";o.isLeaf&&(s=this.model.exists(o.id)?"success":"default"),r.default.set(o,"_rowVariant",s)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},clicked:function(e){e.isLeaf?(this.model.add(e),this.hasValue=this.model.count()>0,this.multiple?this.formatRows():this.finalize()):this.load(e.url)},finalize:function(){var e=this.model.finalize();this.modalShow=!1,this.callback(e)},load:function(e){var t=this;e=this.urlTracker.getUrl(e),this.filter=null,this.optionsShow=!1,this.undoShow=!this.urlTracker.atRoot(),this.services.get(e).then((function(e){t.library&&t.urlTracker.atRoot()&&e.unshift({label:"Data Libraries",url:"".concat(t.root,"api/libraries")}),t.items=e,t.formatRows(),t.optionsShow=!0})).catch((function(e){t.errorMessage=e}))}}},M=Object(d.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":function(){return e.modalShow=!1}},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:e.multiple,filter:e.filter},on:{clicked:e.clicked,load:e.load}}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[e.undoShow?n("b-btn",{staticClass:"float-left",attrs:{size:"sm"},on:{click:function(t){return e.load()}}},[n("div",{staticClass:"fa fa-caret-left mr-1"}),e._v("\n            Back\n        ")]):e._e(),e._v(" "),e.multiple?n("b-btn",{staticClass:"float-right ml-1",attrs:{size:"sm",variant:"primary",disabled:!e.hasValue},on:{click:e.finalize}},[e._v("\n            Ok\n        ")]):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,x=n(98),L={mixins:[f],props:{},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.services=new x.a,this.load()},methods:{formatRows:function(){},clicked:function(e){this.modalShow=!1,this.callback(e)},load:function(){var e=this;this.filter=null,this.optionsShow=!1,this.services.getWorkflows().then((function(t){e.items=t.map((function(e){return{id:e.id,label:e.name,time:e.create_time,isLeaf:!0}})),e.formatRows(),e.optionsShow=!0})).catch((function(t){e.errorMessage=t.toString()}))}}},T=Object(d.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":function(){return e.modalShow=!1}},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:!1,filter:e.filter,"leaf-icon":"fa fa-sitemap fa-rotate-270"},on:{clicked:e.clicked,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,S=n(5),D=n(26),C={mixins:[f],props:{history:{type:String,required:!0}},data:function(){return{errorMessage:null,filter:null,items:[],modalShow:!0,optionsShow:!1,hasValue:!1}},created:function(){this.load()},methods:{formatRows:function(){},clicked:function(e){this.modalShow=!1,this.callback(e)},load:function(){var e=this;this.filter=null,this.optionsShow=!1;var t=Object(S.a)(),n="".concat(t.root,"api/histories/").concat(this.history,"/contents?type=dataset_collection");s.a.get(n).then((function(t){e.items=t.data.map((function(e){return{id:e.id,label:e.name,time:e.created_time,isLeaf:!0}})),e.formatRows(),e.optionsShow=!0})).catch((function(t){e.errorMessage=Object(D.a)(t)}))}}},j=Object(d.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("selection-dialog",{attrs:{"error-message":e.errorMessage,"options-show":e.optionsShow,"modal-show":e.modalShow,"hide-modal":function(){return e.modalShow=!1}},scopedSlots:e._u([{key:"search",fn:function(){return[n("data-dialog-search",{model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"options",fn:function(){return[e.optionsShow?n("data-dialog-table",{attrs:{items:e.items,multiple:!1,filter:e.filter,"leaf-icon":"fa fa-folder"},on:{clicked:e.clicked,load:e.load}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null).exports,Y=n(4);function O(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){O(o,a,i,s,r,"next",e)}function r(e){O(o,a,i,s,r,"throw",e)}s(void 0)}))}}function I(){return E.apply(this,arguments)}function E(){return(E=A(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Object(S.a)()).currHistoryPanel||!t.currHistoryPanel.model.id){e.next=5;break}return e.abrupt("return",t.currHistoryPanel.model.id);case 5:return e.abrupt("return",s.a.get("".concat(Object(Y.getAppRoot)(),"history/current_history_json")).then((function(e){return e.data.id})).catch((function(e){return console.error("Error fetching current user history:",e),null})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(S.a)(),a="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port);I().then((function(i){Object.assign(t,{callback:e,history:i,root:n.root,host:a}),R(M,t)}))}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(t,{callback:e}),R(T,t)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I().then((function(n){Object.assign(t,{callback:e,history:n}),R(j,t)}))}function R(e,t){var n=r.default.extend(e),a=document.createElement("div");i()("body").append(a),new n({propsData:t}).$mount(a)}function N(e){var t=Object(S.a)().currHistoryPanel;function n(){return(n=A(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.history_id){t.next=2;break}return t.abrupt("return",I());case 2:return t.abrupt("return",e.history_id);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return n.apply(this,arguments)})().then((function(n){i.a.uploadpost({url:"".concat(Object(Y.getAppRoot)(),"api/tools"),success:function(n){t&&t.refreshContents(),e.success&&e.success(n)},error:e.error,data:{payload:{tool_id:"upload1",history_id:n,inputs:JSON.stringify({"files_0|type":"upload_dataset","files_0|NAME":e.file_name,"files_0|space_to_tab":e.space_to_tab?"Yes":null,"files_0|to_posix_lines":e.to_posix_lines?"Yes":null,"files_0|dbkey":e.genome||"?","files_0|file_type":e.extension||"auto","files_0|url_paste":e.url_paste})}}})}))}n.d(t,"c",(function(){return H})),n.d(t,"d",(function(){return $})),n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return N}))},function(e,t,n){"use strict";(function(e,a){var i=n(8);t.a={grid:function(e){var t="";return t=e.embedded?this.grid_header(e)+this.grid_table(e):'<div class="loading-elt-overlay"></div><table><tr><td width="75%">'.concat(this.grid_header(e),'</td><td></td><td></td></tr><tr><td width="100%" id="grid-message" valign="top"></td><td></td><td></td></tr></table>').concat(this.grid_table(e)),e.info_text&&(t+='<br><div class="toolParamHelp" style="clear: both;">'.concat(e.info_text,"</div>")),t},grid_table:function(){return'\n            <form method="post" onsubmit="return false;">\n                <table id="grid-table" class="grid">\n                    <thead id="grid-table-header"></thead>\n                    <tbody id="grid-table-body"></tbody>\n                    <tfoot id="grid-table-footer"></tfoot>\n                </table>\n            </form>'},grid_header:function(e){var t='<div class="grid-header">';if(e.embedded||(t+="<h2>".concat(e.title,"</h2>")),e.global_actions){t+='<ul class="manage-table-actions">';var n=e.global_actions.length>=3;n&&(t+='<li><a class="action-button" id="popup-global-actions" class="menubutton">Actions</a></li><div popupmenu="popup-global-actions">');var a=!0,i=!1,o=void 0;try{for(var s,r=e.global_actions[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;t+='<li><a class="action-button use-target" target="'.concat(l.target,'" href="').concat(l.url_args,'" onclick="return false;" >').concat(l.label,"</a></li>")}}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}n&&(t+="</div>"),t+="</ul>"}return e.insert&&(t+=e.insert),t+=this.grid_filters(e),t+="</div>"},header:function(e){var t="<tr>";e.show_item_checkboxes&&(t+="<th>",e.items.length>0&&(t+='<input type="checkbox" id="check_all" name=select_all_checkbox value="true"><input type="hidden" name=select_all_checkbox value="true">'),t+="</th>");var n=!0,a=!1,i=void 0;try{for(var o,s=e.columns[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;r.visible&&(t+='<th id="'.concat(r.key,'-header">'),r.href?t+='<a href="'.concat(r.href,'" class="sort-link" sort_key="').concat(r.key,'">').concat(r.label,"</a>"):t+=r.label,t+='<span class="sort-arrow">'.concat(r.extra,"</span></th>"))}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t+="</tr>"},body:function(t){var n="";0===t.items.length&&(n+='<tr><td colspan="100"><em>No Items</em></td></tr>');var a=!0,i=!1,o=void 0;try{for(var s,r=t.items[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;n+="<tr ",t.current_item_id==l.id&&(n+='class="current"'),n+=">",t.show_item_checkboxes&&(n+='<td style="width: 1.5em;"><input type="checkbox" name="id" value="'.concat(l.encode_id,'" id="').concat(l.encode_id,'" class="grid-row-select-checkbox" /></td>'));var c=!0,d=!1,u=void 0;try{for(var h,p=t.columns[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var m=h.value;if(m.visible){var f="";m.nowrap&&(f='style="white-space:nowrap;"');var _=l.column_config[m.label],g=_.link,v=_.value,y=_.target;"string"===e.type(v)&&(v=v.replace(/\/\//g,"/"));var b="",w="";m.attach_popup&&(b="grid-".concat(l.encode_id,"-popup"),w="menubutton",""!==g&&(w+=" split"),w+=" popup"),n+="<td ".concat(f,">"),g?(0!==t.operations.length&&(n+='<div id="'.concat(b,'" class="').concat(w,'" style="float: left;">')),n+='<a class="menubutton-label use-target" target="'.concat(y,'" href="').concat(g,'" onclick="return false;">').concat(v,"</a>"),0!==t.operations.length&&(n+="</div>")):n+='<div id="'.concat(b,'" class="').concat(w,'"><label id="').concat(m.label_id_prefix).concat(l.encode_id,'" for="').concat(l.encode_id,'">').concat(v||"","</label></div>"),n+="</td>"}}}catch(e){d=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}n+="</tr>"}}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n},footer:function(e){var t="";if(e.use_paging&&e.num_pages>1){var n=e.num_page_links,a=e.cur_page_num,i=e.num_pages,o=n/2,s=a-o,r=0;s<=0&&(r=o-(a-(s=1)));var l,c=o+r,d=a+c;0!==(l=d<=i?0:c-((d=i)+1-a))&&(s-=l)<1&&(s=1),t+='<tr id="page-links-row">',e.show_item_checkboxes&&(t+="<td></td>"),t+='<td colspan="100"><span id="page-link-container">Page:',s>1&&(t+='<span class="page-link" id="page-link-1"><a href="javascript:void(0);" page_num="1" onclick="return false;">1</a></span> ...');for(var u=s;u<d+1;u++)u==e.cur_page_num?t+='<span class="page-link inactive-link" id="page-link-'.concat(u,'">').concat(u,"</span>"):t+='<span class="page-link" id="page-link-'.concat(u,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(u,'">').concat(u,"</a></span>");d<i&&(t+='...<span class="page-link" id="page-link-'.concat(i,'"><a href="javascript:void(0);" onclick="return false;" page_num="').concat(i,'">').concat(i,"</a></span>")),t+="</span>",t+='\n                    <span class="page-link" id="show-all-link-span"> | <a href="javascript:void(0);" onclick="return false;" page_num="all">Show All</a></span>\n                    </td>\n                </tr>'}if(e.show_item_checkboxes){t+='\n                <tr>\n                    <input type="hidden" id="operation" name="operation" value="">\n                    <td></td>\n                    <td colspan="100">\n                        For <span class="grid-selected-count"></span> selected items: \n            ';var h=!0,p=!1,m=void 0;try{for(var f,_=e.operations[Symbol.iterator]();!(h=(f=_.next()).done);h=!0){var g=f.value;g.allow_multiple&&(t+='<input type="button" value="'.concat(g.label,'" class="operation-button action-button">&nbsp;'))}}catch(e){p=!0,m=e}finally{try{h||null==_.return||_.return()}finally{if(p)throw m}}t+="</td></tr>"}var v=!1,y=!0,b=!1,w=void 0;try{for(var k,M=e.operations[Symbol.iterator]();!(y=(k=M.next()).done);y=!0){if(k.value.global_operation){v=!0;break}}}catch(e){b=!0,w=e}finally{try{y||null==M.return||M.return()}finally{if(b)throw w}}if(v){t+='<tr><td colspan="100">';var x=!0,L=!1,T=void 0;try{for(var S,D=e.operations[Symbol.iterator]();!(x=(S=D.next()).done);x=!0){var C=S.value;C.global_operation&&(t+='<a class="action-button" href="'.concat(C.global_operation,'">').concat(C.label,"</a>"))}}catch(e){L=!0,T=e}finally{try{x||null==D.return||D.return()}finally{if(L)throw T}}t+="</td></tr>"}return e.legend&&(t+='<tr><td colspan="100">'.concat(e.legend,"</td></tr>")),t},message:function(e){var t=e.status;return-1!=["success","ok"].indexOf(t)&&(t="done"),'<p><div class="'.concat(t,'message transient-message">').concat(a.escape(e.message),'</div><div style="clear: both"></div></p>')},grid_filters:function(e){var t=e.default_filter_dict,n=e.filters,a="none";e.advanced_search&&(a="block");var i=!1,o=!0,s=!1,r=void 0;try{for(var l,c=e.columns[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;if("advanced"==d.filterable){var u=d.key,h=n[u],p=t[u];h&&p&&h!=p&&(a="block"),i=!0}}}catch(e){s=!0,r=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw r}}var m="block";"block"==a&&(m="none");var f='<div id="standard-search" style="display: '.concat(m,';"><table><tr><td style="padding: 0;"><table>'),_=!0,g=!1,v=void 0;try{for(var y,b=e.columns[Symbol.iterator]();!(_=(y=b.next()).done);_=!0){var w=y.value;"standard"==w.filterable&&(f+=this.grid_column_filter(e,w))}}catch(e){g=!0,v=e}finally{try{_||null==b.return||b.return()}finally{if(g)throw v}}f+="</table></td></tr><tr><td>",i&&(f+='<a href="javascript:void(0)" class="advanced-search-toggle">Advanced Search</a>'),f+="</td></tr></table></div>",f+='<div id="advanced-search" style="display: '.concat(a,'; margin-top: 5px; border: 1px solid #ccc;"><table><tr><td style="text-align: left" colspan="100"><a href="javascript:void(0)" class="advanced-search-toggle">Close Advanced Search</a></td></tr>');var k=!0,M=!1,x=void 0;try{for(var L,T=e.columns[Symbol.iterator]();!(k=(L=T.next()).done);k=!0){var S=L.value;"advanced"==S.filterable&&(f+=this.grid_column_filter(e,S))}}catch(e){M=!0,x=e}finally{try{k||null==T.return||T.return()}finally{if(M)throw x}}return f+="</table></div>"},grid_column_filter:function(t,n){var a=t.filters,i=n.label,o=n.key;"advanced"==n.filterable&&(i=i.toLowerCase());var s="<tr>";if("advanced"==n.filterable&&(s+='<td align="left" style="padding-left: 10px">'.concat(i,":</td>")),s+='<td style="padding-bottom: 1px;">',n.is_text){s+='<form class="text-filter-form" column_key="'.concat(o,'" action="').concat(t.url,'" method="get" >');var r=!0,l=!1,c=void 0;try{for(var d,u=t.columns[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var h=d.value,p=a[h.key];p&&"All"!=p&&(h.is_text&&(p=JSON.stringify(p)),s+='<input type="hidden" id="'.concat(h.key,'" name="f-').concat(h.key,'" value="').concat(p,'"/>'))}}catch(e){l=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}s+='<span id="'.concat(o,'-filtering-criteria">');var m=a[o];if(m){var f=e.type(m);if("string"==f&&"All"!=m&&(s+=this.filter_element(o,m)),"array"==f)for(var _ in m){m.slice(_),s+=this.filter_element(o,m[_])}}s+="</span>";var g="",v=20;"standard"==n.filterable&&((g=n.label.toLowerCase()).length<20&&(v=g.length),v+=4),s+='\n                <span class="search-box">\n                    <input class="search-box-input" id="input-'.concat(o,'-filter" name="f-').concat(o,'" type="text" placeholder="').concat(g,'" size="').concat(v,'"/>\n                    <button type="submit" style="background: transparent; border: none; padding: 4px; margin: 0px;">\n                        <i class="fa fa-search"></i>\n                    </button>\n                </span>\n            </form>')}else{s+='<span id="'.concat(o,'-filtering-criteria">');var y=!1;for(var b in t.categorical_filters[o]){var w=t.categorical_filters[o][b],k="",M="";for(var x in w)k=x,M=w[x];y&&(s+=" | "),y=!0;var L=a[o];L&&w[o]&&L==M?s+='<span class="categorical-filter '.concat(o,'-filter current-filter">').concat(b,"</span>"):s+='<span class="categorical-filter '.concat(o,'-filter"><a href="javascript:void(0);" filter_key="').concat(k,'" filter_val="').concat(M,'">').concat(b,"</a></span>")}s+="</span>"}return s+="</td></tr>"},filter_element:function(e,t){return t=i.a.sanitize(t),'<span class="text-filter-val">'.concat(t,'<a href="javascript:void(0);" filter_key="').concat(e,'" filter_val="').concat(t,'"><i class="fa fa-times" style="padding-left: 5px; padding-bottom: 6px;"/></a></span>')}}}).call(this,n(0),n(1))},,,,,function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(5),d=l.a.Model.extend({initialize:function(e){this.app=e},checksum:function(){var e="",t=this;return this.app.section.$el.find(".section-row").each((function(){var n=s()(this).attr("id"),a=t.app.field_list[n];a&&(e+="".concat(n,":").concat(JSON.stringify(a.value&&a.value()),":").concat(a.collapsed,":").concat(a.connected,";"))})),e},create:function(){var e=this,t={};this._iterate(this.app.section.$el,t);var n={};function a(t,a,i){e.flat_dict[t]=a,n[t]=i,e.app.element_list[a]&&e.app.element_list[a].$el.attr("tour_id",t)}return this.flat_dict={},function t(n,i){for(var o in i){var s=i[o];if(s.input){var r=s.input,l=n;switch(""!==n&&(l+="|"),l+=r.name,r.type){case"repeat":var c=[],d=null;for(var h in s){var p=h.indexOf("section-");-1!=p&&(p+="section-".length,c.push(parseInt(h.substr(p))),d||(d=h.substr(0,p)))}for(var m in c.sort((function(e,t){return e-t})),o=0,c)t("".concat(l,"_").concat(o++),s[d+c[m]]);break;case"conditional":var f=e.app.field_list[r.id].value();a("".concat(l,"|").concat(r.test_param.name),r.id,f);var _=u(r,f);-1!=_&&t(l,i["".concat(r.id,"-section-").concat(_)]);break;case"section":t(!r.flat&&l||"",s);break;default:var g=e.app.field_list[r.id];if(g&&g.value&&(f=g.value(),(void 0===r.ignore||r.ignore!=f)&&(g.connected?f={__class__:"ConnectedValue"}:g.collapsed&&r.collapsible_value&&(f=r.collapsible_value),a(l,r.id,f),r.payload)))for(var v in r.payload)a(v,r.id,r.payload[v])}}}}("",t),n},match:function(e){return this.flat_dict&&this.flat_dict[e]},matchCase:function(e,t){return u(e,t)},matchModel:function(e,t){var n=this;h(e.inputs,(function(e,a){n.flat_dict[a]&&t(e,n.flat_dict[a])}))},matchResponse:function(e){var t={},n=this;return function e(a,i){if("string"==typeof i){var o=n.flat_dict[a];o&&(t[o]=i)}else for(var s in i){var r=s;if(""!==a){var l="|";i instanceof Array&&(l="_"),r=a+l+r}e(r,i[s])}}("",e),t},_iterate:function(e,t){var n=this;s()(e).children().each((function(){var e=s()(this).attr("id");if(s()(this).hasClass("section-row")){var a=n.app.input_list[e];t[e]=a&&{input:a}||{},n._iterate(this,t[e])}else n._iterate(this,t)}))}}),u=function(e,t){for(var n in"boolean"==e.test_param.type&&(t="true"==t?e.test_param.truevalue||"true":e.test_param.falsevalue||"false"),e.cases)if(e.cases[n].value==t)return n;return-1},h=function e(t,n,a,o){for(var r in o=s.a.extend({},o),i.a.each(t,(function(e){e&&e.type&&e.name&&(o[e.name]=e)})),t){var l=Object(c.a)(),d=t[r];d.name=d.name||r;var h=a?"".concat(a,"|").concat(d.name):d.name;switch(d.type){case"repeat":i.a.each(d.cache,(function(t,a){e(t,n,"".concat(h,"_").concat(a),o)}));break;case"conditional":if(d.test_param){n(d.test_param,"".concat(h,"|").concat(d.test_param.name),o);var p=u(d,d.test_param.value);-1!=p?e(d.cases[p].inputs,n,h,o):l.emit.debug("form-data::visitInputs() - Invalid case for ".concat(h,"."))}else l.emit.debug("form-data::visitInputs() - Conditional test parameter missing for ".concat(h,"."));break;case"section":e(d.inputs,n,h,o);break;default:n(d,h,o)}}};t.a={Manager:d,visitInputs:h}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(4),l=n(5),c=n(2),d=n.n(c),u=n(141),h=n(54),p=n(85),m=n(142),f=n(91),_=n(48),g=n(31),v=n(7),y=n(99),b=n(69),w=(n(154),s.a);function k(e,t){return this.currModeIndex=0,this._init(e,t)}k.prototype.DATA_KEY="mode-button",k.prototype.defaults={switchModesOnClick:!0},k.prototype._init=function(e,t){if(t=t||{},this.$element=w(e),this.options=w.extend(!0,{},this.defaults,t),!t.modes)throw new Error('ModeButton requires a "modes" array');var n=this;return this.$element.click((function(e){n.callModeFn(),n.options.switchModesOnClick&&n._incModeIndex(),w(this).html(n.options.modes[n.currModeIndex].html)})),this.reset()},k.prototype._incModeIndex=function(){return this.currModeIndex+=1,this.currModeIndex>=this.options.modes.length&&(this.currModeIndex=0),this},k.prototype._getModeIndex=function(e){for(var t=0;t<this.options.modes.length;t+=1)if(this.options.modes[t].mode===e)return t;throw new Error("mode not found: ".concat(e))},k.prototype._setModeByIndex=function(e){var t=this.options.modes[e];if(!t)throw new Error("mode index not found: ".concat(e));return this.currModeIndex=e,t.html&&this.$element.html(t.html),this},k.prototype.currentMode=function(){return this.options.modes[this.currModeIndex]},k.prototype.current=function(){return this.currentMode().mode},k.prototype.getMode=function(e){return e?this.options.modes[this._getModeIndex(e)]:this.currentMode()},k.prototype.hasMode=function(e){try{return!!this.getMode(e)}catch(e){console.debug(e)}return!1},k.prototype.setMode=function(e){return this._setModeByIndex(this._getModeIndex(e))},k.prototype.reset=function(){return this.currModeIndex=0,this.options.initialMode&&(this.currModeIndex=this._getModeIndex(this.options.initialMode)),this._setModeByIndex(this.currModeIndex)},k.prototype.callModeFn=function(e){var t=this.getMode(e).onclick;if(t&&w.type("function"===t))return t.call(this.$element.get(0))},w.fn.modeButton=function(e){if(!this.length)return this;if("object"===w.type(e))return this.map((function(){var t=w(this);return t.data("mode-button",new k(t,e)),this}));var t=w(this[0]),n=t.data("mode-button");if(!n)throw new Error("modeButton needs an options object or string name of a function");if(n&&"string"===w.type(e)){var a=e;if(n&&"function"===w.type(n[a]))return n[a].apply(n,w.makeArray(arguments).slice(1))}return n},n.d(t,"b",(function(){return S}));var M,x,L=u.a.ModelListPanel,T=L.extend({_logNamespace:"history",HDAViewClass:m.a.HDAListItemView,HDCAViewClass:f.a.HDCAListItemView,collectionClass:p.a,modelCollectionKey:"contents",tagName:"div",className:"".concat(L.prototype.className," history-panel"),emptyMsg:d()("This history is empty"),noneFoundMsg:d()("No matching datasets found"),searchPlaceholder:d()("search datasets"),initialize:function(e){L.prototype.initialize.call(this,e),this.linkTarget=e.linkTarget||"_blank"},_createDefaultCollection:function(){return new this.collectionClass([],{history:this.model})},freeModel:function(){return L.prototype.freeModel.call(this),this.model&&this.model.stopPolling(),this},_setUpListeners:function(){L.prototype._setUpListeners.call(this),this.on({error:function(e,t,n,a,i){this.errorHandler(e,t,n,a,i)},"views:ready view:attached view:removed":function(e){this._renderSelectButton()},"view:attached":function(e){this.scrollTo(0)}})},loadHistory:function(e,t,n){var a=this;return n=i.a.extend(n||{silent:!0}),this.info("loadHistory:",e,t,n),this.setModel(new h.a({id:e})),n.silent=!0,this.trigger("loading"),this.model.fetchWithContents(t,n).always((function(){a.render(),a.trigger("loading-done")}))},refreshContents:function(e){return this.model?this.model.refresh(e):s.a.when()},_setUpCollectionListeners:function(){return L.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"fetching-more":function(){this._toggleContentsLoadingIndicator(!0),this.$emptyMessage().hide()},"fetching-more-done":function(){this._toggleContentsLoadingIndicator(!1)}})},_showLoadingIndicator:function(e,t,n){var a=s()('<div class="loading-indicator"/>');this.$el.html(a.text(e).slideDown(i.a.isUndefined(t)?this.fxSpeed:t))},_hideLoadingIndicator:function(e){this.$(".loading-indicator").slideUp(i.a.isUndefined(e)?this.fxSpeed+200:e,(function(){s()(this).remove()}))},_buildNewRender:function(){var e=L.prototype._buildNewRender.call(this);return this._renderSelectButton(e),e},_renderSelectButton:function(e){if(e=e||this.$el,!this.multiselectActions().length)return null;if(!this.views.length)return this.hideSelectors(),e.find(".controls .actions .show-selectors-btn").remove(),null;var t=e.find(".controls .actions .show-selectors-btn");return t.length?t:Object(g.a)({title:d()("Operations on multiple datasets"),classes:"show-selectors-btn",faIcon:"fa-check-square-o",tooltipConfig:{placement:"top"}}).prependTo(e.find(".controls .actions"))},_renderEmptyMessage:function(e){var t=this.$emptyMessage(e);return this.model.get("contents_active").active<=0?t.empty().append(this.emptyMsg).show():this.searchFor&&this.model.contents.haveSearchDetails()&&!this.views.length?t.empty().append(this.noneFoundMsg).show():(t.hide(),s()())},$scrollContainer:function(e){return this.$list(e)},_toggleContentsLoadingIndicator:function(e){e?this.$list().html('<div class="contents-loading-indicator"><span class="fa fa-2x fa-spinner fa-spin"/></div>'):this.$list().find(".contents-loading-indicator").remove()},renderItems:function(e){e=e||this.$el;var t=this.$list(e);s()(".tooltip").remove(),t.empty(),this.views=[];var n=this._filterCollection();return n.length?(this._renderPagination(e),this.views=this._renderSomeItems(n,t)):e.find("> .controls .list-pagination").empty(),this._renderEmptyMessage(e).toggle(!n.length),this.trigger("views:ready",this.views),this.views},_renderPagination:function(e){var t=e.find("> .controls .list-pagination");return this.searchFor||!this.model.contents.shouldPaginate()?t.empty():(t.html(this.templates.pagination({current:this.model.contents.currentPage+1,last:this.model.contents.getLastPage()+1},this)),t.find("select.pages").tooltip(),t)},_renderSomeItems:function(e,t){var n=this,a=[];return t.append(e.map((function(e){var t=n._createItemView(e);return a.push(t),n._renderItemView$el(t)}))),a},_filterItem:function(e){var t=this.model.contents;return(t.includeHidden||!e.hidden())&&(t.includeDeleted||!e.isDeletedOrPurged())&&L.prototype._filterItem.call(this,e)},_getItemViewClass:function(e){var t=e.get("history_content_type");switch(t){case"dataset":return this.HDAViewClass;case"dataset_collection":return this.HDCAViewClass}throw new TypeError("Unknown history_content_type: ".concat(t))},_getItemViewOptions:function(e){var t=L.prototype._getItemViewOptions.call(this,e);return i.a.extend(t,{linkTarget:this.linkTarget,expanded:this.model.contents.storage.isExpanded(e.id),hasUser:this.model.ownedByCurrUser()})},_setUpItemViewListeners:function(e){var t=this;return L.prototype._setUpItemViewListeners.call(t,e),t.listenTo(e,{expanded:function(e){t.model.contents.storage.addExpanded(e.model)},collapsed:function(e){t.model.contents.storage.removeExpanded(e.model)}})},collapseAll:function(){this.model.contents.storage.clearExpanded(),L.prototype.collapseAll.call(this)},getSelectedModels:function(){var e=L.prototype.getSelectedModels.call(this);return e.historyId=this.collection.historyId,e},events:i.a.extend(i.a.clone(L.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click > .controls .prev":"_clickPrevPage","click > .controls .next":"_clickNextPage","change > .controls .pages":"_changePageSelect","click .messages [class$=message]":"clearMessages"}),_clickPrevPage:function(e){this.model.stopPolling(),this.model.contents.fetchPrevPage()},_clickNextPage:function(e){this.model.stopPolling(),this.model.contents.fetchNextPage()},_changePageSelect:function(e){this.model.stopPolling();var t=s()(e.currentTarget).val();this.model.contents.fetchPage(t)},toggleShowDeleted:function(e,t){e=void 0!==e?e:!this.model.contents.includeDeleted;var n=this.model.contents;return n.setIncludeDeleted(e,t),this.trigger("show-deleted",e),n.fetchCurrentPage({renderAll:!0}),e},toggleShowHidden:function(e,t,n){e=void 0!==e?e:!this.model.contents.includeHidden;var a=this.model.contents;return a.setIncludeHidden(e,n),this.trigger("show-hidden",e),a.fetchCurrentPage({renderAll:!0}),e},_firstSearch:function(e){var t=this;this.log("onFirstSearch",e),this.model.contents.haveSearchDetails()?this.searchItems(e):(this.$("> .controls .search-input").searchInput("toggle-loading"),this.searchFor=e,this.model.contents.progressivelyFetchDetails({silent:!0}).progress((function(e,n,a){t.renderItems(),t.trigger("search:loading-progress",n,a)})).always((function(){t.$el.find("> .controls .search-input").searchInput("toggle-loading")})).done((function(){t.searchItems(e,"force")})))},clearSearch:function(e){var t=this;return this.searchFor?(this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.model.contents.fetchCurrentPage({silent:!0}).done((function(){t.renderItems()})),this):this},errorHandler:function(e,t,n){if(!t||0!==t.status||0!==t.readyState){if(this.error(e,t,n),i.a.isString(e)&&i.a.isString(t)){var a=e;return _.a.errorModal(a,t,n)}return t&&502===t.status?_.a.badGatewayErrorModal():_.a.ajaxErrorModal(e,t,n)}},clearMessages:function(e){return(i.a.isUndefined(e)?this.$messages().children('[class$="message"]'):s()(e.currentTarget)).fadeOut(this.fxSpeed,(function(){s()(this).remove()})),this},scrollToHid:function(e){return this.scrollToItem(i.a.first(this.viewsWhereModel({hid:e})))},ordinalIndicator:function(e){var t="".concat(e);switch(t.charAt(t.length-1)){case"1":return"".concat(t,"st");case"2":return"".concat(t,"nd");case"3":return"".concat(t,"rd");default:return"".concat(t,"th")}},toString:function(){return"HistoryView(".concat(this.model?this.model.get("name"):"",")")}});function S(e){s()("#toggle-deleted").modeButton({initialMode:e.initialModeDeleted,modes:[{mode:"showing_deleted",html:d()("Exclude deleted")},{mode:"not_showing_deleted",html:d()("Include deleted")}]}),s()("#toggle-hidden").modeButton({initialMode:e.initialModeHidden,modes:[{mode:"showing_hidden",html:d()("Exclude hidden")},{mode:"not_showing_hidden",html:d()("Include hidden")}]}),s()("#switch").click((function(){var e=Object(l.a)(),t=e.currHistoryPanel?e.currHistoryPanel:null;t?t.switchToHistory("${ history[ 'id' ] }"):window.location="${ switch_to_url }"})),e.hasMasthead&&s()("#center").addClass("flex-vertical-container");var t=e.userIsOwner?y.a.HistoryViewEdit:T.HistoryView,n=new h.a(e.historyJSON);s()("#import").click((function(){var e=Object(l.a)();Object(b.a)(n,{useImport:!0,allDatasets:"showing_deleted"===s()("#toggle-deleted").modeButton("getMode").mode}).done((function(){window===window.parent?window.location=Object(r.getAppRoot)():e.currHistoryPanel&&e.currHistoryPanel.loadCurrentHistory()}))}));var a=new t({el:s()("#history-"+e.historyJSON.id),className:t.prototype.className+" wide",$scrollContainer:e.hasMasthead?function(){return this.$el.parent()}:void 0,model:n,show_deleted:e.showDeletedJson,show_hidden:e.showHiddenJson,purgeAllowed:e.allow_user_dataset_purge});a.trigger("loading"),n.fetchContents({silent:!0}).fail((function(){alert("Galaxy history failed to load")})).done((function(){a.trigger("loading-done"),a.render()})),s()("#toggle-deleted").on("click",(function(){a.toggleShowDeleted()})),s()("#toggle-hidden").on("click",(function(){a.toggleShowHidden()}))}T.prototype.templates=(M=v.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- history.name %></div>',"</div>",'<div class="subtitle"></div>','<div class="history-size"><%- history.nice_size %></div>','<div class="actions"></div>','<div class="messages">',"<% if( history.deleted && history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',d()("This history has been purged and deleted"),"</div>","<% } else if( history.deleted ){ %>",'<div class="deleted-msg warningmessagesmall">',d()("This history has been deleted"),"</div>","<% } else if( history.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',d()("This history has been purged"),"</div>","<% } %>","<% if( history.message ){ %>",'<div class="<%= history.message.level || "info" %>messagesmall">',"<%= history.message.text %>","</div>","<% } %>","</div>",'<div class="tags-display"></div>','<div class="annotation-display"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',d()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',d()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>",'<div class="list-pagination form-inline"></div>',"</div>"],"history"),x=v.a.wrapTemplate(['<button class="prev" <%- pages.current === 1 ? "disabled" : "" %>>previous</button>','<select class="pages form-control" ','title="',d()("Click to open and select a page. Begin typing a page number to select it"),'">',"<% _.range( 1, pages.last + 1 ).forEach( function( i ){ %>",'<option value="<%- i - 1 %>" <%- i === pages.current ? "selected" : "" %>>',"<%- view.ordinalIndicator( i ) %> of <%- pages.last %> pages","</option>","<% }); %>","</select>",'<button class="next" <%- pages.current === pages.last ? "disabled" : "" %>>next</button>'],"pages"),i.a.extend(i.a.clone(L.prototype.templates),{el:function(){return'<div>\n            <div class="controls"></div>\n            <ul class="list-items"></ul>\n            <div class="empty-message infomessagesmall"></div>\',\n        </div>'},controls:M,pagination:x}));t.a={HistoryView:T,historyEntry:S}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return S}));var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(5),u=n(2),h=n.n(u),p=n(59),m=n(22),f=n(35),_=n(44),g=n(50);n(424),n(425),n(426),n(427),n(428),n(208),n(429),n(430),n(103);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function k(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){return y(this,t),k(this,M(t).call(this,e))}return x(t,e),w(t,[{key:"initialize",value:function(e){this.baseURL=e}},{key:"save_viz",value:function(){var e=this,t=Object(d.a)();t.modal.show({title:"Saving...",body:"progress"});var n=[];s()(".bookmark").each((function(){n.push({position:s()(e).children(".position").text(),annotation:s()(e).children(".annotation").text()})}));var a=this.view.overview_drawable?this.view.overview_drawable.config.get_value("name"):null,i={view:this.view.to_dict(),viewport:{chrom:this.view.chrom,start:this.view.low,end:this.view.high,overview:a},bookmarks:n};return s.a.ajax({url:"".concat(Object(c.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:this.view.vis_id,title:this.view.config.get_value("name"),dbkey:this.view.dbkey,type:"trackster",vis_json:JSON.stringify(i)}}).success((function(n){t.modal.hide(),e.view.vis_id=n.vis_id,e.view.has_changes=!1,window.history.pushState({},"",n.url+window.top.location.hash)})).error((function(){t.modal.show({title:h()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){t.modal.hide()}}})}))}},{key:"createButtonMenu",value:function(){var e=this,t=f.a.create_icon_buttons_menu([{icon_class:"plus-button",title:h()("Add tracks"),on_click:function(){m.a.select_datasets({dbkey:e.view.dbkey},(function(t){i.a.each(t,(function(t){e.view.add_drawable(p.a.object_from_template(t,e.view,e.view))}))}))}},{icon_class:"block--plus",title:h()("Add group"),on_click:function(){e.view.add_drawable(new p.a.DrawableGroup(e.view,e.view,{name:"New Group"}))}},{icon_class:"bookmarks",title:h()("Bookmarks"),on_click:function(){window.force_right_panel("0px"==s()("div#right").css("right")?"hide":"show")}},{icon_class:"globe",title:h()("Circster"),on_click:function(){var t=e.view.vis_id,n="id="+t;null==t&&(n="dataset_id=".concat(e.view.drawables[0].dataset.id,"&hda_ldda=").concat(e.view.drawables[0].dataset.attributes.hda_ldda)),window.top.location="".concat(e.baseURL,"visualization/circster?").concat(n)}},{icon_class:"disk--arrow",title:h()("Save"),on_click:function(){e.save_viz()}},{icon_class:"cross-circle",title:h()("Close"),on_click:function(){e.handle_unsaved_changes(e.view)}}],{tooltip_config:{placement:"bottom"}});return this.buttonMenu=t,t}},{key:"add_bookmark",value:function(e,t,n){var a=this,i=s()("#right .unified-panel-body"),o=s()("<div/>").addClass("bookmark").appendTo(i),r=s()("<div/>").addClass("position").appendTo(o);s()("<a href='javascript:void(0)'/>").text(e).appendTo(r).click((function(){return a.view.go_to(e),!1}));var l=s()("<div/>").text(t).appendTo(o);if(n){var c=s()("<div/>").addClass("delete-icon-container").prependTo(o).click((function(){return o.slideUp("fast"),o.remove(),a.view.has_changes=!0,!1}));s()("<a href='javascript:void(0)'/>").addClass("icon-button delete").appendTo(c),l.make_text_editable({num_rows:3,use_textarea:!0,help_text:"Edit bookmark note"}).addClass("annotation")}return this.view.has_changes=!0,o}},{key:"create_visualization",value:function(e,t,n,a,o){var r=this;return this.view=new p.a.TracksterView(i.a.extend(e,{header:!1})),this.view.editor=!0,s.a.when(this.view.load_chroms_deferred).then((function(e){var i=null;if(t){var s=t.chrom,l=t.start,c=t.end;i=t.overview,s&&void 0!==l&&c?r.view.change_chrom(s,l,c):r.view.change_chrom(e[0].chrom)}else r.view.change_chrom(e[0].chrom);if(n)for(var d=0;d<n.length;d++)r.view.add_drawable(p.a.object_from_template(n[d],r.view,r.view));for(var u=0;u<r.view.drawables.length;u++)if(r.view.drawables[u].config.get_value("name")===i){r.view.set_overview(r.view.drawables[u]);break}if(a)for(var h,m=0;m<a.length;m++)h=a[m],r.add_bookmark(h.position,h.annotation,o);r.view.has_changes=!1})),this.set_up_router({view:this.view}),this.view}},{key:"set_up_router",value:function(e){new m.a.TrackBrowserRouter(e),l.a.history.start()}},{key:"init_keyboard_nav",value:function(e){s()(document).keyup((function(t){if(!s()(t.srcElement).is(":input"))switch(t.which){case 37:e.move_fraction(.25);break;case 38:e.viewport_container.scrollTop(e.viewport_container.scrollTop()-20);break;case 39:e.move_fraction(-.25);break;case 40:e.viewport_container.scrollTop(e.viewport_container.scrollTop()+20)}}))}},{key:"handle_unsaved_changes",value:function(e){var t=this,n=Object(d.a)();e.has_changes?n.modal.show({title:h()("Close visualization"),body:"There are unsaved changes to your visualization which will be lost if you do not save them.",buttons:{Cancel:function(){n.modal.hide()},"Leave without Saving":function(){s()(window).off("beforeunload"),window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")},Save:function(){s.a.when(t.save_viz()).then((function(){window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")}))}}}):window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")}}]),t}(l.a.Model),S=function(e){function t(e){return y(this,t),k(this,M(t).call(this,e))}return x(t,e),w(t,[{key:"initialize",value:function(){var e=this;this.ui=new T(Object(c.getAppRoot)()),this.ui.createButtonMenu(),this.ui.buttonMenu.$el.attr("style","float: right"),s()("#center .unified-panel-header-inner").append(this.ui.buttonMenu.$el),s()("#right .unified-panel-title").append("Bookmarks"),s()("#right .unified-panel-icons").append("<a id='add-bookmark-button' class='icon-button menu-button plus-button' href='javascript:void(0);' title='Add bookmark'></a>"),s()("#right-border").click((function(){e.ui.view.resize_window()})),window.force_right_panel("hide"),window.galaxy_config.app.id?this.view_existing():_.a.get("dataset_id")?this.choose_existing_or_new():this.view_new()}},{key:"choose_existing_or_new",value:function(){var e=this,t=Object(d.a)(),n=_.a.get("dbkey"),a={dbkey:n,dataset_id:_.a.get("dataset_id"),hda_ldda:_.a.get("hda_ldda"),gene_region:_.a.get("gene_region")};t.modal.show({title:"View Data in a New or Saved Visualization?",body:"<p><ul style='list-style: disc inside none'>You can add this dataset as:<li>a new track to one of your existing, saved Trackster sessions if they share the genome build: <b>".concat(n||"Not available.","</b></li><li>or create a new session with this dataset as the only track</li></ul></p>"),buttons:{Cancel:function(){window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")},"View in saved visualization":function(){e.view_in_saved(a)},"View in new visualization":function(){e.view_new()}}})}},{key:"view_in_saved",value:function(e){var t=this,n=Object(d.a)(),a=new g.a({url_base:"".concat(Object(c.getAppRoot)(),"visualization/list_tracks"),embedded:!0});n.modal.show({title:h()("Add Data to Saved Visualization"),body:a.$el,buttons:{Cancel:function(){window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")},"Add to visualization":function(){s()(window.parent.document).find("input[name=id]:checked").each((function(){e.id=s()(t).val(),window.top.location="".concat(Object(c.getAppRoot)(),"visualization/trackster?").concat(s.a.param(e))}))}}})}},{key:"view_existing",value:function(){var e=window.galaxy_config.app.viz_config;this.ui.create_visualization({container:s()("#center .unified-panel-body"),name:e.title,vis_id:e.vis_id,dbkey:e.dbkey},e.viewport,e.tracks,e.bookmarks,!0),this.init_editor()}},{key:"view_new",value:function(){var e=this,t=Object(d.a)();s.a.ajax({url:"".concat(Object(c.getAppRoot)(),"api/genomes?chrom_info=True"),data:{},error:function(){alert("Couldn't create new browser.")},success:function(n){t.modal.show({title:h()("New Visualization"),body:e.template_view_new(n),buttons:{Cancel:function(){window.top.location="".concat(Object(c.getAppRoot)(),"visualizations/list")},Create:function(){e.create_browser(s()("#new-title").val(),s()("#new-dbkey").val()),t.modal.hide()}}});var a=n.map((function(e){return e[1]}));window.galaxy_config.app.default_dbkey&&i.a.contains(a,window.galaxy_config.app.default_dbkey)&&s()("#new-dbkey").val(window.galaxy_config.app.default_dbkey),s()("#new-title").focus(),s()("select[name='dbkey']").select2(),s()("#overlay").css("overflow","auto")}})}},{key:"template_view_new",value:function(e){for(var t='<form id="new-browser-form" action="javascript:void(0);" method="post" onsubmit="return false;"><div class="form-row"><label for="new-title">Browser name:</label><div class="form-row-input"><input type="text" name="title" id="new-title" value="Unnamed"></input></div><div style="clear: both;"></div></div><div class="form-row"><label for="new-dbkey">Reference genome build (dbkey): </label><div class="form-row-input"><select name="dbkey" id="new-dbkey">',n=0;n<e.length;n++)t+='<option value="'.concat(e[n][1],'">').concat(e[n][0],"</option>");return t+='</select></div><div style="clear: both;"></div></div><div class="form-row">Is the build not listed here? <a href="'.concat(Object(c.getAppRoot)(),'custom_builds" target="_top">Add a Custom Build</a></div></form>')}},{key:"init_editor",value:function(){var e=this;s()("#center .unified-panel-title").text("".concat(this.ui.view.config.get_value("name")," (").concat(this.ui.view.dbkey,")")),window.galaxy_config.app.add_dataset&&s.a.ajax({url:"".concat(Object(c.getAppRoot)(),"api/datasets/").concat(window.galaxy_config.app.add_dataset),data:{hda_ldda:"hda",data_type:"track_config"},dataType:"json",success:function(t){e.ui.view.add_drawable(p.a.object_from_template(t,e.ui.view,e.ui.view))}}),s()("#add-bookmark-button").click((function(){var t="".concat(e.ui.view.chrom,":").concat(e.ui.view.low,"-").concat(e.ui.view.high);return e.ui.add_bookmark(t,"Bookmark description",!0)})),this.ui.init_keyboard_nav(this.ui.view),s()(window).on("beforeunload",(function(){if(e.ui.view.has_changes)return"There are unsaved changes to your visualization that will be lost if you leave this page."}))}},{key:"create_browser",value:function(e,t){s()(document).trigger("convert_to_values"),this.ui.create_visualization({container:s()("#center .unified-panel-body"),name:e,dbkey:t},window.galaxy_config.app.gene_region),this.init_editor(),this.ui.view.editor=!0}}]),t}(l.a.View)},function(e,t,n){"use strict";var a=n(215),i=n.n(a),o=n(39),s={components:{VueTagsInput:i.a},props:{value:{type:Array,required:!1,default:function(){return[]}},autocompleteItems:{type:Array,required:!1,default:function(){return[]}},maxVisibleTags:{type:Number,required:!1,default:5},useToggleLink:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{tagText:"",tagToggle:!(this.useToggleLink&&this.value.length>this.maxVisibleTags),triggerKeys:[13," "]}},computed:{tagContainerClasses:function(){return{disabled:this.disabled}},tagModels:function(){return this.value.map(o.a)},autocompleteTags:function(){return this.autocompleteItems.map(o.a)},linkText:function(){return"".concat(this.tagModels.length," Tags")},linkVisible:function(){return this.useToggleLink&&this.tagModels.length>this.maxVisibleTags},tagsVisible:function(){return!this.useToggleLink||this.tagToggle}},watch:{tagText:function(e){this.$emit("tag-input-changed",e)}},methods:{tagsChanged:function(e){this.$emit("input",this.pluckLabels(e))},pluckLabels:function(e){return e.map((function(e){return Object(o.a)(e).toString()}))},toggleTagDisplay:function(){this.tagToggle=!this.tagToggle,this.$emit("show",this.tagToggle)},beforeAddingTag:function(e){if(!this.emitHookEvent("before-adding-tag",e)){var t=e.tag;(0,e.addTag)(t)}},beforeDeletingTag:function(e){if(!this.emitHookEvent("before-deleting-tag",e)){var t=e.tag;(0,e.deleteTag)(t)}},emitHookEvent:function(e,t){return!!this.hasHandler(e)&&(this.$emit(e,t),!0)},hasHandler:function(e){return Object.keys(this.$listeners).includes(e)}}},r=(n(242),n(6)),l=Object(r.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tags-display",class:e.tagContainerClasses},[e.linkVisible?n("a",{staticClass:"toggle-link",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleTagDisplay(t)}}},[e._v("\n        "+e._s(e.linkText)+"\n    ")]):e._e(),e._v(" "),e.tagsVisible?n("vue-tags-input",{staticClass:"tags-input tag-area",attrs:{tags:e.tagModels,"autocomplete-items":e.autocompleteTags,disabled:e.disabled,placeholder:"Add Tags","add-on-key":e.triggerKeys},on:{"before-adding-tag":e.beforeAddingTag,"before-deleting-tag":e.beforeDeletingTag,"tags-changed":e.tagsChanged},scopedSlots:e._u([{key:"tag-center",fn:function(t){return[n("div",{staticClass:"tag-name",on:{click:function(n){return e.$emit("tag-click",t.tag)}}},[e._v(e._s(t.tag.label))])]}}],null,!1,4090180873),model:{value:e.tagText,callback:function(t){e.tagText=t},expression:"tagText"}}):e._e()],1)}),[],!1,null,null,null);t.a=l.exports},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(140),u=n(65),h=n(51),p=n(7),m=p.a.SessionStorageModel.extend({defaults:{expandedIds:{},show_deleted:!1,show_hidden:!1},addExpanded:function(e){var t=this.get("expandedIds");t[e.id]=e.get("id"),this.save("expandedIds",t)},removeExpanded:function(e){var t=this.get("expandedIds");delete t[e.id],this.save("expandedIds",t)},isExpanded:function(e){return i.a.result(this.get("expandedIds"),e,!1)},allExpanded:function(){return i.a.values(this.get("expandedIds"))},clearExpanded:function(){this.set("expandedIds",{})},includeDeleted:function(e){return i.a.isUndefined(e)||this.set("show_deleted",e),this.get("show_deleted")},includeHidden:function(e){return i.a.isUndefined(e)||this.set("show_hidden",e),this.get("show_hidden")},toString:function(){return"HistoryPrefs(".concat(this.id,")")}},{storageKeyPrefix:"history:",historyStorageKey:function(e){if(!e)throw new Error("HistoryPrefs.historyStorageKey needs valid id: ".concat(e));return m.storageKeyPrefix+e},get:function(e){return new m({id:m.historyStorageKey(e)})},clearAll:function(e){for(var t in sessionStorage)0===t.indexOf(m.storageKeyPrefix)&&sessionStorage.removeItem(t)}}),f={HistoryPrefs:m},_=n(70),g=n(67);n.d(t,"a",(function(){return b}));var v=window.localStorage.getItem("historyContentsLimitPerPageDefault")||500,y=d.a.PaginatedCollection,b=y.extend(p.a.LoggableMixin).extend({_logNamespace:"history",limitPerPage:v,limitPerProgressiveFetch:v,order:"hid",url:function(){return"".concat(this.urlRoot,"/").concat(this.historyId,"/contents")},initialize:function(e,t){this.on({"sync add":this.trackJobStates}),t=t||{},this.urlRoot="".concat(Object(c.getAppRoot)(),"api/histories"),y.prototype.initialize.call(this,e,t),this.history=t.history||null,this.setHistoryId(t.historyId||null),this.includeDeleted=t.includeDeleted||this.includeDeleted,this.includeHidden=t.includeHidden||this.includeHidden,this.model.prototype.idAttribute="type_id"},trackJobStates:function(){var e=this;this.each((function(t){e.jobStateSummariesCollection&&e.jobStateSummariesCollection.trackModel(t)}))},model:function(e,t){return"dataset"===e.history_content_type?new u.a.HistoryDatasetAssociation(e,t):"dataset_collection"===e.history_content_type?new h.a.HistoryDatasetCollection(e,t):{validationError:"Unknown history_content_type: ".concat(e.history_content_type)}},stopPolling:function(){this.jobStateSummariesCollection&&(this.jobStateSummariesCollection.active=!1,this.jobStateSummariesCollection.clearUpdateTimeout())},setHistoryId:function(e){this.stopPolling(),this.historyId=e,e&&(this._setUpWebStorage(),this.jobStateSummariesCollection=new _.a.JobStatesSummaryCollection,this.jobStateSummariesCollection.historyId=e,this.jobStateSummariesCollection.monitor())},_setUpWebStorage:function(e){return this.storage=new f.HistoryPrefs({id:f.HistoryPrefs.historyStorageKey(this.historyId)}),this.trigger("new-storage",this.storage,this),this.on({"include-deleted":function(e){this.storage.includeDeleted(e)},"include-hidden":function(e){this.storage.includeHidden(e)}}),this.includeDeleted=this.storage.includeDeleted()||!1,this.includeHidden=this.storage.includeHidden()||!1,this},comparators:i.a.extend(i.a.clone(y.prototype.comparators),{name:p.a.buildComparator("name",{ascending:!0}),"name-dsc":p.a.buildComparator("name",{ascending:!1}),hid:p.a.buildComparator("hid",{ascending:!1}),"hid-asc":p.a.buildComparator("hid",{ascending:!0})}),running:function(){return this.filter((function(e){return!e.inReadyState()}))},runningAndActive:function(){return this.filter((function(e){return!e.inReadyState()&&e.get("visible")&&!e.get("deleted")}))},getByHid:function(e){return this.findWhere({hid:e})},haveDetails:function(){return this.all((function(e){return e.hasDetails()}))},hidden:function(){return this.filter((function(e){return e.hidden()}))},deleted:function(){return this.filter((function(e){return e.get("deleted")}))},visibleAndUndeleted:function(){return this.filter((function(e){return e.get("visible")&&!e.get("deleted")}))},setIncludeDeleted:function(e,t){if(i.a.isBoolean(e)&&e!==this.includeDeleted){if(this.includeDeleted=e,i.a.result(t,"silent"))return;this.trigger("include-deleted",e,this)}},setIncludeHidden:function(e,t){if(i.a.isBoolean(e)&&e!==this.includeHidden){if(this.includeHidden=e,t=t||{},i.a.result(t,"silent"))return;this.trigger("include-hidden",e,this)}},fetch:function(e){if(e=e||{},this.historyId&&!e.details){var t=f.HistoryPrefs.get(this.historyId).toJSON();i.a.isEmpty(t.expandedIds)||(e.details=i.a.values(t.expandedIds).join(","))}return y.prototype.fetch.call(this,e)},_buildFetchData:function(e){return i.a.extend(y.prototype._buildFetchData.call(this,e),{v:"dev"})},_fetchParams:y.prototype._fetchParams.concat(["v","details"]),_buildFetchFilters:function(e){var t=y.prototype._buildFetchFilters.call(this,e)||{},n={};return this.includeDeleted||(n.deleted=!1,n.purged=!1),this.includeHidden||(n.visible=!0),i.a.defaults(t,n)},getTotalItemCount:function(){return this.history.contentsShown()},fetchUpdated:function(e,t){return e&&((t=t||{filters:{}}).remove=!1,t.filters={"update_time-ge":e.toISOString(),visible:""}),this.fetch(t)},fetchDeleted:function(e){var t=this;return(e=e||{}).filters=i.a.extend(e.filters,{deleted:!0,purged:void 0}),e.remove=!1,this.trigger("fetching-deleted",this),this.fetch(e).always((function(){t.trigger("fetching-deleted-done",t)}))},fetchHidden:function(e){var t=this;return(e=e||{}).filters=i.a.extend(e.filters,{visible:!1}),e.remove=!1,this.trigger("fetching-hidden",this),this.fetch(e).always((function(){t.trigger("fetching-hidden-done",t)}))},fetchAllDetails:function(e){return(e=e||{}).data=i.a.extend(e.data||{},{details:"all"}),this.fetch(e)},_filterAndUpdate:function(e,t){var n=this,a=this.model.prototype.idAttribute,i=[t];return this.fetch({filters:e,remove:!1}).then((function(e){return e=e.reduce((function(e,t,i){var o=n.get(t[a]);return o?e.concat(o):e}),[]),n.ajaxQueue("save",i,e)}))},ajaxQueue:function(e,t,n){return n=n||this.models,new g.a.AjaxQueue(n.slice().reverse().map((function(n,a){var o=i.a.isString(e)?n[e]:e;return function(){return o.apply(n,t)}}))).deferred},_recursivelyFetch:function(e,t,n,a,o){var s=this;o=o||0;var r=i.a.extend(i.a.clone(e),{view:"summary",keys:t,limit:a,offset:o,reset:0===o,remove:!1});i.a.defer((function(){s.fetch.call(s,r).fail(n.reject).done((function(i){n.notify(i,a,o),i.length!==a?(s.allFetched=!0,n.resolve(i,a,o)):s._recursivelyFetch(e,t,n,a,o+a)}))}))},progressivelyFetchDetails:function(e){e=e||{};var t=s.a.Deferred();return this._recursivelyFetch(e,u.a.HistoryDatasetAssociation.prototype.searchAttributes.join(","),t,e.limitPerCall||this.limitPerProgressiveFetch),t},isCopyable:function(e){return i.a.isObject(e)&&e.id&&i.a.contains(["HistoryDatasetAssociation","HistoryDatasetCollectionAssociation"],e.model_class)},copy:function(e){var t,n,a;i.a.isString(e)?(t=e,a="hda",n="dataset"):(t=e.id,a={HistoryDatasetAssociation:"hda",LibraryDatasetDatasetAssociation:"ldda",HistoryDatasetCollectionAssociation:"hdca"}[e.model_class]||"hda",n="hdca"===a?"dataset_collection":"dataset");var o=this,r=s.a.ajax(this.url(),{method:"POST",contentType:"application/json",data:JSON.stringify({content:t,source:a,type:n,copy_elements:!0})}).done((function(e){o.add([e],{parse:!0})})).fail((function(e,i,s){o.trigger("error",o,r,{},"Error copying contents",{type:n,id:t,source:a})}));return r},createHDCA:function(e,t,n,a,i,o){return void 0===i&&(i=!0),this.model({history_content_type:"dataset_collection",collection_type:t,history_id:this.historyId,name:n,hide_source_items:a||!1,copy_elements:i,element_identifiers:e}).save(o)},haveSearchDetails:function(){return this.allFetched&&this.all((function(e){return i.a.has(e.attributes,"annotation")}))},matches:function(e){return this.filter((function(t){return t.matches(e)}))},clone:function(){var e=l.a.Collection.prototype.clone.call(this);return e.historyId=this.historyId,e},toString:function(){return["HistoryContents(",[this.historyId,this.length].join(),")"].join("")}})},function(e,t,n){"use strict";var a=["log","debug","info","warn","error","metric"];t.a=function(e,t){var n=void 0!==e.prototype?e.prototype:e;return void 0!==t&&(n._logNamespace=t),a.forEach((function(e){n[e]=function(){if(this.logger)return this.logger.emit?this.logger.emit(e,this._logNamespace,arguments):this.logger[e]?this.logger[e].apply(this.logger,arguments):void 0}})),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),i=n.n(a);function o(){console.log("init_refresh_on_change"),i()("select[refresh_on_change='true']").off("change").change((function(){var e=i()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var a=e.attr("last_selected_value");if(-1===i.a.inArray(t,n)&&-1===i.a.inArray(a,n))return}i()(window).trigger("refresh_on_change"),i()(document).trigger("convert_to_values"),e.get(0).form.submit()})),i()(":checkbox[refresh_on_change='true']").off("click").click((function(){var e=i()(this),t=e.val(),n=e.attr("refresh_on_change_values");if(n){n=n.split(",");var a=e.attr("last_selected_value");if(-1===i.a.inArray(t,n)&&-1===i.a.inArray(a,n))return}i()(window).trigger("refresh_on_change"),e.get(0).form.submit()})),i()("a[confirm]").off("click").click((function(){return confirm(i()(this).attr("confirm"))}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(4);function i(e){window.location=e}var o=/(\/)+/g;function s(e){var t=Object(a.getAppRoot)();return"".concat(t,"/").concat(e).replace(o,"/")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){var t=Object(a.b)(e),n=Math.abs((t>>4)%360),o=75+(15&t),s="hsl(".concat(n,", 100%, ").concat(o,"%)"),r="hsl(".concat(n,", 100%, ").concat(o-40,"%)"),l=i(function(e,t,n){var a,i,o;if(0==t)a=i=o=n;else{var s=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;a=s(l,r,e+1/3),i=s(l,r,e),o=s(l,r,e-1/3)}return[a,i,o]}(n,1,o/100),3);return{primary:s,darker:r,contrasting:function(e,t,n){return(255*e*299+255*t*587+255*n*114)/1e3>125?"black":"white"}(l[0],l[1],l[2])}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(8),l=n(16),c=s.a.View.extend({visible:!1,initialize:function(e){var t=this;this.model=e&&e.model||new s.a.Model({id:r.a.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,operations:null,collapsible:!1,collapsible_button:!0,collapsed:!1,onchange_title:null}).set(e),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title=this.$(".portlet-title"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new l.a.Button({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){t[t.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var e=this,t=this.model.attributes;return this.$el.removeClass().addClass(t.cls).attr("id",t.id),this.$header[t.title?"show":"hide"](),this.$title_text.html(t.title),t.title_id&&this.$title.attr("id",t.title_id),t.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa mr-1").addClass(t.icon).show():this.$title_icon.hide(),this.$title_text[t.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),t.collapsible&&(this.$title_text.on("click",(function(){e[e.collapsed?"expand":"collapse"]()})),t.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!t.onchange_title),t.onchange_title&&this.$title_text.make_text_editable({on_finish:function(e){t.onchange_title(e)}}),t.buttons?(this.$buttons.empty().show(),i.a.each(this.model.get("buttons"),(function(t,n){n.$el.prop("id",t),e.$buttons.append(n.$el)}))):this.$buttons.hide(),this.$operations.empty,t.collapsible&&t.collapsible_button&&this.$operations.append(this.collapsible_button.$el),t.operations&&i.a.each(t.operations,(function(t,n){n.$el.prop("id",t),e.$operations.append(n.$el)})),this},append:function(e){this.$body.append(e)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(e){this.$buttons.find("#".concat(e)).prop("disabled",!1)},disableButton:function(e){this.$buttons.find("#".concat(e)).prop("disabled",!0)},hideOperation:function(e){this.$operations.find("#".concat(e)).hide()},showOperation:function(e){this.$operations.find("#".concat(e)).show()},setOperation:function(e,t){this.$operations.find("#".concat(e)).off("click").on("click",t)},title:function(e){return e&&this.$title_text.html(e),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.show(),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return i()("<div/>").append(i()("<div/>").addClass("portlet-header").append(i()("<div/>").addClass("portlet-operations")).append(i()("<div/>").addClass("portlet-title").append(i()("<i/>").addClass("portlet-title-icon")).append(i()("<span/>").addClass("portlet-title-text")))).append(i()("<div/>").addClass("portlet-content").append(i()("<div/>").addClass("portlet-body")).append(i()("<div/>").addClass("portlet-buttons mt-3 mb-3"))).append(i()("<div/>").addClass("portlet-backdrop"))}});t.a={View:c}},function(e,t,n){"use strict";var a,i=n(1),o=n.n(i),s=n(17),r=n(53),l=n(71),c=n(2),d=n.n(c),u=n(63),h=n(155),p=n(159),m={props:{collection:{type:Object,required:!0},jobStatesSummary:{required:!0}},components:{ProgressBar:p.a},mixins:[h.a],computed:{loadingNote:function(){return"Loading job data for ".concat(this.collectionTypeDescription,"}")},generatingNote:function(){return"".concat(this.jobsStr," generating a ").concat(this.collectionTypeDescription)},jobSourceType:function(){return this.collection.get("job_source_type")},collectionTypeDescription:function(){return l.a.collectionTypeDescription(this.collection)},simpleDescription:function(){return l.a.collectionDescription(this.collection)},errorDescription:function(){var e=this.jobCount,t=this.jobStatesSummary.numInError();return"a ".concat(this.collectionTypeDescription," with ").concat(t," / ").concat(e," jobs in error")}}},f=n(6),_=Object(f.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.jobSourceType||"Job"==e.jobSourceType||e.isTerminal?n("div",[e._v("\n    "+e._s(e.simpleDescription)+"\n")]):e.jobStatesSummary&&e.jobStatesSummary.hasDetails()?e.isNew?n("div",[n("progress-bar",{attrs:{note:"Creating jobs",loading:!0,"info-progress":1}})],1):e.isErrored?n("div",[e._v("\n    "+e._s(e.errorDescription)+"\n")]):n("div",[n("progress-bar",{attrs:{note:e.generatingNote,"ok-progress":e.okPercent,"running-progress":e.runningPercent,"new-progress":e.otherPercent}})],1):n("div",[n("progress-bar",{attrs:{note:e.loadingNote,loading:!0,"info-progress":1}})],1)}),[],!1,null,null,null).exports,g=n(43),v=Object(g.a)(_),y=r.a.DCListItemView,b=y.extend({className:"".concat(y.prototype.className," history-content"),render:function(){var e=y.prototype.render.apply(this,arguments);return this._mountNametags("initialize"),e},_setUpListeners:function(){var e=this;y.prototype._setUpListeners.call(this);var t=function(t,n){e.render(0),e._mountNametags("listener")};this.model.jobStatesSummary&&this.listenTo(this.model.jobStatesSummary,"change",t),this.listenTo(this.model,{"change:tags change:visible change:state":t})},_mountNametags:function(e){var t=this.$el.find(".nametags")[0];if(t){var n=this.model.attributes,a=n.id,i=n.model_class,o=n.tags,s="".concat(i,"-").concat(a);Object(u.a)({storeKey:s,tags:o},t)}},_getFoldoutPanelClass:function(){return l.a.CollectionView},_swapNewRender:function(e){var t;y.prototype._swapNewRender.call(this,e);var n=this.model.jobStatesSummary;t=n?n.new()?"loading":n.errored()?"error":n.terminal()?"ok":n.running()?"running":"queued":this.model.get("job_source_id")?"loading":this.model.get("populated_state")?s.a.OK:s.a.RUNNING,this.$el.addClass("state-".concat(t));var a=this.model,i=this.$el.find(".state-description")[0];return v({jobStatesSummary:n,collection:a},i),this.$el},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDCAListItemView(".concat(e,")")}});b.prototype.templates=(a=o.a.extend({},y.prototype.templates.warnings,{hidden:function(e){!e.visible&&'<div class="hidden-msg warningmessagesmall">'.concat(d()("This collection has been hidden"),"</div>")}}),o.a.extend({},y.prototype.templates,{warnings:a,titleBar:function(e){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(e.hid,'</span>\n                <span class="name">').concat(o.a.escape(e.name),'</span>\n            </div>\n            <div class="state-description">\n            </div>\n            <div class="nametags">\x3c!-- Nametags mount here (hdca-li) --\x3e</div>\n        </div>\n    ')}}));t.a={HDCAListItemView:b}},function(e,t,n){"use strict";var a=n(11),i=n(47),o=n(82),s={state:{searchTags:new Set},mutations:{setSearchTags:function(e,t){e.searchTags=new Set(t)}},actions:{toggleSearchTag:function(e,t){var n=e.state,a=e.commit,i=t.text,o=new Set(n.searchTags);o.has(i)?o.delete(i):o.add(i),a("setSearchTags",o)},removeSearchTag:function(e,t){var n=e.state,a=e.commit,i=t.text,o=new Set(n.searchTags);o.delete(i),a("setSearchTags",o)},clearSearchTags:function(e){e.state;(0,e.commit)("setSearchTags",new Set)}}},r={state:{userTagList:[],modelTagCache:new Map},getters:{getTagsById:function(e){return function(t){if(e.modelTagCache.has(t)){var n=e.modelTagCache.get(t);return Array.from(n)}return[]}}},actions:{updateTags:function(e,t){(0,e.commit)("setTags",{key:t.key,tags:t.tags})},initializeTags:function(e,t){var n=e.dispatch,a=e.state,i=t.key,o=t.tags;a.modelTagCache.has(i)||n("updateTags",{key:i,tags:o})}},mutations:{setTags:function(e,t){var n=t.key,a=t.tags;e.modelTagCache=new Map(e.modelTagCache),e.modelTagCache.set(n,new Set(a))},reset:function(e){e.userTagList=[],e.modelTagCache=new Map}}},l=n(4),c=n(10),d=n.n(c);function u(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){u(o,a,i,s,r,"next",e)}function r(e){u(o,a,i,s,r,"throw",e)}s(void 0)}))}}var p,m,f={state:{jobMetricsByHdaId:{},jobMetricsByLddaId:{},jobMetricsByJobId:{}},getters:{getJobMetricsByDatasetId:function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hda",a="hda"==n?e.jobMetricsByHdaId:e.jobMetricsByLddaId;return a[t]||[]}},getJobMetricsByJobId:function(e){return function(t){return e.jobMetricsByJobId[t]||[]}}},actions:{fetchJobMetricsForDatasetId:(m=h(regeneratorRuntime.mark((function e(t,n){var a,i,o,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,i=n.datasetId,o=n.datasetType,e.next=4,d.a.get("".concat(Object(l.getAppRoot)(),"api/datasets/").concat(i,"/metrics?hda_ldda=").concat(o));case 4:s=e.sent,r=s.data,a("saveJobMetricsForDatasetId",{datasetId:i,datasetType:o,jobMetrics:r});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),fetchJobMetricsForJobId:(p=h(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,d.a.get("".concat(Object(l.getAppRoot)(),"api/jobs/").concat(n,"/metrics"));case 3:i=e.sent,o=i.data,a("saveJobMetricsForJobId",{jobId:n,jobMetrics:o});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},mutations:{saveJobMetricsForDatasetId:function(e,t){var n=t.datasetId,i=t.datasetType,o=t.jobMetrics,s="hda"==i?e.jobMetricsByHdaId:e.jobMetricsByLddaId;a.default.set(s,n,o)},saveJobMetricsForJobId:function(e,t){var n=t.jobId,i=t.jobMetrics;a.default.set(e.jobMetricsByJobId,n,i)}}};function _(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}var g,v,y={state:{jobDestinationParametersByJobId:{}},getters:{jobDestinationParams:function(e){return function(t){return e.jobDestinationParametersByJobId[t]||[]}}},actions:{fetchJobDestinationParams:(g=regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,d.a.get("".concat(Object(l.getAppRoot)(),"api/jobs/").concat(n,"/destination_params"));case 3:i=e.sent,o=i.data,a("saveJobDestinationParamsForJobId",{jobId:n,jobDestinationParams:o});case 6:case"end":return e.stop()}}),e)})),v=function(){var e=this,t=arguments;return new Promise((function(n,a){var i=g.apply(e,t);function o(e){_(i,n,a,o,s,"next",e)}function s(e){_(i,n,a,o,s,"throw",e)}o(void 0)}))},function(e,t){return v.apply(this,arguments)})},mutations:{saveJobDestinationParamsForJobId:function(e,t){var n=t.jobId,i=t.jobDestinationParams;a.default.set(e.jobDestinationParametersByJobId,n,i)}}};function b(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){b(o,a,i,s,r,"next",e)}function r(e){b(o,a,i,s,r,"throw",e)}s(void 0)}))}}var k,M,x={state:{invocationDetailsById:{},invocationJobsSummaryById:{}},getters:{getInvocationById:function(e){return function(t){return e.invocationDetailsById[t]}},getInvocationJobsSummaryById:function(e){return function(t){return e.invocationJobsSummaryById[t]}}},actions:{fetchInvocationForId:(M=w(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,d.a.get("".concat(Object(l.getAppRoot)(),"api/invocations/").concat(n));case 3:i=e.sent,o=i.data,a("saveInvocationForId",{invocationId:n,invocationData:o});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)}),fetchInvocationJobsSummaryForId:(k=w(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,d.a.get("".concat(Object(l.getAppRoot)(),"api/invocations/").concat(n,"/jobs_summary"));case 3:i=e.sent,o=i.data,a("saveInvocationJobsSummaryForId",{invocationId:n,jobsSummary:o});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return k.apply(this,arguments)})},mutations:{saveInvocationForId:function(e,t){var n=t.invocationId,i=t.invocationData;a.default.set(e.invocationDetailsById,n,i)},saveInvocationJobsSummaryForId:function(e,t){var n=t.invocationId,i=t.jobsSummary;a.default.set(e.invocationJobsSummaryById,n,i)}}};function L(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){L(o,a,i,s,r,"next",e)}function r(e){L(o,a,i,s,r,"throw",e)}s(void 0)}))}}var S,D,C={state:{historyDetailsById:{},historyById:{}},getters:{getHistoryById:function(e){return function(t){return e.historyById[t]}},getHistoryNameById:function(e){return function(t){var n=e.historyDetailsById[t];return n&&n.name?n.name:"Unavailable"}}},actions:{fetchHistories:(D=T(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,d.a.get("".concat(Object(l.getAppRoot)(),"api/histories"));case 3:a=e.sent,i=a.data,n("saveHistories",{histories:i});case 6:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),fetchHistoryForId:(S=T(regeneratorRuntime.mark((function e(t,n){var a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,i={},e.next=4,d.a.get("".concat(Object(l.getAppRoot)(),"api/histories/").concat(n),{params:i});case 4:o=e.sent,s=o.data,a("saveHistoryForId",{historyId:n,historyData:s});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)})},mutations:{saveHistories:function(e,t){var n=t.histories,a={};n.forEach((function(e){a[e.id]=e})),e.historyDetailsById=a},saveHistoryForId:function(e,t){var n=t.historyId,i=t.historyData;a.default.set(e.historyById,n,i)}}},j=n(88);function Y(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function O(){return A.apply(this,arguments)}function A(){return(A=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){Y(o,a,i,s,r,"next",e)}function r(e){Y(o,a,i,s,r,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(j.a)("/api/users/current"),e.next=3,d.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t)}var t,n,a;return t=e,(n=[{key:"isAnonymous",get:function(){return!this.email}}])&&I(t.prototype,n),a&&I(t,a),e}();function H(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){H(o,a,i,s,r,"next",e)}function r(e){H(o,a,i,s,r,"throw",e)}s(void 0)}))}}var P={namespaced:!0,state:{currentUser:null},getters:{currentUser:function(e){var t=e.currentUser;if(!t)try{t=window.Galaxy.user}catch(e){console.warn(e)}return new E(t)}},mutations:{setCurrentUser:function(e,t){e.currentUser=t}},actions:{loadUser:function(e){var t=e.commit;e.dispatch;return $(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,t("setCurrentUser",n);case 4:case"end":return e.stop()}}),e)})))()},$init:function(e){var t=e.dispatch;return $(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("loadUser");case 2:case"end":return e.stop()}}),e)})))()}}};function R(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function N(){return z.apply(this,arguments)}function z(){return(z=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){R(o,a,i,s,r,"next",e)}function r(e){R(o,a,i,s,r,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(j.a)("/api/configuration"),e.next=3,d.a.get(t);case 3:if(200==(n=e.sent).status){e.next=6;break}throw new Error(n);case 6:return e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){F(o,a,i,s,r,"next",e)}function r(e){F(o,a,i,s,r,"throw",e)}s(void 0)}))}}var U={},W={namespaced:!0,state:{config:Object.assign({},U)},mutations:{setConfigs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.config=Object.assign({},U,e.config,t)}},actions:{loadConfigs:function(e){var t=e.commit;return V(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:n=e.sent,t("setConfigs",n);case 4:case"end":return e.stop()}}),e)})))()},$init:function(e){var t=e.dispatch;return V(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("loadConfigs");case 2:case"end":return e.stop()}}),e)})))()}}};function B(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}var q,J={state:{workflowsByInstanceId:{}},getters:{getWorkflowByInstanceId:function(e){return function(t){return e.workflowsByInstanceId[t]}}},actions:{fetchWorkflowForInstanceId:(q=function(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){B(o,a,i,s,r,"next",e)}function r(e){B(o,a,i,s,r,"throw",e)}s(void 0)}))}}(regeneratorRuntime.mark((function e(t,n){var a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.commit,i={instance:"true"},e.next=4,d.a.get("".concat(Object(l.getAppRoot)(),"api/workflows/").concat(n),{params:i});case 4:o=e.sent,s=o.data,a("saveWorkflowForInstanceId",{workflowId:n,workflowData:s});case 7:case"end":return e.stop()}}),e)}))),function(e,t){return q.apply(this,arguments)})},mutations:{saveWorkflowForInstanceId:function(e,t){var n=t.workflowId,i=t.workflowData;a.default.set(e.workflowsByInstanceId,n,i)}}};a.default.use(i.a);var G=new i.a.Store({plugins:[Object(o.a)(),function(e){e.dispatch("user/$init",{store:e}),e.dispatch("config/$init",{store:e})}],modules:{gridSearch:s,histories:C,tags:r,jobMetrics:f,destinationParameters:y,invocations:x,user:P,config:W,workflows:J}});t.a=G},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o={_validationWarning:function(e,t){"name"===e&&(e=this.$(".collection-name").add(this.$(".collection-name-prompt")),this.$(".collection-name").focus().select()),t?(e=e||this.$(".".concat("validation-warning"))).removeClass("validation-warning"):e.addClass("validation-warning")},_changeHideOriginals:function(e){this.hideOriginals=this.$(".hide-originals").prop("checked")},_changeName:function(e){this._validationWarning("name",!!this._getName())},_nameCheckForEnter:function(e){13!==e.keyCode||this.blocking||this._clickCreate()},_getName:function(){return i.a.escape(this.$(".collection-name").val())},_clickMoreHelp:function(e){e.stopPropagation(),this.$(".main-help").addClass("expanded"),this.$(".more-help").hide()},_clickLessHelp:function(e){e.stopPropagation(),this.$(".main-help").removeClass("expanded"),this.$(".more-help").show()},_toggleHelp:function(e){e.stopPropagation(),this.$(".main-help").toggleClass("expanded"),this.$(".more-help").toggle()},_showAlert:function(e,t){t=t||"alert-danger",this.$(".main-help").hide(),this.$(".header .alert").attr("class","alert alert-dismissable").addClass(t).show().find(".alert-message").html(e)},_hideAlert:function(e){this.$(".main-help").show(),this.$(".header .alert").hide()},_cancelCreate:function(e){"function"==typeof this.oncancel&&this.oncancel.call(this)},_clickCreate:function(e){var t=this._getName();t?this.blocking||this.createList(t):this._validationWarning("name")},_setUpCommonSettings:function(e){this.hideOriginals=e.defaultHideSourceItems||!1},_renderFooter:function(e,t){var n=this,a=this.$(".footer").empty().html(this.templates.footer());return i.a.each(this.footerSettings,(function(e,t){n.$(t).prop("checked",n[e])})),"function"==typeof this.oncancel&&this.$(".cancel-create.btn").show(),a},_creatorTemplates:{main:i.a.template(['<div class="header flex-row no-flex"></div>','<div class="middle flex-row flex-row-container"></div>','<div class="footer flex-row no-flex"></div>'].join(""))}};t.a={CollectionCreatorMixin:o}},function(e,t,n){"use strict";var a,i=n(1),o=n.n(i),s=n(0),r=n.n(s),l=n(4),c=n(5),d=n(17),u=n(58),h=n(62),p=n(143),m=n(31),f=n(7),_=n(2),g=n.n(_),v=u.b.DatasetListItemView,y=v.extend({initialize:function(e){v.prototype.initialize.call(this,e),this.hasUser=e.hasUser,this.purgeAllowed=e.purgeAllowed||!1,this.tagsEditorShown=e.tagsEditorShown||!1,this.annotationEditorShown=e.annotationEditorShown||!1},_renderPrimaryActions:function(){var e=v.prototype._renderPrimaryActions.call(this);return this.model.get("state")===d.a.NOT_VIEWABLE?e:v.prototype._renderPrimaryActions.call(this).concat([this._renderEditButton(),this._renderDeleteButton()])},_renderEditButton:function(){var e=this;if(this.model.get("state")===d.a.DISCARDED||!this.model.get("accessible"))return null;var t=this.model.get("purged"),n=this.model.get("deleted"),a={title:g()("Edit attributes"),href:"".concat(Object(l.getAppRoot)(),"datasets/edit?dataset_id=").concat(this.model.attributes.id),faIcon:"fa-pencil",classes:"edit-btn",onclick:function(t){var n=Object(c.a)();n.router&&(t.preventDefault(),n.router.push("datasets/edit",{dataset_id:e.model.attributes.id}))}};return n||t?(a.disabled=!0,t?a.title=g()("Cannot edit attributes of datasets removed from disk"):n&&(a.title=g()("Undelete dataset to edit attributes"))):[d.a.UPLOAD,d.a.NEW].includes(this.model.get("state"))&&(a.disabled=!0,a.title=g()("This dataset is not yet editable")),Object(m.a)(a)},_renderDeleteButton:function(){if(!this.model.get("accessible"))return null;var e=this,t=this.model.isDeletedOrPurged();return Object(m.a)({title:t?g()("Dataset is already deleted"):g()("Delete"),disabled:t,faIcon:"fa-times",classes:"delete-btn",onclick:function(){e.$el.find(".icon-btn.delete-btn").tooltip("dispose"),e.model.delete()}})},_renderDetails:function(){var e=v.prototype._renderDetails.call(this),t=this.model.get("state");return this.model.isDeletedOrPurged()||(this._renderTags(e),this._renderAnnotation(e),[d.a.OK,d.a.FAILED_METADATA].includes(t)&&this._makeDbkeyEditLink(e)),this._setUpBehaviors(e),e},_renderToolHelpButton:function(){var e=this.model.attributes.dataset_id,t=this.model.attributes.creating_job,n=this,a=function(t){var a='<div id="thdiv-'.concat(e,'" class="toolhelp">');t.name&&t.help?(a+="<strong>Tool help for ".concat(t.name,"</strong><hr/>"),a+=t.help):a+="<strong>Tool help is unavailable for this dataset.</strong><hr/>",a+="</div>",n.$el.find(".details").append(r.a.parseHTML(a))};return null===Object(c.a)().user.id?null:Object(m.a)({title:g()("Tool Help"),classes:"icon-btn",href:"#",faIcon:"fa-question",onclick:function(){n.$el.find(".toolhelp").length>0?n.$el.find(".toolhelp").toggle():r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/jobs/").concat(t)}).done((function(e){!function(e){r.a.ajax({url:"".concat(Object(l.getAppRoot)(),"api/tools/").concat(e.tool_id,"/build")}).done((function(e){a(e)})).fail((function(){a({})}))}(e)})).fail((function(){console.log('Failed at recovering job information from the  Galaxy API for job id "'.concat(t,'".'))}))}})},_renderSecondaryActions:function(){var e=v.prototype._renderSecondaryActions.call(this);switch(this.model.get("state")){case d.a.UPLOAD:case d.a.NOT_VIEWABLE:return e;case d.a.ERROR:return e.unshift(this._renderErrButton()),e.concat([this._renderRerunButton(),this._renderToolHelpButton()]);case d.a.OK:case d.a.FAILED_METADATA:return e.concat([this._renderRerunButton(),this._renderVisualizationsButton(),this._renderToolHelpButton()])}return e.concat([this._renderRerunButton(),this._renderToolHelpButton()])},_renderErrButton:function(){var e=this;return Object(m.a)({title:g()("View or report this error"),href:"".concat(Object(l.getAppRoot)(),"datasets/error?dataset_id=").concat(this.model.attributes.id),classes:"report-error-btn",faIcon:"fa-bug",onclick:function(t){var n=Object(c.a)();n.router&&(t.preventDefault(),n.router.push("datasets/error",{dataset_id:e.model.attributes.id}))}})},_renderRerunButton:function(){var e=this.model.get("creating_job");if(this.model.get("rerunnable"))return Object(m.a)({title:g()("Run this job again"),href:this.model.urls.rerun,classes:"rerun-btn",target:this.linkTarget,faIcon:"fa-refresh",onclick:function(t){var n=Object(c.a)();n.router&&(t.preventDefault(),n.router.push("/",{job_id:e}))}})},_renderVisualizationsButton:function(){var e=Object(c.a)(),t=this.model.get("visualizations");if(!e.config.visualizations_visible||this.model.isDeletedOrPurged()||!this.hasUser||!this.model.hasData()||o.a.isEmpty(t))return null;if(!o.a.isObject(t[0]))return this.warn("Visualizations have been switched off"),null;if(t.length>=1){var n=this.model.get("id"),a=Object(l.getAppRoot)()+"visualizations?dataset_id="+n;return Object(m.a)({title:g()("Visualize this data"),href:a,classes:"visualization-link",faIcon:"fa-bar-chart-o",onclick:function(t){e.frame&&e.frame.active?(t.preventDefault(),e.frame.add({url:a,title:"Visualization"})):e.router&&(t.preventDefault(),e.router.push("visualizations",{dataset_id:n}),e.trigger("activate-hda",n))}})}},_renderTags:function(e){var t=this;if(this.hasUser){var n=e.find(".tags-display")[0],a={model:this.model,disabled:!1,context:"dataset-li-edit"},i=Object(h.b)(a,n),o=function(){r()(i.$el).toggleClass("active"),t.tagsEditorShown=r()(i.$el).hasClass("active")};if(Object(m.a)({title:g()("Edit dataset tags"),classes:"tag-btn",faIcon:"fa-tags"}).appendTo(e.find(".actions .right")).on("click",o),this.tagsEditorShown)r()(i.$el).hasClass("active")||o();return i}},_renderAnnotation:function(e){if(this.hasUser){var t=this;this.annotationEditor=new p.a.AnnotationEditor({model:this.model,el:e.find(".annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){t.annotationEditorShown=!0},onhide:function(){t.annotationEditorShown=!1},$activator:Object(m.a)({title:g()("Edit dataset annotation"),classes:"annotate-btn",faIcon:"fa-comment"}).appendTo(e.find(".actions .right"))}),this.annotationEditorShown&&this.annotationEditor.toggle(!0)}},_makeDbkeyEditLink:function(e){if("?"===this.model.get("metadata_dbkey")&&!this.model.isDeletedOrPurged()){var t=r()('<a class="value">?</a>').attr("href",this.model.urls.edit).attr("target","_top");e.find(".dbkey .value").replaceWith(t)}},events:o.a.extend(o.a.clone(v.prototype.events),{"click .undelete-link":"_clickUndeleteLink","click .purge-link":"_clickPurgeLink","click .edit-btn":function(e){this.trigger("edit",this,e)},"click .delete-btn":function(e){this.trigger("delete",this,e)},"click .rerun-btn":function(e){this.trigger("rerun",this,e)},"click .report-err-btn":function(e){this.trigger("report-err",this,e)},"click .visualization-btn":function(e){this.trigger("visualize",this,e)},"click .dbkey a":function(e){this.trigger("edit",this,e)}}),_clickUndeleteLink:function(e){return this.model.undelete(),!1},_clickPurgeLink:function(e){return window.confirm(g()("This will permanently remove the data in your dataset. Are you sure?"))&&this.model.purge(),!1},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAEditView(".concat(e,")")}});y.prototype.templates=(a=o.a.extend({},v.prototype.templates.warnings,{failed_metadata:f.a.wrapTemplate(['<% if( dataset.state === "failed_metadata" ){ %>','<div class="failed_metadata-warning warningmessagesmall">',g()("An error occurred setting the metadata for this dataset"),'<br /><a href="<%- dataset.urls.edit %>" target="_top">',g()("Set it manually or retry auto-detection"),"</a>","</div>","<% } %>"],"dataset"),deleted:f.a.wrapTemplate(["<% if( dataset.deleted && !dataset.purged ){ %>",'<div class="deleted-msg warningmessagesmall">',g()("This dataset has been deleted"),'<br /><a class="undelete-link" href="javascript:void(0);">',g()("Undelete it"),"</a>","<% if( view.purgeAllowed ){ %>",'<br /><a class="purge-link" href="javascript:void(0);">',g()("Permanently remove it from disk"),"</a>","<% } %>","</div>","<% } %>"],"dataset")}),o.a.extend({},v.prototype.templates,{warnings:a})),t.a={DatasetListItemEdit:y}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(10),i=n.n(a),o=n(5),s=n(26),r=n(4);function l(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){l(o,a,i,s,r,"next",e)}function r(e){l(o,a,i,s,r,"throw",e)}s(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t.root||Object(r.getAppRoot)()}var t,n,a,l,u,h,p;return t=e,(n=[{key:"copyWorkflow",value:(p=c(regeneratorRuntime.mark((function e(t){var n,a,r,l,c,d,u,h,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.a)(),a="".concat(this.root,"api/workflows/").concat(t.id,"/download"),e.prev=2,e.next=5,i.a.get(a);case 5:return r=e.sent,l=r.data,c=t.owner,d="Copy of ".concat(t.name),c!=n.user.attributes.username&&(d+=" shared by user ".concat(c)),l.name=d,u="".concat(this.root,"api/workflows"),e.next=14,i.a.post(u,{workflow:l});case 14:return h=e.sent,p=h.data,this._addAttributes(p),e.abrupt("return",p);case 20:e.prev=20,e.t0=e.catch(2),Object(s.b)(e.t0);case 23:case"end":return e.stop()}}),e,this,[[2,20]])}))),function(e){return p.apply(this,arguments)})},{key:"deleteWorkflow",value:(h=c(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(this.root,"api/workflows/").concat(t),e.prev=1,e.next=4,i.a.delete(n);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(1),Object(s.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return h.apply(this,arguments)})},{key:"getWorkflows",value:(u=c(regeneratorRuntime.mark((function e(){var t,n,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.root,"api/workflows"),e.prev=1,e.next=4,i.a.get(t);case 4:return n=e.sent,(a=n.data).forEach((function(e){o._addAttributes(e)})),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(1),Object(s.b)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return u.apply(this,arguments)})},{key:"updateWorkflow",value:(l=c(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(this.root,"api/workflows/").concat(t),e.prev=1,e.next=4,i.a.put(a,n);case 4:return o=e.sent,e.abrupt("return",o.data);case 8:e.prev=8,e.t0=e.catch(1),Object(s.b)(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e,t){return l.apply(this,arguments)})},{key:"_addAttributes",value:function(e){var t=Object(o.a)();if(e.shared=e.owner!==t.user.get("username"),e.description="",e.annotations&&e.annotations.length>0){var n=e.annotations[0].trim();n&&(e.description=n)}}}])&&d(t.prototype,n),a&&d(t,a),e}()},function(e,t,n){"use strict";var a,i,o=n(1),s=n.n(o),r=n(0),l=n.n(r),c=n(5),d=n(80),u=n(65),h=n(108),p=n(146),m=n(62),f=n(143),_=n(41),g=n(139),v=n(145),y=n(31),b=n(7),w=n(2),k=n.n(w),M=(n(103),l.a),x=d.a.HistoryView,L=x.extend({HDAViewClass:h.a.HDAListItemEdit,HDCAViewClass:p.a.HDCAListItemEdit,initialize:function(e){e=e||{},x.prototype.initialize.call(this,e),this.tagsEditor=null,this.dragItems=!0,this.annotationEditor=null,this.purgeAllowed=e.purgeAllowed||!1,this.annotationEditorShown=e.annotationEditorShown||!1,this.tagsEditorShown=e.tagsEditorShown||!1},_setUpListeners:function(){return x.prototype._setUpListeners.call(this),this.on({"droptarget:drop":function(e,t){this.dataDropped(t),this.dropTargetOff()},"view:attached view:removed":function(){this._renderCounts()},"search:loading-progress":this._renderSearchProgress,"search:searching":this._renderSearchFindings})},_setUpModelListeners:function(){return x.prototype._setUpModelListeners.call(this),this.listenTo(this.model,"change:size",this.updateHistoryDiskSize),this},_setUpCollectionListeners:function(){return x.prototype._setUpCollectionListeners.call(this),this.listenTo(this.collection,{"change:deleted":this._handleItemDeletedChange,"change:visible":this._handleItemVisibleChange,"change:purged":function(e){this.model.fetch()},"fetching-deleted":function(e){this.$("> .controls .deleted-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-hidden":function(e){this.$("> .controls .hidden-count").html("<i>".concat(k()("loading..."),"</i>"))},"fetching-deleted-done fetching-hidden-done":this._renderCounts}),this},_buildNewRender:function(){var e=Object(c.a)(),t=x.prototype._buildNewRender.call(this);return this.model?(e&&e.user&&e.user.id&&e.user.id===this.model.get("user_id")&&(this._renderTags(t),this._renderAnnotation(t)),t):t},updateHistoryDiskSize:function(){this.$(".history-size").text(this.model.get("nice_size"))},renderItems:function(e){var t=x.prototype.renderItems.call(this,e);return this.searchFor?this._renderSearchFindings(e):this._renderCounts(e),t},_renderCounts:function(e){e=e instanceof l.a?e:this.$el;var t=this.templates.counts(this.model.toJSON(),this);return e.find("> .controls .subtitle").html(t)},_renderTags:function(e){var t=e.find(".controls .tags-display")[0],n={model:this.model,disabled:!1,context:"history-view-edit"},a=Object(m.b)(n,t);return Object(y.a)({title:k()("Edit history tags"),classes:"history-tag-btn",faIcon:"fa-tags",tooltipConfig:{placement:"top"}}).appendTo(e.find(".controls .actions")).on("click",(function(){M(a.$el).toggleClass("active")})),a},_renderAnnotation:function(e){var t=this;this.annotationEditor=new f.a.AnnotationEditor({model:this.model,el:e.find(".controls .annotation-display"),onshowFirstTime:function(){this.render()},onshow:function(){t.toggleHDAAnnotationEditors(!0,t.fxSpeed)},onhide:function(){t.toggleHDAAnnotationEditors(!1,t.fxSpeed)},$activator:Object(y.a)({title:k()("Edit history annotation"),classes:"history-annotate-btn",faIcon:"fa-comment",tooltipConfig:{placement:"top"}}).appendTo(e.find(".controls .actions"))})},_setUpBehaviors:function(e){var t=Object(c.a)();if(e=e||this.$el,x.prototype._setUpBehaviors.call(this,e),this.model&&t.user&&!t.user.isAnonymous()&&t.user.id===this.model.get("user_id")){var n=this;e.find("> .controls .name").attr("title",k()("Click to rename history")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(e){var t=n.model.get("name");e&&e!==t?(n.$el.find("> .controls .name").text(e),n.model.save({name:e}).fail((function(){n.$el.find("> .controls .name").text(n.model.previous("name"))}))):n.$el.find("> .controls .name").text(t)}})}},multiselectActions:function(){var e=this,t=Object(c.a)(),n=this,a=function(a,i){var o={},s=n.getSelectedModels().filter((function(e){return console.log(e.attributes[a]),e.attributes[a]!=i})).map((function(e){var t={history_content_type:e.attributes.history_content_type,id:e.attributes.id};return o[e.id]=e,t}));if(0!=s.length){var r={};r.url="".concat(t.root,"api/histories/").concat(e.model.id,"/contents"),r.type="PUT";var c={items:s};c[a]=i,r.data=JSON.stringify(c),r.contentType="application/json";var d=l.a.ajax(r);return d.done((function(e,t,n){var a=!0,i=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var c=r.value,d=c.history_content_type+"-"+c.id;o[d].set(c)}}catch(e){i=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw s}}})),d.fail((function(e,t,n){console.error(n)})),d}},i=[{html:k()("Hide datasets"),func:function(){a("visible",!1)}},{html:k()("Unhide datasets"),func:function(){a("visible",!0)}},{html:k()("Delete datasets"),func:function(){a("deleted",!0)}},{html:k()("Undelete datasets"),func:function(){a("deleted",!1)}}];return n.purgeAllowed&&i.push({html:k()("Permanently delete datasets"),func:function(){if(window.confirm(k()("This will permanently remove the data in your datasets. Are you sure?"))){var e=u.a.HistoryDatasetAssociation.prototype.purge,t=n.getSelectedModels(),a=t.filter((function(e){return"dataset"==e.get("history_content_type")}));t.ajaxQueue(e,{},a)}}}),i=i.concat(n._collectionActions())},_collectionActions:function(){var e=this;return[{html:k()("Build Dataset List"),func:function(){return e.buildCollection("list")}},{html:k()("Build Dataset Pair"),func:function(){return e.buildCollection("paired")}},{html:k()("Build List of Dataset Pairs"),func:function(){return e.buildCollection("list:paired")}},{html:k()("Build Collection from Rules"),func:function(){return e.buildCollection("rules")}}]},buildCollection:function(e,t,n){var a,i=this;t=t||i.getSelectedModels(),n=n||!1,"list"==e?a=_.a.createListCollection:"paired"==e?a=g.a.createPairCollection:"list:paired"==e?a=v.a.createListOfPairsCollection:e.startsWith("rules")?a=_.a.createCollectionViaRules:console.warn("Unknown collectionType encountered ".concat(e)),a(t,n).then((function(){i.model.refresh()}))},_getItemViewOptions:function(e){var t=x.prototype._getItemViewOptions.call(this,e);return s.a.extend(t,{purgeAllowed:this.purgeAllowed,tagsEditorShown:this.tagsEditor&&!this.tagsEditor.hidden,annotationEditorShown:this.annotationEditor&&!this.annotationEditor.hidden}),t},_handleItemDeletedChange:function(e){e.get("deleted")?this._handleItemDeletion(e):this._handleItemUndeletion(e),this._renderCounts()},_handleItemDeletion:function(e){var t=this.model.get("contents_active");t.deleted+=1,t.active-=1,this.model.contents.includeDeleted||this.removeItemView(e),this.model.set("contents_active",t)},_handleItemUndeletion:function(e){var t=this.model.get("contents_active");t.deleted-=1,this.model.contents.includeDeleted||(t.active-=1),this.model.set("contents_active",t)},_handleItemVisibleChange:function(e){e.hidden()?this._handleItemHidden(e):this._handleItemUnhidden(e),this._renderCounts()},_handleItemHidden:function(e){var t=this.model.get("contents_active");t.hidden+=1,t.active-=1,this.model.contents.includeHidden||this.removeItemView(e),this.model.set("contents_active",t)},_handleItemUnhidden:function(e){var t=this.model.get("contents_active");t.hidden-=1,this.model.contents.includeHidden||(t.active-=1),this.model.set("contents_active",t)},toggleHDAAnnotationEditors:function(e,t){s.a.each(this.views,(function(n){n.annotationEditor&&n.annotationEditor.toggle(e,t)}))},events:s.a.extend(s.a.clone(x.prototype.events),{"click .show-selectors-btn":"toggleSelectors","click .toggle-deleted-link":function(e){this.toggleShowDeleted()},"click .toggle-hidden-link":function(e){this.toggleShowHidden()}}),_renderSearchProgress:function(e,t){var n=e+t;return this.$("> .controls .subtitle").html(["<i>",k()("Searching "),n,"/",this.model.contentsShown(),"</i>"].join(""))},_renderSearchFindings:function(e){e=e instanceof l.a?e:this.$el;var t=this.templates.found(this.model.toJSON(),this);return e.find("> .controls .subtitle").html(t),this},dropTargetOn:function(){if(this.dropTarget)return this;this.dropTarget=!0;var e={dragenter:s.a.bind(this.dragenter,this),dragover:s.a.bind(this.dragover,this),dragleave:s.a.bind(this.dragleave,this),drop:s.a.bind(this.drop,this)},t=this._renderDropTarget();for(var n in this.$list().before([this._renderDropTargetHelp(),t]),e)Object.prototype.hasOwnProperty.call(e,n)&&t.get(0).addEventListener(n,e[n]);return this},_renderDropTarget:function(){return this.$(".history-drop-target").remove(),M("<div/>").addClass("history-drop-target")},_renderDropTargetHelp:function(){return this.$(".history-drop-target-help").remove(),M("<div/>").addClass("history-drop-target-help").text(k()("Drag datasets here to copy them to the current history"))},dropTargetOff:function(){if(!this.dropTarget)return this;this.dropTarget=!1;var e=this.$(".history-drop-target").get(0);for(var t in this._dropHandlers)Object.prototype.hasOwnProperty.call(this._dropHandlers,t)&&e.off(t,this._dropHandlers[t]);return this.$(".history-drop-target").remove(),this.$(".history-drop-target-help").remove(),this},dropTargetToggle:function(){return this.dropTarget?this.dropTargetOff():this.dropTargetOn(),this},dragenter:function(e){e.preventDefault(),e.stopPropagation(),this.$(".history-drop-target").css("border","2px solid black")},dragover:function(e){e.preventDefault(),e.stopPropagation()},dragleave:function(e){e.preventDefault(),e.stopPropagation(),this.$(".history-drop-target").css("border","1px dashed black")},drop:function(e){e.preventDefault();var t=e.dataTransfer,n=t.getData("text");t.dropEffect="move";try{n=JSON.parse(n)}catch(e){this.warn("error parsing JSON from drop:",n)}return this.trigger("droptarget:drop",e,n,this),!1},dataDropped:function(e){var t=this;return s.a.isObject(e)&&"HistoryDatasetAssociation"===e.model_class&&e.id?0!==this.contents.currentPage?this.contents.fetchPage(0).then((function(){return t.model.contents.copy(e.id)})):this.model.contents.copy(e.id):l.a.when()},toString:function(){return"HistoryViewEdit(".concat(this.model?this.model.get("name"):"",")")}});L.prototype.templates=(a=b.a.wrapTemplate(["<% var shown = Math.max( view.views.length, history.contents_active.active ) %>","<% if( shown ){ %>",'<span class="shown-count">',"<%- shown %> ",k()("shown"),"</span>","<% } %>","<% if( history.contents_active.deleted ){ %>",'<span class="deleted-count">',"<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>","<% } else { %>","<%- history.contents_active.deleted %> ",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("deleted"),"</a>","<% } %>","</span>","<% } %>","<% if( history.contents_active.hidden ){ %>",'<span class="hidden-count">',"<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>","<%- history.contents_active.hidden %> ",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hidden"),"</a>","<% } %>","</span>","<% } %>"],"history"),i=b.a.wrapTemplate([k()("Found")," <%- view.views.length %>, ","<% if( history.contents_active.deleted ){ %>","<% if( view.model.contents.includeDeleted ){ %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("hide deleted"),"</a>, ","<% } else { %>",'<a class="toggle-deleted-link" href="javascript:void(0);">',k()("show deleted"),"</a>, ","<% } %>","<% } %>","<% if( history.contents_active.hidden ){ %>","<% if( view.model.contents.includeHidden ){ %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("hide hidden"),"</a>","<% } else { %>",'<a class="toggle-hidden-link" href="javascript:void(0);">',k()("show hidden"),"</a>","<% } %>","<% } %>"],"history"),s.a.extend(s.a.clone(x.prototype.templates),{counts:a,found:i})),t.a={HistoryViewEdit:L}},,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a).a;i.fn.make_text_editable=function(e){var t="num_cols"in e?e.num_cols:30,n="num_rows"in e?e.num_rows:4,a="use_textarea"in e&&e.use_textarea,o="on_finish"in e?e.on_finish:null,s="help_text"in e?e.help_text:null,r=i(this);return r.addClass("editable-text").click((function(s){if(!(i(this).children(":input").length>0)){r.removeClass("editable-text");var l,c,d=function(e){r.find(":input").remove(),""!==e?r.text(e):r.html("<br>"),r.addClass("editable-text"),o&&o(e)},u="cur_text"in e?e.cur_text:r.text();a?(l=i("<textarea/>").attr({rows:n,cols:t}).text(i.trim(u)).keyup((function(e){27===e.keyCode&&d(u)})),c=i("<button/>").addClass("btn-sm float-right").text("Done").click((function(){return d(l.val()),!1}))):l=i("<input type='text'/>").attr({value:i.trim(u),size:t}).blur((function(){d(u)})).keyup((function(e){27===e.keyCode?i(this).trigger("blur"):13===e.keyCode&&d(i(this).val()),e.stopPropagation()})),r.text(""),r.append(l),c&&r.append(c),l.focus(),l.select(),s.stopPropagation()}})),s&&r.attr("title",s).tooltip(),r}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(8),d=n(89),u=n(36),h=l.a.View.extend({initialize:function(e){var t=this;this.data=[],this.data2=[],this.model=e&&e.model||new l.a.Model({id:c.a.uid(),cls:"ui-select",error_text:"No options available",empty_text:"Nothing selected",visible:!0,wait:!1,multiple:!1,searchable:!0,optional:!1,disabled:!1,readonly:!1,onchange:function(){},value:null,individual:!1,pagesize:20}).set(e),this.on("change",(function(){t.model.get("onchange")&&t.model.get("onchange")(t.value())})),this.listenTo(this.model,"change:data",this._changeData,this),this.listenTo(this.model,"change:disabled",this._changeDisabled,this),this.listenTo(this.model,"change:wait",this._changeWait,this),this.listenTo(this.model,"change:visible",this._changeVisible,this),this.listenTo(this.model,"change:value",this._changeValue,this),this.listenTo(this.model,"change:multiple change:searchable change:cls change:id",this.render,this),this.render()},render:function(){var e=this;this.model.get("searchable")?this._renderSearchable():this._renderClassic(),this.$el.addClass(this.model.get("cls")).attr("id",this.model.get("id")),this.$select.empty().addClass("select").attr("id","".concat(this.model.get("id"),"_select")).prop("multiple",this.model.get("multiple")).on("change",(function(){e.value(e._getValue()),e.trigger("change")})),this._changeData(),this._changeWait(),this._changeVisible(),this._changeDisabled()},_renderClassic:function(){var e=this;this.$el.addClass(this.model.get("multiple")?"ui-select-multiple":"ui-select").append(this.$select=i()("<select/>")).append(this.$dropdown=i()("<div/>")).append(this.$resize=i()("<div/>").append(this.$resize_icon=i()("<i/>"))),this.model.get("multiple")?(this.$dropdown.hide(),this.$resize_icon.addClass("fa fa-angle-double-right fa-rotate-45").show(),this.$resize.removeClass().addClass("icon-resize").show().off("mousedown").on("mousedown",(function(t){var n=t.pageY,a=e.$select.height();e.minHeight=e.minHeight||a,i()("#dd-helper").show().on("mousemove",(function(t){e.$select.height(Math.max(a+(t.pageY-n),e.minHeight))})).on("mouseup mouseleave",(function(){i()("#dd-helper").hide().off()}))}))):(this.$dropdown.show(),this.$resize.hide(),this.$resize_icon.hide())},_renderSearchable:function(){var e=this;this.$el.append(this.$select=i()("<div/>")).append(this.$dropdown=i()("<div/>")),this.$dropdown.hide(),this.model.get("multiple")||this.$dropdown.show().on("click",(function(){e.$select.select2&&e.$select.select2("open")})),this.all_button=null,!this.model.get("multiple")||this.model.get("individual")||this.model.get("readonly")||(this.all_button=new u.a.ButtonCheck({onclick:function(){var t=[];0!==e.all_button.value()&&s.a.each(e.model.get("data"),(function(e){t.push(e.value)})),e.value(t),e.trigger("change")}}),this.$el.prepend(this.all_button.$el))},_match:function(e,t){return!e||""===e||String(t).toUpperCase().indexOf(e.toUpperCase())>=0},_changeData:function(){var e=this;this.data=[],!this.model.get("multiple")&&this.model.get("optional")&&this.data.push({value:"__null__",label:this.model.get("empty_text")}),s.a.each(this.model.get("data"),(function(t){e.data.push(t)})),0===this.length()&&this.data.push({value:"__null__",label:this.model.get("error_text")}),this.model.get("searchable")?(this.data2=[],this.data2index={},s.a.each(this.data,(function(t,n){var a={order:n,id:t.value,text:t.label,tags:t.tags};e.data2.push(a),e.data2index[a.id]=a})),this.$select.data("select2")&&this.$select.select2("destroy"),this.matched_tags={},this.$select.select2({data:this.data2,closeOnSelect:!this.model.get("multiple"),multiple:this.model.get("multiple"),query:function(t){e.matched_tags={};var n=e.model.get("pagesize"),a=s.a.filter(e.data2,(function(n){var a=!1;return s.a.each(n.tags,(function(n){e._match(t.term,n)&&(a=e.matched_tags[n]=!0)})),a||e._match(t.term,n.text)}));t.callback({results:a.slice((t.page-1)*n,t.page*n),more:a.length>=t.page*n})},formatResult:function(t){var n="",a=s.a.filter(t.tags,(function(t){return Object.prototype.hasOwnProperty.call(e.matched_tags,t)}));return a.length>5&&(n='&nbsp;<div class="label label-warning">'.concat(a.length-5," more tags</div>")),"\n                    ".concat(s.a.escape(t.text),"\n                    <div>\n                        ").concat(a.slice(0,5).reduce((function(e,t){var n=Object(d.a)(t),a=0===t.indexOf("name:"),i=a?"#".concat(t.slice(5)):t,o=a?'style="background-color: '.concat(n.primary,"; color: ").concat(n.contrasting,"; border: 1px solid ").concat(n.darker,'"'):"";return"".concat(e,"&nbsp;<div ").concat(o,' class="badge badge-primary badge-tags">').concat(s.a.escape(i),"</div>")}),""),"\n                        ").concat(n,"\n                   </div>")}}),this.$(".select2-container .select2-search input").off("blur")):(this.$select.find("option").remove(),s.a.each(this.data,(function(t){e.$select.append(i()("<option/>").attr("value",t.value).html(s.a.escape(t.label)))}))),this.model.set("disabled",this.model.get("readonly")||0===this.length()),this._changeValue()},_changeDisabled:function(){this.model.get("searchable")?this.$select.select2(this.model.get("disabled")?"disable":"enable"):this.$select.prop("disabled",this.model.get("disabled"))},_changeWait:function(){this.$dropdown.removeClass().addClass("icon-dropdown fa").addClass(this.model.get("wait")?"fa-spinner fa-spin":"fa-caret-down")},_changeVisible:function(){this.$el[this.model.get("visible")?"show":"hide"](),this.$select[this.model.get("visible")?"show":"hide"]()},_changeValue:function(){if(this._setValue(this.model.get("value")),this.model.get("multiple")){if(this.all_button){var e=this._getValue();this.all_button.value(i.a.isArray(e)?e.length:0,this.length())}}else null!==this._getValue()||this.model.get("optional")||this._setValue(this.first())},value:function(e){return void 0!==e&&this.model.set("value",e),this._getValue()},first:function(){return this.data.length>0?this.data[0].value:null},exists:function(e){return s.a.findWhere(this.data,{value:e})},text:function(){var e=this._getValue(),t=this.exists(i.a.isArray(e)?e[0]:e);return t?t.label:""},show:function(){this.model.set("visible",!0)},hide:function(){this.model.set("visible",!1)},wait:function(){this.model.set("wait",!0)},unwait:function(){this.model.set("wait",!1)},disabled:function(){return this.model.get("disabled")},enable:function(){this.model.set("disabled",!1)},disable:function(){this.model.set("disabled",!0)},add:function(e,t){s.a.each(this.model.get("data"),(function(t){t.keep&&!s.a.findWhere(e,{value:t.value})&&e.push(t)})),t&&e&&e.sort(t),this.model.set("data",e)},update:function(e){this.model.set("data",e.data)},setOnChange:function(e){this.model.set("onchange",e)},length:function(){return i.a.isArray(this.model.get("data"))?this.model.get("data").length:0},_setValue:function(e){var t=this;if(null==e&&(e="__null__"),this.model.get("multiple")?e=i.a.isArray(e)?e:[e]:i.a.isArray(e)&&(e=e.length>0?e[0]:"__null__"),this.model.get("searchable")){if(i.a.isArray(e)){var n=[];s.a.each(e,(function(e){var a=t.data2index[e];a&&n.push(a)})),e=n}else e=this.data2index[e];this.$select.select2("data",e)}else this.$select.val(e)},_getValue:function(){var e=null;if(this.model.get("searchable")){var t=this.$select.select2("data");t&&(i.a.isArray(t)?(e=[],t.sort((function(e,t){return e.order-t.order})),s.a.each(t,(function(t){e.push(t.id)}))):e=t.id)}else e=this.$select.val();return c.a.isEmpty(e)?null:e}});t.a={View:h}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=i.a;function s(e,t){var n=this;return t=i.a.extend({cover:!1},t||{}),n.show=function(a,i,s){var r,l;return a=a||"loading...",i=i||"fast",e.parent().find(".loading-indicator").remove(),n.$indicator=(r=['<div class="loading-indicator">','<div class="loading-indicator-text">','<span class="fa fa-spinner fa-spin fa-lg"></span>','<span class="loading-indicator-message">loading...</span>',"</div>","</div>"].join("\n"),l=o(r).hide().css(t.css||{position:"fixed"}),l.children(".loading-indicator-text"),t.cover?(l.css({"z-index":2,top:e.css("top"),bottom:e.css("bottom"),left:e.css("left"),right:e.css("right"),opacity:.5,"background-color":"white","text-align":"center"}),l.children(".loading-indicator-text").css({"margin-top":"20px"})):l.children(".loading-indicator-text").css({margin:"12px 0px 0px 10px",opacity:"0.85",color:"grey"}).children(".loading-indicator-message").css({margin:"0px 8px 0px 0px","font-style":"italic"}),l).insertBefore(e),n.message(a),n.$indicator.fadeIn(i,s),n},n.message=function(e){n.$indicator.find("i").text(e)},n.hide=function(e,t){return e=e||"fast",n.$indicator&&n.$indicator.length?n.$indicator.fadeOut(e,(function(){n.$indicator.remove(),t&&t()})):t&&t(),n},n}t.a={LoadingIndicator:s,markViewAsLoading:function(e){e.setElement(o('<div><div class="loading"></div></div>')),new s(e.$(".loading")).show()}}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(17),u=n(7),h=n(2),p=n.n(h);function m(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}function f(){var e=m();return!!e&&document[e]}var _={change_favicon:function(e){var t=document.createElement("link");t.id="tabicon",t.setAttribute("rel","shortcut icon"),document.querySelector("head").appendChild(t),t.setAttribute("type","image/png"),t.setAttribute("href",e)},hidden_permit:m,is_hidden:f,hidden_count:function(e){f()&&(document.title=1===e?"Galaxy (1 job completed)":"Galaxy ("+e+" jobs completed)")}},g=1,v=u.a.SearchableModelMixin,y=l.a.Model.extend(u.a.LoggableMixin).extend(u.a.mixin(v,{_logNamespace:"dataset",defaults:{state:d.a.NEW,deleted:!1,purged:!1,name:"(unnamed dataset)",accessible:!0,data_type:"",file_ext:"",file_size:0,meta_files:[],misc_blurb:"",misc_info:"",tags:[]},initialize:function(e,t){this.debug("".concat(this,"(Dataset).initialize"),e,t),//!! this state is not in trans.app.model.Dataset.states - set it here -
this.get("accessible")||this.set("state",d.a.NOT_VIEWABLE),this.urls=this._generateUrls(),this._setUpListeners()},_getDatasetId:function(){return this.get("id")},_generateUrls:function(){var e=this._getDatasetId();if(!e)return{};var t={purge:"datasets/".concat(e,"/purge_async"),display:"datasets/".concat(e,"/display/?preview=True"),edit:"datasets/edit?dataset_id=".concat(e),download:"datasets/".concat(e,"/display").concat(this._downloadQueryParameters()),report_error:"dataset/errors?id=".concat(e),rerun:"tool_runner/rerun?id=".concat(e),show_params:"datasets/".concat(e,"/show_params"),visualization:"visualization",meta_download:"dataset/get_metadata_file?hda_id=".concat(e,"&metadata_name=")};return i.a.each(t,(function(e,n){t[n]=Object(c.getAppRoot)()+e})),this.urls=t,t},_downloadQueryParameters:function(){return"?to_ext=".concat(this.get("file_ext"))},_setUpListeners:function(){this.on("change:state",(function(e,t){this.log("".concat(this," has changed state:"),e,t),this.inReadyState()&&(this.trigger("state:ready",e,t,this.previous("state")),"discarded"!=t&&("ok"===t?(new Notification("Job complete: ".concat(this.get("name")),{icon:"static/favicon.ico"}),_.is_hidden()&&(_.hidden_count(g),g++)):"error"==t&&(new Notification("Job failure: ".concat(this.get("name")),{icon:"static/erricon.ico"}),_.is_hidden()&&"granted"==Notification.permission&&_.change_favicon("static/erricon.ico"))))})),this.on("change:id change:file_ext",(function(e){this._generateUrls()}))},toJSON:function(){var e=l.a.Model.prototype.toJSON.call(this);return i.a.extend(e,{urls:this.urls})},isDeletedOrPurged:function(){return this.get("deleted")||this.get("purged")},inReadyState:function(){var e=i.a.contains(d.a.READY_STATES,this.get("state"));return this.isDeletedOrPurged()||e},hasDetails:function(){return!this.get("accessible")||this.has("annotation")},hasData:function(){return this.get("file_size")>0},fetch:function(e){var t=this;return l.a.Model.prototype.fetch.call(this,e).always((function(){t._generateUrls()}))},parse:function(e,t){var n=l.a.Model.prototype.parse.call(this,e,t);return n.create_time&&(n.create_time=new Date(n.create_time)),n.update_time&&(n.update_time=new Date(n.update_time)),n},save:function(e,t){return(t=t||{}).wait=!!i.a.isUndefined(t.wait)||t.wait,l.a.Model.prototype.save.call(this,e,t)},delete:function(e){return this.get("deleted")?s.a.when():this.save({deleted:!0},e)},undelete:function(e){return!this.get("deleted")||this.get("purged")?s.a.when():this.save({deleted:!1},e)},purge:function(e){if(this.get("purged"))return s.a.when();(e=e||{}).url=this.urls.purge;var t=this,n=s.a.ajax(e);return n.done((function(e,n,a){t.set({deleted:!0,purged:!0})})),n.fail((function(n,a,i){var o=p()("Unable to purge dataset");n.responseJSON&&n.responseJSON.error?o=n.responseJSON.error:-1!==n.responseText.indexOf("Removal of datasets by users is not allowed in this Galaxy instance")&&(o="Removal of datasets by users is not allowed in this Galaxy instance"),n.responseText=o,t.trigger("error",t,n,e,p()(o),{error:o})})),n},searchAttributes:["name","file_ext","genome_build","misc_blurb","misc_info","annotation","tags"],searchAliases:{title:"name",format:"file_ext",database:"genome_build",blurb:"misc_blurb",description:"misc_blurb",info:"misc_info",tag:"tags"},toString:function(){var e=this.get("id")||"";return this.get("name")&&(e='"'.concat(this.get("name"),'",').concat(e)),"Dataset(".concat(e,")")}})),b=l.a.Collection.extend(u.a.LoggableMixin).extend({_logNamespace:"dataset",model:y,urlRoot:"".concat(Object(c.getAppRoot)(),"api/datasets"),url:function(){return this.urlRoot},ids:function(){return this.map((function(e){return e.get("id")}))},notReady:function(){return this.filter((function(e){return!e.inReadyState()}))},haveDetails:function(){return this.all((function(e){return e.hasDetails()}))},ajaxQueue:function(e,t){var n=s.a.Deferred(),a=this.length,i=[];if(!a)return n.resolve([]),n;var o=this.chain().reverse().map((function(s,r){return function(){var l=e.call(s,t);l.done((function(e){n.notify({curr:r,total:a,response:e,model:s})})),l.always((function(e){i.push(e),o.length?o.shift()():n.resolve(i)}))}})).value();return o.shift()(),n},matches:function(e){return this.filter((function(t){return t.matches(e)}))},toString:function(){return["DatasetAssociationCollection(",this.length,")"].join("")}});window.addEventListener("focus",(function(){var e=document.getElementById("tabicon");e&&-1!=e.href.search("erricon")&&_.change_favicon("static/favicon.ico"),document.title="Galaxy",g=1}));t.a={DatasetAssociation:y,DatasetAssociationCollection:b}},,function(e,t,n){"use strict";var a,i=n(0),o=n.n(i),s=n(1),r=n.n(s),l=n(94),c=n(142),d=n(7),u=n(2),h=n.n(u),p=l.a.DatasetListItemEdit,m=p.extend({className:"".concat(p.prototype.className," history-content"),_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):this.model.has("rerunnable")?o.a.when():this.model.fetch({silent:!0,data:{keys:["rerunnable","creating_job"].join(",")}})},events:r.a.extend(r.a.clone(p.prototype.events),{"click .unhide-link":function(e){return this.model.unhide(),!1}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAListItemEdit(".concat(e,")")}});m.prototype.templates=(a=r.a.extend({},p.prototype.templates.warnings,{hidden:d.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',h()("This dataset has been hidden"),'<br /><a class="unhide-link" a href="javascript:void(0);">',h()("Unhide it"),"</a>","</div>","<% } %>"],"dataset")}),r.a.extend({},p.prototype.templates,{titleBar:c.a.HDAListItemView.prototype.templates.titleBar,warnings:a})),t.a={HDAListItemEdit:m}},function(e,t,n){"use strict";var a=n(82),i=n(47),o=n(181);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={props:{jobId:{type:String},datasetId:{type:String},aws_estimate:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.jobId?this.fetchJobMetricsForJobId(this.jobId):this.fetchJobMetricsForDatasetId({datasetId:this.datasetId,datasetType:this.datasetType})},computed:r({},Object(i.c)(["getJobMetricsByDatasetId","getJobMetricsByJobId"]),{isAwsEstimate:function(){return this.aws_estimate&&this.aws_estimate.toUpperCase()==="true".toUpperCase()},awsEstimate:function(){if(this.isAwsEstimate){var e={};if(this.jobMetrics.forEach((function(t){switch(t.name){case"galaxy_memory_mb":e.memory=parseInt(t.raw_value);break;case"galaxy_slots":e.vcpus=parseInt(t.raw_value);break;case"runtime_seconds":e.seconds=parseInt(t.raw_value)}})),e.memory?e.memory/=1024:e.memory=.5,e.instance=o.find((function(t){return t.mem>=e.memory&&t.vcpus>=e.vcpus})),void 0!==e.instance)return e.price=(e.seconds*e.instance.price/3600).toFixed(2),e}},jobMetrics:function(){return this.jobId?this.getJobMetricsByJobId(this.jobId):this.getJobMetricsByDatasetId(this.datasetId,this.datasetType)},metricsByPlugins:function(){var e={};return this.jobMetrics.forEach((function(t){t.plugin in e||(e[t.plugin]={}),e[t.plugin][t.title]=t.value})),e},orderedPlugins:function(){return Object.keys(this.metricsByPlugins).sort()}}),methods:r({},Object(a.b)(["fetchJobMetricsForDatasetId","fetchJobMetricsForJobId"]))},d=n(6),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.orderedPlugins.length>0?n("div",[e.includeTitle?n("h3",[e._v("Job Metrics")]):e._e(),e._v(" "),e._l(e.orderedPlugins,(function(t){return n("div",{key:t,staticClass:"metrics_plugin"},[n("h4",{staticClass:"metrics_plugin_title"},[e._v(e._s(t))]),e._v(" "),n("table",{staticClass:"tabletip info_data_table"},[n("tbody",e._l(e.metricsByPlugins[t],(function(t,a){return n("tr",{key:a},[n("td",[e._v(e._s(a))]),e._v(" "),n("td",[e._v(e._s(t))])])})),0)])])})),e._v(" "),e.isAwsEstimate&&e.awsEstimate?n("div",{attrs:{id:"aws-estimate"}},[n("h3",[e._v("AWS estimate")]),e._v(" "),n("b",[e._v(e._s(e.awsEstimate.price)+" USD")]),n("br"),e._v("\n        This job requested "+e._s(e.awsEstimate.vcpus)+" cores and "+e._s(e.awsEstimate.memory)+" Gb. Given this, the smallest\n        EC2 machine we could find is "),n("span",{attrs:{id:"aws_name"}},[e._v(e._s(e.awsEstimate.instance.name))]),e._v(" ("),n("span",{attrs:{id:"aws_mem"}},[e._v(e._s(e.awsEstimate.instance.mem))]),e._v("\n        GB / "),n("span",{attrs:{id:"aws_vcpus"}},[e._v(e._s(e.awsEstimate.instance.vcpus))]),e._v(" vCPUs /\n        "),n("span",{attrs:{id:"aws_cpu"}},[e._v(e._s(e.awsEstimate.instance.cpu))]),e._v("). That instance is priced at "+e._s(e.awsEstimate.instance.price)+" USD/hour."),n("br"),e._v("\n        Please note, that those numbers are only estimates, all jobs are always free of charge for all users.\n    ")]):e._e()],2):e._e()}),[],!1,null,null,null).exports,h=n(0),p=n.n(h),m=n(43),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p()(".job-metrics").each((function(t,n){var a=p()(n).attr("job_id"),i=p()(n).attr("aws_estimate"),o=p()(n).attr("dataset_id"),s=p()(n).attr("dataset_type")||"hda";e.jobId=a,e.datasetId=o,e.datasetType=s,e.aws_estimate=i,Object(m.a)(u)(e,n)}))};n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}))},function(e,t,n){"use strict";var a=n(4),i=n(10),o=n.n(i),s=n(11),r=n(18);s.default.use(r.a);var l={props:{jobId:{type:String},datasetId:{type:String},datasetType:{type:String,default:"hda"},includeTitle:{type:Boolean,default:!0}},data:function(){return{parameters:[],hasParameterErrors:!1}},created:function(){var e;e=this.jobId?"".concat(Object(a.getAppRoot)(),"api/jobs/").concat(this.jobId,"/parameters_display"):"".concat(Object(a.getAppRoot)(),"api/datasets/").concat(this.datasetId,"/parameters_display?hda_ldda=").concat(this.datasetType),this.ajaxCall(e)},computed:{anyNotes:function(){var e=!1;return this.parameters.forEach((function(t){e=e||t.notes})),e}},methods:{appRoot:function(){return Object(a.getAppRoot)()},ajaxCall:function(e){var t=this;o.a.get(e).then((function(e){return e.data})).then((function(e){t.hasParameterErrors=e.has_parameter_errors,t.parameters=e.parameters})).catch((function(e){console.error(e)}))}}},c=(n(244),n(6)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tool-parameters"},[e.includeTitle?n("h3",[e._v("Tool Parameters")]):e._e(),e._v(" "),n("table",{staticClass:"tabletip",attrs:{id:"tool-parameters"}},[n("thead",[n("tr",[n("th",[e._v("Input Parameter")]),e._v(" "),n("th",[e._v("Value")]),e._v(" "),e.anyNotes?n("th",[e._v("Note for rerun")]):e._e()])]),e._v(" "),n("tbody",e._l(e.parameters,(function(t,a){return n("tr",{key:a},[n("td",{style:{"padding-left":10*(t.depth-1)+"px"}},[e._v("\n                    "+e._s(t.text)+"\n                ")]),e._v(" "),Array.isArray(t.value)?n("td",[n("ul",{staticStyle:{"padding-inline-start":"25px"}},e._l(t.value,(function(t,a){return n("li",{key:a},["hda"==t.src?n("span",[n("a",{attrs:{href:e.appRoot()+"datasets/"+t.id+"/show_params"}},[e._v("\n                                    "+e._s(t.hid)+": "+e._s(t.name)+"\n                                ")])]):n("span",[e._v(" "+e._s(t.hid)+": "+e._s(t.name)+" ")])])})),0)]):n("td",[e._v("\n                    "+e._s(t.value)+"\n                ")]),e._v(" "),e.anyNotes?n("td",[t.notes?n("em",[e._v(e._s(t.notes))]):e._e()]):e._e()])})),0)]),e._v(" "),n("b-alert",{attrs:{show:e.hasParameterErrors,variant:"danger"}},[e._v("\n        One or more of your original parameters may no longer be valid or displayed properly.\n    ")])],1)}),[],!1,null,"44245069",null).exports,u=n(0),h=n.n(u),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h()(".job-parameters").each((function(t,n){var a=h()(n).attr("job_id"),i=h()(n).attr("dataset_id"),o=h()(n).attr("dataset_type")||"hda",r=s.default.extend(d);return e.jobId=a,e.datasetId=i,e.datasetType=o,new r({propsData:e}).$mount(n)}))};n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}))},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r).a.View.extend({initialize:function(e,t){var n=this;this.$button=e,this.$button.length||(this.$button=i()("<div/>")),this.options=t||[],this.$button.data("popupmenu",this),this.$button.click((function(e){return i()(".popmenu-wrapper").remove(),n._renderAndShow(e),!1}))},_renderAndShow:function(e){this.render(),this.$el.appendTo("body").css(this._getShownPosition(e)).show(),this._setUpCloseBehavior()},render:function(){var e=this;return this.$el.addClass("popmenu-wrapper").hide().css({position:"absolute"}).html(this.template(this.$button.attr("id"),this.options)),this.options.length&&this.$(".popupmenu-option").each((function(t,n){var a=e.options[t];a.func&&i()(n).click((function(t){a.func.call(e,t,a),t.preventDefault()}))})),this},template:function(e,t){return'<div id="'.concat(e,'-menu" class="dropdown-menu">\n                    ').concat(this._templateOptions(t),"\n                </div>")},_templateOptions:function(e){return e.length?s.a.map(e,(function(e){if(e.divider)return'<div class="popupmenu-option dropdown-divider"/>';if(e.header)return'<div class="popupmenu-option dropdown-header">'.concat(e.html,"</div>");var t=e.href||"javascript:void(0);",n=e.target?'target="'.concat(e.target,'"'):"",a=e.checked?'<span class="fa fa-check mr-1"/>':"";return'<a class="popupmenu-option dropdown-item" href="'.concat(t,'" ').concat(n,">").concat(a).concat(e.html,"</a>")})).join(""):'<div class="dropdown-header">(no options)</div>'},_getShownPosition:function(e){var t=this.$el.width(),n=e.pageX-t/2;return n=Math.min(n,i()(document).scrollLeft()+i()(window).width()-t-5),n=Math.max(n,i()(document).scrollLeft()+5),{top:e.pageY,left:n}},_setUpCloseBehavior:function(){var e=this,t=function(t){if(!t.target.classList.contains("dropdown-header")){i()(document).off("click.close_popup");try{window&&window.parent!==window?i()(window.parent.document).off("click.close_popup"):i()("iframe#galaxy_main").contents().off("click.close_popup")}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}e.remove()}};i()("html").on("click.close_popup",t);try{window&&window.parent!==window?i()(window.parent.document).find("html").on("click.close_popup",t):i()("iframe#galaxy_main").contents().on("click.close_popup",t)}catch(e){e instanceof DOMException?console.debug("Error clearing parent popups, likely cross-origin frame access from the toolshed and not problematic."):console.debug(e)}},addItem:function(e,t){return t=t>=0?t:this.options.length,this.options.splice(t,0,e),this},removeItem:function(e){return e>=0&&this.options.splice(e,1),this},findIndexByHtml:function(e){for(var t=0;t<this.options.length;t++)if(s.a.has(this.options[t],"html")&&this.options[t].html===e)return t;return null},findItemByHtml:function(e){return this.options[this.findIndexByHtml(e)]},toString:function(){return"PopupMenu"}});l.create=function(e,t){return new l(e,t)},t.a=l},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=s.a.View.extend({initialize:function(e){this.collection=new s.a.Collection,this.model=e&&e.model||new s.a.Model({onchange:null,visible:!0}).set(e),this.setElement(i()(this._template())),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$el.on("click",(function(){i()(".tooltip").hide()})),this.render(),this.listenTo(this.model,"change",this.render,this),this.listenTo(this.collection,"add",this._add,this),this.listenTo(this.collection,"remove",this._remove,this),this.listenTo(this.collection,"change",this._change,this),this.listenTo(this.collection,"reset",this._reset,this),this.listenTo(this.collection,"add remove reset",this.render,this)},render:function(){var e=this.model.get("current");(e=this.$("#".concat(e)).length>0?e:this.first())&&(this.$nav.find(".nav-link.active").removeClass("active"),this.$content.children().removeClass("active"),this.$("#tab-".concat(e," .nav-link")).addClass("active"),this.$("#".concat(e)).addClass("active")),this.$el[this.model.get("visible")?"fadeIn":"fadeOut"]("fast"),this.$nav[this.size()>1?"show":"hide"]()},current:function(){return this.model.get("current")},show:function(e){e&&(this.model.set({current:e,visible:!0}),this.model.get("onchange")&&this.model.get("onchange")(e))},hide:function(){this.model.set("visible",!1)},first:function(){var e=this.collection.first();return e&&e.id},size:function(){return this.collection.length},add:function(e){this.collection.add(e)},del:function(e){this.collection.remove(e)},delAll:function(){this.collection.reset()},showTab:function(e){this.collection.get(e).set("hidden",!1)},hideTab:function(e){this.collection.get(e).set("hidden",!0)},_add:function(e){var t=this,n=e.attributes;this.$content.append(i()("<div/>").attr("id",n.id).addClass("tab-pane").append(n.$el)),this.$nav.append(i()(this._template_tab(n)).show().tooltip({title:n.tooltip||"",placement:"bottom",container:t.$el}).on("click",(function(e){e.preventDefault(),t.show(n.id)}))),1==this.size()&&this.show(n.id)},_remove:function(e){this.$("#tab-".concat(e.id)).remove(),this.$("#".concat(e.id)).remove()},_reset:function(){this.$nav.empty(),this.$content.empty()},_change:function(e){this.$("#tab-".concat(e.id))[e.get("hidden")?"hide":"show"]()},_template:function(){return i()("<div/>").addClass("tabbable tabs-left").append(i()("<ul/>").attr("style","display: flex").addClass("tab-navigation nav nav-tabs")).append(i()("<div/>").addClass("tab-content"))},_template_tab:function(e){var t=i()("<li/>").addClass("nav-item").attr("id","tab-".concat(e.id)).append(i()("<a/>").addClass("nav-link").attr("id","tab-title-link-".concat(e.id)).attr("href","javascript:void(0);")),n=t.find("a");return e.icon&&n.append(i()("<i/>").addClass("fa").addClass(e.icon)),e.title&&n.append(i()("<span/>").attr("id","tab-title-text-".concat(e.id)).addClass("tab-title-text ml-1").append(e.title)),t}});t.a={View:r}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(8),l=n(5);t.a=s.a.Model.extend({initialize:function(){this.active={},this.last=null},execute:function(e){var t=this,n=r.a.uid(),a=e.length>0,o=Object(l.a)();this.active[n]=!0;var s=i.a.Deferred();s.promise().always((function(){delete t.active[n],a&&o.emit.debug("deferred::execute()","".concat(this.state().charAt(0).toUpperCase()+this.state().slice(1)," ").concat(n))})),i.a.when(this.last).always((function(){t.active[n]?(a&&o.emit.debug("deferred::execute()","Running ".concat(n)),e(s),!a&&s.resolve()):s.reject()})),this.last=s.promise()},reset:function(){var e=Object(l.a)();for(var t in e.emit.debug("deferred::execute()","Reset"),this.active)this.active[t]=!1},ready:function(){return i.a.isEmptyObject(this.active)}})},function(e,t,n){"use strict";t.a={tool:"fa-wrench",data_input:"fa-file-o",data_collection_input:"fa-folder-o",subworkflow:"fa-sitemap fa-rotate-270",parameter_input:"fa-pencil",pause:"fa-pause"}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(11),s=n(18),r=n(73);o.default.use(s.a);var l={props:{initialMarkdown:{required:!0,type:String},toolbar:{type:Boolean,default:!1},showMarkdownHelp:{type:Function,required:!1},onupdate:{type:Function}},data:function(){return{input:this.initialMarkdown}},methods:{update:i.a.debounce((function(e){this.onupdate&&this.onupdate(this.input)}),300),insertMarkdown:function(e){var t=this.$refs.editor;!function(e,t){if(document.selection)e.focus(),document.selection.createRange().text=t;else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,a=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(a,e.value.length)}else e.value+=t}(t,e),o.default.nextTick((function(){var e=new Event("input");t.dispatchEvent(e)}))},insertGalaxyMarkdownBlock:function(e){this.insertMarkdown("".concat("```","galaxy\n").concat(e,"\n").concat("```","\n"))},_selectDataset:function(e){var t=this;Object(r.c)((function(n){var a=n.id;t.insertGalaxyMarkdownBlock("".concat(e,"(history_dataset_id=").concat(a,")"))}),{multiple:!1,format:null,library:!1})},selectDataset:function(){this._selectDataset("history_dataset_display")},selectDatasetForImage:function(){this._selectDataset("history_dataset_as_image")},selectDatasetCollection:function(){var e=this;Object(r.b)((function(t){e.insertGalaxyMarkdownBlock("history_dataset_collection_display(history_dataset_collection_id=".concat(t.id,")"))}),{})},selectWorkflow:function(){var e=this;Object(r.d)((function(t){e.insertGalaxyMarkdownBlock("workflow_display(workflow_id=".concat(t.id,")"))}),{})}}},c=(n(240),n(6)),d=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex",flex:"1","flex-direction":"column"}},[e.toolbar?n("ul",{ref:"menu",staticClass:"galaxymark-toolbar"},[n("li",[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa-2x fa fa-file",attrs:{href:"#",title:"Insert Dataset"},on:{click:e.selectDataset}})]),e._v(" "),n("li",[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa-2x fa fa-folder",attrs:{href:"#",title:"Insert Dataset Collection"},on:{click:e.selectDatasetCollection}})]),e._v(" "),n("li",[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa-2x fa fa-sitemap fa-rotate-270",attrs:{href:"#",title:"Inseert Workflow Preview"},on:{click:e.selectWorkflow}})]),e._v(" "),n("li",[n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa-2x fa fa-image",attrs:{href:"#",title:"Insert Dataset as an Image"},on:{click:e.selectDatasetForImage}})]),e._v(" "),n("li",[null!=e.showMarkdownHelp?n("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa-2x fa fa-question",attrs:{href:"#",title:"Show Galaxy Markdown Help"},on:{click:e.showMarkdownHelp}}):e._e()])]):e._e(),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"editor",staticClass:"markdown-textarea",attrs:{id:"workflow-report-editor"},domProps:{value:e.input},on:{input:[function(t){t.target.composing||(e.input=t.target.value)},e.update]}})])}),[],!1,null,"5d1f5ac8",null);t.a=d.exports},,,,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(5),d=160,u=800,h=l.a.View.extend({initialize:function(e){this.view=e.view,this.hidden=!1,this.saved_size=null,this.hiddenByTool=!1},$center:function(){return this.$el.siblings("#center")},$toggleButton:function(){return this.$(".unified-panel-footer > .panel-collapse")},render:function(){var e=this,t=this.view,n=this.view.model.attributes||{};if("left"===this.id&&this.view&&this.view.isVueWrapper){var a=document.createElement("div");this.$el.replaceWith(a),this.view.mountVueComponent(a)}else this.$el.html(this._templatePanel(this.id)),s.a.each(n.buttons,(function(t){e.$(".panel-header-buttons").append(t.$el)})),this.$el.addClass(n.cls),this.$(".panel-header-text").html(s.a.escape(n.title)),this.$(".unified-panel-body").append(t.$el),t.render()},_templatePanel:function(){return[this._templateHeader(),this._templateBody(),this._templateFooter()].join("")},_templateHeader:function(e){return'<div class="unified-panel-header" unselectable="on">\n                    <div class="unified-panel-header-inner">\n                        <div class="panel-header-buttons"/>\n                        <div class="panel-header-text"/>\n                    </div>\n                </div>\n                <div class="unified-panel-controls"/>'},_templateBody:function(e){return'<div class="unified-panel-body"/>'},_templateFooter:function(e){return['<div class="unified-panel-footer">','<div class="panel-collapse ',s.a.escape(this.id),'"/>','<div class="drag"/>',"</div>"].join("")},events:{"mousedown .unified-panel-footer > .drag":"_mousedownDragHandler","click .unified-panel-footer > .panel-collapse":"toggle"},_mousedownDragHandler:function(e){var t=this,n="left"===this.id,a=e.pageX,o=t.$el.width();function s(e){var i=e.pageX-a,s=n?o+i:o-i;s=Math.min(u,Math.max(d,s)),t.resize(s)}i()("#dd-helper").show().on("mousemove",s).one("mouseup",(function(e){i()(this).hide().off("mousemove",s)}))},resize:function(e){return this.$el.css("width",e),this.$center().css(this.id,e),this},show:function(){var e=this;if(this.hidden&&!this.motionQueue){this.motionQueue=2;var t={},n=this.id;t[n]=0,this.$el.css(n,-this.saved_size).css("width",this.saved_size).animate(t,"fast",(function(){return e.motionQueue--})),t[n]=this.saved_size,this.$center().animate(t,"fast",(function(){return e.motionQueue--})),this.hidden=!1,this.$toggleButton().removeClass("hidden")}return this},hide:function(){var e=this;if(!this.hidden&&!this.motionQueue){this.motionQueue=2;var t={},n=this.id;this.saved_size=this.$el.width(),t[n]=-this.saved_size,this.resize(0),this.$el.animate(t,"fast",(function(){return e.motionQueue--})),t[n]=0,this.$center().animate(t,"fast",(function(){return e.motionQueue--})),this.hidden=!0,this.$toggleButton().addClass("hidden")}return this},toggle:function(e){return this.hidden?this.show():this.hide(),this.hiddenByTool=!1,this},handle_minwidth_hint:function(e){return this.$center().width()-(this.hidden?this.saved_size:0)<e?this.hidden||(this.toggle(),this.hiddenByTool=!0):this.hiddenByTool&&(this.toggle(),this.hiddenByTool=!1),self},force_panel:function(e){return"show"==e?this.show():"hide"==e?this.hide():self},toString:function(){return"SidePanel(".concat(this.id,")")}}),p=h.extend({id:"left"}),m=h.extend({id:"right"}),f=l.a.View.extend({initialize:function(e){this.setElement(i()(this.template())),this.$frame=this.$(".center-frame"),this.$panel=this.$(".center-panel"),this.$frame.on("load",this._iframeChangeHandler.bind(this))},_iframeChangeHandler:function(e){var t=e.currentTarget,n=t.contentWindow&&t.contentWindow.location,a=Object(c.a)();try{n&&n.host&&(i()(t).show(),this.$panel.empty().hide(),a.trigger("center-frame:load",{fullpath:n.pathname+n.search+n.hash,pathname:n.pathname,search:n.search,hash:n.hash}))}catch(t){console.warn("_iframeChangeHandler error",e,n,a)}},display:function(e){var t,n=Object(c.a)(),a=this.$frame[0].contentWindow||{};try{t=a.onbeforeunload&&a.onbeforeunload()}catch(e){a={},console.warn("Iframe unload exception.  This can happen when external content is displayed in the page iframe and causes a CORS violation -- likely harmless.")}t&&!confirm(t)||(a.onbeforeunload=void 0,this.$frame.attr("src","about:blank").hide(),this.$panel.empty().scrollTop(0).append(e.$el||e).show(),n.trigger("center-panel:load",e))},template:function(){return'<div class="center-container"><iframe id="galaxy_main" name="galaxy_main" frameborder="0" class="center-frame" title="galaxy main frame"/><div class="center-panel" /></div>'},toString:function(){return"CenterPanel"}});t.a={SidePanel:h,LeftPanel:p,RightPanel:m,CenterPanel:f}},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(0),i=n.n(a),o=n(29);function s(){i()(".embedded-item").each((function(){var e=i()(this);if(!e.hasClass("history")){var t=function(){var t=e.find("input[type=hidden]").val();t||(t=e.data("item-url")),i.a.trim(e.find(".item-content").text())?(e.find(".summary-content").hide("fast"),e.find(".expanded-content").show("fast"),e.find(".toggle-expand").hide(),e.find(".toggle").show()):i.a.ajax({type:"GET",url:t,error:function(){alert("Getting item content failed.")},success:function(t){e.find(".summary-content").hide("fast"),e.find(".item-content").html(t),e.find(".expanded-content").show("fast"),e.find(".toggle-expand").hide(),e.find(".toggle").show(),Object(o.a)()}})},n=function(){e.find(".expanded-content").hide("fast"),e.find(".summary-content").show("fast"),e.find(".toggle").hide(),e.find(".toggle-expand").show()};i()(this).find(".toggle-expand").click((function(){return t(),!1})),i()(this).find(".toggle").click((function(){return n(),!1})),i()(this).find(".toggle-embed").click((function(){return e.find(".expanded-content").is(":visible")?n():t(),!1})),i()(this).hasClass("expanded")&&t()}}))}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(4),s=1e3;try{s=localStorage.getItem("collectionFuzzyCountDefault")||s}catch(e){console.debug(e)}var r={defaults:{history_id:null,history_content_type:null,hid:null,visible:!0},idAttribute:"type_id",hidden:function(){return!this.get("visible")},isVisible:function(e,t){var n=!0;return e||!this.get("deleted")&&!this.get("purged")||(n=!1),t||this.get("visible")||(n=!1),n},urlRoot:"".concat(Object(o.getAppRoot)(),"api/histories/"),url:function(){var e=this.get("history_content_type"),t=this.get("history_id"),n=this.get("id"),a="".concat(this.urlRoot).concat(t,"/contents/").concat(e,"s/").concat(n);return"dataset_collection"==e&&(a="".concat(a,"?view=element-reference&fuzzy_count=").concat(s)),a},hide:function(e){return this.get("visible")?this.save({visible:!1},e):i.a.when()},unhide:function(e){return this.get("visible")?i.a.when():this.save({visible:!0},e)},toString:function(){return[this.get("type_id"),this.get("hid"),this.get("name")].join(":")}};t.a={HistoryContentMixin:r}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(41),d=n(51),u=n(7),h=n(2),p=n.n(h),m=l.a.View.extend(u.a.LoggableMixin).extend({_logNamespace:"collections",tagName:"li",className:"collection-element",initialize:function(e){this.element=e.element||{},this.identifier=e.identifier},render:function(){return this.$el.attr("data-element-id",this.element.id).html(this.template({identifier:this.identifier,element:this.element})),this},template:s.a.template(['<span class="identifier"><%- identifier %></span>','<span class="name"><%- element.name %></span>'].join("")),destroy:function(){this.off(),this.$el.remove()},toString:function(){return"DatasetCollectionElementView()"}}),f=c.a.ListCollectionCreator,_=f.extend({elementViewClass:m,collectionClass:d.a.HistoryDatasetCollection,className:"pair-collection-creator collection-creator flex-row-container",_mangleDuplicateNames:function(){},render:function(e,t){return 2===this.workingElements.length?f.prototype.render.call(this,e,t):this._renderInvalid(e,t)},_renderList:function(e,t){var n=this,a=i()("<div/>"),o=n.$list();s.a.each(this.elementViews,(function(e){e.destroy(),n.removeElementView(e)})),a.append(n._createForwardElementView().$el),a.append(n._createReverseElementView().$el),o.empty().append(a.children()),s.a.invoke(n.elementViews,"render")},_createForwardElementView:function(){return this._createElementView(this.workingElements[0],{identifier:"forward"})},_createReverseElementView:function(){return this._createElementView(this.workingElements[1],{identifier:"reverse"})},_createElementView:function(e,t){var n=new this.elementViewClass(s.a.extend(t,{element:e}));return this.elementViews.push(n),n},swap:function(){this.workingElements=[this.workingElements[1],this.workingElements[0]],this._renderList()},events:s.a.extend(s.a.clone(f.prototype.events),{"click .swap":"swap"}),templates:s.a.extend(s.a.clone(f.prototype.templates),{middle:s.a.template(['<div class="collection-elements-controls">','<a class="swap" href="javascript:void(0);" title="',p()("Swap forward and reverse datasets"),'">',p()("Swap"),"</a>","</div>",'<div class="collection-elements scroll-container flex-row">',"</div>"].join("")),helpContent:s.a.template(["<p>",p()(["Pair collections are permanent collections containing two datasets: one forward and one reverse. ","Often these are forward and reverse reads. The pair collections can be passed to tools and ","workflows in order to have analyses done on both datasets. This interface allows ","you to create a pair, name it, and swap which is forward and which reverse."].join("")),"</p>","<ul>","<li>",p()(['Click the <i data-target=".swap">"Swap"</i> link to make your forward dataset the reverse ',"and the reverse dataset forward."].join("")),"</li>","<li>",p()(['Click the <i data-target=".cancel-create">"Cancel"</i> button to exit the interface.'].join("")),"</li>","</ul><br />","<p>",p()(['Once your collection is complete, enter a <i data-target=".collection-name">name</i> and ','click <i data-target=".create-collection">"Create list"</i>.'].join("")),"</p>"].join("")),invalidInitial:s.a.template(['<div class="header flex-row no-flex">','<div class="alert alert-warning" style="display: block">','<span class="alert-message">',"<% if( _.size( problems ) ){ %>",p()("The following selections could not be included due to problems"),"<ul><% _.each( problems, function( problem ){ %>","<li><b><%- problem.element.name %></b>: <%- problem.text %></li>","<% }); %></ul>","<% } else if( _.size( elements ) === 0 ){ %>",p()("No datasets were selected"),".","<% } else if( _.size( elements ) === 1 ){ %>",p()("Only one dataset was selected"),": <%- elements[0].name %>","<% } else if( _.size( elements ) > 2 ){ %>",p()("Too many datasets were selected"),': <%- _.pluck( elements, "name" ).join( ", ") %>',"<% } %>","<br />",p()("Two (and only two) elements are needed for the pair"),". ",p()("You may need to "),'<a class="cancel-create" href="javascript:void(0)">',p()("cancel"),"</a> ",p()("and reselect new elements"),".","</span>","</div>","</div>",'<div class="footer flex-row no-flex">','<div class="actions clear vertically-spaced">','<div class="other-options float-left">','<button class="cancel-create btn" tabindex="-1">',p()("Cancel"),"</button>","</div>","</div>","</div>"].join(""))}),toString:function(){return"PairCollectionCreator"}}),g=function(e,t){return(t=t||{}).title=p()("Create a collection from a pair of datasets"),c.a.collectionCreatorModal(e,t,_)};t.a={PairCollectionCreator:_,pairCollectionCreatorModal:g,createPairCollection:function(e,t){var n=e.toJSON(),a=!t;return g(n,{defaultHideSourceItems:t,creationFn:function(t,n,i){return t=[{name:"forward",src:"hda",id:t[0].id},{name:"reverse",src:"hda",id:t[1].id}],e.createHDCA(t,"paired",n,i,a)}})}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(3),l=n.n(r),c=n(7),d=l.a.Collection.extend({initialize:function(e,t){l.a.Collection.prototype.initialize.call(this,e,t),this.setOrder(t.order||this.order,{silent:!0})},_setUpListeners:function(){return this.on({"changed-order":this.sort})},fetch:function(e){return e=this._buildFetchOptions(e),l.a.Collection.prototype.fetch.call(this,e)},_buildFetchOptions:function(e){(e=s.a.clone(e)||{}).traditional=!0,e.data=e.data||this._buildFetchData(e);var t=this._buildFetchFilters(e);return s.a.isEmpty(t)||s.a.extend(e.data,this._fetchFiltersToAjaxData(t)),e},_buildFetchData:function(e){var t={};return this.order&&(t.order=this.order),s.a.defaults(s.a.pick(e,this._fetchParams),t)},_fetchParams:["order","limit","offset","view","keys"],_buildFetchFilters:function(e){return s.a.clone(e.filters||{})},_fetchFiltersToAjaxData:function(e){var t={q:[],qv:[]};return s.a.each(e,(function(e,n){void 0!==e&&""!==e&&(!0===e&&(e="True"),!1===e&&(e="False"),null===e&&(e="None"),t.q.push(n),t.qv.push(e))})),t},reset:function(e,t){return this.allFetched=!1,l.a.Collection.prototype.reset.call(this,e,t)},order:null,comparators:{update_time:c.a.buildComparator("update_time",{ascending:!1}),"update_time-asc":c.a.buildComparator("update_time",{ascending:!0}),create_time:c.a.buildComparator("create_time",{ascending:!1}),"create_time-asc":c.a.buildComparator("create_time",{ascending:!0})},setOrder:function(e,t){t=t||{};var n=this.comparators[e];if(s.a.isUndefined(n))throw new Error("unknown order: ".concat(e));if(n!==this.comparator)return this.order=e,this.comparator=n,t.silent||this.trigger("changed-order",t),this}}),u=d.extend({limitPerPage:500,initialize:function(e,t){d.prototype.initialize.call(this,e,t),this.currentPage=t.currentPage||0},getTotalItemCount:function(){return this.length},shouldPaginate:function(){return this.getTotalItemCount()>=this.limitPerPage},getLastPage:function(){return Math.floor(this.getTotalItemCount()/this.limitPerPage)},getPageCount:function(){return this.getLastPage()+1},getPageLimitOffset:function(e){return e=this.constrainPageNum(e),{limit:this.limitPerPage,offset:e*this.limitPerPage}},constrainPageNum:function(e){return Math.max(0,Math.min(e,this.getLastPage()))},fetchPage:function(e,t){var n=this;return e=n.constrainPageNum(e),n.currentPage=e,t=s.a.defaults(t||{},n.getPageLimitOffset(e)),n.trigger("fetching-more"),n.fetch(t).always((function(){n.trigger("fetching-more-done")}))},fetchCurrentPage:function(e){return this.fetchPage(this.currentPage,e)},fetchPrevPage:function(e){return this.fetchPage(this.currentPage-1,e)},fetchNextPage:function(e){return this.fetchPage(this.currentPage+1,e)}}),h=d.extend({limitOnFirstFetch:null,limitPerFetch:100,initialize:function(e,t){d.prototype.initialize.call(this,e,t),this.limitOnFirstFetch=t.limitOnFirstFetch||this.limitOnFirstFetch,this.limitPerFetch=t.limitPerFetch||this.limitPerFetch,this.allFetched=!1,this.lastFetched=t.lastFetched||0},_buildFetchOptions:function(e){return e.remove=e.remove||!1,d.prototype._buildFetchOptions.call(this,e)},fetchFirst:function(e){return e=e?s.a.clone(e):{},this.allFetched=!1,this.lastFetched=0,this.fetchMore(s.a.defaults(e,{reset:!0,limit:this.limitOnFirstFetch}))},fetchMore:function(e){e=s.a.clone(e||{});var t=this;if(!e.reset&&t.allFetched)return i.a.when();e.reset?e.offset=0:void 0===e.offset&&(e.offset=t.lastFetched);var n=e.limit=e.limit||t.limitPerFetch||null;return t.trigger("fetching-more"),t.fetch(e).always((function(){t.trigger("fetching-more-done")})).done((function(e){var a=s.a.isArray(e)?e.length:0;t.lastFetched+=a,(!n||a<n)&&(t.allFetched=!0,t.trigger("all-fetched",this))}))},fetchAll:function(e){e=e||{};var t=this;return(e=s.a.pick(e,"silent")).filters={},t.fetch(e).done((function(){t.allFetched=!0,t.trigger("all-fetched",t)}))}});t.a={ControlledFetchCollection:d,PaginatedCollection:u,InfinitelyScrollingCollection:h}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(1),l=n.n(r),c=n(33),d=n(105),u=n(7),h=n(2),p=n.n(h),m=(n(154),s.a.View.extend(u.a.LoggableMixin).extend({_logNamespace:"list",viewClass:c.c.ListItemView,collectionClass:s.a.Collection,tagName:"div",className:"list-panel",fxSpeed:"fast",emptyMsg:p()("This list is empty"),noneFoundMsg:p()("No matching items found"),searchPlaceholder:p()("search"),initialize:function(e,t){(e=e||{}).logger&&(this.logger=e.logger),this.log("".concat(this,".initialize:"),e),this.fxSpeed=l.a.has(e,"fxSpeed")?e.fxSpeed:this.fxSpeed,this.filters=[],this.searchFor=e.searchFor||"",this.selecting=void 0===e.selecting||e.selecting,this.selected=e.selected||[],this.lastSelected=null,this.dragItems=e.dragItems||!1,this.viewClass=e.viewClass||this.viewClass,this.views=[],this.collection=e.collection||this._createDefaultCollection(),this.filters=e.filters||[],this.$scrollContainer=e.$scrollContainer||this.$scrollContainer,this.title=e.title||"",this.subtitle=e.subtitle||"",this._setUpListeners()},_setUpListeners:function(){return this.off(),this.on({error:function(e,t,n,a,i){console.error(e,t,n,a,i)},loading:function(){this._showLoadingIndicator("loading...",40)},"loading-done":function(){this._hideLoadingIndicator(40)}}),this.once("rendered",(function(){this.trigger("rendered:initial",this)})),this._setUpCollectionListeners(),this._setUpViewListeners(),this},_createDefaultCollection:function(){return new this.collectionClass([])},_setUpCollectionListeners:function(){return this.log("".concat(this,"._setUpCollectionListeners"),this.collection),this.stopListening(this.collection),this.listenTo(this.collection,{error:function(e,t,n,a,i){this.trigger("error",e,t,n,a,i)},update:function(e,t){var n=t.changes;return t.renderAll||n.added.length+n.removed.length>1?this.renderItems():1===n.added.length?this.addItemView(l.a.first(n.added),e,t):1===n.removed.length?this.removeItemView(l.a.first(n.removed),e,t):void 0}}),this},_setUpViewListeners:function(){this.log("".concat(this,"._setUpViewListeners")),this.on({"view:selected":function(e,t){if(t&&t.shiftKey&&this.lastSelected){var n=this.viewFromModelId(this.lastSelected);n&&this.selectRange(e,n)}else t&&t.altKey&&!this.selecting&&this.showSelectors();this.selected.push(e.model.id),this.lastSelected=e.model.id},"view:de-selected":function(e,t){this.selected=l.a.without(this.selected,e.model.id)}})},render:function(e){this.log("".concat(this,".render"),e);var t=this._buildNewRender();return this._setUpBehaviors(t),this._queueNewRender(t,e),this},_buildNewRender:function(){this.debug("".concat(this,"(ListPanel)._buildNewRender"));var e=i()(this.templates.el({},this));return this._renderControls(e),this._renderTitle(e),this._renderSubtitle(e),this._renderSearch(e),this.renderItems(e),e},_renderControls:function(e){this.debug("".concat(this,"(ListPanel)._renderControls"));var t=i()(this.templates.controls({},this));return e.find(".controls").replaceWith(t),t},_renderTitle:function(e){},_renderSubtitle:function(e){},_queueNewRender:function(e,t){t=void 0===t?this.fxSpeed:t;var n=this;n.log("_queueNewRender:",e,t),i()(n).queue("fx",[function(e){n.$el.fadeOut(t,e)},function(t){n._swapNewRender(e),t()},function(e){n.$el.fadeIn(t,e)},function(e){n.trigger("rendered",n),e()}])},_swapNewRender:function(e){return this.$el.empty().attr("class",this.className).append(e.children()),this.selecting&&this.showSelectors(0),this},_setUpBehaviors:function(e){return e=e||this.$el,this.$controls(e).find("[title]").tooltip(),this._renderMultiselectActionMenu(e),this},_renderMultiselectActionMenu:function(e){var t=(e=e||this.$el).find(".list-action-menu"),n=this.multiselectActions();if(!n.length)return t.empty();var a=i()('<div class="list-action-menu btn-group">\n                    <button class="list-action-menu-btn btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                        '.concat(p()("For all selected"),'...\n                    </button>\n                    <div class="dropdown-menu float-right" role="menu"/>\n                </div>')),o=n.map((function(e){var t='<a class="dropdown-item" href="javascript:void(0);">'.concat(e.html,"</a>");return i()(t).click((function(t){return t.preventDefault(),e.func(t)}))}));return a.find(".dropdown-menu").append(o),t.replaceWith(a),a},multiselectActions:function(){return[]},$scrollContainer:function(e){return(e||this.$el).parent().parent()},$controls:function(e){return(e||this.$el).find("> .controls")},$list:function(e){return(e||this.$el).find("> .list-items")},$messages:function(e){return(e||this.$el).find("> .controls .messages")},$emptyMessage:function(e){return(e||this.$el).find("> .empty-message")},renderItems:function(e){e=e||this.$el;var t=this;t.log("".concat(this,".renderItems"),e);var n=t.$list(e);t.freeViews();var a=t._filterCollection();return t.views=a.map((function(e){return t._createItemView(e)})),n.empty(),t.views.length&&t._attachItems(e),t._renderEmptyMessage(e).toggle(!t.views.length),t.trigger("views:ready",t.views),t.views},_filterCollection:function(){return this.collection.filter(l.a.bind(this._filterItem,this))},_filterItem:function(e){return l.a.every(this.filters.map((function(t){return t.call(e)})))&&(!this.searchFor||e.matchesAll(this.searchFor))},_createItemView:function(e){var t=new(this._getItemViewClass(e))(l.a.extend(this._getItemViewOptions(e),{model:e}));return this._setUpItemViewListeners(t),t},_destroyItemView:function(e){this.stopListening(e),this.views=l.a.without(this.views,e)},_destroyItemViews:function(e){var t=this;return t.views.forEach((function(e){t.stopListening(e)})),t.views=[],t},freeViews:function(){return this._destroyItemViews()},_getItemViewClass:function(e){return this.viewClass},_getItemViewOptions:function(e){return{fxSpeed:this.fxSpeed,expanded:!1,selectable:this.selecting,selected:l.a.contains(this.selected,e.id),draggable:this.dragItems}},_setUpItemViewListeners:function(e){var t=this;return this.listenTo(e,"all",(function(){var e=Array.prototype.slice.call(arguments,0);e[0]="view:".concat(e[0]),t.trigger.apply(t,e)})),this.listenTo(e,"draggable:dragstart",(function(e,t){var n={},a=this.getSelectedModels();n=a.length?a.toJSON():[t.model.toJSON()],e.dataTransfer.setData("text",JSON.stringify(n))}),this),t},_attachItems:function(e){var t=this;return this.$list(e).append(this.views.map((function(e){return t._renderItemView$el(e)}))),this},_renderItemView$el:function(e){return e.render(0).$el},_renderEmptyMessage:function(e){this.debug("_renderEmptyMessage",e,this.searchFor);var t=this.searchFor?this.noneFoundMsg:this.emptyMsg;return this.$emptyMessage(e).text(t)},expandAll:function(){l.a.each(this.views,(function(e){e.expand()}))},collapseAll:function(){l.a.each(this.views,(function(e){e.collapse()}))},addItemView:function(e,t,n){var a=this,o=a._filterCollection().indexOf(e);if(-1!==o){var s=a._createItemView(e);return i()(s).queue("fx",[function(e){a.$emptyMessage().is(":visible")?a.$emptyMessage().fadeOut(a.fxSpeed,e):e()},function(e){a._attachView(s,o),e()}]),s}},_attachView:function(e,t,n){n=!!l.a.isUndefined(n)||n,t=t||0;var a=this;return a.views.splice(t,0,e),a._insertIntoListAt(t,a._renderItemView$el(e).hide()),a.trigger("view:attached",e),n?e.$el.slideDown(a.fxSpeed,(function(){a.trigger("view:attached:rendered")})):(e.$el.show(),a.trigger("view:attached:rendered")),e},_insertIntoListAt:function(e,t){var n=this.$list();return 0===e?n.prepend(t):n.children().eq(e-1).after(t),t},removeItemView:function(e,t,n){var a=this,o=l.a.find(a.views,(function(t){return t.model===e}));if(o)return a.views=l.a.without(a.views,o),a.trigger("view:removed",o),i()({}).queue("fx",[function(e){o.$el.fadeOut(a.fxSpeed,e)},function(e){o.remove(),a.trigger("view:removed:rendered"),a.views.length?e():a._renderEmptyMessage().fadeIn(a.fxSpeed,e)}]),o},viewFromModelId:function(e){return l.a.find(this.views,(function(t){return t.model.id===e}))},viewFromModel:function(e){return e?this.viewFromModelId(e.id):void 0},viewsWhereModel:function(e){return this.views.filter((function(t){return l.a.isMatch(t.model.attributes,e)}))},viewRange:function(e,t){if(e===t)return e?[e]:[];var n=this.views.indexOf(e),a=this.views.indexOf(t);return-1===n||-1===a?n===a?[]:-1===n?[t]:[e]:n<a?this.views.slice(n,a+1):this.views.slice(a,n+1)},_renderSearch:function(e){return e.find(".controls .search-input").searchInput({placeholder:this.searchPlaceholder,initialVal:this.searchFor,onfirstsearch:l.a.bind(this._firstSearch,this),onsearch:l.a.bind(this.searchItems,this),onclear:l.a.bind(this.clearSearch,this),advsearchlink:!0}),e},_firstSearch:function(e){return this.log("onFirstSearch",e),this.searchItems(e)},searchItems:function(e,t){if(this.log("searchItems",e,this.searchFor,t),!t&&this.searchFor===e)return this;this.searchFor=e,this.renderItems(),this.trigger("search:searching",e,this);var n=this.$("> .controls .search-query");return n.val()!==e&&n.val(e),this},clearSearch:function(e){return this.searchFor="",this.trigger("search:clear",this),this.$("> .controls .search-query").val(""),this.renderItems(),this},THROTTLE_SELECTOR_FX_AT:20,showSelectors:function(e){e=void 0!==e?e:this.fxSpeed,this.selecting=!0,this.$(".list-actions").slideDown(e),e=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:e,l.a.each(this.views,(function(t){t.showSelector(e)}))},hideSelectors:function(e){e=void 0!==e?e:this.fxSpeed,this.selecting=!1,this.$(".list-actions").slideUp(e),e=this.views.length>=this.THROTTLE_SELECTOR_FX_AT?0:e,l.a.each(this.views,(function(t){t.hideSelector(e)})),this.selected=[],this.lastSelected=null},toggleSelectors:function(){this.selecting?this.hideSelectors():this.showSelectors()},selectAll:function(e){l.a.each(this.views,(function(t){t.select(e)}))},deselectAll:function(e){this.lastSelected=null,l.a.each(this.views,(function(t){t.deselect(e)}))},selectRange:function(e,t){var n=this.viewRange(e,t);return l.a.each(n,(function(e){e.select()})),n},getSelectedViews:function(){return l.a.filter(this.views,(function(e){return e.selected}))},getSelectedModels:function(){return new this.collection.constructor(l.a.map(this.getSelectedViews(),(function(e){return e.model})))},_showLoadingIndicator:function(e,t,n){this.debug("_showLoadingIndicator",this.indicator,e,t,n),t=void 0!==t?t:this.fxSpeed,this.indicator||(this.indicator=new d.a.LoadingIndicator(this.$el),this.debug("\t created",this.indicator)),this.$el.is(":visible")?(this.$el.fadeOut(t),this.indicator.show(e,t,n)):this.indicator.show(0,n)},_hideLoadingIndicator:function(e,t){this.debug("_hideLoadingIndicator",this.indicator,e,t),e=void 0!==e?e:this.fxSpeed,this.indicator&&this.indicator.hide(e,t)},scrollPosition:function(){return this.$scrollContainer().scrollTop()},scrollTo:function(e,t){return t=t||0,this.$scrollContainer().animate({scrollTop:e},t),this},scrollToTop:function(e){return this.scrollTo(0,e)},scrollToItem:function(e,t){return this},scrollToId:function(e,t){return this.scrollToItem(this.viewFromModelId(e),t)},events:{"click .select-all":"selectAll","click .deselect-all":"deselectAll"},toString:function(){return"ListPanel(".concat(this.collection,")")}}));m.prototype.templates={el:u.a.wrapTemplate(["<div>",'<div class="controls"></div>','<div class="list-items"></div>','<div class="empty-message infomessagesmall"></div>',"</div>"]),controls:u.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- view.title %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',p()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',p()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"])};var f,_=m.extend({modelCollectionKey:"contents",initialize:function(e){m.prototype.initialize.call(this,e),this.selecting=void 0!==e.selecting&&e.selecting,this.setModel(this.model,e)},setModel:function(e,t){if(t=t||{},this.debug("".concat(this,".setModel:"),e,t),this.freeModel(),this.freeViews(),e){var n=this.model?this.model.get("id"):null;this.model=e,this.logger&&(this.model.logger=this.logger),this._setUpModelListeners(),this.stopListening(this.collection),this.collection=this.model[this.modelCollectionKey]||t.collection||this._createDefaultCollection(),this._setUpCollectionListeners(),n&&e.get("id")!==n&&this.trigger("new-model",this)}return this},freeModel:function(){return this.model&&this.stopListening(this.model),this},_setUpModelListeners:function(){return this.log("".concat(this,"._setUpModelListeners"),this.model),this.listenTo(this.model,"error",(function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("error"),this.trigger.apply(this,e)}),this),this.logger&&this.listenTo(this.model,"all",(function(e){this.info("".concat(this,"(model)"),e,arguments)})),this},_renderControls:function(e){this.debug("".concat(this,"(ModelListPanel)._renderControls"));var t=this.model?this.model.toJSON():{},n=i()(this.templates.controls(t,this));return e.find(".controls").replaceWith(n),n},toString:function(){return"ModelListPanel(".concat(this.model,")")}});_.prototype.templates=(f=u.a.wrapTemplate(['<div class="controls">','<div class="title">','<div class="name"><%- model.name %></div>',"</div>",'<div class="subtitle"><%- view.subtitle %></div>','<div class="actions"></div>','<div class="messages"></div>','<div class="search">','<div class="search-input"></div>',"</div>",'<div class="list-actions">','<div class="btn-group">','<button class="select-all btn btn-secondary"','data-mode="select">',p()("All"),"</button>",'<button class="deselect-all btn btn-secondary"','data-mode="select">',p()("None"),"</button>","</div>",'<div class="list-action-menu btn-group">',"</div>","</div>","</div>"]),l.a.extend(l.a.clone(m.prototype.templates),{controls:f})),t.a={ListPanel:m,ModelListPanel:_}},function(e,t,n){"use strict";var a,i=n(1),o=n.n(i),s=n(58),r=n(7),l=n(2),c=n.n(l),d=s.b.DatasetListItemView,u=d.extend({className:"".concat(d.prototype.className," history-content"),initialize:function(e,t){d.prototype.initialize.call(this,e,t)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDAListItemView(".concat(e,")")}});u.prototype.templates=(a=o.a.extend({},d.prototype.templates.warnings,{hidden:r.a.wrapTemplate(["<% if( !dataset.visible ){ %>",'<div class="hidden-msg warningmessagesmall">',c()("This dataset has been hidden"),"</div>","<% } %>"],"dataset")}),o.a.extend({},d.prototype.templates,{titleBar:function(e){return'\n        <div class="title-bar clear" tabindex="0">\n            <span class="state-icon"></span>\n            <div class="title">\n                <span class="hid">'.concat(e.hid,'</span>\n                <span class="name">').concat(o.a.escape(e.name),'</span>\n            </div>\n            </br>\n            <div class="nametags"></div>\n        </div>\n    ')},warnings:a})),t.a={HDAListItemView:u}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(3),s=n.n(o),r=n(7),l=n(2),c=n.n(l),d=(n(103),s.a.View.extend(r.a.LoggableMixin).extend(r.a.HiddenUntilActivatedViewMixin).extend({tagName:"div",className:"annotation-display",initialize:function(e){e=e||{},this.tooltipConfig=e.tooltipConfig||{placement:"bottom"},this.listenTo(this.model,"change:annotation",(function(){this.render()})),this.hiddenUntilActivated(e.$activator,e)},render:function(){var e=this;return this.$el.html(this._template()),this.$annotation().make_text_editable({use_textarea:!0,on_finish:function(t){e.$annotation().text(t),e.model.save({annotation:t},{silent:!0}).fail((function(){e.$annotation().text(e.model.previous("annotation"))}))}}),this},_template:function(){var e=this.model.get("annotation");return['<label class="prompt">',c()("Annotation"),"</label>",'<div class="annotation">',i.a.escape(e),"</div>"].join("")},$annotation:function(){return this.$el.find(".annotation")},remove:function(){this.$annotation.off(),this.stopListening(this.model),s.a.View.prototype.remove.call(this)},toString:function(){return["AnnotationEditor(","".concat(this.model),")"].join("")}}));t.a={AnnotationEditor:d}},function(e,t,n){"use strict";var a=n(2),i=n.n(a),o=n(1),s=n.n(o),r=n(0),l=n.n(r),c=n(3),d=n.n(c),u=n(5),h=n(8),p=n(90),m=n(16),f=d.a.View.extend({initialize:function(e){this.list={},this.options=h.a.merge(e,{title:i()("Repeat"),empty_text:"Not available.",max:null,min:null}),this.button_new=new m.a.Button({icon:"fa-plus",title:"Insert ".concat(this.options.title),tooltip:"Add new ".concat(this.options.title," block"),cls:"btn btn-secondary float-none form-repeat-add",onclick:function(){e.onnew&&e.onnew()}}),this.setElement(l()("<div/>").append(this.$list=l()("<div/>")).append(l()("<div/>").append(this.button_new.$el)))},size:function(){return s.a.size(this.list)},add:function(e){var t=Object(u.a)();if(e.id&&!this.list[e.id]){var n=new m.a.Button({icon:"fa-trash-o",tooltip:i()("Delete this repeat block"),cls:"ui-button-icon-plain form-repeat-delete",onclick:function(){e.ondel&&e.ondel()}}),a=new p.a.View({id:e.id,title:i()("placeholder"),cls:e.cls||"ui-portlet-section",operations:{button_delete:n}});a.append(e.$el),a.$el.addClass("section-row").hide(),this.list[e.id]=a,this.$list.append(a.$el.fadeIn("fast")),this.options.max>0&&this.size()>=this.options.max&&this.button_new.disable(),this._refresh()}else t.emit.debug("form-repeat::add()","Duplicate or invalid repeat block id.")},del:function(e){var t=Object(u.a)();this.list[e]?(this.$list.find("#".concat(e)).remove(),delete this.list[e],this.button_new.enable(),this._refresh()):t.emit.debug("form-repeat::del()","Invalid repeat block id.")},delAll:function(){for(var e in this.list)this.del(e)},hideOptions:function(){this.button_new.$el.hide(),s.a.each(this.list,(function(e){e.hideOperation("button_delete")})),s.a.isEmpty(this.list)&&this.$el.append(l()("<div/>").addClass("form-text text-muted").html(this.options.empty_text))},_refresh:function(){var e=0;for(var t in this.list){var n=this.list[t];n.title("".concat(++e,": ").concat(this.options.title)),n[this.size()>this.options.min?"showOperation":"hideOperation"]("button_delete")}}});t.a={View:f}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(5);var u=function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;var n,a,i=[];for(n=0;n<=t.length;n++)i[n]=[n];for(a=0;a<=e.length;a++)i[0][a]=a;for(n=1;n<=t.length;n++)for(a=1;a<=e.length;a++)t.charAt(n-1)===e.charAt(a-1)?i[n][a]=i[n-1][a-1]:i[n][a]=Math.min(i[n-1][a-1]+1,Math.min(i[n][a-1]+1,i[n-1][a]+1));return i[t.length][e.length]};var h=function(e,t){var n,a,i=/(-?[0-9.]+)/g,o=e.toString().toLowerCase()||"",s=t.toString().toLowerCase()||"",r=String.fromCharCode(0),l=o.replace(i,"".concat(r,"$1").concat(r)).split(r),c=s.replace(i,"".concat(r,"$1").concat(r)).split(r),d=new Date(o).getTime(),u=d?new Date(s).getTime():null;if(u){if(d<u)return-1;if(d>u)return 1}for(var h=0,p=Math.max(l.length,c.length);h<p;h++){if((n=parseFloat(l[h])||l[h])<(a=parseFloat(c[h])||c[h]))return-1;if(n>a)return 1}return 0},p=n(93),m=n(7),f=n(2),_=n.n(f),g=(n(179),l.a.View.extend(m.a.LoggableMixin).extend({_logNamespace:"collections",tagName:"li",className:"dataset paired",initialize:function(e){this.pair=e.pair||{}},template:i.a.template(['<span class="forward-dataset-name flex-column"><%- pair.forward.name %></span>','<span class="pair-name-column flex-column">','<span class="pair-name"><%- pair.name %></span>',"</span>",'<span class="reverse-dataset-name flex-column"><%- pair.reverse.name %></span>'].join("")),render:function(){this.dragStartHandler=i.a.bind(this._dragstart,this),this.dragEndHandler=i.a.bind(this._dragend,this);var e=this.$el.attr("draggable",!0).data("pair",this.pair).html(this.template({pair:this.pair})).addClass("flex-column-container").get(0);return e.addEventListener("dragstart",this.dragStartHandler,!1),e.addEventListener("dragend",this.dragEndHandler,!1),this},events:{dragover:"_sendToParent",drop:"_sendToParent"},_dragstart:function(e){e.currentTarget.style.opacity="0.4",e.originalEvent&&(e=e.originalEvent),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify(this.pair)),this.$el.parent().trigger("pair.dragstart",[this])},_dragend:function(e){e.currentTarget.style.opacity="1.0",this.$el.parent().trigger("pair.dragend",[this])},_sendToParent:function(e){this.$el.parent().trigger(e)},toString:function(){return"PairView(".concat(this.pair.name,")")}}));function v(e){(e=e||{}).createPair=e.createPair||function(e){var t=(e=e||{}).listA.splice(e.indexA,1)[0],n=e.listB.splice(e.indexB,1)[0],a=e.listB.indexOf(t),i=e.listA.indexOf(n);return-1!==a&&e.listB.splice(a,1),-1!==i&&e.listA.splice(i,1),this._pair(t,n,{silent:!0})};var t=[];function n(){return t.length||(t=[new RegExp(this.filters[0]),new RegExp(this.filters[1])]),t}return e.preprocessMatch=e.preprocessMatch||function(e){var t=n.call(this);return i.a.extend(e,{matchTo:e.matchTo.name.replace(t[0],""),possible:e.possible.name.replace(t[1],"")})},function(t){this.debug("autopair _strategy ---------------------------");var n,a=(t=t||{}).listA,i=t.listB,o=0,s={score:0,index:null},r=[];for(this.debug("starting list lens:",a.length,i.length),this.debug("bestMatch (starting):",JSON.stringify(s,null,"  "));o<a.length;){var l=a[o];for(s.score=0,n=0;n<i.length;n++){var c=i[n];if(this.debug("".concat(o,":").concat(l.name)),this.debug("".concat(n,":").concat(c.name)),a[o]!==i[n]&&(s=e.match.call(this,e.preprocessMatch.call(this,{matchTo:l,possible:c,index:n,bestMatch:s})),this.debug("bestMatch:",JSON.stringify(s,null,"  ")),1===s.score)){this.debug("breaking early due to perfect match");break}}var d=e.scoreThreshold.call(this);if(this.debug("scoreThreshold:",d),this.debug("bestMatch.score:",s.score),s.score>=d?r.push(e.createPair.call(this,{listA:a,indexA:o,listB:i,indexB:s.index})):o+=1,!a.length||!i.length)return r}return this.debug("paired:",JSON.stringify(r,null,"  ")),this.debug("autopair _strategy ---------------------------"),r}}var y=l.a.View.extend(m.a.LoggableMixin).extend(p.a.CollectionCreatorMixin).extend({_logNamespace:"collections",className:"list-of-pairs-collection-creator collection-creator flex-row-container",initialize:function(e){this.metric("PairedCollectionCreator.initialize",e),e=i.a.defaults(e,{datasets:[],filters:this.DEFAULT_FILTERS,automaticallyPair:!0,strategy:"lcs",matchPercentage:.9,twoPassAutopairing:!0}),this.initialList=e.datasets,this.historyId=e.historyId,this.filters=this.commonFilters[e.filters]||this.commonFilters[this.DEFAULT_FILTERS],i.a.isArray(e.filters)&&(this.filters=e.filters),this.automaticallyPair=e.automaticallyPair,this.strategy=this.strategies[e.strategy]||this.strategies[this.DEFAULT_STRATEGY],i.a.isFunction(e.strategy)&&(this.strategy=e.strategy),this.matchPercentage=e.matchPercentage,this.twoPassAutopairing=e.twoPassAutopairing,this.removeExtensions=!0,this.oncancel=e.oncancel,this.oncreate=e.oncreate,this.autoscrollDist=e.autoscrollDist||24,this.unpairedPanelHidden=!1,this.pairedPanelHidden=!1,this.$dragging=null,this.blocking=!1,this._setUpCommonSettings(e),this._setUpBehaviors(),this._dataSetUp()},commonFilters:{illumina:["_1","_2"],Rs:["_R1","_R2"]},DEFAULT_FILTERS:"illumina",strategies:{simple:"autopairSimple",lcs:"autopairLCS",levenshtein:"autopairLevenshtein"},DEFAULT_STRATEGY:"lcs",_dataSetUp:function(){this.paired=[],this.unpaired=[],this.selectedIds=[],this._sortInitialList(),this._ensureIds(),this.unpaired=this.initialList.slice(0),this.automaticallyPair&&(this.autoPair(),this.once("rendered:initial",(function(){this.trigger("autopair")})))},_sortInitialList:function(){this._sortDatasetList(this.initialList)},_sortDatasetList:function(e){return e.sort((function(e,t){return h(e.name,t.name)})),e},_ensureIds:function(){return this.initialList.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"id")||(e.id=i.a.uniqueId())})),this.initialList},_splitByFilters:function(){var e=this.filters.map((function(e){return new RegExp(e)})),t=[[],[]];return this.unpaired.forEach((function(n){e.forEach((function(e,a){(function(e,t){return t.test(e.name)})(n,e)&&t[a].push(n)}))})),t},_addToUnpaired:function(e){var t=this;this.unpaired.splice(function n(a,i){if(a===i)return a;var o=Math.floor((i-a)/2)+a,s=h(e.name,t.unpaired[o].name);if(s<0)return n(a,o);if(s>0)return n(o+1,i);for(;t.unpaired[o]&&t.unpaired[o].name===e.name;)o++;return o}(0,this.unpaired.length),0,e)},autoPair:function(e){var t=this._splitByFilters(),n=[];return this.twoPassAutopairing&&(n=this.autopairSimple({listA:t[0],listB:t[1]}),t=this._splitByFilters()),e=e||this.strategy,t=this._splitByFilters(),n=n.concat(this[e].call(this,{listA:t[0],listB:t[1]}))},autopairSimple:v({scoreThreshold:function(){return.6},match:function(e){return(e=e||{}).matchTo===e.possible?{index:e.index,score:1}:e.bestMatch}}),autopairLevenshtein:v({scoreThreshold:function(){return this.matchPercentage},match:function(e){var t=1-u((e=e||{}).matchTo,e.possible)/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),autopairLCS:v({scoreThreshold:function(){return this.matchPercentage},match:function(e){e=e||{};var t=this._naiveStartingAndEndingLCS(e.matchTo,e.possible).length/Math.max(e.matchTo.length,e.possible.length);return t>e.bestMatch.score?{index:e.index,score:t}:e.bestMatch}}),_naiveStartingAndEndingLCS:function(e,t){for(var n="",a="",i=0,o=0;i<e.length&&i<t.length&&e[i]===t[i];)n+=e[i],i+=1;if(i===e.length)return e;if(i===t.length)return t;for(i=e.length-1,o=t.length-1;i>=0&&o>=0&&e[i]===t[o];)a=[e[i],a].join(""),i-=1,o-=1;return n+a},_pair:function(e,t,n){n=n||{},this.debug("_pair:",e,t);var a=this._createPair(e,t,n.name);return this.paired.push(a),this.unpaired=i.a.without(this.unpaired,e,t),n.silent||this.trigger("pair:new",a),a},_createPair:function(e,t,n){if(!e||!t||e===t)throw new Error("Bad pairing: ".concat([JSON.stringify(e),JSON.stringify(t)]));return{forward:e,name:n=n||this._guessNameForPair(e,t),reverse:t}},_guessNameForPair:function(e,t,n){n=void 0!==n?n:this.removeExtensions;var a=e.name,i=t.name,o=this._naiveStartingAndEndingLCS(a.replace(new RegExp(this.filters[0]),""),i.replace(new RegExp(this.filters[1]),"")),s=o.lastIndexOf("/");if(s>0){var r=o.slice(0,s+1);o=o.replace(r,""),a=a.replace(c,""),i=i.replace(c,"")}if(n){var l=o.lastIndexOf(".");if(l>0){var c=o.slice(l,o.length);o=o.replace(c,""),a=a.replace(c,""),i=i.replace(c,"")}}return o||"".concat(a," & ").concat(i)},_unpair:function(e,t){if(t=t||{},!e)throw new Error("Bad pair: ".concat(JSON.stringify(e)));return this.paired=i.a.without(this.paired,e),this._addToUnpaired(e.forward),this._addToUnpaired(e.reverse),t.silent||this.trigger("pair:unpair",[e]),e},unpairAll:function(){for(var e=[];this.paired.length;)e.push(this._unpair(this.paired[0],{silent:!0}));this.trigger("pair:unpair",e)},_pairToJSON:function(e){return{collection_type:"paired",src:"new_collection",name:e.name,element_identifiers:[{name:"forward",id:e.forward.id,src:e.forward.src||"hda"},{name:"reverse",id:e.reverse.id,src:e.reverse.src||"hda"}]}},createList:function(e){var t=this,n="".concat(Object(c.getAppRoot)(),"api/histories/").concat(this.historyId,"/contents/dataset_collections"),a={type:"dataset_collection",collection_type:"list:paired",hide_source_items:t.hideOriginals||!1,copy_elements:t.copyElements,name:i.a.escape(e||t.$(".collection-name").val()),element_identifiers:t.paired.map((function(e){return t._pairToJSON(e)}))};return t.blocking=!0,s.a.ajax(n,{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(a)}).always((function(){t.blocking=!1})).fail((function(e,n,a){t._ajaxErrHandler(e,n,a)})).done((function(e,n,a){t.trigger("collection:created",e,n,a),t.metric("collection:created",e),"function"==typeof t.oncreate&&t.oncreate.call(this,e,n,a)}))},_ajaxErrHandler:function(e,t,n){this.error(e,t,n);var a=_()("An error occurred while creating this collection");e&&(0===e.readyState&&0===e.status?a+=": ".concat(_()("Galaxy could not be reached and may be updating.")).concat(_()(" Try again in a few minutes.")):e.responseJSON?a+="<br /><pre>".concat(JSON.stringify(e.responseJSON),"</pre>"):a+=": ".concat(n)),this._showAlert(a,"alert-danger")},render:function(e,t){return this.$el.empty().html(this.templates.main()),this._renderHeader(e),this._renderMiddle(e),this._renderFooter(e),this._addPluginComponents(),this.trigger("rendered",this),this},_renderHeader:function(e,t){var n=this.$(".header").empty().html(this.templates.header()).find(".help-content").prepend(s()(this.templates.helpContent()));return this._renderFilters(),n},_renderFilters:function(){return this.$(".forward-column .column-header input").val(this.filters[0]).add(this.$(".reverse-column .column-header input").val(this.filters[1]))},_renderMiddle:function(e,t){var n=this.$(".middle").empty().html(this.templates.middle());return this.unpairedPanelHidden?this.$(".unpaired-columns").hide():this.pairedPanelHidden&&this.$(".paired-columns").hide(),this._renderUnpaired(),this._renderPaired(),n},_renderUnpaired:function(e,t){var n,a,i=this,o=[],s=this._splitByFilters();this.$(".forward-column .title").text([s[0].length,_()("unpaired forward")].join(" ")),this.$(".forward-column .unpaired-info").text(this._renderUnpairedDisplayStr(this.unpaired.length-s[0].length)),this.$(".reverse-column .title").text([s[1].length,_()("unpaired reverse")].join(" ")),this.$(".reverse-column .unpaired-info").text(this._renderUnpairedDisplayStr(this.unpaired.length-s[1].length)),this.$(".unpaired-columns .column-datasets").empty(),this.$(".autopair-link").toggle(0!==this.unpaired.length),0!==this.unpaired.length?(a=s[1].map((function(e,t){return void 0!==s[0][t]&&s[0][t]!==e&&o.push(i._renderPairButton()),i._renderUnpairedDataset(e)})),(n=s[0].map((function(e){return i._renderUnpairedDataset(e)}))).length||a.length?(this.$(".unpaired-columns .forward-column .column-datasets").append(n).add(this.$(".unpaired-columns .paired-column .column-datasets").append(o)).add(this.$(".unpaired-columns .reverse-column .column-datasets").append(a)),this._adjUnpairedOnScrollbar()):this._renderUnpairedNotShown()):this._renderUnpairedEmpty()},_renderUnpairedDisplayStr:function(e){return["(",e," ",_()("filtered out"),")"].join("")},_renderUnpairedDataset:function(e){return s()("<li/>").attr("id","dataset-".concat(e.id)).addClass("dataset unpaired").attr("draggable",!0).addClass(e.selected?"selected":"").append(s()("<span/>").addClass("dataset-name").text(e.name)).data("dataset",e)},_renderPairButton:function(){return s()("<li/>").addClass("dataset unpaired").append(s()("<span/>").addClass("dataset-name").text(_()("Pair these datasets")))},_renderUnpairedEmpty:function(){var e=s()('<div class="empty-message"></div>').text("(".concat(_()("no remaining unpaired datasets"),")"));return this.$(".unpaired-columns .paired-column .column-datasets").empty().prepend(e),e},_renderUnpairedNotShown:function(){var e=s()('<div class="empty-message"></div>').text("(".concat(_()("no datasets were found matching the current filters"),")"));return this.$(".unpaired-columns .paired-column .column-datasets").empty().prepend(e),e},_adjUnpairedOnScrollbar:function(){var e=this.$(".unpaired-columns").last(),t=this.$(".unpaired-columns .reverse-column .dataset").first();if(t.length){var n=e.offset().left+e.outerWidth(),a=t.offset().left+t.outerWidth(),i=Math.floor(n)-Math.floor(a);this.$(".unpaired-columns .forward-column").css("margin-left",i>0?i:0)}},_renderPaired:function(e,t){if(this.$(".paired-column-title .title").text([this.paired.length,_()("paired")].join(" ")),this.$(".unpair-all-link").toggle(0!==this.paired.length),0!==this.paired.length){this.$(".remove-extensions-link").show(),this.$(".paired-columns .column-datasets").empty();var n=this;this.paired.forEach((function(e,t){var a=new g({pair:e});n.$(".paired-columns .column-datasets").append(a.render().$el).append(['<button class="unpair-btn">','<span class="fa fa-unlink" title="',_()("Unpair"),'"></span>',"</button>"].join(""))}))}else this._renderPairedEmpty()},_renderPairedEmpty:function(){var e=s()('<div class="empty-message"></div>').text("(".concat(_()("no paired datasets yet"),")"));return this.$(".paired-columns .column-datasets").empty().prepend(e),e},footerSettings:{".hide-originals":"hideOriginals",".remove-extensions":"removeExtensions"},_addPluginComponents:function(){this._chooseFiltersPopover(".choose-filters-link"),this.$(".help-content i").hoverhighlight(".collection-creator","rgba( 64, 255, 255, 1.0 )")},_chooseFiltersPopover:function(e){var t=s()(i.a.template(['<div class="choose-filters">','<div class="help">',_()("Choose from the following filters to change which unpaired reads are shown in the display"),":</div>",i.a.values(this.commonFilters).map((function(e){return t=e[0],n=e[1],['<button class="filter-choice btn" ','data-forward="',t,'" data-reverse="',n,'">',_()("Forward"),": ",t,", ",_()("Reverse"),": ",n,"</button>"].join("");var t,n})).join(""),"</div>"].join(""))({}));return this.$(e).popover({container:".collection-creator",placement:"bottom",html:!0,content:t})},_validationWarning:function(e,t){"name"===e&&(e=this.$(".collection-name").add(this.$(".collection-name-prompt")),this.$(".collection-name").focus().select()),t?(e=e||this.$(".".concat("validation-warning"))).removeClass("validation-warning"):e.addClass("validation-warning")},_setUpBehaviors:function(){return this.once("rendered",(function(){this.trigger("rendered:initial",this)})),this.on("pair:new",(function(){this._renderUnpaired(),this._renderPaired(),this.$(".paired-columns").scrollTop(8e6)})),this.on("pair:unpair",(function(e){this._renderUnpaired(),this._renderPaired(),this.splitView()})),this.on("filter-change",(function(){this.filters=[this.$(".forward-unpaired-filter input").val(),this.$(".reverse-unpaired-filter input").val()],this.metric("filter-change",this.filters),this._renderFilters(),this._renderUnpaired()})),this.on("autopair",(function(){var e;this._renderUnpaired(),this._renderPaired();var t=null;this.paired.length?(t="alert-success",e="".concat(this.paired.length," ").concat(_()("pairs created")),this.unpaired.length||(e+=": ".concat(_()("all datasets have been successfully paired")),this.hideUnpaired(),this.$(".collection-name").focus())):e=_()(["Could not automatically create any pairs from the given dataset names.","You may want to choose or enter different filters and try auto-pairing again.","Close this message using the X on the right to view more help."].join(" ")),this._showAlert(e,t)})),this},events:{"click .more-help":"_clickMoreHelp","click .less-help":"_clickLessHelp","click .main-help":"_toggleHelp","click .header .alert button":"_hideAlert","click .forward-column .column-title":"_clickShowOnlyUnpaired","click .reverse-column .column-title":"_clickShowOnlyUnpaired","click .unpair-all-link":"_clickUnpairAll","change .forward-unpaired-filter input":function(e){this.trigger("filter-change")},"focus .forward-unpaired-filter input":function(e){s()(e.currentTarget).select()},"click .autopair-link":"_clickAutopair","click .choose-filters .filter-choice":"_clickFilterChoice","click .clear-filters-link":"_clearFilters","change .reverse-unpaired-filter input":function(e){this.trigger("filter-change")},"focus .reverse-unpaired-filter input":function(e){s()(e.currentTarget).select()},"click .forward-column .dataset.unpaired":"_clickUnpairedDataset","click .reverse-column .dataset.unpaired":"_clickUnpairedDataset","click .paired-column .dataset.unpaired":"_clickPairRow","click .unpaired-columns":"clearSelectedUnpaired","mousedown .unpaired-columns .dataset":"_mousedownUnpaired","click .paired-column-title":"_clickShowOnlyPaired","mousedown .flexible-partition-drag":"_startPartitionDrag","click .paired-columns .dataset.paired":"selectPair","click .paired-columns":"clearSelectedPaired","click .paired-columns .pair-name":"_clickPairName","click .unpair-btn":"_clickUnpair","dragover .paired-columns .column-datasets":"_dragoverPairedColumns","drop .paired-columns .column-datasets":"_dropPairedColumns","pair.dragstart .paired-columns .column-datasets":"_pairDragstart","pair.dragend   .paired-columns .column-datasets":"_pairDragend","change .remove-extensions":function(e){this.toggleExtensions()},"change .collection-name":"_changeName","keydown .collection-name":"_nameCheckForEnter","change .hide-originals":"_changeHideOriginals","click .cancel-create":"_cancelCreate","click .create-collection":"_clickCreate"},_clickShowOnlyUnpaired:function(e){this.$(".paired-columns").is(":visible")?this.hidePaired():this.splitView()},_clickShowOnlyPaired:function(e){this.$(".unpaired-columns").is(":visible")?this.hideUnpaired():this.splitView()},hideUnpaired:function(e,t){this.unpairedPanelHidden=!0,this.pairedPanelHidden=!1,this._renderMiddle(e,t)},hidePaired:function(e,t){this.unpairedPanelHidden=!1,this.pairedPanelHidden=!0,this._renderMiddle(e,t)},splitView:function(e,t){return this.unpairedPanelHidden=this.pairedPanelHidden=!1,this._renderMiddle(e,t),this},_clickUnpairAll:function(e){this.metric("unpairAll"),this.unpairAll()},_clickAutopair:function(e){var t=this.autoPair();this.metric("autopair",t.length,this.unpaired.length),this.trigger("autopair")},_clickFilterChoice:function(e){var t=s()(e.currentTarget);this.$(".forward-unpaired-filter input").val(t.data("forward")),this.$(".reverse-unpaired-filter input").val(t.data("reverse")),this._hideChooseFilters(),this.trigger("filter-change")},_hideChooseFilters:function(){this.$(".choose-filters-link").popover("hide"),this.$(".popover").css("display","none")},_clearFilters:function(e){this.$(".forward-unpaired-filter input").val(""),this.$(".reverse-unpaired-filter input").val(""),this.trigger("filter-change")},_clickUnpairedDataset:function(e){return e.stopPropagation(),this.toggleSelectUnpaired(s()(e.currentTarget))},toggleSelectUnpaired:function(e,t){t=t||{};var n=e.data("dataset"),a=void 0!==t.force?t.force:!e.hasClass("selected");return e.length&&void 0!==n?(a?(e.addClass("selected"),t.waitToPair||this.pairAllSelected()):e.removeClass("selected"),e):e},pairAllSelected:function(e){e=e||{};var t=this,n=[],a=[],i=[];return t.$(".unpaired-columns .forward-column .dataset.selected").each((function(){n.push(s()(this).data("dataset"))})),t.$(".unpaired-columns .reverse-column .dataset.selected").each((function(){a.push(s()(this).data("dataset"))})),n.length=a.length=Math.min(n.length,a.length),n.forEach((function(e,n){try{i.push(t._pair(e,a[n],{silent:!0}))}catch(e){t.error(e)}})),i.length&&!e.silent&&this.trigger("pair:new",i),i},clearSelectedUnpaired:function(){this.$(".unpaired-columns .dataset.selected").removeClass("selected")},_mousedownUnpaired:function(e){if(e.shiftKey){var t=this,n=s()(e.target).addClass("selected"),a=function(e){t.$(e.target).filter(".dataset").addClass("selected")};n.parent().on("mousemove",a),s()(document).one("mouseup",(function(e){n.parent().off("mousemove",a),t.pairAllSelected()}))}},_clickPairRow:function(e){var t=s()(e.currentTarget).index(),n=s()(".unpaired-columns .forward-column .dataset").eq(t).data("dataset"),a=s()(".unpaired-columns .reverse-column .dataset").eq(t).data("dataset");this._pair(n,a)},_startPartitionDrag:function(e){var t=this,n=e.pageY;function a(e){var a=e.pageY-n;t.adjPartition(a)||s()("body").trigger("mouseup"),t._adjUnpairedOnScrollbar(),n+=a}s()("body").css("cursor","ns-resize"),t.$(".flexible-partition-drag").css("color","black"),s()("body").mousemove(a),s()("body").one("mouseup",(function(e){t.$(".flexible-partition-drag").css("color",""),s()("body").css("cursor","").unbind("mousemove",a)}))},adjPartition:function(e){var t=this.$(".unpaired-columns"),n=this.$(".paired-columns"),a=parseInt(t.css("height"),10),i=parseInt(n.css("height"),10);a=Math.max(10,a+e),i-=e;var o=e<0;if(o){if(this.unpairedPanelHidden)return!1;if(a<=10)return this.hideUnpaired(),!1}else this.unpairedPanelHidden&&(t.show(),this.unpairedPanelHidden=!1);if(o)this.pairedPanelHidden&&(n.show(),this.pairedPanelHidden=!1);else{if(this.pairedPanelHidden)return!1;if(i<=15)return this.hidePaired(),!1}return t.css({height:"".concat(a,"px"),flex:"0 0 auto"}),!0},selectPair:function(e){e.stopPropagation(),s()(e.currentTarget).toggleClass("selected")},clearSelectedPaired:function(e){this.$(".paired-columns .dataset.selected").removeClass("selected")},_clickPairName:function(e){e.stopPropagation();var t=s()(e.currentTarget),n=t.parent().parent().index(".dataset.paired"),a=this.paired[n],i=prompt("Enter a new name for the pair:",a.name);i&&(a.name=i,a.customizedName=!0,t.text(a.name))},_clickUnpair:function(e){var t=Math.floor(s()(e.currentTarget).index(".unpair-btn"));this._unpair(this.paired[t])},_dragoverPairedColumns:function(e){e.preventDefault();var t=this.$(".paired-columns .column-datasets");this._checkForAutoscroll(t,e.originalEvent.clientY);var n=this._getNearestPairedDatasetLi(e.originalEvent.clientY);s()(".element-drop-placeholder").remove();var a=s()('<div class="element-drop-placeholder"></div>');n.length?n.before(a):t.append(a)},_checkForAutoscroll:function(e,t){var n=e.offset(),a=e.scrollTop(),i=t-n.top,o=n.top+e.outerHeight()-t;i>=0&&i<this.autoscrollDist?e.scrollTop(a-2):o>=0&&o<this.autoscrollDist&&e.scrollTop(a+2)},_getNearestPairedDatasetLi:function(e){for(var t=this.$(".paired-columns .column-datasets li").toArray(),n=0;n<t.length;n++){var a=s()(t[n]),i=a.offset().top,o=Math.floor(a.outerHeight()/2)+4;if(i+o>e&&i-o<e)return a}return s()()},_dropPairedColumns:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move";var t=this._getNearestPairedDatasetLi(e.originalEvent.clientY);return t.length?this.$dragging.insertBefore(t):this.$dragging.insertAfter(this.$(".paired-columns .unpair-btn").last()),this._syncPairsToDom(),!1},_syncPairsToDom:function(){var e=[];this.$(".paired-columns .dataset.paired").each((function(){e.push(s()(this).data("pair"))})),this.paired=e,this._renderPaired()},_pairDragstart:function(e,t){t.$el.addClass("selected"),this.$dragging=this.$(".paired-columns .dataset.selected")},_pairDragend:function(e,t){s()(".element-drop-placeholder").remove(),this.$dragging=null},toggleExtensions:function(e){var t=this;t.removeExtensions=void 0!==e?e:!t.removeExtensions,i.a.each(t.paired,(function(e){e.customizedName||(e.name=t._guessNameForPair(e.forward,e.reverse))})),t._renderPaired(),t._renderFooter()},_printList:function(e){var t=this;i.a.each(e,(function(n){e===t.paired?t._printPair(n):t.debug(n)}))},_printPair:function(e){this.debug(e.forward.name,e.reverse.name,": ->",e.name)},toString:function(){return"PairedCollectionCreator"},templates:i.a.extend({},p.a.CollectionCreatorMixin._creatorTemplates,{header:i.a.template(['<div class="main-help well clear">','<a class="more-help" href="javascript:void(0);" role="button">',_()("More help"),"</a>",'<div class="help-content">','<a class="less-help" href="javascript:void(0);" role="button">',_()("Less"),"</a>","</div>","</div>",'<div class="alert alert-dismissable">','<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>','<span class="alert-message"></span>',"</div>",'<div class="column-headers vertically-spaced flex-column-container">','<div class="forward-column flex-column column">','<div class="column-header">','<div class="column-title">','<span class="title">',_()("Unpaired forward"),"</span>",'<span class="title-info unpaired-info"></span>',"</div>",'<div class="unpaired-filter forward-unpaired-filter float-left search-input">','<input class="search-query" placeholder="',_()("Filter this list"),'" />',"</div>","</div>","</div>",'<div class="paired-column flex-column no-flex column">','<div class="column-header">','<a class="choose-filters-link" href="javascript:void(0)" role="button">',_()("Choose filters"),"</a>",'<a class="clear-filters-link" href="javascript:void(0);" role="button">',_()("Clear filters"),"</a><br />",'<a class="autopair-link" href="javascript:void(0);" role="button">',_()("Auto-pair"),"</a>","</div>","</div>",'<div class="reverse-column flex-column column">','<div class="column-header">','<div class="column-title">','<span class="title">',_()("Unpaired reverse"),"</span>",'<span class="title-info unpaired-info"></span>',"</div>",'<div class="unpaired-filter reverse-unpaired-filter float-left search-input">','<input class="search-query" placeholder="',_()("Filter this list"),'" />',"</div>","</div>","</div>","</div>"].join("")),middle:i.a.template(['<div class="unpaired-columns flex-column-container scroll-container flex-row">','<div class="forward-column flex-column column">','<ol class="column-datasets"></ol>',"</div>",'<div class="paired-column flex-column no-flex column">','<ol class="column-datasets"></ol>',"</div>",'<div class="reverse-column flex-column column">','<ol class="column-datasets"></ol>',"</div>","</div>",'<div class="flexible-partition">','<div class="flexible-partition-drag" title="',_()("Drag to change"),'"></div>','<div class="column-header">','<div class="column-title paired-column-title">','<span class="title"></span>',"</div>",'<a class="unpair-all-link" href="javascript:void(0);" role="button">',_()("Unpair all"),"</a>","</div>","</div>",'<div class="paired-columns flex-column-container scroll-container flex-row">','<ol class="column-datasets"></ol>',"</div>"].join("")),footer:i.a.template(['<div class="attributes clear">','<div class="clear">','<label class="setting-prompt float-right">',_()("Hide original elements"),"?",'<input class="hide-originals float-right" type="checkbox" />',"</label>",'<label class="setting-prompt float-right">',_()("Remove file extensions from pair names"),"?",'<input class="remove-extensions float-right" type="checkbox" />',"</label>","</div>",'<div class="clear">','<input class="collection-name form-control float-right" ','placeholder="',_()("Enter a name for your new list"),'" />','<div class="collection-name-prompt float-right">',_()("Name"),":</div>","</div>","</div>",'<div class="actions clear vertically-spaced">','<div class="other-options float-left">','<button class="cancel-create btn" tabindex="-1">',_()("Cancel"),"</button>",'<div class="create-other btn-group dropup">','<button class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">',_()("Create a different kind of collection"),' <span class="caret"></span>',"</button>",'<div class="dropdown-menu" role="menu">','<a class="dropdown-item" href="javascript:void(0)" role="button">',_()("Create a <i>single</i> pair"),"</a>",'<a class="dropdown-item" href="javascript:void(0)" role="button">',_()("Create a list of <i>unpaired</i> datasets"),"</a>","</div>","</div>","</div>",'<div class="main-options float-right">','<button class="create-collection btn btn-primary">',_()("Create list"),"</button>","</div>","</div>"].join("")),helpContent:i.a.template(["<p>",_()(["Collections of paired datasets are ordered lists of dataset pairs (often forward and reverse reads). ","These collections can be passed to tools and workflows in order to have analyses done on each member of ","the entire group. This interface allows you to create a collection, choose which datasets are paired, ","and re-order the final collection."].join("")),"</p>","<p>",_()(['Unpaired datasets are shown in the <i data-target=".unpaired-columns">unpaired section</i> ',"(hover over the underlined words to highlight below). ",'Paired datasets are shown in the <i data-target=".paired-columns">paired section</i>.',"<ul>To pair datasets, you can:","<li>Click a dataset in the ",'<i data-target=".unpaired-columns .forward-column .column-datasets,','.unpaired-columns .forward-column">forward column</i> ',"to select it then click a dataset in the ",'<i data-target=".unpaired-columns .reverse-column .column-datasets,','.unpaired-columns .reverse-column">reverse column</i>.',"</li>",'<li>Click one of the "Pair these datasets" buttons in the ','<i data-target=".unpaired-columns .paired-column .column-datasets,','.unpaired-columns .paired-column">middle column</i> ',"to pair the datasets in a particular row.","</li>",'<li>Click <i data-target=".autopair-link">"Auto-pair"</i> ',"to have your datasets automatically paired based on name.","</li>","</ul>"].join("")),"</p>","<p>",_()(["<ul>You can filter what is shown in the unpaired sections by:","<li>Entering partial dataset names in either the ",'<i data-target=".forward-unpaired-filter input">forward filter</i> or ','<i data-target=".reverse-unpaired-filter input">reverse filter</i>.',"</li>","<li>Choosing from a list of preset filters by clicking the ",'<i data-target=".choose-filters-link">"Choose filters" link</i>.',"</li>","<li>Entering regular expressions to match dataset names. See: ",'<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions"',' target="_blank">MDN\'s JavaScript Regular Expression Tutorial</a>. ',"Note: forward slashes (\\) are not needed.","</li>","<li>Clearing the filters by clicking the ",'<i data-target=".clear-filters-link">"Clear filters" link</i>.',"</li>","</ul>"].join("")),"</p>","<p>",_()(["To unpair individual dataset pairs, click the ",'<i data-target=".unpair-btn">unpair buttons ( <span class="fa fa-unlink"></span> )</i>. ','Click the <i data-target=".unpair-all-link">"Unpair all" link</i> to unpair all pairs.'].join("")),"</p>","<p>",_()(['You can include or remove the file extensions (e.g. ".fastq") from your pair names by toggling the ','<i data-target=".remove-extensions-prompt">"Remove file extensions from pair names?"</i> control.'].join("")),"</p>","<p>",_()(['Once your collection is complete, enter a <i data-target=".collection-name">name</i> and ','click <i data-target=".create-collection">"Create list"</i>. ',"(Note: you do not have to pair all unpaired datasets to finish.)"].join("")),"</p>"].join(""))})}),b=function(e,t){var n,a=Object(d.a)(),o=s.a.Deferred();if(t=i.a.defaults(t||{},{datasets:e,oncancel:function(){a.modal.hide(),o.reject("cancelled")},oncreate:function(e,t){a.modal.hide(),o.resolve(t)},title:_()("Create a collection of paired datasets")}),!a||!a.modal)throw new Error("Galaxy or Galaxy.modal not found");return n=new y(t),a.modal.show({title:t.title,body:n.$el,width:"80%",height:"800px",closing_events:!0}),n.render(),window.creator=n,o};t.a={PairedCollectionCreator:y,pairedCollectionCreatorModal:b,createListOfPairsCollection:function(e,t){var n=e.toJSON();return b(n,{historyId:e.historyId,defaultHideSourceItems:t,copyElements:!t})}}},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(1),s=n.n(o),r=n(91),l=n(5),c=n(71),d=n(53),u=n(94),h=d.a.DCListItemView,p=h.extend({initialize:function(e){h.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCListItemEdit(".concat(e,")")}}),m=d.a.DCEListItemView,f=m.extend({initialize:function(e){m.prototype.initialize.call(this,e)},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DCEListItemEdit(".concat(e,")")}}),_=u.a.DatasetListItemEdit.extend({initialize:function(e){u.a.DatasetListItemEdit.prototype.initialize.call(this,e)},_fetchModelDetails:function(){return this.model.inReadyState()&&!this.model.hasDetails()?this.model.fetch({silent:!0}):i.a.when()},_renderDeleteButton:function(){return null},toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"DatasetDCEListItemEdit(".concat(e,")")}});_.prototype.templates=s.a.extend({},u.a.DatasetListItemEdit.prototype.templates,{titleBar:d.a.DatasetDCEListItemView.prototype.templates.titleBar});var g={DCListItemEdit:p,DCEListItemEdit:f,DatasetDCEListItemEdit:_,NestedDCDCEListItemEdit:d.a.NestedDCDCEListItemView.extend({toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"NestedDCDCEListItemEdit(".concat(e,")")}})},v=n(62),y=n(2),b=n.n(y),w=(n(103),c.a.CollectionView),k=w.extend({DatasetDCEViewClass:g.DatasetDCEListItemEdit,NestedDCDCEViewClass:g.NestedDCDCEListItemEdit,getNestedDCDCEViewClass:function(){return g.NestedDCDCEListItemEdit.extend({foldoutPanelClass:k})},initialize:function(e){w.prototype.initialize.call(this,e)},_setUpBehaviors:function(e){var t=this;if(e=e||this.$el,w.prototype._setUpBehaviors.call(this,e),this.model){var n=Object(l.a)();if(n.user&&!n.user.isAnonymous()){this.tagsEditorShown=!0;var a=this;e.find("> .controls .name").attr("title",b()("Click to rename collection")).tooltip({placement:"bottom"}).make_text_editable({on_finish:function(e){var t=a.model.get("name");e&&e!==t?(a.$el.find("> .controls .name").text(e),a.model.save({name:e}).fail((function(){a.$el.find("> .controls .name").text(a.model.previous("name"))}))):a.$el.find("> .controls .name").text(t)}});var o=e.find(".tags-display")[0],s={model:this.model,disabled:!1,context:"collection-view-edit"},r=Object(v.b)(s,o);if(this.tagsEditorShown)i()(r.$el).hasClass("active")||(i()(r.$el).toggleClass("active"),t.tagsEditorShown=i()(r.$el).hasClass("active"))}}},toString:function(){return"CollectionViewEdit(".concat(this.model?this.model.get("name"):"",")")}}),M={CollectionViewEdit:k},x=r.a.HDCAListItemView,L=x.extend({initialize:function(e){x.prototype.initialize.call(this,e),this.purgeAllowed=e.purgeAllowed||!1},_getFoldoutPanelClass:function(){return M.CollectionViewEdit},_renderPrimaryActions:function(){return this.log("".concat(this,"._renderPrimaryActions")),x.prototype._renderPrimaryActions.call(this).concat([this._renderDeleteButton()])},_renderDeleteButton:function(){return i()('\n                <div class="dropdown">\n                    <a class="delete-btn icon-btn" title="'.concat(b()("Delete"),'" data-toggle="dropdown">\n                        <span class="fa fa-times"></span>\n                    </a>\n                    <div class="dropdown-menu" role="menu">\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection">\n                                ').concat(b()("Collection Only"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" class="dropdown-item delete-collection-and-datasets">\n                                ').concat(b()("Delete Datasets"),'\n                            </a>\n                            <a href="javascript:void(0)" role="button" style="display: ').concat(this.purgeAllowed?"inherit":"none",'" class="dropdown-item delete-collection-and-purge-datasets">\n                                ').concat(b()("Permanently Delete Datasets"),"\n                            </a>\n                    </div>\n                </div>"))},events:s.a.extend(s.a.clone(x.prototype.events),{"click .delete-collection":function(e){this.model.delete()},"click .delete-collection-and-datasets":function(e){this.model.delete(!0)},"click .delete-collection-and-purge-datasets":function(e){this.model.delete(!0,!0)}}),toString:function(){var e=this.model?"".concat(this.model):"(no model)";return"HDCAListItemEdit(".concat(e,")")}});t.a={HDCAListItemEdit:L}},function(e,t,n){"use strict";var a=n(2),i=n.n(a),o=n(1),s=n.n(o),r=n(0),l=n.n(r),c=n(3),d=n.n(c),u=n(4),h=(n(435),window.Tour);l.a.fn.tooltip.Constructor.Default.whiteList.button=["data-role"];var p=Object(u.getAppRoot)(),m={storage:window.sessionStorage,onEnd:function(){window.sessionStorage.removeItem("activeGalaxyTour")},delay:150,orphan:!0},f=function(e){return s.a.each(e.steps,(function(e){e.preclick&&(e.onShow=function(){s.a.each(e.preclick,(function(e){l()(e).click()}))}),e.postclick&&(e.onHide=function(){s.a.each(e.postclick,(function(e){l()(e).click()}))}),e.textinsert&&(e.onShown=function(){l()(e.element).val(e.textinsert).trigger("change")}),e.path&&(console.warn("This Galaxy Tour is attempting to use path navigation.  This is known to be unstable and can possibly get the Galaxy client 'stuck' in a tour, and at this time is not allowed."),delete e.path)})),e},_=d.a.Model.extend({urlRoot:"".concat(p,"api/tours")}),g=d.a.Collection.extend({url:"".concat(p,"api/tours"),model:_}),v=d.a.View.extend({title:i()("Tours"),initialize:function(){var e=this;this.setElement("<div/>"),this.model=new g,this.model.fetch({success:function(){e.render()},error:function(){console.error("Failed to fetch tours.")}})},render:function(){var e=s.a.template('\n    <h2>Galaxy Tours</h2>\n    <p>This page presents a list of interactive tours available on this Galaxy server.\n    Select any tour to get started (and remember, you can click \'End Tour\' at any time).</p>\n\n<div class="row mb-3">\n    <div class="col-12 btn-group" role="group" aria-label="Tag selector">\n        <% _.each(tourtagorder, function(tag) { %>\n        <button class="btn btn-primary tag-selector-button" tag-selector-button="<%- tag.key %>">\n            <%- tag.name %>\n        </button>\n        <% }); %>\n    </div>\n</div>\n\n<div class="row mb-3">\n    <div class="col-12">\n    <h4>Tours</h4>\n    <ul class="list-group">\n    <% _.each(tours, function(tour) { %>\n        <li class="list-group-item" tags="<%- tour.attributes.tags_lc %>">\n            <a href="/tours/<%- tour.id %>" class="tourItem" data-tour.id=<%- tour.id %>>\n                <%- tour.attributes.name || tour.id %>\n            </a>\n             - <%- tour.attributes.description || "No description given." %>\n             <% _.each(tour.attributes.tags, function(tag) { %>\n                <span class="badge badge-primary">\n                    <%- tag.charAt(0).toUpperCase() + tag.slice(1) %>\n                </span>\n             <% }); %>\n        </li>\n    <% }); %>\n    </ul>\n    </div>\n</div>'),t={};s.a.each(this.model.models,(function(e){e.attributes.tags_lc=[],null===e.attributes.tags?(void 0===t.Untagged&&(t.Untagged={name:"Untagged",tours:[]}),t.Untagged.tours.push(e)):s.a.each(e.attributes.tags,(function(n){var a=n.charAt(0).toUpperCase()+n.slice(1);void 0===t[a]&&(t[a]={name:a,tours:[]}),e.attributes.tags_lc.push(n.toLowerCase()),t[a].tours.push(e)}))}));var n=[];Object.keys(t).forEach((function(e,t){n.push({name:e,key:e.toLowerCase()})})),this.$el.html(e({tours:this.model.models,tourtags:t,tourtagorder:n})).on("click",".tourItem",(function(e){e.preventDefault(),b(l()(this).data("tour.id"))})).on("click",".tag-selector-button",(function(e){var t=l()(e.target),n=[];t.toggleClass("btn-primary"),t.toggleClass("btn-secondary"),l()(".tag-selector-button.btn-primary").each((function(){n.push(l()(this).attr("tag-selector-button"))})),l()("li.list-group-item").each((function(){if(l()(this).attr("tags")){var e=l()(this).attr("tags").split(",").filter((function(e){return n.indexOf(e.toLowerCase())>-1}));l()(this).css("display",e.length>0?"block":"none")}}))}))}});function y(e){var t=f(e);window.sessionStorage.setItem("activeGalaxyTour",JSON.stringify(e));var n=new h(s.a.extend({steps:t.steps},m));return n.init(),n.goTo(0),n.restart(),n}function b(e){var t="".concat(p,"api/tours/").concat(e);l.a.getJSON(t,(function(e){y(e)}))}t.a={ToursView:v,giveTourWithData:y,giveTourById:b,activeGalaxyTourRunner:function(){var e=JSON.parse(window.sessionStorage.getItem("activeGalaxyTour"));if(e&&(e=f(e))&&e.steps&&window&&window.self===window.top){var t=new h(s.a.extend({steps:e.steps},m));t.init(),t.restart()}}}},,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(151),l=n(1),c=n.n(l),d=n(4),u=n(5),h=n(2),p=n.n(h),m=s.a.View.extend({initialize:function(e){this.model=e&&e.model||new s.a.Model(e),this.setElement(i()("<div/>").addClass("corner frame")),this.$el.append(i()("<div/>").addClass("f-header corner").append(i()("<div/>").addClass("f-title")).append(i()("<div/>").addClass("f-icon f-close fa fa-close").tooltip({title:p()("Close"),placement:"bottom"}))).append(i()("<div/>").addClass("f-content")).append(i()("<div/>").addClass("f-resize f-icon corner fa fa-expand").tooltip({title:"Resize"})).append(i()("<div/>").addClass("f-cover")),this.$header=this.$(".f-header"),this.$title=this.$(".f-title"),this.$content=this.$(".f-content"),this.render(),this.listenTo(this.model,"change",this.render,this)},render:function(){var e=this,t=this.model.attributes;this.$title.html(c.a.escape(t.title)||""),this.$header.find(".f-icon-left").remove(),c.a.each(t.menu,(function(t){var n=i()("<div/>").addClass("f-icon-left").addClass(t.icon);c.a.isFunction(t.disabled)&&t.disabled()?n.attr("disabled",!0):n.on("click",(function(){t.onclick(e)})).tooltip({title:t.tooltip||"",placement:"bottom"}),e.$header.append(n)})),t.url?this.$content.html(i()("<iframe/>").addClass("f-iframe").attr("scrolling","auto").attr("src","".concat(t.url+(-1===t.url.indexOf("?")?"?":"&"),"widget=True"))):t.content&&(c.a.isFunction(t.content)?t.content(e.$content):e.$content.html(t.content))}}),f={View:s.a.View.extend({defaultOptions:{frame:{cols:6,rows:3},rows:1e3,cell:130,margin:5,scroll:5,top_min:40,frame_max:9,visible:!0},cols:0,top:0,top_max:0,frame_z:0,frame_counter:0,frame_uid:0,frame_list:{},frame_shadow:null,visible:!1,event:{},initialize:function(e){var t=this;this.options=c.a.defaults(e||{},this.defaultOptions),this.visible=this.options.visible,this.top=this.top_max=this.options.top_min,this.setElement(i()("<div/>").addClass("galaxy-frame").append(i()("<div/>").addClass("frame-background")).append(i()("<div/>").addClass("frame-menu frame-scroll-up fa fa-chevron-up fa-2x")).append(i()("<div/>").addClass("frame-menu frame-scroll-down fa fa-chevron-down fa-2x"))),this.frame_shadow=new s.a.View({el:i()("<div/>").addClass("corner frame-shadow")}),this.$el.append(this.frame_shadow.$el),this._frameInit(this.frame_shadow,"#frame-shadow"),this._frameResize(this.frame_shadow,{width:0,height:0}),this.frame_list["#frame-shadow"]=this.frame_shadow,this.visible?this.show():this.hide(),this._panelRefresh(),i()(window).resize((function(){t.visible&&t._panelRefresh()}))},render:function(){this.$(".frame-scroll-up")[this.top!=this.options.top_min?"show":"hide"](),this.$(".frame-scroll-down")[this.top!=this.top_max?"show":"hide"]()},add:function(e){var t=Object(u.a)();if(this.frame_counter>=this.options.frame_max)t.modal.show({title:p()("Warning"),body:"You have reached the maximum number of allowed frames (".concat(this.options.frame_max,")."),buttons:{Close:function(){t.modal.hide()}}});else{var n="#frame-".concat(this.frame_uid++);if(0!==i()(n).length)t.modal.show({title:p()("Error"),body:"This frame already exists. This page might contain multiple frame managers.",buttons:{Close:function(){t.modal.hide()}}});else{this.top=this.options.top_min;var a=new m(e);this.$el.append(a.$el),e.width=this._toPixelCoord("width",this.options.frame.cols),e.height=this._toPixelCoord("height",this.options.frame.rows),this.frame_z=parseInt(a.$el.css("z-index")),this.frame_list[n]=a,this.frame_counter++,this._frameInit(a,n),this._frameResize(a,{width:e.width,height:e.height}),this._frameInsert(a,{top:0,left:0},!0),this.visible||this.show(),this.trigger("add")}}},del:function(e){var t=this,n=e.$el;n.fadeOut("fast",(function(){n.remove(),delete t.frame_list[e.id],t.frame_counter--,t._panelRefresh(!0),t._panelAnimationComplete(),t.trigger("remove")}))},show:function(){this.visible=!0,this.$el.fadeIn("fast"),this.trigger("show")},hide:function(){this.event.type||(this.visible=!1,this.$el.fadeOut("fast",(function(){i()(this).hide()})),this.trigger("hide"))},length:function(){return this.frame_counter},events:{mousemove:"_eventFrameMouseMove",mouseup:"_eventFrameMouseUp",mouseleave:"_eventFrameMouseUp",mousewheel:"_eventPanelScroll",DOMMouseScroll:"_eventPanelScroll","mousedown .frame":"_eventFrameMouseDown","mousedown .frame-background":"_eventHide","mousedown .frame-scroll-up":"_eventPanelScroll_up","mousedown .frame-scroll-down":"_eventPanelScroll_down","mousedown .f-close":"_eventFrameClose"},_eventFrameMouseDown:function(e){i()(".tooltip").hide(),this.event.type||((i()(e.target).hasClass("f-header")||i()(e.target).hasClass("f-title"))&&(this.event.type="drag"),i()(e.target).hasClass("f-resize")&&(this.event.type="resize"),this.event.type&&(e.preventDefault(),this.event.target=this._frameIdentify(e.target),this.event.xy={x:e.originalEvent.pageX,y:e.originalEvent.pageY},this._frameDragStart(this.event.target)))},_eventFrameMouseMove:function(e){if(this.event.type){var t={x:e.originalEvent.pageX,y:e.originalEvent.pageY},n={x:t.x-this.event.xy.x,y:t.y-this.event.xy.y};this.event.xy=t;var a=this._frameScreen(this.event.target);if("resize"==this.event.type){a.width+=n.x,a.height+=n.y;var i=this.options.cell-this.options.margin-1;a.width=Math.max(a.width,i),a.height=Math.max(a.height,i),this._frameResize(this.event.target,a),a.width=this._toGridCoord("width",a.width)+1,a.height=this._toGridCoord("height",a.height)+1,a.width=this._toPixelCoord("width",a.width),a.height=this._toPixelCoord("height",a.height),this._frameResize(this.frame_shadow,a),this._frameInsert(this.frame_shadow,{top:this._toGridCoord("top",a.top),left:this._toGridCoord("left",a.left)})}else if("drag"==this.event.type){a.left+=n.x,a.top+=n.y,this._frameOffset(this.event.target,a);var o={top:this._toGridCoord("top",a.top),left:this._toGridCoord("left",a.left)};0!==o.left&&o.left++,this._frameInsert(this.frame_shadow,o)}}},_eventFrameMouseUp:function(e){this.event.type&&(this._frameDragStop(this.event.target),this.event.type=null)},_eventFrameClose:function(e){this.event.type||(e.preventDefault(),this.del(this._frameIdentify(e.target)))},_eventHide:function(e){this.event.type||this.hide()},_eventPanelScroll:function(e){!this.event.type&&this.visible&&(0!==i()(e.srcElement).parents(".frame").length?e.stopPropagation():(e.preventDefault(),this._panelScroll(e.originalEvent.detail?e.originalEvent.detail:e.originalEvent.wheelDelta/-3)))},_eventPanelScroll_up:function(e){this.event.type||(e.preventDefault(),this._panelScroll(-this.options.scroll))},_eventPanelScroll_down:function(e){this.event.type||(e.preventDefault(),this._panelScroll(this.options.scroll))},_frameIdentify:function(e){return this.frame_list["#".concat(i()(e).closest(".frame").attr("id"))]},_frameDragStart:function(e){this._frameFocus(e,!0);var t=this._frameScreen(e);this._frameResize(this.frame_shadow,t),this._frameGrid(this.frame_shadow,e.grid_location),e.grid_location=null,this.frame_shadow.$el.show(),i()(".f-cover").show()},_frameDragStop:function(e){this._frameFocus(e,!1);var t=this._frameScreen(this.frame_shadow);this._frameResize(e,t),this._frameGrid(e,this.frame_shadow.grid_location,!0),this.frame_shadow.grid_location=null,this.frame_shadow.$el.hide(),i()(".f-cover").hide(),this._panelAnimationComplete()},_toGridCoord:function(e,t){var n="width"==e||"height"==e?1:-1;return"top"==e&&(t-=this.top),parseInt((t+n*this.options.margin)/this.options.cell,10)},_toPixelCoord:function(e,t){var n="width"==e||"height"==e?1:-1,a=t*this.options.cell-n*this.options.margin;return"top"==e&&(a+=this.top),a},_toGrid:function(e){return{top:this._toGridCoord("top",e.top),left:this._toGridCoord("left",e.left),width:this._toGridCoord("width",e.width),height:this._toGridCoord("height",e.height)}},_toPixel:function(e){return{top:this._toPixelCoord("top",e.top),left:this._toPixelCoord("left",e.left),width:this._toPixelCoord("width",e.width),height:this._toPixelCoord("height",e.height)}},_isCollision:function(e){for(var t in this.frame_list){var n=this.frame_list[t];if(null!==n.grid_location&&(a=e,i=n.grid_location,!(a.left>i.left+i.width-1||a.left+a.width-1<i.left||a.top>i.top+i.height-1||a.top+a.height-1<i.top)))return!0}var a,i;return!1},_locationRank:function(e){return e.top*this.cols+e.left},_panelRefresh:function(e){this.cols=parseInt(i()(window).width()/this.options.cell,10)+1,this._frameInsert(null,null,e)},_panelAnimationComplete:function(){var e=this;i()(".frame").promise().done((function(){e._panelScroll(0,!0)}))},_panelScroll:function(e,t){var n=this.top-this.options.scroll*e;if(n=Math.max(n,this.top_max),n=Math.min(n,this.options.top_min),this.top!=n){for(var a in this.frame_list){var i=this.frame_list[a];if(null!==i.grid_location){var o={top:i.screen_location.top-(this.top-n),left:i.screen_location.left};this._frameOffset(i,o,t)}}this.top=n}this.render()},_frameInit:function(e,t){e.id=t,e.screen_location={},e.grid_location={},e.grid_rank=null,e.$el.attr("id",t.substring(1))},_frameInsert:function(e,t,n){var a=this,o=[];e&&(e.grid_location=null,o.push([e,this._locationRank(t)])),c.a.each(this.frame_list,(function(e){null!==e.grid_location&&(e.grid_location=null,o.push([e,e.grid_rank]))})),o.sort((function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0})),c.a.each(o,(function(e){a._framePlace(e[0],n)})),this.top_max=0,c.a.each(this.frame_list,(function(e){null!==e.grid_location&&(a.top_max=Math.max(a.top_max,e.grid_location.top+e.grid_location.height))})),this.top_max=i()(window).height()-this.top_max*this.options.cell-2*this.options.margin,this.top_max=Math.min(this.top_max,this.options.top_min),this.render()},_framePlace:function(e,t){e.grid_location=null;for(var n=this._toGrid(this._frameScreen(e)),a=!1,i=0;i<this.options.rows;i++){for(var o=0;o<Math.max(1,this.cols-n.width);o++)if(n.top=i,n.left=o,!this._isCollision(n)){a=!0;break}if(a)break}a?this._frameGrid(e,n,t):console.log("Grid dimensions exceeded.")},_frameFocus:function(e,t){e.$el.css("z-index",this.frame_z+(t?1:0))},_frameOffset:function(e,t,n){if(e.screen_location.left=t.left,e.screen_location.top=t.top,n){this._frameFocus(e,!0);var a=this;e.$el.animate({top:t.top,left:t.left},"fast",(function(){a._frameFocus(e,!1)}))}else e.$el.css({top:t.top,left:t.left})},_frameResize:function(e,t){e.$el.css({width:t.width,height:t.height}),e.screen_location.width=t.width,e.screen_location.height=t.height},_frameGrid:function(e,t,n){e.grid_location=t,this._frameOffset(e,this._toPixel(t),n),e.grid_rank=this._locationRank(t)},_frameScreen:function(e){var t=e.screen_location;return{top:t.top,left:t.left,width:t.width,height:t.height}}})},_=n(30),g=n(22),v=n(83),y=s.a.View.extend({initialize:function(e){var t=this;e=e||{},this.frames=new f.View({visible:!1}),this.setElement(this.frames.$el),this.active=!1,this.buttonActive=e.collection.add({id:"enable-scratchbook",icon:"fa-th",tooltip:p()("Enable/Disable Scratchbook"),onclick:function(){t.active=!t.active,t.buttonActive.set({toggle:t.active,show_note:t.active,note_cls:t.active&&"fa fa-check"}),t.active||t.frames.hide()},onbeforeunload:function(){if(t.frames.length()>0)return"You opened ".concat(t.frames.length()," frame(s) which will be lost.")}}),this.buttonLoad=e.collection.add({id:"show-scratchbook",icon:"fa-eye",tooltip:p()("Show/Hide Scratchbook"),show_note:!0,visible:!1,onclick:function(e){t.frames.visible?t.frames.hide():t.frames.show()}}),this.frames.on("add remove",(function(){t.frames.visible&&0===t.frames.length()&&t.frames.hide(),t.buttonLoad.set({note:t.frames.length(),visible:t.frames.length()>0})})).on("show hide ",(function(){t.buttonLoad.set({toggle:t.frames.visible,icon:t.frames.visible?"fa-eye":"fa-eye-slash"})})),this.history_cache={}},addDataset:function(e){var t=this,n=null,a=Object(u.a)();if(a&&a.currHistoryPanel){var i=a.currHistoryPanel.collection.historyId;this.history_cache[i]={name:a.currHistoryPanel.model.get("name"),dataset_ids:[]},a.currHistoryPanel.collection.each((function(e){!e.get("deleted")&&e.get("visible")&&t.history_cache[i].dataset_ids.push(e.get("id"))}))}var o=function(e,n){if(e){var a=t.history_cache[e.get("history_id")];if(a&&a.dataset_ids){var i=a.dataset_ids,o=i.indexOf(e.get("id"));if(-1!==o&&o+n>=0&&o+n<i.length)return i[o+n]}}},s=function(e,a,i){var s=o(e,a);s?t._loadDataset(s,(function(e,t){n=e,i.model.set(t)})):i.model.trigger("change")};this._loadDataset(e,(function(e,a){n=e,t.add(c.a.extend({menu:[{icon:"fa fa-chevron-circle-left",tooltip:p()("Previous in History"),onclick:function(e){s(n,-1,e)},disabled:function(){return!o(n,-1)}},{icon:"fa fa-chevron-circle-right",tooltip:p()("Next in History"),onclick:function(e){s(n,1,e)},disabled:function(){return!o(n,1)}}]},a))}))},_loadDataset:function(e,t){var n=this,a=new _.a({id:e});i.a.when(a.fetch()).then((function(){var i=c.a.find(["tabular","interval"],(function(e){return-1!==a.get("data_type").indexOf(e)})),o=a.get("name"),s=n.history_cache[a.get("history_id")];s&&(o="".concat(s.name,": ").concat(o)),t(a,i?{title:o,url:null,content:Object(_.d)({model:new _.c(a.toJSON()),embedded:!0,height:"100%"}).$el}:{title:o,url:"".concat(Object(d.getAppRoot)(),"datasets/").concat(e,"/display/?preview=True"),content:null})}))},addTrackster:function(e){var t=this,n=new g.a.Visualization({id:e});i.a.when(n.fetch()).then((function(){var e=new v.a(Object(d.getAppRoot)()),a={title:n.get("name"),type:"other",content:function(t){var a={container:t,name:n.get("title"),id:n.id,dbkey:n.get("dbkey"),stand_alone:!1},i=n.get("latest_revision"),o=i.config.view.drawables;c.a.each(o,(function(e){e.dataset={hda_ldda:e.hda_ldda,id:e.dataset_id}})),e.create_visualization(a,i.config.viewport,i.config.view.drawables,i.config.bookmarks,!1)}};t.add(a)}))},add:function(e){if("_blank"==e.target)window.open(e.url);else if("_top"==e.target||"_parent"==e.target||"_self"==e.target)window.location=e.url;else if(!this.active||e.noscratchbook){var t=i()(window.parent.document).find("#galaxy_main");"galaxy_main"==e.target||"center"==e.target?0===t.length?window.location=this._build_url(e.url,{use_panels:!0}):t.attr("src",e.url):window.location=e.url}else e.url=this._build_url(e.url,{hide_panels:!0,hide_masthead:!0}),this.frames.add(e)},_build_url:function(e,t){if(e)return e+=-1==e.indexOf("?")?"?":"&",e+=i.a.param(t,!0)}}),b=n(7),w={UserQuotaMeter:s.a.View.extend(b.a.LoggableMixin).extend({_logNamespace:"user",options:{warnAtPercent:85,errorAtPercent:100},initialize:function(e){this.log("".concat(this,".initialize:"),e),c.a.extend(this.options,e),this.listenTo(this.model,"change:quota_percent change:total_disk_usage",this.render)},update:function(e){return this.log("".concat(this," updating user data..."),e),this.model.loadFromApi(this.model.get("id"),e),this},isOverQuota:function(){return null!==this.model.get("quota_percent")&&this.model.get("quota_percent")>=this.options.errorAtPercent},_render_quota:function(){var e=this.model.toJSON(),t=e.quota_percent,n=i()(this._templateQuotaMeter(e)),a=n.find(".progress-bar");return this.isOverQuota()?(a.attr("class","progress-bar bg-danger"),n.find(".quota-meter-text").css("color","white"),this.trigger("quota:over",e)):t>=this.options.warnAtPercent?(a.attr("class","progress-bar bg-warning"),this.trigger("quota:under quota:under:approaching",e)):(a.attr("class","progress-bar bg-success"),this.trigger("quota:under quota:under:ok",e)),n},_render_usage:function(){var e=i()(this._templateUsage(this.model.toJSON()));return this.log("".concat(this,".rendering usage:"),e),e},render:function(){var e=null;return this.log("".concat(this,".model.quota_percent:"),this.model.get("quota_percent")),e=null===this.model.get("quota_percent")||void 0===this.model.get("quota_percent")?this._render_usage():this._render_quota(),this.$el.html(e),this.$el.find(".quota-meter-text").tooltip(),this},_templateQuotaMeter:function(e){return['<div id="quota-meter" class="quota-meter progress">','<div class="progress-bar" style="width: ',e.quota_percent,'%"></div>','<div class="quota-meter-text" data-placement="left" style="top: 6px"',e.nice_total_disk_usage?' title="Using '.concat(e.nice_total_disk_usage,'. Click for details.">'):">",'<a href="https://galaxyproject.org/support/account-quotas/" target="_blank">',p()("Using")," ",e.quota_percent,"%","</a>","</div>","</div>"].join("")},_templateUsage:function(e){return['<div id="quota-meter" class="quota-meter" style="background-color: transparent">','<div class="quota-meter-text" data-placement="left" data-original-title="This value is recalculated when you log out." style="top: 6px; color: white">',e.nice_total_disk_usage?p()("Using ")+e.nice_total_disk_usage:"","</div>","</div>"].join("")},toString:function(){return"UserQuotaMeter(".concat(this.model,")")}})},k=s.a.View.extend({initialize:function(e){var t=Object(u.a)(),n=this;this.options=e,this.setElement(this._template()),this.$navbarBrandLink=this.$(".navbar-brand"),this.$navbarBrandImage=this.$(".navbar-brand-image"),this.$navbarBrandTitle=this.$(".navbar-brand-title"),this.$navbarTabs=this.$(".navbar-nav"),this.$quoteMeter=this.$(".quota-meter-container"),this.collection=new r.a.Collection,this.collection.on("add",(function(e){n.$navbarTabs.append(new r.a.Tab({model:e}).render().$el)})).on("reset",(function(){n.$navbarTabs.empty()})).on("dispatch",(function(e){n.collection.each((function(t){e(t)}))})).fetch(this.options),this.highlight(e.active_view),t.frame=this.frame=new y({collection:this.collection}),t.quotaMeter=this.quotaMeter=new w.UserQuotaMeter({model:t.user,el:this.$quoteMeter}),i()(window).on("click",(function(e){var t=i()(e.target).closest("a[download]");1==t.length&&(0===i()("iframe[id=download]").length&&i()("body").append(i()("<iframe/>").attr("id","download").hide()),i()("iframe[id=download]").attr("src",t.attr("href")),e.preventDefault())})).on("beforeunload",(function(){var e="";if(n.collection.each((function(t){var n=t.get("onbeforeunload")&&t.get("onbeforeunload")();n&&(e+="".concat(n," "))})),""!==e)return e}))},render:function(){var e=this.options.display_galaxy_brand?"Galaxy ":"";return this.options.brand&&(e+=this.options.brand),this.$navbarBrandTitle.html(e),this.$navbarBrandLink.attr("href",this.options.logo_url),this.$navbarBrandImage.attr("src",this.options.logo_src),this.quotaMeter.render(),this},highlight:function(e){this.collection.forEach((function(t){t.set("active",t.id==e)}))},_template:function(){return'\n            <nav id="masthead" class="navbar navbar-expand justify-content-center navbar-dark" role="navigation" aria-label="Main">\n                <a class="navbar-brand" aria-label="homepage">\n                    <img alt="logo" class="navbar-brand-image"/>\n                    <span class="navbar-brand-title"/>\n                </a>\n                <ul class="navbar-nav"/>\n                <div class="quota-meter-container"/>\n            </nav>'}});t.a={View:k}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(10),l=n.n(r),c=n(3),d=n.n(c),u=n(4),h=n(5),p=n(2),m=n.n(p),f=n(37),_=d.a.View.extend({initialize:function(){this.modal=null},makeModalIframe:function(e){var t=Object(h.a)(),n=t.config.communication_server_host,a=t.config.communication_server_port,o=i.a.escape(t.user.attributes.username),r=i.a.escape(t.config.persistent_communication_rooms),l="?username=".concat(o,"&persistent_communication_rooms=").concat(r),c="".concat(n,":").concat(a).concat(l),d=null,u=null,p='<iframe class="h-100 w-100" src="'.concat(c,'"> </iframe>');return s()(".chat-modal").length>0&&s()(".chat-modal").remove(),_.modal=new f.a.View({body:p,height:350,width:600,closing_events:!0,title_separator:!1,cls:"ui-modal chat-modal"}),_.modal.show(),d=s()(".chat-modal .modal-header"),u=s()(".chat-modal .modal-body"),d.addClass("modal-header-body"),u.addClass("modal-header-body"),d.find("h4").remove(),d.removeAttr("min-height padding border"),d.append('<i class="fa fa-comment" aria-hidden="true" title="Communicate with other users"></i><i class="fa fa-expand expand-compress-modal" aria-hidden="true" title="Maximize"></i><i class="fa fa-times close-modal" aria-hidden="true" title="Close"></i>'),s()(".close-modal").click((function(e){s()(".chat-modal").css("display","none")})),s()(".expand-compress-modal").click((function(e){s()(".expand-compress-modal").hasClass("fa-expand")?(s()(".chat-modal .modal-dialog").width("1000px"),s()(".chat-modal .modal-body").height("575px"),s()(".expand-compress-modal").removeClass("fa-expand").addClass("fa-compress"),s()(".expand-compress-modal").attr("title","Minimize"),s()(".expand-compress-modal").css("margin-left","96.2%")):(s()(".chat-modal .modal-dialog").width("".concat(600,"px")),s()(".chat-modal .modal-body").height("".concat(350,"px")),s()(".expand-compress-modal").removeClass("fa-compress").addClass("fa-expand"),s()(".expand-compress-modal").attr("title","Maximize"),s()(".expand-compress-modal").css("margin-left","93.2%"))})),this},render:function(){return{id:"show-chat-online",icon:"fa-comment-o",tooltip:m()("Chat online"),visible:!1,onclick:this.makeModalIframe}}}),g=n(66),v=n(8);function y(){var e=Object(h.a)(),t=e.session_csrf_token,n="".concat(e.root,"user/logout?session_csrf_token=").concat(t);l.a.get(n).then((function(){return e.user&&e.user.clearSessionStorage(),e.config.enable_oidc?l.a.get("".concat(e.root,"authnz/logout")):{}})).then((function(t){t.data&&t.data.redirect_uri?window.top.location.href=t.data.redirect_uri:window.top.location.href="".concat(e.root,"root/login?is_logout_redirect=true")}))}n.d(t,"b",(function(){return y}));var b=d.a.Collection.extend({model:d.a.Model.extend({defaults:{visible:!0,target:"_parent"}}),fetch:function(e){e=e||{},this.reset();var t=Object(h.a)(),n=new _;this.add(n.render()),this.add({id:"analysis",title:m()("Analyze Data"),url:"",tooltip:m()("Analysis home view")}),this.add({id:"workflow",title:m()("Workflow"),tooltip:m()("Chain tools into workflows"),disabled:!t.user.id,url:"workflows/list",target:"__use_router__"}),t.config.visualizations_visible&&this.add({id:"visualization",title:m()("Visualize"),url:"javascript:void(0)",tooltip:m()("Visualize datasets"),disabled:!t.user.id,menu:[{title:m()("Create Visualization"),url:"visualizations",target:"__use_router__"},{title:m()("Interactive Environments"),url:"visualization/gie_list",target:"galaxy_main"}]}),this.add({id:"shared",title:m()("Shared Data"),url:"javascript:void(0)",tooltip:m()("Access published resources"),menu:[{title:m()("Data Libraries"),url:"library/list"},{title:m()("Histories"),url:"histories/list_published",target:"__use_router__"},{title:m()("Workflows"),url:"workflows/list_published",target:"__use_router__"},{title:m()("Visualizations"),url:"visualizations/list_published",target:"__use_router__"},{title:m()("Pages"),url:"pages/list_published",target:"__use_router__"}]}),g.a.load({type:"masthead",callback:function(e){s()(document).ready((function(){e.each((function(e){var t=e.toJSON();if(t.activate){var n={id:t.id,icon:t.config.icon,url:t.config.url,tooltip:t.config.tooltip,onclick:t.config.function&&new Function(t.config.function)},a=Object(h.a)();a.page?a.page.masthead.collection.add(n):a.masthead&&a.masthead.collection.add(n),v.a.appendScriptStyle(t)}}))}))}}),t.user.get("is_admin")&&this.add({id:"admin",title:m()("Admin"),url:"admin",tooltip:m()("Administer this Galaxy"),cls:"admin-only"});var a={id:"help",title:m()("Help"),url:"javascript:void(0)",tooltip:m()("Support, contact, and community"),menu:[{title:m()("Support"),url:e.support_url,target:"_blank"},{title:m()("Search"),url:e.search_url,target:"_blank"},{title:m()("Mailing Lists"),url:e.mailing_lists,target:"_blank"},{title:m()("Videos"),url:e.screencasts_url,target:"_blank"},{title:m()("Wiki"),url:e.wiki_url,target:"_blank"},{title:m()("How to Cite Galaxy"),url:e.citation_url,target:"_blank"},{title:m()("Interactive Tours"),url:"tours"}]};e.terms_url&&a.menu.push({title:m()("Terms and Conditions"),url:e.terms_url,target:"_blank"}),e.helpsite_url&&a.menu.unshift({title:m()("Galaxy Help"),url:e.helpsite_url,target:"_blank"}),this.add(a);var i={};return t.user.id?(i={id:"user",title:m()("User"),cls:"loggedin-only",url:"javascript:void(0)",tooltip:m()("Account and saved data"),menu:[{title:"".concat(m()("Logged in as")," ").concat(t.user.get("email")),class:"dropdown-item disabled"},{title:m()("Preferences"),url:"user",target:"__use_router__"},{title:m()("Custom Builds"),url:"custom_builds",target:"__use_router__"},{title:m()("Logout"),divider:!0,onclick:y},{title:m()("Datasets"),url:"datasets/list",target:"__use_router__"},{title:m()("Histories"),url:"histories/list",target:"__use_router__"},{title:m()("Histories shared with me"),url:"histories/list_shared",target:"__use_router__"},{title:m()("Pages"),url:"pages/list",target:"__use_router__"},{title:m()("Workflow Invocations"),url:"workflows/invocations",target:"__use_router__"}]},t.config.visualizations_visible&&i.menu.push({title:m()("Visualizations"),url:"visualizations/list",target:"__use_router__"}),t.config.interactivetools_enable&&(i.menu[i.menu.length-1].divider=!0,i.menu.push({title:m()("Active InteractiveTools"),url:"interactivetool_entry_points/list",target:"__use_router__"}))):i=e.allow_user_creation?{id:"user",title:m()("Login or Register"),cls:"loggedout-only",url:"login",tooltip:m()("Log in or register a new account")}:{id:"user",title:m()("Login"),cls:"loggedout-only",tooltip:m()("Login"),url:"login",noscratchbook:!0},this.add(i),(new s.a.Deferred).resolve().promise()}}),w=d.a.View.extend({initialize:function(e){this.model=e.model,this.setElement(this._template()),this.$link=this.$(".nav-link"),this.$note=this.$(".nav-note"),this.$menu=this.$(".dropdown-menu"),this.listenTo(this.model,"change",this.render,this)},events:{"click .nav-link":"_toggleClick"},render:function(){var e=this;return s()(".tooltip").remove(),this.$el.removeClass().addClass(this.model.get("disabled")&&"disabled").addClass(this.model.get("active")&&"active").addClass(this.model.get("menu")&&"dropdown").attr("id",this.model.id).css({visibility:this.model.get("visible")?"visible":"hidden"}),this.model.set("url",this._formatUrl(this.model.get("url"))),this.$note.html(this.model.get("note")||"").removeClass().addClass("nav-note").addClass(this.model.get("note_cls")).css({display:this.model.get("show_note")?"block":"none"}),this.$link.html(this.model.get("title")||"").removeClass().addClass("nav-link").addClass(this.model.get("cls")).addClass(this.model.get("icon")&&"nav-icon fa ".concat(this.model.get("icon"))).addClass(this.model.get("menu")&&"dropdown-toggle").addClass(this.model.get("toggle")&&"toggle").attr("id",this.model.get("menu")&&"dropdown-button-".concat(this.model.get("id"))).attr("aria-haspopup",this.model.get("menu")&&"true").attr("target",this.model.get("target")).attr("href",this.model.get("url")).attr("title",this.model.get("tooltip")).tooltip("dispose"),this.model.get("tooltip")&&this.$link.tooltip({placement:"bottom"}),this.model.get("menu")&&this.model.get("show_menu")?(this.$menu.show(),s()("#dd-helper").show().off().on("click",(function(){s()("#dd-helper").hide(),e.model.set("show_menu",!1)}))):(this.$menu.hide(),s()("#dd-helper").hide()),this.$menu.empty().removeClass(),this.model.get("menu")&&(i.a.each(this.model.get("menu"),(function(t){e.$menu.append(e._buildMenuItem(t)),t.divider&&e.$menu.append(s()("<div/>").addClass("dropdown-divider"))})),this.$menu.addClass("dropdown-menu"),this.$menu.attr("aria-labelledby",this.$menu.siblings(".dropdown-toggle").attr("id")),this.$menu.attr("role","menu"),this.$link.append(s()("<b/>").addClass("caret"))),this},_buildMenuItem:function(e){var t=this;return(e=i.a.defaults(e||{},{title:"",url:"",target:"_parent",noscratchbook:!1})).url=this._formatUrl(e.url),s()("<a/>").addClass("dropdown-item").attr("href",e.url).attr("target",e.target).attr("class",e.class).attr("role","menuitem").html(e.title).on("click",(function(n){if(n.preventDefault(),t.model.set("show_menu",!1),e.onclick)e.onclick();else{var a=Object(h.a)();if("__use_router__"==e.target&&void 0!==a.page)a.page.router.executeUseRouter(e.url);else try{a.frame.add(e)}catch(e){console.warn("Missing frame element on galaxy instance",e)}}}))},buildLink:function(e,t){return s()("<div/>").append(s()("<a/>").attr("href",Object(u.getAppRoot)()+t).html(e)).html()},_toggleClick:function(e){var t=this,n=this.model;if(e.preventDefault(),s()(".tooltip").hide(),n.trigger("dispatch",(function(e){n.id!==e.id&&e.get("menu")&&e.set("show_menu",!1)})),n.get("disabled"))this.$link.popover&&this.$link.popover("dispose"),this.$link.popover({html:!0,placement:"bottom",content:"Please ".concat(this.buildLink("login or register","login")," to use this feature.")}).popover("show"),window.setTimeout((function(){t.$link.popover("dispose")}),3e3);else if(n.get("menu"))n.set("show_menu",!0);else if(n.get("onclick"))n.get("onclick")();else{var a=Object(h.a)();"__use_router__"==n.attributes.target&&void 0!==a.page?a.page.router.executeUseRouter(n.attributes.url):a.frame.add(n.attributes)}},_formatUrl:function(e){return"string"==typeof e&&-1===e.indexOf("mailto:")&&-1===e.indexOf("//")&&"/"!=e.charAt(0)?Object(u.getAppRoot)()+e:e},_template:function(){return'\n            <li class="nav-item">\n                <a class="nav-link"/>\n                <div class="nav-note"/>\n                <div class="dropdown-menu"/>\n            </li>'}});t.a={Collection:b,Tab:w}},,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=i.a,s=window._l||function(e){return e};function r(e,t){var n=27,a=13,r=o(e),l=!0;function c(e){o(this).parent().children("input").val("").trigger("searchInput.clear").blur(),t.onclear()}function d(e,n){if(!n)return c();o(this).trigger("search.search",n),"function"==typeof t.onfirstsearch&&l?(l=!1,t.onfirstsearch(n)):t.onsearch(n)}if("string"===i.a.type(t))return"toggle-loading"===t&&(r.find(".search-loading").toggle(),r.find(".search-clear").toggle()),r;"object"===i.a.type(t)&&(t=i.a.extend(!0,{},{initialVal:"",name:"search",placeholder:"search",classes:"",onclear:function(){},onfirstsearch:null,onsearch:function(e){},minSearchLen:0,escWillClear:!0,advsearchlink:null,oninit:function(){}},t));var u=[o(['<span class="search-clear fa fa-times-circle" ','title="',s("clear search (esc)"),'"></span>'].join("")).tooltip({placement:"bottom"}).click((function(e){c.call(this,e)})),o(['<span class="search-loading fa fa-spinner fa-spin" ','title="',s("loading..."),'"></span>'].join("")).hide().tooltip({placement:"bottom"})];t.advsearchlink&&u.push(o(['<span class="search-advanced fa fa-question-circle" ','data-toggle="advSearchPopover" ','data-placement="bottom" ','data-content="',s("<p>You can use advanced searches here using keywords and syntax like <em>name=mydataset</em> or <em>state=error</em>."),"<br/>",s("Supported keywords are <em>name, format, database, annotation, description, info, tag, hid, and state</em>."),"<br/>",s("To learn more visit "),"<a href='https://galaxyproject.org/tutorials/histories/#advanced-searching' target='_blank'>",s("the Hub"),'.</a></p>" title="',s("search tips"),'"></span>'].join("")).tooltip({placement:"bottom"}).click((function(){o('[data-toggle="advSearchPopover"]').popover({html:!0,container:".history-right-panel"})})));var h=o('<div class "search-button-panel"></div>');return o(h).prepend(u),r.addClass("search-input").prepend([o(['<input type="text" name="',t.name,'" placeholder="',t.placeholder,'" ','class="search-query ',t.classes,'" ',"/>"].join("")).focus((function(e){o(this).select()})).keyup((function(e){if(e.preventDefault(),e.stopPropagation(),e.which===n&&t.escWillClear)c.call(this,e);else{var i=o(this).val();(e.which===a||t.minSearchLen&&i.length>=t.minSearchLen)&&d.call(this,e,i)}})).val(t.initialVal),o(h)])}i.a.fn.extend({searchInput:function(e){return this.each((function(){return r(this,e)}))}})},function(e,t,n){"use strict";t.a={computed:{isNew:function(){return!this.jobStatesSummary||this.jobStatesSummary.new()},isErrored:function(){return this.jobStatesSummary&&this.jobStatesSummary.errored()},isTerminal:function(){return this.jobStatesSummary&&this.jobStatesSummary.terminal()},jobCount:function(){return this.jobStatesSummary?this.jobStatesSummary.jobCount():null},jobsStr:function(){var e=this.jobCount;return e&&e>1?"".concat(e," jobs"):"a job"},runningCount:function(){return this.countStates(["running"])},okCount:function(){return this.countStates(["ok"])},errorCount:function(){return this.countStates(["error"])},runningPercent:function(){return this.runningCount/(1*this.jobCount)},okPercent:function(){return this.okCount/(1*this.jobCount)},errorPercent:function(){return this.errorCount/(1*this.jobCount)},otherPercent:function(){return 1-this.okPercent-this.runningPercent-this.errorPercent}},methods:{countStates:function(e){var t=0;if(this.jobStatesSummary&&this.jobStatesSummary.hasDetails()){var n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;t+=this.jobStatesSummary.states()[r]||0}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}return t}}}},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(4),l=n(5),c=n(2),d=n.n(c),u=n(42),h=n(113),p=n(16),m=n(38),f=n(66),_=n(157),g=n(10),v=n.n(g),y={props:{source:{type:String,required:!0},id:{type:String,required:!0}},data:function(){return{xrefs:[],errors:[]}},created:function(){var e=this;v.a.get("".concat(Object(r.getAppRoot)(),"api/").concat(this.source,"/").concat(this.id,"/xrefs")).then((function(t){e.xrefs=t.data})).catch((function(e){console.error(e)}))}},b=n(6),w=Object(b.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[n("h4",{staticClass:"mb-0"},[e._v("\n            References\n        ")])]},proxy:!0}])},[e._v(" "),n("table",e._l(e.xrefs,(function(t,a){return n("tr",{key:a},[n("th",[e._v("- "+e._s(t.reftype)+":")]),e._v(" "),n("td",["bio.tools"==t.reftype?[n("a",{attrs:{href:"https://bio.tools/"+t.value,target:"_blank"}},[e._v(e._s(t.value))])]:[e._v("\n                    "+e._s(t.value)+"\n                ")]],2)])})),0)])}),[],!1,null,null,null).exports,k=n(11);t.a=m.a.extend({initialize:function(e){var t=Object(l.a)(),n=this;this.deferred=new h.a,m.a.prototype.initialize.call(this,e),this._update(),this.model.get("listen_to_history")&&t.currHistoryPanel&&this.listenTo(t.currHistoryPanel.collection,"change",(function(){n.model.get("onchange")()})),this.$el.on("remove",(function(){n._destroy()}))},_update:function(){var e=this,t=this.model.get("buildmodel");t?(this.deferred.reset(),this.deferred.execute((function(n){t(n,e),n.then((function(){e._render()}))}))):this._render()},_destroy:function(){var e=this;this.$el.off().hide(),this.deferred.execute((function(){m.a.prototype.remove.call(e),Object(l.a)().emit.debug("tool-form-base::_destroy()","Destroy view.")}))},_render:function(){var e=this,t=this.model.attributes;this.model.set({title:t.fixed_title||"<b>".concat(t.name,"</b> ").concat(t.description," (Galaxy Version ").concat(t.version,")"),operations:!t.hide_operations&&this._operations(),onchange:function(){e.deferred.reset(),e.deferred.execute((function(t){e.model.get("postchange")(t,e)}))}}),this.render(),this.model.get("collapsible")||this.$el.append(s()("<div/>").addClass("mt-2").append(this._footer())),t.tool_errors&&this.message.update({status:"danger",message:t.tool_errors,persistent:!0}),this.show_message&&this.message.update({status:"success",message:"Now you are using '".concat(t.name,"' version ").concat(t.version,", id '").concat(t.id,"'."),persistent:!1}),this.show_message=!0},_operations:function(){var e=this,t=this.model.attributes,n=Object(l.a)(),a=n.user.getFavorites().tools.indexOf(t.id)>=0,i=new p.a.Button({icon:"fa-star-o",title:t.narrow?null:"Favorite",tooltip:"Add to favorites",visible:!n.user.isAnonymous()&&!a,onclick:function(){v.a.put("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools"),{object_id:t.id}).then((function(e){i.hide(),o.show(),n.user.updateFavorites("tools",e.data),Object(u.a)("added to favorites")}))}}),o=new p.a.Button({icon:"fa-star",title:t.narrow?null:"Added",tooltip:"Remove from favorites",visible:!n.user.isAnonymous()&&a,onclick:function(){v.a.delete("".concat(n.root,"api/users/").concat(n.user.id,"/favorites/tools/").concat(encodeURIComponent(t.id))).then((function(e){o.hide(),i.show(),n.user.updateFavorites("tools",e.data),Object(u.a)("removed from favorites")}))}}),s=new p.a.ButtonMenu({icon:"fa-cubes",title:t.narrow?null:"Versions",tooltip:"Select another tool version"});if(!t.sustain_version&&t.versions&&t.versions.length>1)for(var c in t.versions){var h=t.versions[c];h!=t.version&&s.addMenu({title:"Switch to ".concat(h),version:h,icon:"fa-cube",onclick:function(){e.model.set("id",t.id.replace(t.version,this.version)),e.model.set("version",this.version),e.model.get("onchange")(),e._update()}})}else s.$el.hide();var m=new p.a.ButtonMenu({id:"options",icon:"fa-caret-down",title:t.narrow?null:"Options",tooltip:"View available options"});return m.addMenu({icon:"fa-share",title:d()("Share"),onclick:function(){prompt("Copy to clipboard: Ctrl+C, Enter","".concat(window.location.origin+Object(r.getAppRoot)(),"root?tool_id=").concat(t.id))}}),n.user&&n.user.get("is_admin")&&m.addMenu({icon:"fa-download",title:d()("Download"),onclick:function(){window.location.href="".concat(Object(r.getAppRoot)(),"api/tools/").concat(t.id,"/download")}}),t.requirements&&t.requirements.length>0&&m.addMenu({icon:"fa-info-circle",title:d()("Requirements"),onclick:function(){!this.requirements_visible||e.portlet.collapsed?(this.requirements_visible=!0,e.portlet.expand(),e.message.update({persistent:!0,message:e._templateRequirements(t),status:"info"})):(this.requirements_visible=!1,e.message.update({message:""}))}}),t.sharable_url&&m.addMenu({icon:"fa-external-link",title:d()("See in Tool Shed"),onclick:function(){window.open(t.sharable_url)}}),f.a.load({type:"tool-menu",callback:function(e){e.each((function(e){var n=e.toJSON();n.activate&&n.config.function&&m.addMenu({icon:n.config.icon,title:n.config.title,onclick:function(){new Function("options",n.config.function)(t)}})}))}}),{menu:m,versions:s,favorite:i,remove_favorite:o}},_footer:function(){var e=this.model.attributes,t=s()("<div/>").append(this._templateHelp(e));if(e.citations){var n=k.default.extend(_.a),a=document.createElement("div");t.append(a),new n({propsData:{id:e.id,source:"tools"}}).$mount(a)}if(e.xrefs&&e.xrefs.length){var i=k.default.extend(w);a=document.createElement("div"),t.append(a),new i({propsData:{id:e.id,source:"tools"}}).$mount(a)}return t},_templateHelp:function(e){var t=s()("<div/>").addClass("form-help form-text mt-4").append(e.help);return t.find("a").attr("target","_blank"),t.find("img").each((function(){var e=s()(this).attr("src");-1!==e.indexOf("admin_toolshed")&&s()(this).attr("src",Object(r.getAppRoot)()+e)})),t},_templateRequirements:function(e){var t=e.requirements.length;if(t>0){var n="This tool requires ";i.a.each(e.requirements,(function(e,a){n+=e.name+(e.version?" (Version ".concat(e.version,")"):"")+(a<t-2?", ":a==t-2?" and ":"")}));var a=s()("<a/>").attr("target","_blank").attr("href","https://galaxyproject.org/tools/requirements/").text("here");return s()("<span/>").append("".concat(n,". Click ")).append(a).append(" for more information.")}return"No requirements found."}})},function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(10),s=n.n(o),r=n(11),l=n(18),c=n(4),d=n(217),u=n(218),h=n(191);r.default.use(l.a);var p={props:{source:{type:String,required:!0},id:{type:String,required:!0},viewRender:{type:Boolean,requried:!1,default:!0},simple:{type:Boolean,required:!1,default:!1}},data:function(){return{citations:[],content:"",errors:[],showCollapse:!1}},computed:{formattedReferences:function(){var e=this;return this.citations.reduce((function(t,n){return t.concat('<p class="formatted-reference">'.concat(e.formattedReference(n),"</p>"))}),"")}},updated:function(){var e=this;this.$nextTick((function(){e.$emit("rendered")}))},created:function(){var e=this;s.a.get("".concat(Object(c.getAppRoot)(),"api/").concat(this.source,"/").concat(this.id,"/citations")).then((function(t){e.content="",t.data.forEach((function(t){try{var n={fields:{},entryType:void 0},a=d.toJSON(t.content);a&&(a=i.a.first(a),n.entryType=a.entryType||void 0,Object.keys(a.entryTags).forEach((function(e){n.fields[e.toLowerCase()]=a.entryTags[e]}))),e.citations.push(n),e.content+=t.content}catch(e){console.warn("Error parsing bibtex: ".concat(e))}}))})).catch((function(e){console.error(e)}))},methods:{formattedReference:function(e){var t=e.entryType,n=e.fields,a="",i="".concat(this.asSentence((n.author?n.author:"")+(n.year?" (".concat(n.year,")"):""))," "),o=n.title||"",s=n.pages?"pp. ".concat(n.pages):"",r=n.address;if("article"===t){var l=(n.volume?n.volume:"")+(n.number?" (".concat(n.number,")"):"")+(s?", ".concat(s):"");a="".concat(i+this.asSentence(o)+(n.journal?"In <em>".concat(n.journal,", "):"")+this.asSentence(l)+this.asSentence(n.address),"</em>")}else a="inproceedings"===t||"proceedings"===t?"".concat(i+this.asSentence(o)+(n.booktitle?"In <em>".concat(n.booktitle,", "):"")+(s||"")+(r?", ".concat(r):""),".</em>"):"mastersthesis"===t||"phdthesis"===t?i+this.asSentence(o)+(n.howpublished?"".concat(n.howpublished,". "):"")+(n.note?"".concat(n.note,"."):""):"techreport"===t?i+this.asSentence(o)+this.asSentence(n.institution)+this.asSentence(n.number)+this.asSentence(n.type):"book"===t||"inbook"===t||"incollection"===t?"".concat(i," ").concat(this.formatBookInfo(n)):"".concat(i," ").concat(this.asSentence(o)).concat(this.asSentence(n.howpublished)).concat(this.asSentence(n.note));return n.doi&&(a+='[<a href="https://doi.org/'.concat(n.doi,'" target="_blank">doi:').concat(n.doi,"</a>]")),n.url&&(a+='[<a href="'.concat(n.url,'" target="_blank">Link</a>]')),Object(u.convertLaTeX)({onError:function(e,t){return"{".concat(Object(h.stringifyLaTeX)(t),"}")}},a)},formatBookInfo:function(e){var t="";return e.chapter&&(t+="".concat(e.chapter," in ")),e.title&&(t+="<em>".concat(e.title,"</em>")),e.editor&&(t+=", Edited by ".concat(e.editor,", ")),e.publisher&&(t+=", ".concat(e.publisher)),e.pages&&(t+=", pp. ".concat(e.pages)),e.series&&(t+=", <em>".concat(e.series,"</em>")),e.volume&&(t+=", Vol.".concat(e.volume)),e.issn&&(t+=", ISBN: ".concat(e.issn)),"".concat(t,".")},asSentence:function(e){return e&&e.trim()?"".concat(e,". "):""},toggleViewRender:function(){this.viewRender=!this.viewRender}}},m=(n(245),n(6)),f=Object(m.a)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.simple?e.citations.length?n("div",[n("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.id,expression:"id"}],attrs:{variant:"primary"}},[e._v("Citations")]),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:e.id.replace(/ /g,"_")},on:{show:function(t){return e.$emit("show")},shown:function(t){return e.$emit("shown")},hide:function(t){return e.$emit("hide")},hidden:function(t){return e.$emit("hidden")}}},[n("b-card",[n("p",{domProps:{innerHTML:e._s(e.formattedReferences)}})])],1)],1):e._e():n("b-card",{scopedSlots:e._u([{key:"header",fn:function(){return[n("h4",{staticClass:"mb-0"},[e._v("\n                Citations\n                "),e.viewRender?n("b-button",{staticClass:"citations-to-bibtex",attrs:{title:"Show all in BibTeX format."},on:{click:e.toggleViewRender}},[n("i",{staticClass:"fa fa-pencil-square-o"}),e._v(" Show BibTeX\n                ")]):n("b-button",{attrs:{title:"Return to formatted citation list."},on:{click:e.toggleViewRender}},[n("i",{staticClass:"fa fa-times"}),e._v(" Hide BibTeX\n                ")])],1)]},proxy:!0}],null,!1,3275843682)},[e._v(" "),"histories"===e.source?n("div",{staticClass:"infomessage"},[e._v("\n            When writing up your analysis, remember to include all references that should be cited in order to\n            completely describe your work. Also, please remember to\n            "),n("a",{attrs:{href:"https://galaxyproject.org/citing-galaxy"}},[e._v("cite Galaxy")]),e._v(".\n        ")]):e._e(),e._v(" "),e.viewRender?n("span",{staticClass:"citations-formatted"},[n("p",{domProps:{innerHTML:e._s(e.formattedReferences)}})]):n("pre",[e._v("        "),n("code",{staticClass:"citations-bibtex"},[e._v("\n            "+e._s(e.content)+"\n        ")]),e._v("\n    ")])])],1)}),[],!1,null,null,null);t.a=f.exports},function(e,t,n){"use strict";var a={components:{StatelessTags:n(84).a},props:{index:{type:Number},tags:{type:Array}},methods:{onInput:function(e){this.$emit("input",e,this.index)}}},i=n(6),o=Object(i.a)(a,(function(){var e=this.$createElement;return(this._self._c||e)("StatelessTags",{attrs:{value:this.tags},on:{input:this.onInput}})}),[],!1,null,null,null);t.a=o.exports},function(e,t,n){"use strict";var a={props:{note:{type:String,default:null},loading:{type:Boolean,default:!1},infoProgress:{type:Number,default:0},infoMessage:{type:String,default:null},okProgress:{type:Number,default:0},okMessage:{type:String,default:null},runningProgress:{type:Number,default:0},runningMessage:{type:String,default:null},newProgress:{type:Number,default:0},newMessage:{type:String,default:null},errorProgress:{type:Number,default:0},errorMessage:{type:String,default:null}},methods:{styleFromProgress:function(e){return{width:"".concat(100*e,"%")}}}},i=n(6),o=Object(i.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"progress state-progress"},[e.note?n("span",{staticClass:"note"},[e._v("\n        "+e._s(e.note)),e.loading?n("span",[e._v("."),n("span",{staticClass:"blinking"},[e._v("..")])]):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"progress-bar info",style:e.styleFromProgress(e.infoProgress),attrs:{title:e.infoMessage}}),e._v(" "),n("div",{staticClass:"progress-bar ok",style:e.styleFromProgress(e.okProgress),attrs:{title:e.okMessage}}),e._v(" "),n("div",{staticClass:"progress-bar running",style:e.styleFromProgress(e.runningProgress),attrs:{title:e.runningMessage}}),e._v(" "),n("div",{staticClass:"progress-bar new",style:e.styleFromProgress(e.newProgress),attrs:{title:e.newMessage}}),e._v(" "),n("div",{staticClass:"progress-bar error",style:e.styleFromProgress(e.errorProgress),attrs:{title:e.errorMessage}})])}),[],!1,null,null,null);t.a=o.exports},,function(e,t,n){"use strict";function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t?e.map((function(e){var n=[];return e.elems&&e.elems.forEach((function(e){!e.text&&t.includes(e.id)&&n.push(e)})),n.sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{elems:n})})).filter((function(e){var n=e.elems&&e.elems.length>0,a=!e.text&&t.includes(e.id);return n||a})).sort((function(e,n){return t.indexOf(e.elems[0].id)-t.indexOf(n.elems[0].id)})):e}function s(e,t){if(e=e.filter((function(e){return"Expression Tools"!==e.name})),t){var n=[];return t.length<1?n:(e.map((function(e){e.elems&&e.elems.forEach((function(e){!e.text&&t.includes(e.id)&&n.push(e)}))})),n.sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)})))}return e}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";var a=160,i=800,o={name:"SidePanel",props:["currentPanel","currentPanelProperties","side"],data:function(){return{show:!0,width:288}},computed:{styles:function(){var e={};return e[this.side]=this.show?"0":"-".concat(this.width,"px"),e.width=this.width+"px",e}},methods:{dragHandler:function(e){var t=this,n="left"===this.side,o=e.pageX,s=this.width;function r(e){var r=e.pageX-o,l=n?s+r:s-r;l=Math.min(i,Math.max(a,l)),t.resize(l)}document.getElementById("dd-helper").style.display="block",document.getElementById("dd-helper").addEventListener("mousemove",r),document.getElementById("dd-helper").addEventListener("mouseup",(function e(){document.getElementById("dd-helper").style.display="none",document.getElementById("dd-helper").removeEventListener("mousemove",r),document.getElementById("dd-helper").removeEventListener("mouseup",e)}))},resize:function(e){this.width=e,document.getElementById("center").style[this.side]=e+"px"},toggle:function(){this.show=!this.show,this.show?(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]=this.width+"px",setTimeout((function(){document.getElementById("center").style.transition=""}),250)):(document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),250))},hide:function(){this.show=!1,document.getElementById("center").style.transition="".concat(this.side," 200ms linear"),document.getElementById("center").style[this.side]="0",setTimeout((function(){document.getElementById("center").style.transition=""}),250)}}},s=(n(247),n(6)),r=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel-outer-wrap",style:e.styles,attrs:{id:e.side}},[e._t("panel",[n(e.currentPanel,e._b({tag:"component"},"component",e.currentPanelProperties,!1))]),e._v(" "),n("div",{staticClass:"unified-panel-footer"},[n("div",{staticClass:"panel-collapse",class:{left:"left"===e.side,right:"right"===e.side,hidden:!e.show},on:{click:e.toggle}}),e._v(" "),n("div",{staticClass:"drag",on:{mousedown:e.dragHandler}})])],2)}),[],!1,null,"7b55734b",null);t.a=r.exports},,,,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a).a;t.a=function(e,t,n,a,o,s,r,l,c){void 0===o&&(o=30),void 0===r&&(r=4),i("#".concat(e)).off().click((function(){if(!(i("#renaming-active").length>0)){var e,d=i("#".concat(t)),u=d.text();(e=s?i("<textarea></textarea>").attr({rows:r,cols:o}).text(i.trim(u)):i("<input type='text'></input>").attr({value:i.trim(u),size:o})).attr("id","renaming-active"),e.blur((function(){i(this).remove(),d.show(),c&&c(e)})),e.keyup((function(o){if(27===o.keyCode)i(this).trigger("blur");else if(13===o.keyCode){var s={};s[a]=i(this).val(),i(this).trigger("blur"),i.ajax({url:n,data:s,error:function(){alert("Text editing for elt ".concat(t," failed"))},success:function(t){""!==t?d.text(t):d.html("<em>None</em>"),c&&c(e)}})}})),l&&l(e),d.hide(),e.insertAfter(d),e.focus(),e.select()}}))}},function(e,t,n){"use strict";var a=n(11),i=n(18),o=n(42);a.default.use(i.a);var s={name:"Tool",props:{tool:{type:Object,required:!0},operationTitle:{type:String},operationIcon:{type:String},hideName:{type:Boolean},toolKey:{type:String}},computed:{targetClass:function(){return this.toolKey?"tool-menu-item-".concat(this.tool[this.toolKey]):null}},methods:{onClick:function(e){Object(o.a)("".concat(this.tool.name," selected from panel")),this.$emit("onClick",this.tool,e)},onOperation:function(e){Object(o.a)("".concat(this.tool.name," operation selected from panel")),this.$emit("onOperation",this.tool,e)}}},r=n(6),l={name:"ToolSection",components:{Tool:Object(r.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolTitle"},[e.tool.disabled?n("a",{staticClass:"name text-muted"},[e.hideName?e._e():n("span",[e._v(e._s(e.tool.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v(e._s(e.tool.description))])]):n("a",{class:e.targetClass,attrs:{href:e.tool.link,target:e.tool.target},on:{click:e.onClick}},[n("span",{staticClass:"labels"},e._l(e.tool.labels,(function(t,a){return n("span",{key:a,class:["badge","badge-primary","badge-"+t]},[e._v("\n                "+e._s(t)+"\n            ")])})),0),e._v(" "),e.hideName?e._e():n("span",{staticClass:"name font-weight-bold"},[e._v(e._s(e.tool.name))]),e._v(" "),n("span",{staticClass:"description"},[e._v(e._s(e.tool.description))]),e._v(" "),n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],class:["operation","float-right",e.operationIcon],attrs:{title:e.operationTitle},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onOperation(t)}}})])])}),[],!1,null,null,null).exports},props:{category:{type:Object,required:!0},queryFilter:{type:String},disableFilter:{type:Boolean},hideName:{type:Boolean},operationTitle:{type:String},operationIcon:{type:String},toolKey:{type:String},sectionName:{type:String,default:"default"}},data:function(){return{opened:this.checkFilter()}},watch:{queryFilter:function(){this.opened=this.checkFilter()}},computed:{name:function(){return this.category.title||this.category.name},isSection:function(){return this.category.elems},hasElements:function(){return this.category.elems&&this.category.elems.length>0}},methods:{checkFilter:function(){return!this.disableFilter&&!!this.queryFilter},onClick:function(e,t){this.$emit("onClick",e,t)},onOperation:function(e,t){this.$emit("onOperation",e,t)},toggleMenu:function(){this.opened=!this.opened;var e=this.opened?"opened":"closed";Object(o.a)("".concat(this.name," tools menu ").concat(e))}}},c=(n(246),Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isSection?n("div",[e.hasElements?n("div",[n("div",{class:["toolSectionTitle","tool-menu-section-"+e.sectionName]},[n("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:e.toggleMenu}},[n("span",{staticClass:"name"},[e._v("\n                        "+e._s(this.name)+"\n                    ")])])]),e._v(" "),n("transition",{attrs:{name:"slide"}},[e.opened?n("div",[e._l(e.category.elems.entries(),(function(t){var a=t[0],i=t[1];return[i.text?n("span",{key:a,staticClass:"label toolPanelLabel ml-2"},[e._v("\n                            "+e._s(i.text)+"\n                        ")]):n("tool",{key:a,staticClass:"ml-2",attrs:{tool:i,"tool-key":e.toolKey,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:e.onOperation,onClick:e.onClick}})]}))],2):e._e()])],1):e._e()]):n("div",[e.category.text?n("span",{staticClass:"label toolPanelLabel"},[e._v("\n            "+e._s(e.category.text)+"\n        ")]):n("tool",{attrs:{tool:e.category,"hide-name":e.hideName,"operation-title":e.operationTitle,"operation-icon":e.operationIcon},on:{onOperation:e.onOperation,onClick:e.onClick}})],1)])}),[],!1,null,"f4322288",null));t.a=c.exports},function(e,t,n){"use strict";var a=n(10),i=n.n(a),o=n(4),s=n(5),r={name:"ToolSearch",components:{DelayedInput:n(171).a},props:{query:{type:String},placeholder:{type:String}},data:function(){return{favorites:["#favs","#favorites","#favourites"],minQueryLength:3,loading:!1}},computed:{favoritesResults:function(){return Object(s.a)().user.getFavorites().tools}},methods:{checkQuery:function(e){var t=this;this.$emit("onQuery",e),e&&e.length>=this.minQueryLength?this.favorites.includes(e)?this.$emit("onResults",this.favoritesResults):(this.loading=!0,i.a.get("".concat(Object(o.getAppRoot)(),"api/tools"),{params:{q:e}}).then((function(e){t.loading=!1,t.$emit("onResults",e.data)})).catch((function(e){t.loading=!1,t.$emit("onError",e)}))):this.$emit("onResults",null)}}},l=n(6),c=Object(l.a)(r,(function(){var e=this.$createElement;return(this._self._c||e)("delayed-input",{attrs:{query:this.query,loading:this.loading,placeholder:this.placeholder},on:{onChange:this.checkQuery}})}),[],!1,null,null,null);t.a=c.exports},function(e,t,n){"use strict";var a=n(163),i=n(95),o=n(101);i.c.add(o.b),i.c.add(o.c);var s={components:{FontAwesomeIcon:a.a},props:{query:{type:String},loading:{type:Boolean},placeholder:{type:String,default:"Enter your search term here."},delay:{type:Number,default:1e3}},data:function(){return{queryInput:null,queryTimer:null,queryCurrent:null}},watch:{query:function(e){this.setQuery(e)}},methods:{clearTimer:function(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery:function(e){var t=this;this.clearTimer(),e?this.queryTimer=setTimeout((function(){t.setQuery(e)}),this.delay):this.setQuery(e)},setQuery:function(e){this.clearTimer(),this.queryCurrent===this.queryInput&&this.queryCurrent===e||(this.queryCurrent=this.queryInput=e,this.$emit("onChange",this.queryCurrent))}}},r=n(6),l=Object(r.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-input"},[n("b-input",{staticClass:"search-query",attrs:{placeholder:e.placeholder},on:{input:e.delayQuery,change:e.setQuery,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.setQuery()}},model:{value:e.queryInput,callback:function(t){e.queryInput=t},expression:"queryInput"}}),e._v(" "),e.loading?n("font-awesome-icon",{staticClass:"search-clear",attrs:{icon:"spinner",spin:""}}):n("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"search-clear",attrs:{title:"clear search (esc)",icon:"times-circle"},on:{click:function(t){return e.setQuery()}}})],1)}),[],!1,null,null,null);t.a=l.exports},function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(4),s=n(5),r=n(130),l=n(109),c=n(110),d=n(219),u=n.n(d),h=n(70),p=n(51),m=n(146),f=n(91);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=/\s*(\w+)\s*\((\s*\w+\s*=\s*\w+\s*)\)\s*/m,v=u()(),y=v.renderer.rules.fence,b={history_dataset_display:function(e,t,n){var a=t.history_dataset_id;return"<div class='embedded-item display dataset' data-item-url=\"".concat(Object(o.getAppRoot)(),"dataset/get_item_content_async?id=").concat(a,'">\n            <div class=\'title\'>\n                <div style="float: left">\n                <a class="display_in_embed icon-button toggle-expand" title="Show Dataset content"></a>\n                <a class="toggle icon-button" title="Hide Dataset content"></a>\n                </div>\n                <div style="float: right">\n                <a href="').concat(Object(o.getAppRoot)(),"dataset/display?dataset_id=").concat(a,'" class="icon-button disk" title="Save dataset"></a>\n                <a href="').concat(Object(o.getAppRoot)(),"dataset/imp?dataset_id=").concat(a,'" class="icon-button import" title="Import dataset"></a>\n                </div>\n                <a class="toggle-embed"><h4>Galaxy Dataset | <span class="render-name" history_dataset_id="').concat(a,"\"></span</h4></a>\n            </div>\n            <div class='summary-content'>\n            </div>\n            <div class='expanded-content'>\n                <div class='item-content'>\n                </div>\n            </div>\n        </div>")},history_dataset_embedded:function(e,t,n){var a=t.history_dataset_id;return"<div class='embedded-item display expanded' data-item-url=\"".concat(Object(o.getAppRoot)(),"dataset/get_item_content_async?id=").concat(a,"\">\n            <div class='expanded-content'>\n                <div class='item-content'>\n                </div>\n            </div>\n        </div>")},history_dataset_collection_display:function(e,t,n){var a=t.history_dataset_collection_id;return"<div class='dataset-collection' history_dataset_collection_id=\"".concat(a,'"></div>')},workflow_display:function(e,t,n){var a=t.workflow_id;return'<div class=\'embedded-item display workflow\'>\n            <div class=\'title\'>\n                <div style="float: left">\n                <a class="display_in_embed icon-button toggle-expand" title="Show Workflow content"></a>\n                <a class="toggle icon-button" title="Hide Workflow content"></a>\n                </div>\n                <div style="float: right">\n                \x3c!-- fix URL --\x3e\n                <a href="'.concat(Object(o.getAppRoot)(),"api/workflows/").concat(a,'/download?format=json-download" class="icon-button disk" title="Save workflow"></a>\n                </div>\n                <a class="toggle-embed"><h4>Galaxy Workflow | <span class="render-name" workflow_id="').concat(a,'"></span></h4></a>\n                <input type="hidden" name="ajax-item-content-url" value="').concat(Object(o.getAppRoot)(),"workflow/get_item_content_async?id=").concat(a,"\">\n            </div>\n            <div class='summary-content'>\n            </div>\n            <div class='expanded-content'>\n                <div class='item-content'>\n                </div>\n            </div>\n        </div>")},history_dataset_as_image:function(e,t,n){var a=t.history_dataset_id;return'<img src="'.concat(Object(o.getAppRoot)(),"dataset/display?dataset_id=").concat(a,'"></img>')},history_dataset_peek:function(e,t,n){var a=t.history_dataset_id;return"<div class='dataset-peek' history_dataset_id=\"".concat(a,'"><pre><code></code></pre></div>')},history_dataset_info:function(e,t,n){var a=t.history_dataset_id;return"<div class='dataset-info' history_dataset_id=\"".concat(a,'"><pre><code></code></pre></div>')},tool_stdout:function(e,t,n){var a=t.job_id;return'<div class="tool-stdout" job_id="'.concat(a,'"><pre><code></code></pre></div>')},tool_stderr:function(e,t,n){var a=t.job_id;return'<div class="tool-stderr" job_id="'.concat(a,'"><pre><code></code></pre></div>')},job_metrics:function(e,t,n){var a=t.job_id;return'<div class="job-metrics" job_id="'.concat(a,'"></div>')},job_parameters:function(e,t,n){var a=t.job_id;return'<div class="job-parameters" job_id="'.concat(a,'"></div>')}};function w(e,t,n,a){i()("."+e).each((function(e,o){var s=i()(o).attr(n),r=t[s][a];i()(o).find("code").text(r)}))}v.renderer.rules.fence=function(e,t,n,a,i){var o=e[t],s=o.info?o.info.trim():"",r=o.content;if("galaxy"==s){var l=g.exec(r),c=l[1],d=l[2].trim(),u={};if(d){var h=d.split(/(\s+)/),p=!0,m=!1,f=void 0;try{for(var v,w=h[Symbol.iterator]();!(p=(v=w.next()).done);p=!0){var k=_(v.value.split("="),2),M=k[0],x=k[1];u[M.trim()]=x.trim()}}catch(e){m=!0,f=e}finally{try{p||null==w.return||w.return()}finally{if(m)throw f}}}return b[c](c,u,r)}return y(e,t,n,a,i)};var k={props:{markdownConfig:{type:Object},readOnly:{type:Boolean,default:!0},exportLink:{type:String,required:!1}},data:function(){return{markdownRendered:"",historyDatasets:{},historyDatasetCollections:{},workflows:{},jobs:{}}},computed:{effectiveExportLink:function(){return Object(s.a)().config.enable_beta_markdown_export?this.exportLink:null}},watch:{markdownConfig:function(e,t){var n=this,a=e.markdown;this.markdownRendered=v.render(a),this.historyDatasets=e.history_datasets||{},this.historyDatasetCollections=e.history_dataset_collections||{},this.workflows=e.workflows||{},this.jobs=e.jobs||{},this.$nextTick((function(){Object(r.a)(),Object(l.b)({includeTitle:!1}),Object(c.b)({includeTitle:!1}),i()("span.render-name").each((function(e,t){var a=i()(t).attr("history_dataset_id");a&&i()(t).text(n.historyDatasets[a].name);var o=i()(t).attr("workflow_id");o&&i()(t).text(n.workflows[o].name)})),w("tool-stdout",n.jobs,"job_id","tool_stdout"),w("tool-stderr",n.jobs,"job_id","tool_stderr"),w("dataset-peek",n.historyDatasets,"history_dataset_id","peek"),w("dataset-info",n.historyDatasets,"history_dataset_id","info"),i()(".dataset-collection").each((function(e,t){var a=Object(s.a)(),o=i()(t).attr("history_dataset_collection_id"),r=n.historyDatasetCollections[o],l=new p.a.HistoryDatasetCollection(r),c=new h.a.JobStatesSummaryCollection;return c.historyId=r.history_id,c.monitor(),c.trackModel(l),new(n.readOnly?f.a.HDCAListItemView:m.a.HDCAListItemEdit)({model:l,el:i()(t),linkTarget:"galaxy_main",purgeAllowed:a.config.allow_user_dataset_purge,logger:a.logger}).render(0)}))}))}}},M=(n(249),n(6)),x=Object(M.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"markdown-wrapper"},[t("div",{domProps:{innerHTML:this._s(this.markdownRendered)}}),this._v(" "),this.effectiveExportLink?t("a",{staticClass:"markdown-export",attrs:{href:this.exportLink}},[t("i",{staticClass:"fa fa-4x fa-download"})]):this._e()])}),[],!1,null,null,null);t.a=x.exports},,,,,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=i.a;i.a.fn.extend({hoverhighlight:function(e,t){return e=e||"body",this.length?(o(this).each((function(){var n=o(this),a=n.data("target");a&&n.mouseover((function(n){o(a,e).css({background:t})})).mouseout((function(e){o(a).css({background:""})}))})),this):this}})},function(e,t,n){"use strict";(function(e,n,a){t.a=e.Model.extend({defaults:{url_base:"",async:!1,async_ops:[],categorical_filters:[],filters:{},sort_key:null,show_item_checkboxes:!1,advanced_search:!1,cur_page:1,num_pages:1,operation:void 0,item_ids:void 0},can_async_op:function(e){return-1!==n.indexOf(this.attributes.async_ops,e)},add_filter:function(e,t,n){if(n){var a,i=this.attributes.filters[e];if(null==i)a=t;else if("string"==typeof i)if("All"==i||i==t)a=t;else{var o=[];o[0]=i,o[1]=t,a=o}else-1===(a=i).indexOf(t)&&a.push(t);this.attributes.filters[e]=a}else this.attributes.filters[e]=t},remove_filter:function(e,t){var a=this.attributes.filters[e];if(null==a)return!1;if("string"==typeof a)this.attributes.filters[e]="";else{var i=n.indexOf(a,t);-1!==i&&(a[i]="")}},get_url_data:function(){var e={async:this.attributes.async,sort:this.attributes.sort_key,page:this.attributes.cur_page,show_item_checkboxes:this.attributes.show_item_checkboxes,advanced_search:this.attributes.advanced_search};this.attributes.operation&&(e.operation=this.attributes.operation),this.attributes.item_ids&&(e.id=this.attributes.item_ids);return n.each(n.pairs(this.attributes.filters),(function(t){e["f-".concat(t[0])]=t[1]})),e},get_url:function(e){return"".concat(this.get("url_base"),"?").concat(a.param(this.get_url_data()),"&").concat(a.param(e))}})}).call(this,n(3),n(1),n(0))},function(e){e.exports=JSON.parse('[{"name":"t2.nano","mem":0.5,"price":0.0067,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.nano","mem":0.5,"price":0.006,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.micro","mem":1,"price":0.0134,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.micro","mem":1,"price":0.012,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.small","mem":2,"price":0.0268,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon Family"},{"name":"t3.small","mem":2,"price":0.024,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.medium","mem":3.75,"price":0.079,"priceunit":"Hrs","vcpus":1,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.medium","mem":4,"price":0.0536,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.medium","mem":4,"price":0.048,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m3.large","mem":7.5,"price":0.158,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"t2.large","mem":8,"price":0.1072,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Family"},{"name":"t3.large","mem":8,"price":0.096,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"m5.large","mem":8,"price":0.115,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.large","mem":8,"price":0.136,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.large","mem":8,"price":0.12,"priceunit":"Hrs","vcpus":2,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m3.xlarge","mem":15,"price":0.315,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5.xlarge","mem":16,"price":0.23,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.xlarge","mem":16,"price":0.24,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.xlarge","mem":16,"price":0.192,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.xlarge","mem":16,"price":0.2144,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Family"},{"name":"m5d.xlarge","mem":16,"price":0.272,"priceunit":"Hrs","vcpus":4,"cpu":"Intel Xeon Platinum 8175"},{"name":"m3.2xlarge","mem":30,"price":0.632,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2670 v2 (Ivy Bridge/Sandy Bridge)"},{"name":"m5d.2xlarge","mem":32,"price":0.544,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.2xlarge","mem":32,"price":0.46,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.2xlarge","mem":32,"price":0.48,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"t3.2xlarge","mem":32,"price":0.384,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Skylake E5 2686 v5 (2.5 GHz)"},{"name":"t2.2xlarge","mem":32,"price":0.4288,"priceunit":"Hrs","vcpus":8,"cpu":"Intel Xeon Family"},{"name":"m5d.4xlarge","mem":64,"price":1.088,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.4xlarge","mem":64,"price":0.96,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5.4xlarge","mem":64,"price":0.92,"priceunit":"Hrs","vcpus":16,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.10xlarge","mem":160,"price":2.4,"priceunit":"Hrs","vcpus":40,"cpu":"Intel Xeon E5-2676 v3 (Haswell)"},{"name":"m5d.12xlarge","mem":192,"price":3.264,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.12xlarge","mem":192,"price":2.76,"priceunit":"Hrs","vcpus":48,"cpu":"Intel Xeon Platinum 8175"},{"name":"m4.16xlarge","mem":256,"price":3.84,"priceunit":"Hrs","vcpus":64,"cpu":"Intel Xeon E5-2686 v4 (Broadwell)"},{"name":"m5d.metal","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.metal","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5d.24xlarge","mem":384,"price":6.528,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"},{"name":"m5.24xlarge","mem":384,"price":5.52,"priceunit":"Hrs","vcpus":96,"cpu":"Intel Xeon Platinum 8175"}]')},,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(4),l=n(38),c=n(16),d=s.a.View.extend({initialize:function(e){this.model=new s.a.Model(e),this.url=this.model.get("url"),this.redirect=this.model.get("redirect"),e&&e.active_tab&&(this.active_tab=e.active_tab),this.setElement("<div/>"),this.render()},render:function(){var e=this;i.a.ajax({url:Object(r.getAppRoot)()+this.url,type:"GET"}).done((function(t){var n=i.a.extend({},e.model.attributes,t),a=new l.a({title:n.title,title_id:n.title_id,message:n.message,status:n.status||"warning",icon:n.icon,initial_errors:!0,errors:n.errors,inputs:n.inputs,buttons:{submit:new c.a.Button({tooltip:n.submit_tooltip,title:n.submit_title||"Save",icon:n.submit_icon||"fa-save",cls:"btn btn-primary",onclick:function(){e._submit(a)}})}});e.$el.empty().append(a.$el)})).fail((function(t){e.$el.empty().append(new c.a.Message({message:"Failed to load resource ".concat(e.url,"."),status:"danger",persistent:!0}).$el)}))},_submit:function(e){var t=this;i.a.ajax({url:Object(r.getAppRoot)()+t.url,data:JSON.stringify(e.data.create()),type:"PUT",contentType:"application/json"}).done((function(n){var a={};n.id?a.id=n.id:a={message:n.message,status:"success",persistent:!1},t.redirect?window.location="".concat(Object(r.getAppRoot)()+t.redirect,"?").concat(i.a.param(a)):(e.data.matchModel(n,(function(t,n){e.field_list[n].value(t.value)})),t._showMessage(e,n.message))})).fail((function(n){t._showMessage(e,{message:n.responseJSON.err_msg,status:"danger",persistent:!1})}))},_showMessage:function(e,t){e.$el.parents().filter((function(){return-1!=["auto","scroll"].indexOf(i()(this).css("overflow"))})).first().animate({scrollTop:0},500),e.message.update(t)}});t.a={View:d}},,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var a=n(13),i=n.n(a),o={props:{date:{type:String,required:!0},mode:{type:String,default:"date"}},computed:{elapsedTime:function(){return i()(i.a.utc(this.date)).from(i()().utc())},fullDate:function(){return i.a.utc(this.date).format()}}},s=n(6),r=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"date"==e.mode?n("span",{staticClass:"utc-time",attrs:{title:e.elapsedTime}},[e._v("\n    "+e._s(e.fullDate)+"\n")]):n("span",{staticClass:"utc-time utc-time-elapsed",attrs:{title:e.fullDate}},[e._v("\n    "+e._s(e.elapsedTime)+"\n")])}),[],!1,null,null,null);t.a=r.exports},,,,,,,function(e,t,n){"use strict";var a=n(1),i=n.n(a),o=n(0),s=n.n(o),r=n(3),l=n.n(r),c=n(4),d=n(5),u=n(150),h=n(121),p=n(37),m=n(8),f=l.a.View.extend({el:"body",className:"full-content",_panelids:["left","right"],initialize:function(e){var t=this,n=this;this.config=i.a.defaults(e.config||{},{message_box_visible:!1,message_box_content:"",message_box_class:"info",show_inactivity_warning:!1,inactivity_box_content:"",hide_panels:!1,hide_masthead:!1});var a=Object(d.a)();a.modal=this.modal=new p.a.View,a.router=this.router=e.Router&&new e.Router(n,e),this.masthead=new u.a.View(this.config),this.center=new h.a.CenterPanel,a.display=this.display=function(e){e.title?(m.a.setWindowTitle(e.title),e.allow_title_display=!1):(m.a.setWindowTitle(),e.allow_title_display=!0),e.active_tab&&n.masthead.highlight(e.active_tab),n.center.display(e)},this.$el.attr("scroll","no"),this.$el.html(this._template()),this.$masthead=this.$("#masthead"),this.$center=this.$("#center"),this.$messagebox=this.$("#messagebox"),this.$inactivebox=this.$("#inactivebox"),this.config.hide_masthead?(this.$masthead.remove(),this.$center.css("top",0)):this.$masthead.replaceWith(this.masthead.$el),this.$center.append(this.center.$el),this.$el.append(this.masthead.frame.$el),this.$el.append(this.modal.$el),this.panels={},this.config.hide_panels||i.a.each(this._panelids,(function(a){var i=a.charAt(0).toUpperCase()+a.slice(1),o=e[i];if(o){var s=new o(n,e),r=n.$("#".concat(a));n[s.toString()]=s,n.panels[a]=new h.a.SidePanel({id:a,el:r,view:s}),t.config.hide_masthead&&r.css("top",0)}})),this.render(),this.router&&l.a.history.start({root:Object(c.getAppRoot)(),pushState:!0})},render:function(){return s()(".select2-hidden-accessible").remove(),this.config.hide_masthead||(this.masthead.render(),this.renderMessageBox(),this.renderInactivityBox()),this.renderPanels(),this._checkCommunicationServerOnline(),this},renderMessageBox:function(){if(this.config.message_box_visible){var e=this.config.message_box_content||"",t=this.config.message_box_class||"info";this.$el.addClass("has-message-box"),this.$messagebox.attr("class","panel-".concat(t,"-message")).html(e).toggle(!!e).show()}else this.$el.removeClass("has-message-box"),this.$messagebox.hide();return this},renderInactivityBox:function(){if(this.config.show_inactivity_warning){var e=this.config.inactivity_box_content||"",t=s()("<a/>").attr("href","".concat(Object(c.getAppRoot)(),"user/resend_verification")).text("Resend verification");this.$el.addClass("has-inactivity-box"),this.$inactivebox.html("".concat(e," ")).append(t).toggle(!!e).show()}else this.$el.removeClass("has-inactivity-box"),this.$inactivebox.hide();return this},renderPanels:function(){var e=this;return i.a.each(this._panelids,(function(t){var n=e.panels[t];n?n.render():(e.$center.css(t,0),e.$("#".concat(t)).hide())})),this},_template:function(){return['<div id="everything">\n                <div id="background"/>\n                <div id="masthead"/>\n                <div id="messagebox" class="full-message"/>\n                <div id="inactivebox" class="full-message panel-warning-message" />\n                <div id="columns">\n                    <div id="left" class="unified-panel"/>\n                    <div id="center" />\n                    <div id="right" class="unified-panel" />\n                </div>\n            </div>\n            <div id="dd-helper" />'].join("")},toString:function(){return"PageLayoutView"},_checkCommunicationServerOnline:function(){var e=Object(d.a)(),t=e.config.communication_server_host,n=e.config.communication_server_port,a=e.user.attributes.preferences,i=s()("#show-chat-online");a&&-1!=["1","true"].indexOf(a.communication_server)?s.a.ajax({url:"".concat(t,":").concat(n)}).success((function(t){null!==e.user.id&&"hidden"===i.css("visibility")&&i.css("visibility","visible")})).error((function(e){i.css("visibility","hidden")})):i.css("visibility","hidden")}});t.a={View:f}},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(411);var a=n(1),i=n.n(a);!function(){window.console=window.console||{log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},assert:function(){}},console.debug("Polyfills are running"),Object.assign=Object.assign||i.a.extend;for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window["".concat(t[n],"RequestAnimationFrame")],window.cancelRequestAnimationFrame=window["".concat(t[n],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),o=window.setTimeout((function(){t(a+i)}),i);return e=a+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)});var a=[{name:"canvas",compatible:function(){return window.CanvasRenderingContext2D}},{name:"sessionStorage",compatible:function(){try{return window.sessionStorage.length>=0}catch(e){console.debug(e)}return!1}}].filter((function(e){return!e.compatible()})).map((function(e){return e.name}));if(a.length){var o=document.querySelectorAll('link[rel="index"]').item(0);o&&(window.location="".concat(o.href,"static/incompatible-browser.html")),console.log("incompatible browser:\n".concat(a.join("\n")))}}()},,,,,,,,,,,function(e,t,n){(function(t){e.exports=t.bundleEntries=n(251)}).call(this,n(81))},function(e,t){var n={__root:{"Analyze Data":!1,Workflow:!1,"Shared Data":!1,"Data Libraries":!1,Histories:!1,Workflows:!1,Visualizations:!1,Pages:!1,Visualization:!1,"New Track Browser":!1,"Saved Visualizations":!1,"Interactive Environments":!1,Admin:!1,Help:!1,Support:!1,Search:!1,"Mailing Lists":!1,Videos:!1,Wiki:!1,"How to Cite Galaxy":!1,"Interactive Tours":!1,User:!1,Login:!1,Register:!1,"Login or Register":!1,"Logged in as":!1,Preferences:!1,"Custom Builds":!1,Logout:!1,"Saved Histories":!1,"Saved Datasets":!1,"Saved Pages":!1,"Account and saved data":!1,"Account registration or login":!1,"Support, contact, and community":!1,"Administer this Galaxy":!1,"Visualize datasets":!1,"Access published resources":!1,"Chain tools into workflows":!1,"Analysis home view":!1,"History Lists":!1,"Histories Shared with Me":!1,"Current History":!1,"Create New":!1,"Copy History":!1,"Share or Publish":!1,"Show Structure":!1,"Extract Workflow":!1,"Delete Permanently":!1,"Dataset Actions":!1,"Copy Datasets":!1,"Dataset Security":!1,"Resume Paused Jobs":!1,"Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":!1,"Delete Hidden Datasets":!1,"Purge Deleted Datasets":!1,Downloads:!1,"Export Tool Citations":!1,"Export History to File":!1,"Other Actions":!1,"Import from File":!1,Webhooks:!1,"This history is empty":!1,"No matching datasets found":!1,"An error occurred while getting updates from the server":!1,"Please contact a Galaxy administrator if the problem persists":!1,"search datasets":!1,"You are currently viewing a deleted history!":!1,"You are over your disk quota":!1,"Tool execution is on hold until your disk usage drops below your allocated quota":!1,All:!1,None:!1,"For all selected":!1,"Edit history tags":!1,"Edit history Annotation":!1,"Click to rename history":!1,"Operations on multiple datasets":!1,"Hide datasets":!1,"Unhide datasets":!1,"Delete datasets":!1,"Undelete datasets":!1,"Permanently delete datasets":!1,"This will permanently remove the data in your datasets. Are you sure?":!1,Dataset:!1,Annotation:!1,"This history is empty. Click 'Get Data' on the left tool menu to start":!1,"You must be logged in to create histories":!1,"Unable to purge dataset":!1,"Cannot display datasets removed from disk":!1,"This dataset must finish uploading before it can be viewed":!1,"This dataset is not yet viewable":!1,"View data":!1,Download:!1,"Download dataset":!1,"Additional files":!1,"View details":!1,"This is a new dataset and not all of its data are available yet":!1,"You do not have permission to view this dataset":!1,"The job creating this dataset was cancelled before completion":!1,"This job is waiting to run":!1,"This dataset is currently uploading":!1,"Metadata is being auto-detected":!1,"This job is currently running":!1,'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':!1,"An error occurred with this dataset":!1,"No data":!1,"An error occurred setting the metadata for this dataset":!1,"There was an error getting the data for this dataset":!1,"This dataset has been deleted and removed from disk":!1,"This dataset has been deleted":!1,"This dataset has been hidden":!1,format:!1,database:!1,"Edit attributes":!1,"Cannot edit attributes of datasets removed from disk":!1,"Undelete dataset to edit attributes":!1,"This dataset must finish uploading before it can be edited":!1,"This dataset is not yet editable":!1,Delete:!1,"Dataset is already deleted":!1,"View or report this error":!1,"Run this job again":!1,Visualize:!1,"Visualize in":!1,"Undelete it":!1,"Permanently remove it from disk":!1,"Unhide it":!1,"You may be able to":!1,"set it manually or retry auto-detection":!1,"Edit dataset tags":!1,"Edit dataset annotation":!1,"Tool Help":!1,"Reset passwords":!1,"Search Tool Shed":!1,"Monitor installing repositories":!1,"Manage installed tools":!1,"Reset metadata":!1,"Download local tool":!1,"Tool lineage":!1,"Reload a tool's configuration":!1,"Review tool migration stages":!1,"View Tool Error Logs":!1,"Manage Display Whitelist":!1,"Manage Tool Dependencies":!1,Users:!1,Groups:!1,"API keys":!1,"Impersonate a user":!1,Data:!1,Quotas:!1,Roles:!1,"Local data":!1,"Form Definitions":!1,"Enable/Disable Scratchbook":!1,"Show/Hide Scratchbook":!1,Tags:!1,"Edit annotation":!1,Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":!1,"Your email address":!1,Report:!1,"Error Report":!1,"Dataset details":!1,"Save permissions.":!1,"Change the datatype to a new type.":!1,"Convert the datatype to a new format.":!1,"Save attributes of the dataset.":!1,"Change data type":!1,"Edit dataset attributes":!1,"Save permissions":!1,"Manage dataset permissions":!1,"Change datatype":!1,"Convert datatype":!1,"Convert to new format":!1,Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":!1,"Location Details":!1,"Deleting selected items":!1,"Please select folders or files":!1,"Please enter paths to import":!1,"Adding datasets from your history":!1,"Create New Folder":!1,"Create New Library":!1,Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Enable or disable the communication feature to chat with other users.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change communication settings":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage whitelist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__ja:{"Analyze Data":"データ解析",Workflow:"ワークフロー","Shared Data":"共有データ","Data Libraries":"データライブラリ",Histories:"ヒストリー",Workflows:"ワークフロー",Visualizations:"可視化",Pages:"ページ",Visualization:"可視化","New Track Browser":"新しい Track Browser","Saved Visualizations":"保存された可視化","Interactive Environments":"インタラクティブ環境",Admin:"管理者",Help:"ヘルプ",Support:"サポート",Search:"検索","Mailing Lists":"メーリングリスト",Videos:"動画","How to Cite Galaxy":"Galaxy を引用する方法","Interactive Tours":"インタラクティブツアー",User:"ユーザー",Login:"ログイン",Register:"登録","Login or Register":"ログイン/登録",Preferences:"設定","Custom Builds":"カスタムビルド",Logout:"ログアウト","Saved Histories":"保存されたヒストリ","Saved Datasets":"保存されたデータセット","Saved Pages":"保存されたページ","Account and saved data":"アカウントと保存されたデータ","Account registration or login":"アカウントの登録またはログイン","Support, contact, and community":"サポート、コンタクト、コミュニティ","Administer this Galaxy":"この Galaxy の管理者","Visualize datasets":"データセットの可視化","Access published resources":"パブリッシュされたリソースへアクセス","Chain tools into workflows":"ツールとワークフローの連携","Analysis home view":"解析ホーム","History Lists":"ヒストリーリスト","Histories Shared with Me":"私と共有されているヒストリー","Current History":"現在のヒストリー","Create New":"新しく作成","Copy History":"ヒストリーをコピーする","Share or Publish":"共有またはパブリッシュ","Show Structure":"構造を見る","Extract Workflow":"ワークフローを抽出","Delete Permanently":"永久に削除","Dataset Actions":"データセットの操作","Copy Datasets":"データセットをコピー","Dataset Security":"データセットのセキュリティ","Resume Paused Jobs":"一時停止したジョブの再開","Collapse Expanded Datasets":"展開されたデータセットを畳む","Unhide Hidden Datasets":"隠されたデータセットを表示する","Delete Hidden Datasets":"隠されたデータセットを削除する","Purge Deleted Datasets":"削除されたデータセットを永久に削除",Downloads:"ダウンロード","Export Tool Citations":"ツールの引用をエクスポート","Export History to File":"ヒストリーをファイルへエクスポート","Other Actions":"その他のアクション","Import from File":"ファイルからの読み込み",Webhooks:"Webhooks","This history is empty":"ヒストリーは空です","No matching datasets found":"一致するデータセットが見つかりませんでした","Search datasets":"データセットを検索する","You are currently viewing a deleted history!":"消去したヒストリーをみています。","You are over your disk quota":"あなたはディスククォータを超えている",All:"一式",None:"なし","For all selected":"各項目を","Edit history tags":"ヒストリーのタグを編集","Edit history annotation":"ヒストリーのアノテーションを編集","Click to rename history":"ヒストリーの名前を変更するにはクリック","Operations on multiple datasets":"複数のデータセットに対する操作","Permanently delete datasets":"永久にデータセットを削除","This will permanently remove the data in your datasets. Are you sure?":"これは永久にあなたのデータセット内のデータを削除します。本当に？",Dataset:"データセット","This history is empty. Click 'Get Data' on the left tool menu to start":"ヒストリーは空です。解析をはじめるには、左パネルの 'データ取得' をクリック","You must be logged in to create histories":"ヒストリーを作成するためにはログインする必要があります","View data":"データを表示",Download:"ダウンロード","Download dataset":"データセットをダウンロード","View details":"細部を表示","This job is waiting to run":"ジョブは実行待ちです","This job is currently running":"ジョブは実行中です","An error occurred with this dataset":"このジョブの実行中に発生したエラー","No data":"データ無し","This dataset has been deleted and removed from disk":"このデータセットは、永続的にディスクから削除されました","This dataset has been deleted":"このデータセットは削除されました","This dataset has been hidden":"このデータセットは、非表示にされた",format:"フォーマット",database:"データベース","Edit attributes":"変数を編集する",Delete:"削除する","View or report this error":"このエラーを届け出る","Run this job again":"もう一度このジョブを実行する",Visualize:"可視化する","Undelete it":"復元する","Permanently remove it from disk":"永久にディスクから削除","Unhide it":"非表示解除する","Search Tool Shed":"Tool Shed で探す","Search Tool Shed (Beta)":"Tool Shed (Beta) で探す","Monitor installing repositories":"インストールレポジトリのモニタ","Manage installed tools":"インストールしたツールの管理","Reset metadata":"メタデータのリセット","Download local tool":"ローカルツールのダウンロード","Tool lineage":"ツール系統","Reload a tool's configuration":"ツールのコンフィグのリロード","Review tool migration stages":"ツール移行ステージのレビュー","View Tool Error Logs":"ツールのエラーログ","Manage Display Whitelist":"表示ホワイトリストの管理","Manage Tool Dependencies":"ツール依存関係の管理",Users:"ユーザー",Groups:"グループ","API keys":"API キー","Impersonate a user":"ユーザー偽装",Data:"データ",Quotas:"クォータ",Roles:"ロール","Local data":"ローカルデータ","Form definitions":"フォーム定義",Administration:"管理",Server:"サーバー","Tools and Tool Shed":"ツールと Tool Shed","User Management":"ユーザ管理","Form Definitions":"フォーム定義","Your workflows":"あなたのワークフロー"},__fr:{"Analyze Data":"Analyse de données",Workflow:"Workflow","Shared Data":"Données partagées","Data Libraries":"Bibliothèque de données",Histories:!1,Workflows:!1,Visualizations:"Visualisations",Pages:"Pages",Visualization:!1,"New Track Browser":"Nouveau Navigateur de Tracks/Pistes","Saved Visualizations":"Visualisations sauvegardées","Interactive Environments":"Environnements interactifs",Admin:"Admin",Help:"Aide",Support:"Assistance",Search:!1,"Mailing Lists":"Liste de diffusion",Videos:"Vidéos",Wiki:"Documentations","How to Cite Galaxy":"Comment citer Galaxy","Interactive Tours":"Guides interactifs",User:"Utilisateur",Login:"Authentification",Register:"Enregistrement","Login or Register":"Authentification et Enregistrement","Logged in as":"Authentifié en tant que",Preferences:"Préférences","Custom Builds":"Mes génomes Builds de référence",Logout:"Déconnexion","Saved Histories":"Historiques sauvegardés","Saved Datasets":"Jeux de données sauvegardés","Saved Pages":"Pages sauvegardées","Account and saved data":"Compte et données sauvegardées","Account registration or login":"Enregistrement ou authentification","Support, contact, and community":"Support,contact et communauté","Administer this Galaxy":"Outils Admin","Visualize datasets":"Visualiser les jeux de données","Access published resources":"Accéder aux données partagées","Chain tools into workflows":"Relier outils dans un workflow","Analysis home view":"Accueil analyse de données","History Lists":"Tableaux des historiques","Histories Shared with Me":"Historiques partagés avec moi","Current History":"Cet Historique","Create New":"Créer un nouveau","Copy History":"Copier l'Historique","Share or Publish":"Partager et publier","Show Structure":"Montrer la structure","Extract Workflow":"Extraire un Workflow","Delete Permanently":"Supprimer définitivement","Dataset Actions":"Actions sur les jeux de données","Copy Datasets":"Copier des jeux de données","Dataset Security":"Permissions/Sécurité","Resume Paused Jobs":"Reprendre les processus en pause","Collapse Expanded Datasets":"Réduire les données étendues","Unhide Hidden Datasets":"Afficher les données cachées","Delete Hidden Datasets":"Supprimer les données cachées","Purge Deleted Datasets":"Purger les données supprimées",Downloads:"Télécharger","Export Tool Citations":"Exporter les citations des outils","Export History to File":"Exporter l'Historique dans un fichier","Other Actions":"Autres actions","Import from File":"Importer depuis un fichier",Webhooks:"Webhooks","This history is empty":"Cet historique est vide","No matching datasets found":"Aucunes données correspondantes n'ont été trouvées","An error occurred while getting updates from the server":"Une erreur s'est produite lors de la réception des données depuis le serveur","Please contact a Galaxy administrator if the problem persists":"Veuillez contacter un administrateur de l'instance Galaxy si ce problème persiste","search datasets":"Rechercher des données","You are currently viewing a deleted history!":"Vous consultez actuellement un historique supprimé!","You are over your disk quota":"Vous avez dépassé votre quota d'espace disque","Tool execution is on hold until your disk usage drops below your allocated quota":"L'exécution de l'outil est en attente tant que votre utilisation d'espace disque dépasse le quota attribué",All:"Tout",None:"Aucun","For all selected":"Pour toute la sélection","Edit history tags":"Editer les mots-clés de l'historique","Edit history Annotation":"Editer l'annotation de l'historique","Click to rename history":"Cliquer pour renommer l'historique","Operations on multiple datasets":"Opérer sur plusieurs jeux de données en même temps","Hide datasets":"Cacher les jeux de données","Unhide datasets":"Afficher les jeux de données cachés","Delete datasets":"Supprimer les jeux de données","Undelete datasets":"Restaurer les jeux de données supprimés","Permanently delete datasets":"Supprimer définitivement les jeux de données","This will permanently remove the data in your datasets. Are you sure?":"Cela supprimera de manière permanente les données de votre historique. Êtes-vous certain?",Dataset:"Jeu de données",Annotation:"Annotation","This history is empty. Click 'Get Data' on the left tool menu to start":"Cet historique est vide. Cliquer sur 'Get Data' au niveau du menu d'outils à gauche pour démarrer","You must be logged in to create histories":"Vous devez être connecté pour créer un historique","load your own data":"Charger vos propres données","get data from an external source":"Charger des données depuis une source externe","Include Deleted Datasets":"Inclure les jeux de données supprimés","Include Hidden Datasets":"Inclure les jeux de données cachés","Unable to purge dataset":"Impossible de purger le jeu de données","Cannot display datasets removed from disk":"Impossible de visualiser les jeux de données supprimés du disque","This dataset must finish uploading before it can be viewed":"Le jeu de données doit être totalement téléversé avant de pouvoir être visualiser","This dataset is not yet viewable":"Ce jeu de données n'est pas visualisable","View data":"Voir les données",Download:!1,"Download dataset":"Télécharger le jeu de données","Additional files":"Fichiers additionnels","View details":"Voir les détails","This is a new dataset and not all of its data are available yet":"Il s'agit d'un nouveau jeu de données et seule une partie des données est accessible pour le moment","You do not have permission to view this dataset":"Vous n'avez pas la permission de voir ce jeu de données","The job creating this dataset was cancelled before completion":"Le processus à l'origine de ce jeu de données a été annulé prématurément","This job is waiting to run":"Ce calcul est en attente de traitement","This dataset is currently uploading":"Ce jeu de données est en cours de téléversement","Metadata is being auto-detected":"Les métadonnées sont auto-détectées","This job is currently running":"Le traitement est en cours",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'Ce traitement est en pause. Utilisez le "Relancer les traitements en pause" dans le menu d\'historique pour le relancer',"An error occurred with this dataset":"Une erreur est survenue avec ce jeu de données","No data":"Aucune donnée","An error occurred setting the metadata for this dataset":"Une erreur est survenue pendant la récupération des métadonnées de ce jeu de données","There was an error getting the data for this dataset":"Il est survenu une erreur durant la récupération du contenu de ce jeu de données","This dataset has been deleted and removed from disk":"Ce jeu de données a été supprimé et effacé du disque","This dataset has been deleted":"Ce jeu de données a été supprimé","This dataset has been hidden":"Ce jeu de données a été caché",format:"format",database:"génome de référence","Edit attributes":"Editer les attributs","Cannot edit attributes of datasets removed from disk":"Impossible d'éditer les attributs de jeux de données effacés du disque","Undelete dataset to edit attributes":"Restaurer le jeu de données pour en éditer les attributs","This dataset must finish uploading before it can be edited":"Ce jeu de données doit être entièrement téléversé avant toute modification","This dataset is not yet editable":"Ce jeu de données n'est pas encore éditable",Delete:"Supprimer","Dataset is already deleted":"Le jeu de données est déjà supprimé","View or report this error":"Voir ou remonter cette erreur","Run this job again":"Exécuter ce traitement à nouveau",Visualize:!1,"Visualize in":"Visualiser via","Undelete it":"Restaurer","Permanently remove it from disk":"Supprimer définitivement du disque","Unhide it":"Rendre visible","You may be able to":"Vous devriez être en mesure de","set it manually or retry auto-detection":"Traitez le manuellement ou retenter la détection automatique","Edit dataset tags":"Editer les mots-clés du jeu de données","Edit dataset annotation":"Editer les annotations du jeu de données","Tool Help":"Aide outil","Reset passwords":"Réinitialiser les mots de passe","Search Tool Shed":"Chercher via un Tool Shed","Monitor installing repositories":"Contrôler les dépôts installés","Manage installed tools":"Gérer les outils installés","Reset metadata":"Réinitialiser les métadonnées","Download local tool":"Télécharger un outil en local","Tool lineage":"Affiliation des outils","Reload a tool's configuration":"Recharger une configuration d'outils","Review tool migration stages":"Vérifier les étapes de migration d'outils","View Tool Error Logs":"Voir les logs d'erreur d'outils","Manage Display Whitelist":"Gérer la liste blanche d'outils graphiques","Manage Tool Dependencies":"Gérer les dépendances d'outils",Users:!1,Groups:!1,"API keys":"Clé d'API","Impersonate a user":"Prendre la place d'un utilisateur",Data:!1,Quotas:!1,Roles:!1,"Local data":"Données locales","Form Definitions":"Définitions de formulaires","Enable/Disable Scratchbook":"Activer/Désactiver la visu Scratchbook","Show/Hide Scratchbook":"Montrer/cacher la visu Scratchbook",Tags:"Mots-clés","Edit annotation":"Editer les annotations",Subscript:!1,Superscript:!1,Trackster:!1,"Any additional comments you can provide regarding what you were doing at the time of the bug.":"N'importe quel commentaire que vous pouvez fournir concernant ce que vous faisiez lorsque le bug est apparu","Your email address":"Votre adresse e-mail",Report:!1,"Error Report":"Rapport d'erreur","Dataset details":"Détails du jeu de données","Save permissions.":"Sauvegarder les permissions","Change the datatype to a new type.":"Changer en un nouveau format de données","Convert the datatype to a new format.":"Convertir le format de données","Save attributes of the dataset.":"Sauvegarder les attributs du jeu de données","Change data type":"Changer le format de données","Edit dataset attributes":"Modifier les attributs du jeu de données","Save permissions":"Sauvegarder les permissions","Manage dataset permissions":"Gérer les permissions sur les jeux de données","Change datatype":"Changer le format de données","Convert datatype":"Convertir le format de données","Convert to new format":"Convertir en un nouveau format de données",Save:!1,Permissions:!1,Datatypes:!1,Convert:!1,Attributes:!1,"Import into History":"Importer dans l'historique","Location Details":"Détails de localisation","Deleting selected items":"Suppression des objets sélectionnés","Please select folders or files":"S'il vous plaît sélectionnez des dossiers ou fichiers","Please enter paths to import":"S'il vous plaît entrer des chemins/URLs à importer","Adding datasets from your history":"Ajouts de jeux de données à partir de votre historique","Create New Folder":"Créer un nouveau dossier","Create New Library":"Créer une nouvelle bibliothèque",Tours:!1,"Click here to sign out of all sessions.":!1,"Add or remove custom builds using history datasets.":!1,"Associate OpenIDs with your account.":!1,"Customize your Toolbox by displaying or omitting sets of Tools.":!1,"Access your current API key or create a new one.":!1,"Enable or disable the communication feature to chat with other users.":!1,"Allows you to change your login credentials.":!1,"User Preferences":!1,"Sign out":!1,"Manage custom builds":!1,"Manage OpenIDs":!1,"Manage Toolbox filters":!1,"Manage API key":!1,"Set dataset permissions for new histories":!1,"Change communication settings":!1,"Change password":!1,"Manage information":!1,"Configured Tool Sheds":!1,"Repository Queue":!1,"Repository Status":!1,"Workflows Missing Tools":!1,"See in Tool Shed":!1,Requirements:!1,Share:!1,"Workflow submission failed":!1,"Run workflow":!1,"Job submission failed":!1,Execute:!1,"Tool request failed":!1,"Copy and insert individual steps":!1,Warning:!1,"An email notification will be sent when the job has completed.":!1,"Add a step label.":!1,"Assign columns":!1,"Delete this repeat block":!1,placeholder:!1,Repeat:!1,Error:!1,Close:!1,"Download from web or upload from disk":!1,Collection:!1,Composite:!1,Regular:!1,"Upload configuration":!1,"FTP files":!1,Reset:!1,Pause:!1,Start:!1,"Choose FTP file":!1,"Choose local file":!1,Build:!1,"Choose FTP files":!1,"Choose local files":!1,Select:!1,"Create a collection of paired datasets":!1,"View all histories":!1,"History options":!1,"Refresh history":!1,"View error logs":!1,"View migration stages":!1,"View lineage":!1,"Manage dependencies":!1,"Manage whitelist":!1,"Manage metadata":!1,"Manage tools":!1,"Monitor installation":!1,"Install new tools":!1,"Tool Management":!1,Forms:!1,"User Management":!1,"Manage jobs":!1,"Display applications":!1,"Data tables":!1,"Data types":!1,Server:!1,"Could Not Save":!1,"Saving...":!1,Settings:!1,"Add tracks":!1,"New Visualization":!1,"Add Data to Saved Visualization":!1,"Close visualization":!1,Circster:!1,Bookmarks:!1,"Add group":!1,"Remove parameter from tree":!1,"Add parameter to tree":!1,Remove:!1,"Select datasets for new tracks":!1,Libraries:!1,"Zoom out":!1,"Zoom in":!1,"Phyloviz Help":!1,"Save visualization":!1,"PhyloViz Settings":!1,Title:!1,"Filtering Dataset":!1,"Filter Dataset":!1,"Show individual tracks":!1,"Trackster Error":!1,"Tool parameter space visualization":!1,Tool:!1,"Set as overview":!1,"Set display mode":!1,Filters:!1,"Show composite track":!1,"Edit settings":!1,"Test title":!1,"Test Title":!1,"Test button":!1,title:!1,"Create new Build":!1,"Delete custom build.":!1,"Provide the data source.":!1,"Next in History":!1,"Previous in History":!1,"Chat online":!1,"Multiple collections":!1,"Dataset collections":!1,"Dataset collection":!1,"Multiple datasets":!1,"Single dataset":!1,"Download from URL or upload files from disk":!1,"tool tooltip":!1},__zh:{"Analyze Data":"数据分析",Workflow:"工作流程","Shared Data":"共享数据","Data Libraries":"数据库",Histories:"历史",Workflows:"流程",Visualizations:"可视化",Pages:"页面",Visualization:"可视化","New Track Browser":"创建 Track Browser","Saved Visualizations":"已保存的可视化","Interactive Environments":"交互式环境",Admin:"管理员",Help:"帮助支持",Support:"支持",Search:"搜索","Mailing Lists":"邮件列表",Videos:"视频",Wiki:!1,"How to Cite Galaxy":"引用","Interactive Tours":"使用引导",User:"账号管理",Login:"登陆",Register:"注册","Login or Register":"注册登陆","Logged in as":"您已登陆为",Preferences:"用户偏好性","Custom Builds":"自定义构建集",Logout:"退出","Saved Histories":"保存历史","Saved Datasets":"保存数据集","Saved Pages":"保存页面",Tools:"工具","Account and saved data":"账号及数据保存","Account registration or login":"注册与登录","Support, contact, and community":"支持，联系，社区","Administer this Galaxy":"管理您的Galaxy","Visualize datasets":"数据集可视化","Access published resources":"访问发布的资源","Chain tools into workflows":"将工具链接到工作流程中","Analysis home view":"数据分析主页",History:"历史","History Lists":"历史列表","Histories Shared with Me":"分享给您历史","Current History":"当前历史","Create New":"创建新的历史","Copy History":"复制历史","Share or Publish":"分享或发布历史","Show Structure":"展示结构","Extract Workflow":"提取为工作流",Delete:"删除","Delete Permanently":"永久删除","Dataset Actions":"数据操作","Copy Datasets":"复制数据集","Dataset Security":"数据安全","Resume Paused Jobs":"恢复已暂停的任务","Collapse Expanded Datasets":!1,"Unhide Hidden Datasets":"取消隐藏的数据集","Delete Hidden Datasets":"删除隐藏的数据集","Purge Deleted Datasets":"清空已删除的数据集",Downloads:"下载","Export Tool Citations":"导出工具文献引用","Export History to File":"导出历史到文件","Other Actions":"其他操作","Import from File":"从文件导入",Webhooks:!1,"This history is empty":"历史已空","No matching datasets found":"未找到匹配的数据集","An error occurred while getting updates from the server":"从服务器更新出现错误","Please contact a Galaxy administrator if the problem persists":"如果问题仍然存在，请联系Galaxy管理员","An error was encountered while <% where %>":"出现错误，当执行以下操作时: <% where %>","search datasets":"搜索数据集","You are currently viewing a deleted history!":"您正在查看已删除的历史记录","You are over your disk quota":"您超出了您的磁盘配额","Tool execution is on hold until your disk usage drops below your allocated quota":"工具执行处于暂停状态，直到您的磁盘使用量低于您分配的配额",All:"所有的",None:"一个也没有","For all selected":"为每个选定","Edit history tags":"编辑历史标签","Edit history Annotation":"编辑历史备注","Click to rename history":"单击要重命名的历史","Operations on multiple datasets":"编辑多个数据集","Hide datasets":"隐藏数据集","Unhide datasets":"显示数据集","Delete datasets":"删除数据集","Undelete datasets":"取消删除数据集","Permanently delete datasets":"永久删除数据集","This will permanently remove the data in your datasets. Are you sure?":"这将永久在您的数据集删除数据。你确定？",Dataset:"数据",Annotation:"备注","This history is empty. Click 'Get Data' on the left tool menu to start":"历史已空，请单击左边窗格中‘获取数据’","You must be logged in to create histories":"你必须登录后才能创建历史","You can ":"您可以 "," or ":" 或者 ","load your own data":"上传您的个人数据","get data from an external source":"从外部来源获取数据","Unable to purge dataset":"无法清除数据集","Cannot display datasets removed from disk":"无法显示已从磁盘中删除的数据集","This dataset must finish uploading before it can be viewed":"此数据集必须先完成上传, 然后才能查看","This dataset is not yet viewable":"此数据集是不可见的","View data":"查看数据",Download:"下载","Download dataset":"下载数据集","Additional files":"其他文件","View details":"查看详情","This is a new dataset and not all of its data are available yet":"这是一个新的数据集，并不是所有的数据都可用","You do not have permission to view this dataset":"您无权查看此数据集","The job creating this dataset was cancelled before completion":"创建此数据集的任务在完成之前已被取消","This job is waiting to run":"任务正在等待运行","This dataset is currently uploading":"此数据集正在上传中","Metadata is being auto-detected":"元数据正在被自动检测中","This job is currently running":"任务正在运行中",'This job is paused. Use the "Resume Paused Jobs" in the history menu to resume':'此任务已暂停。使用历史菜单中的 "恢复已暂停的工作" 来恢复',"An error occurred with this dataset":"此数据集发生错误","No data":"没有数据","An error occurred setting the metadata for this dataset":"设置此数据集的元数据时发生错误","There was an error getting the data for this dataset":"获取此数据集的数据时出错","This dataset has been deleted and removed from disk":"此数据集已被删除并从磁盘中删除","This dataset has been deleted":"此数据集已被删除","This dataset has been hidden":"此数据集已被隐藏",format:"格式",database:"数据库","Edit attributes":"编辑属性","Cannot edit attributes of datasets removed from disk":"无法编辑已从磁盘中删除的数据集的属性","Undelete dataset to edit attributes":"取消删除数据集以编辑属性","This dataset must finish uploading before it can be edited":"该数据集必须先上传完成, 然后才能编辑","This dataset is not yet editable":"该数据集不可编辑","Dataset is already deleted":"数据集已被删除","View or report this error":"查看或报告此错误","Run this job again":"重新运行此任务",Visualize:"可视化","Visualize in":"的可视化","Undelete it":"取消删除","Permanently remove it from disk":"从磁盘中永久删除","Unhide it":"取消隐藏","You may be able to":"您可能可以","set it manually or retry auto-detection":"手动设置或重试自动检测","Edit dataset tags":"编辑数据集标签","Edit dataset annotation":"编辑数据集备注","Tool Help":"工具帮助","Search Tool Shed":"搜索 Tool Shed","Monitor installing repositories":"","Manage installed tools":"管理已安装的工具","Reset metadata":"重置元数据","Download local tool":"下载本地工具","Tool lineage":!1,"Reload a tool's configuration":"重新加载工具的配置","Review tool migration stages":"查看工具迁移状态","View Tool Error Logs":"查看工具错误日志","Manage Display Whitelist":"管理显示白名单","Manage Tool Dependencies":"管理工具依赖",Users:"用户",Groups:"组别","API keys":!1,"Impersonate a user":"模拟用户",Data:"数据",Quotas:"配额",Roles:"角色","Local data":"本地数据","Form Definitions":"定义表单","Enable/Disable Scratchbook":"启用/禁用 Scratchbook","Show/Hide Scratchbook":"显示/隐藏 Scratchbook",Tags:"标签","Edit annotation":"编辑备注",ja:!0,fr:!0,zh:!0},init:function(e){e||(e="undefined"!=typeof window&&window._i18n&&window._i18n.locale?window._i18n.locale:"undefined"!=typeof document&&document.documentElement.lang?document.documentElement.lang:"undefined"!=typeof navigator&&(navigator.languages||navigator.language||navigator.userLanguage)?((e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"root").toLowerCase():"root");var t=this["__"+e]||this.__root;if(t)for(var n in t)this[n]=t[n];for(var n in this.__root)void 0===this[n]&&(this[n]=this.__root[n])}};n.init(),e.exports=n},function(e,t,n){"use strict";var a=n(123);n.n(a).a},function(e,t,n){"use strict";var a=n(124);n.n(a).a},function(e,t,n){"use strict";var a=n(125);n.n(a).a},function(e,t,n){"use strict";var a=n(126);n.n(a).a},function(e,t,n){"use strict";var a=n(127);n.n(a).a},function(e,t,n){"use strict";var a=n(128);n.n(a).a},function(e,t,n){"use strict";var a=n(129);n.n(a).a},function(e,t,n){"use strict";var a=n(131);n.n(a).a},function(e,t,n){"use strict";var a=n(132);n.n(a).a},function(e,t,n){"use strict";var a=n(133);n.n(a).a},function(e,t,n){"use strict";var a=n(134);n.n(a).a},function(e,t,n){"use strict";var a=n(135);n.n(a).a},function(e,t,n){"use strict";var a=n(136);n.n(a).a},function(e,t,n){"use strict";var a=n(137);n.n(a).a},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=(n(207),n(5)),s=n(83),r=n(1),l=n.n(r),c=n(3),d=n.n(c),u=n(4),h=n(2),p=n.n(h),m=n(9),f=n(22),_=n(8),g=n(46),v=n(35),y=(n(208),d.a.Model.extend({is_visible:function(e,t){var n=e.getBoundingClientRect(),a=i()("svg")[0].getBoundingClientRect();return!(n.right<0||n.left>a.right||n.bottom<0||n.top>a.bottom)}})),b={drawTicks:function(e,t,n,a,i){var o=e.append("g").selectAll("g").data(t).enter().append("g").selectAll("g").data(n).enter().append("g").attr("class","tick").attr("transform",(function(e){return"rotate(".concat(180*e.angle/Math.PI-90,")translate(").concat(e.radius,",0)")})),s=[],r=[],l=function(e){return e.angle>Math.PI?"end":null};return i?(s=[0,0,0,-4],r=[4,0,"",".35em"],l=null):(s=[1,0,4,0],r=[0,4,".35em",""]),o.append("line").attr("x1",s[0]).attr("y1",s[1]).attr("x2",s[2]).attr("y1",s[3]).style("stroke","#000"),o.append("text").attr("x",r[0]).attr("y",r[1]).attr("dx",r[2]).attr("dy",r[3]).attr("text-anchor",l).attr("transform",a).text((function(e){return e.label}))},formatNum:function(e,t){if(void 0===t&&(t=2),null===e)return null;var n=null;if(Math.abs(e)<1)n=e.toPrecision(t);else{var a=Math.round(e.toPrecision(t));(e=Math.abs(e))<1e3?n=a:e<1e6?n="".concat(Math.round((a/1e3).toPrecision(3)).toFixed(0),"K"):e<1e9&&(n="".concat(Math.round((a/1e6).toPrecision(3)).toFixed(0),"M"))}return n}},w=d.a.Model.extend({}),k=d.a.View.extend({className:"circster",initialize:function(e){this.genome=e.genome,this.label_arc_height=50,this.scale=1,this.circular_views=null,this.chords_views=null,this.model.get("drawables").on("add",this.add_track,this),this.model.get("drawables").on("remove",this.remove_track,this);var t=this.model.get("config");t.get("arc_dataset_height").on("change:value",this.update_track_bounds,this),t.get("track_gap").on("change:value",this.update_track_bounds,this)},get_circular_tracks:function(){return this.model.get("drawables").filter((function(e){return"DiagonalHeatmapTrack"!==e.get("track_type")}))},get_chord_tracks:function(){return this.model.get("drawables").filter((function(e){return"DiagonalHeatmapTrack"===e.get("track_type")}))},get_tracks_bounds:function(){var e=this.get_circular_tracks(),t=this.model.get("config").get_value("arc_dataset_height"),n=this.model.get("config").get_value("track_gap"),a=Math.min(this.$el.width(),this.$el.height())-20,i=a/2-e.length*(t+n)+n-this.label_arc_height,o=m.range(i,a/2,t+n);return l.a.map(o,(function(e){return[e,e+t]}))},render:function(){var e=this,t=e.$el.width(),n=e.$el.height(),a=this.get_circular_tracks(),i=this.get_chord_tracks(),o=e.model.get("config").get_value("total_gap"),s=this.get_tracks_bounds(),r=m.select(e.$el[0]).append("svg").attr("width",t).attr("height",n).attr("pointer-events","all").append("svg:g").call(m.behavior.zoom().on("zoom",(function(){var t=m.event.scale;r.attr("transform","translate(".concat(m.event.translate,") scale(").concat(t,")")),e.scale!==t&&(e.zoom_drag_timeout&&clearTimeout(e.zoom_drag_timeout),e.zoom_drag_timeout=setTimeout((function(){}),400))}))).attr("transform","translate(".concat(t/2,",").concat(n/2,")")).append("svg:g").attr("class","tracks");this.circular_views=a.map((function(t,n){var a=new S({el:r.append("g")[0],track:t,radius_bounds:s[n],genome:e.genome,total_gap:o});return a.render(),a})),this.chords_views=i.map((function(t){var n=new D({el:r.append("g")[0],track:t,radius_bounds:s[0],genome:e.genome,total_gap:o});return n.render(),n}));var l=this.circular_views[this.circular_views.length-1].radius_bounds[1],c=[l,l+this.label_arc_height];this.label_track_view=new x({el:r.append("g")[0],track:new w,radius_bounds:c,genome:e.genome,total_gap:o}),this.label_track_view.render()},add_track:function(e){var t=this.model.get("config").get_value("total_gap");if("DiagonalHeatmapTrack"===e.get("track_type")){var n=this.circular_views[0].radius_bounds,a=new D({el:m.select("g.tracks").append("g")[0],track:e,radius_bounds:n,genome:this.genome,total_gap:t});a.render(),this.chords_views.push(a)}else{var i=this.get_tracks_bounds();l.a.each(this.circular_views,(function(e,t){e.update_radius_bounds(i[t])})),l.a.each(this.chords_views,(function(e){e.update_radius_bounds(i[0])}));var o=this.circular_views.length,s=new S({el:m.select("g.tracks").append("g")[0],track:e,radius_bounds:i[o],genome:this.genome,total_gap:t});s.render(),this.circular_views.push(s)}},remove_track:function(e,t,n){var a=this.circular_views[n.index];this.circular_views.splice(n.index,1),a.$el.remove();var i=this.get_tracks_bounds();l.a.each(this.circular_views,(function(e,t){e.update_radius_bounds(i[t])}))},update_track_bounds:function(){var e=this.get_tracks_bounds();l.a.each(this.circular_views,(function(t,n){t.update_radius_bounds(e[n])})),l.a.each(this.chords_views,(function(t){t.update_radius_bounds(e[0])}))}}),M=d.a.View.extend({tagName:"g",initialize:function(e){this.bg_stroke="#ddd",this.loading_bg_fill="#ffc",this.bg_fill="#ddd",this.total_gap=e.total_gap,this.track=e.track,this.radius_bounds=e.radius_bounds,this.genome=e.genome,this.chroms_layout=this._chroms_layout(),this.data_bounds=[],this.scale=1,this.parent_elt=m.select(this.$el[0])},get_fill_color:function(){var e=this.track.get("config").get_value("block_color");return e||(e=this.track.get("config").get_value("color")),e},render:function(){var e=this.parent_elt,t=this.chroms_layout,n=m.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]),a=e.selectAll("g").data(t).enter().append("svg:g").append("path").attr("d",n).attr("class","chrom-background").style("stroke",this.bg_stroke).style("fill",this.loading_bg_fill);a.append("title").text((function(e){return e.data.chrom}));var o=this,s=o.track.get("data_manager"),r=!s||s.data_is_ready();i.a.when(r).then((function(){i.a.when(o._render_data(e)).then((function(){a.style("fill",o.bg_fill),o.render_labels()}))}))},render_labels:function(){},update_radius_bounds:function(e){this.radius_bounds=e;var t=m.svg.arc().innerRadius(this.radius_bounds[0]).outerRadius(this.radius_bounds[1]);this.parent_elt.selectAll("g>path.chrom-background").transition().duration(1e3).attr("d",t),this._transition_chrom_data(),this._transition_labels()},update_scale:function(e){var t=this.scale;if(this.scale=e,!(e<=t)){var n=this,a=new y;return this.parent_elt.selectAll("path.chrom-data").filter((function(e,t){return a.is_visible(this)})).each((function(t,a){var o,s=m.select(this),r=s.attr("chrom"),c=n.genome.get_chrom_region(r);n.track.get("data_manager").can_get_more_detailed_data(c)&&(o=n.track.get("data_manager").get_more_detailed_data(c,"Coverage",0,e),i.a.when(o).then((function(e){s.remove(),n._update_data_bounds();var t=l.a.find(n.chroms_layout,(function(e){return e.data.chrom===r})),a=n.get_fill_color();n._render_chrom_data(n.parent_elt,t,e).style("stroke",a).style("fill",a)})))})),n}},_transition_chrom_data:function(){var e=this.track,t=this.chroms_layout,n=this.parent_elt.selectAll("g>path.chrom-data");if(n[0].length>0){var a=this;i.a.when(e.get("data_manager").get_genome_wide_data(this.genome)).then((function(i){var o=l.a.reject(l.a.map(i,(function(e,n){var i=null,o=a._get_path_function(t[n],e);return o&&(i=o(e.data)),i})),(function(e){return null===e})),s=e.get("config").get_value("color");n.each((function(e,t){m.select(this).transition().duration(1e3).style("stroke",s).style("fill",s).attr("d",o[t])}))}))}},_transition_labels:function(){},_update_data_bounds:function(e){this.data_bounds=e||this.get_data_bounds(this.track.get("data_manager").get_genome_wide_data(this.genome)),this._transition_chrom_data()},_render_data:function(e){var t=this,n=this.chroms_layout,a=this.track,o=i.a.Deferred();return i.a.when(a.get("data_manager").get_genome_wide_data(this.genome)).then((function(i){t.data_bounds=t.get_data_bounds(i),a.get("config").set_value("min_value",t.data_bounds[0],{silent:!0}),a.get("config").set_value("max_value",t.data_bounds[1],{silent:!0});var s=l.a.zip(n,i);l.a.each(s,(function(n){var a=n[0],i=n[1];return t._render_chrom_data(e,a,i)}));var r=t.get_fill_color();t.parent_elt.selectAll("path.chrom-data").style("stroke",r).style("fill",r),o.resolve(e)})),o},_render_chrom_data:function(e,t,n){},_get_path_function:function(e,t){},_chroms_layout:function(){var e=this.genome.get_chroms_info(),t=m.layout.pie().value((function(e){return e.len})).sort(null)(e),n=2*Math.PI*this.total_gap/e.length;return l.a.map(t,(function(e,t){var a=e.endAngle-n;return e.endAngle=a>e.startAngle?a:e.startAngle,e}))}}),x=M.extend({initialize:function(e){M.prototype.initialize.call(this,e),this.innerRadius=this.radius_bounds[0],this.radius_bounds[0]=this.radius_bounds[1],this.bg_stroke="#fff",this.bg_fill="#fff",this.min_arc_len=.05},_render_data:function(e){var t=this,n=e.selectAll("g");n.selectAll("path").attr("id",(function(e){return"label-".concat(e.data.chrom)})),n.append("svg:text").filter((function(e){return e.endAngle-e.startAngle>t.min_arc_len})).attr("text-anchor","middle").append("svg:textPath").attr("class","chrom-label").attr("xlink:href",(function(e){return"#label-".concat(e.data.chrom)})).attr("startOffset","25%").text((function(e){return e.data.chrom}));var a=l.a.filter(this.chroms_layout,(function(e){return e.endAngle-e.startAngle>t.min_arc_len}));this.drawTicks(this.parent_elt,a,(function(e){var n=(e.endAngle-e.startAngle)/e.value,a=m.range(0,e.value,25e6).map((function(a,i){return{radius:t.innerRadius,angle:a*n+e.startAngle,label:0===i?0:i%3?null:t.formatNum(a)}}));return a.length<4&&(a[a.length-1].label=t.formatNum(Math.round((a[a.length-1].angle-e.startAngle)/n))),a}),(function(e){return e.angle>Math.PI?"rotate(180)translate(-16)":null}))}});l.a.extend(x.prototype,b);var L=M.extend({initialize:function(e){M.prototype.initialize.call(this,e);var t=this.track.get("config");t.get("min_value").on("change:value",this._update_min_max,this),t.get("max_value").on("change:value",this._update_min_max,this),t.get("color").on("change:value",this._transition_chrom_data,this)},_update_min_max:function(){var e=this.track.get("config"),t=[e.get_value("min_value"),e.get_value("max_value")];this._update_data_bounds(t),this.parent_elt.selectAll(".min_max").text((function(e,n){return t[n]}))},_quantile:function(e,t){return e.sort(m.ascending),m.quantile(e,t)},_render_chrom_data:function(e,t,n){var a=this._get_path_function(t,n);return a?e.datum(n.data).append("path").attr("class","chrom-data").attr("chrom",t.data.chrom).attr("d",a):null},_get_path_function:function(e,t){if("string"==typeof t||!t.data||0===t.data.length)return null;var n=m.scale.linear().domain(this.data_bounds).range(this.radius_bounds).clamp(!0),a=m.scale.linear().domain([0,t.data.length]).range([e.startAngle,e.endAngle]),i=m.svg.line.radial().interpolate("linear").radius((function(e){return n(e[1])})).angle((function(e,t){return a(t)}));return m.svg.area.radial().interpolate(i.interpolate()).innerRadius(n(0)).outerRadius(i.radius()).angle(i.angle())},render_labels:function(){var e=this,t=this.drawTicks(this.parent_elt,[this.chroms_layout[0]],this._data_bounds_ticks_fn(),(function(){return"rotate(90)"}),!0).classed("min_max",!0);l.a.each(t,(function(t){i()(t).click((function(){new g.a.ConfigSettingCollectionView({collection:e.track.get("config")}).render_in_modal("Configure Track")}))}))},_transition_labels:function(){if(0!==this.data_bounds.length){var e=this,t=l.a.filter(this.chroms_layout,(function(e){return e.endAngle-e.startAngle>.08})),n=l.a.filter(t,(function(e,t){return t%3==0})),a=l.a.flatten(l.a.map(n,(function(t){return e._data_bounds_ticks_fn()(t)})));this.parent_elt.selectAll("g.tick").data(a).transition().attr("transform",(function(e){return"rotate(".concat(180*e.angle/Math.PI-90,")translate(").concat(e.radius,",0)")}))}},_data_bounds_ticks_fn:function(){var e=this;return function(t){return[{radius:e.radius_bounds[0],angle:t.startAngle,label:e.formatNum(e.data_bounds[0])},{radius:e.radius_bounds[1],angle:t.startAngle,label:e.formatNum(e.data_bounds[1])}]}},get_data_bounds:function(e){}});l.a.extend(L.prototype,b);var T,S=L.extend({get_data_bounds:function(e){var t=l.a.flatten(l.a.map(e,(function(e){return e?l.a.map(e.data,(function(e){return parseInt(e[1],10)||0})):0})));return[l.a.min(t),this._quantile(t,.98)||l.a.max(t)]}}),D=M.extend({render:function(){var e=this;i.a.when(e.track.get("data_manager").data_is_ready()).then((function(){i.a.when(e.track.get("data_manager").get_genome_wide_data(e.genome)).then((function(t){var n=[],a=e.genome.get_chroms_info();l.a.each(t,(function(t,i){var o=a[i].chrom,s=l.a.map(t.data,(function(t){var n=e._get_region_angle(o,t[1]),a=e._get_region_angle(t[3],t[4]);return{source:{startAngle:n,endAngle:n+.01},target:{startAngle:a,endAngle:a+.01}}}));n=n.concat(s)})),e.parent_elt.append("g").attr("class","chord").selectAll("path").data(n).enter().append("path").style("fill",e.get_fill_color()).attr("d",m.svg.chord().radius(e.radius_bounds[0])).style("opacity",1)}))}))},update_radius_bounds:function(e){this.radius_bounds=e,this.parent_elt.selectAll("path").transition().attr("d",m.svg.chord().radius(this.radius_bounds[0]))},_get_region_angle:function(e,t){var n=l.a.find(this.chroms_layout,(function(t){return t.data.chrom===e}));return n.endAngle-(n.endAngle-n.startAngle)*(n.data.len-t)/n.data.len}}),C={GalaxyApp:d.a.View.extend({initialize:function(){_.a.cssLoadFile("static/style/circster.css");var e=new f.a.Genome(window.galaxy_config.app.genome),t=new f.a.GenomeVisualization(window.galaxy_config.app.viz_config);t.get("config").add([{key:"arc_dataset_height",label:"Arc Dataset Height",type:"int",value:25,view:"circster"},{key:"track_gap",label:"Gap Between Tracks",type:"int",value:5,view:"circster"},{key:"total_gap",label:"Gap [0-1]",type:"float",value:.4,view:"circster",hidden:!0}]),new k({el:i()("#center .unified-panel-body"),genome:e,model:t}).render(),i()("#center .unified-panel-header-inner").append("".concat(window.galaxy_config.app.viz_config.title," ").concat(window.galaxy_config.app.viz_config.dbkey));var n=v.a.create_icon_buttons_menu([{icon_class:"plus-button",title:p()("Add tracks"),on_click:function(){f.a.select_datasets({dbkey:t.get("dbkey")},(function(e){t.add_tracks(e)}))}},{icon_class:"gear",title:p()("Settings"),on_click:function(){new g.a.ConfigSettingCollectionView({collection:t.get("config")}).render_in_modal("Configure Visualization")}},{icon_class:"disk--arrow",title:p()("Save"),on_click:function(){var e=Object(o.a)();e.modal.show({title:p()("Saving..."),body:"progress"}),i.a.ajax({url:"".concat(Object(u.getAppRoot)(),"visualization/save"),type:"POST",dataType:"json",data:{id:t.get("vis_id"),title:t.get("title"),dbkey:t.get("dbkey"),type:"trackster",vis_json:JSON.stringify(t)}}).success((function(n){e.modal.hide(),t.set("vis_id",n.vis_id)})).error((function(){e.modal.show({title:p()("Could Not Save"),body:"Could not save visualization. Please try again later.",buttons:{Cancel:function(){e.modal.hide()}}})}))}},{icon_class:"cross-circle",title:p()("Close"),on_click:function(){window.top.location="".concat(Object(u.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}});n.$el.attr("style","float: right"),i()("#center .unified-panel-header-inner").append(n.$el),i()(".menu-button").tooltip({placement:"bottom"})}})},j=n(30),Y=function(e){this.$overlay=e.overlay,this.$dialog=e.dialog,this.$header=this.$dialog.find(".modal-header"),this.$body=this.$dialog.find(".modal-body"),this.$footer=this.$dialog.find(".modal-footer"),this.$backdrop=e.backdrop,this.$header.find(".close").on("click",i.a.proxy(this.hide,this))};function O(){T.hide()}function A(e,t,n,a,i){T.setContent({title:e,body:t,buttons:n,extra_buttons:a}),T.show({backdrop:!0},i)}function I(e,t,n,a,i){T.setContent({title:e,body:t,buttons:n,extra_buttons:a}),T.show({backdrop:!1},i)}function E(e){var t=e.width||"600",n=e.height||"400",a=e.scroll||"auto";i()("#overlay-background").bind("click.overlay",(function(){O(),i()("#overlay-background").unbind("click.overlay")})),T.setContent({closeButton:!0,title:"&nbsp;",body:i()("<div style='margin: -5px;'><iframe style='margin: 0; padding: 0;' src='".concat(e.url,"' width='").concat(t,"' height='").concat(n,"' scrolling='").concat(a,"' frameborder='0'></iframe></div>"))}),T.show({backdrop:!0})}i.a.extend(Y.prototype,{setContent:function(e){this.$header.hide(),e.title&&(this.$header.find(".title").html(e.title),this.$header.show()),e.closeButton?(this.$header.find(".close").show(),this.$header.show()):this.$header.find(".close").hide(),this.$footer.hide();var t=this.$footer.find(".buttons").html("");e.buttons&&(i.a.each(e.buttons,(function(e,n){t.append(i()("<button></button> ").text(e).click(n)).append(" ")})),this.$footer.show());var n=this.$footer.find(".extra_buttons").html("");e.extra_buttons&&(i.a.each(e.extra_buttons,(function(e,t){n.append(i()("<button></button>").text(e).click(t)).append(" ")})),this.$footer.show());var a=e.body;"progress"==a&&(a=i()("<div class='progress progress-striped active'><div class='progress-bar' style='width: 100%'></div></div>")),this.$body.html(a)},show:function(e,t){e.backdrop?this.$backdrop.addClass("in"):this.$backdrop.removeClass("in"),this.$overlay.show(),this.$dialog.show(),this.$overlay.addClass("in"),this.$body.css("min-width",this.$body.width()),this.$body.css("max-height",i()(window).height()/1.5),t&&t()},hide:function(){var e=this;e.$dialog.fadeOut((function(){e.$overlay.hide(),e.$backdrop.removeClass("in"),e.$body.children().remove(),e.$body.css("min-width",void 0)}))}}),i()((function(){T=new Y({overlay:i()("#top-modal"),dialog:i()("#top-modal-dialog"),backdrop:i()("#top-modal-backdrop")})}));var H=d.a.View.extend({className:"UserMenuBase",isAcceptableValue:function(e,t,n){var a,i=e.val(),o=e.attr("displayLabel")||e.attr("id").replace("phyloViz","");return a=i,isNaN(parseFloat(a))||!isFinite(a)?(alert("".concat(o," is not a number!")),!1):i>n?(alert("".concat(o," is too large.")),!1):!(i<t)||(alert("".concat(o," is too small.")),!1)},hasIllegalJsonCharacters:function(e){return-1!==e.val().search(/"|'|\\/)&&(alert("Named fields cannot contain these illegal characters: double quote(\"), single guote('), or back slash(\\). "),!0)}});function $(){var e=this,t=m.layout.hierarchy().sort(null).value(null),n=360,a="Linear",i=18,o=200,s=0,r=.5,l=50;return e.leafHeight=function(t){return void 0===t?i:(i=t,e)},e.layoutMode=function(t){return void 0===t?a:(a=t,e)},e.layoutAngle=function(t){return void 0===t?n:isNaN(t)||t<0||t>360?e:(n=t,e)},e.separation=function(t){return void 0===t?o:(o=t,e)},e.links=function(e){return m.layout.tree().links(e)},e.nodes=function(c,d){"[object Array]"===toString.call(c)&&(c=c[0]);var u=t.call(e,c,d),h=[],p=0,m=0;return window._d=c,window._nodes=u,u.forEach((function(e){p=e.depth>p?e.depth:p,h.push(e)})),h.forEach((function(e){e.children||(m+=1,e.depth=p)})),i="Circular"===a?n/m:i,s=0,function e(t,n,a,i){var c=t.children,d=0,u=t.dist||r;u=u>1?1:u,t.dist=u,t.y0=null!==i?i.y0+u*o:l;c?(c.forEach((function(i){i.parent=t,d+=e(i,n,a,t)})),t.x0=d/c.length):(t.x0=s*a,s+=1);return t.x=t.x0,t.y=t.y0,t.x0}(h[0],p,i,null),h},e}var P=f.a.Visualization.extend({defaults:{layout:"Linear",separation:250,leafHeight:18,type:"phyloviz",title:p()("Title"),scaleFactor:1,translate:[0,0],fontSize:12,selectedNode:null,nodeAttrChangedTime:0},initialize:function(e){this.set("dataset",new j.a({id:e.dataset_id}))},root:{},toggle:function(e){void 0!==e&&(e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null))},toggleAll:function(e){e.children&&0!==e.children.length&&(e.children.forEach(this.toggleAll),this.toggle(e))},getData:function(){return this.root},save:function(){!function e(t){delete t.parent,t._selected&&delete t._selected;t.children&&t.children.forEach(e);t._children&&t._children.forEach(e)}(this.root);var e=i.a.extend(!0,{},this.attributes);return e.selectedNode=null,I("Saving to Galaxy","progress"),i.a.ajax({url:this.url(),type:"POST",dataType:"json",data:{config:JSON.stringify(e),type:"phyloviz"},success:function(e){O()}})}}),R=d.a.View.extend({defaults:{nodeRadius:4.5},stdInit:function(e){this.model.on("change:separation change:leafHeight change:fontSize change:nodeAttrChangedTime",this.updateAndRender,this),this.vis=e.vis,this.i=0,this.maxDepth=-1,this.width=e.width,this.height=e.height},updateAndRender:function(e){e=e||this.model.root,this.renderNodes(e),this.renderLinks(e),this.addTooltips()},renderLinks:function(e){var t=this.vis.selectAll("g.completeLink").data(this.tree.links(this.nodes),(function(e){return e.target.id})),n=function(e){e.pos0="".concat(e.source.y0," ").concat(e.source.x0),e.pos1="".concat(e.source.y0," ").concat(e.target.x0),e.pos2="".concat(e.target.y0," ").concat(e.target.x0)};t.enter().insert("svg:g","g.node").attr("class","completeLink").append("svg:path").attr("class","link").attr("d",(function(e){return n(e),"M ".concat(e.pos0," L ").concat(e.pos1)})),t.transition().duration(500).select("path.link").attr("d",(function(e){return n(e),"M ".concat(e.pos0," L ").concat(e.pos1," L ").concat(e.pos2)})),t.exit().remove()},selectNode:function(e){m.selectAll("g.node").classed("selectedHighlight",(function(t){return e.id===t.id&&(e._selected?(delete e._selected,!1):(e._selected=!0,!0))})),this.model.set("selectedNode",e),i()("#phyloVizSelectedNodeName").val(e.name),i()("#phyloVizSelectedNodeDist").val(e.dist),i()("#phyloVizSelectedNodeAnnotation").val(e.annotation||"")},addTooltips:function(){i()(".tooltip").remove(),i()(".node").attr("data-original-title",(function(){var e=this.__data__,t=e.annotation||"None";return e?"".concat(e.name?"".concat(e.name,"<br/>"):"","Dist: ").concat(e.dist," <br/>Annotation1: ").concat(t).concat(e.bootstrap?"<br/>Confidence level: ".concat(Math.round(100*e.bootstrap)):""):""})).tooltip({placement:"top",trigger:"hover"})}}).extend({initialize:function(e){this.margins=e.margins,this.layoutMode="Linear",this.stdInit(e),this.layout(),this.updateAndRender(this.model.root)},layout:function(){this.tree=(new $).layoutMode("Linear"),this.diagonal=m.svg.diagonal().projection((function(e){return[e.y,e.x]}))},renderNodes:function(e){var t=this,n="".concat(t.model.get("fontSize"),"px");t.tree.separation(t.model.get("separation")).leafHeight(t.model.get("leafHeight"));var a=t.tree.separation(t.model.get("separation")).nodes(t.model.root),i=t.vis.selectAll("g.node").data(a,(function(e){return e.name+e.id||(e.id=++t.i)}));t.nodes=a,t.duration=500;var o=i.enter().append("svg:g").attr("class","node").on("dblclick",(function(){m.event.stopPropagation()})).on("click",(function(e){if(m.event.altKey)t.selectNode(e);else{if(e.children&&0===e.children.length)return;t.model.toggle(e),t.updateAndRender(e)}}));"[object Array]"===toString.call(e)&&(e=e[0]),o.attr("transform",(function(t){return"translate(".concat(e.y0,",").concat(e.x0,")")})),o.append("svg:circle").attr("r",1e-6).style("fill",(function(e){return e._children?"lightsteelblue":"#fff"})),o.append("svg:text").attr("class","nodeLabel").attr("x",(function(e){return e.children||e._children?-10:10})).attr("dy",".35em").attr("text-anchor",(function(e){return e.children||e._children?"end":"start"})).style("fill-opacity",1e-6);var s=i.transition().duration(500);s.attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})),s.select("circle").attr("r",t.defaults.nodeRadius).style("fill",(function(e){return e._children?"lightsteelblue":"#fff"})),s.select("text").style("fill-opacity",1).style("font-size",n).text((function(e){return e.name&&""!==e.name?e.name:e.bootstrap?Math.round(100*e.bootstrap):""}));var r=i.exit().transition().duration(500).remove();r.select("circle").attr("r",1e-6),r.select("text").style("fill-opacity",1e-6),a.forEach((function(e){e.x0=e.x,e.y0=e.y}))}}),N=d.a.View.extend({className:"phyloviz",initialize:function(e){var t=this;t.MIN_SCALE=.05,t.MAX_SCALE=5,t.MAX_DISPLACEMENT=500,t.margins=[10,60,10,80],t.width=i()("#PhyloViz").width(),t.height=i()("#PhyloViz").height(),t.radius=t.width,t.data=e.data,i()(window).resize((function(){t.width=i()("#PhyloViz").width(),t.height=i()("#PhyloViz").height(),t.render()})),t.phyloTree=new P(e.config),t.phyloTree.root=t.data,t.zoomFunc=m.behavior.zoom().scaleExtent([t.MIN_SCALE,t.MAX_SCALE]),t.zoomFunc.translate(t.phyloTree.get("translate")),t.zoomFunc.scale(t.phyloTree.get("scaleFactor")),t.navMenu=new z(t),t.settingsMenu=new F({phyloTree:t.phyloTree}),t.nodeSelectionView=new V({phyloTree:t.phyloTree}),t.search=new U,setTimeout((function(){t.zoomAndPan()}),1e3)},render:function(){var e=this;i()("#PhyloViz").empty(),e.mainSVG=m.select("#PhyloViz").append("svg:svg").attr("width",e.width).attr("height",e.height).attr("pointer-events","all").call(e.zoomFunc.on("zoom",(function(){e.zoomAndPan()}))),e.boundingRect=e.mainSVG.append("svg:rect").attr("class","boundingRect").attr("width",e.width).attr("height",e.height).attr("stroke","black").attr("fill","white"),e.vis=e.mainSVG.append("svg:g").attr("class","vis"),e.layoutOptions={model:e.phyloTree,width:e.width,height:e.height,vis:e.vis,margins:e.margins},i()("#title").text("Phylogenetic Tree from ".concat(e.phyloTree.get("title"),":")),new R(e.layoutOptions)},zoomAndPan:function(e){var t,n;void 0!==e&&(t=e.zoom,n=e.translate);var a,i=this.zoomFunc.scale(),o=this.zoomFunc.translate(),s="";switch(t){case"reset":i=1,o=[0,0];break;case"+":i*=1.1;break;case"-":i*=.9;break;default:"number"==typeof t?i=t:null!==m.event&&(i=m.event.scale)}if(!(i<this.MIN_SCALE||i>this.MAX_SCALE)){if(this.zoomFunc.scale(i),a="translate(".concat(this.margins[3],",").concat(this.margins[0],") scale(").concat(i,")"),null!==m.event)s="translate(".concat(m.event.translate,")");else{if(void 0!==n){var r=n.split(",")[0],l=n.split(",")[1];isNaN(r)||isNaN(l)||(o=[o[0]+parseFloat(r),o[1]+parseFloat(l)])}this.zoomFunc.translate(o),s="translate(".concat(o,")")}this.phyloTree.set("scaleFactor",i),this.phyloTree.set("translate",o),this.vis.attr("transform",s+a)}},reloadViz:function(){var e=this,t=i()("#phylovizNexSelector :selected").val();i.a.getJSON(e.phyloTree.get("dataset").url(),{tree_index:t,data_type:"raw_data"},(function(t){e.data=t.data,e.config=t,e.render()}))}}),z=d.a.View.extend({initialize:function(e){var t=this;t.phylovizView=e,i()("#panelHeaderRightBtns").empty(),i()("#phyloVizNavBtns").empty(),i()("#phylovizNexSelector").off(),t.initNavBtns(),t.initRightHeaderBtns(),i()("#phylovizNexSelector").off().on("change",(function(){t.phylovizView.reloadViz()}))},initRightHeaderBtns:function(){var e=this,t=v.a.create_icon_buttons_menu([{icon_class:"gear",title:p()("PhyloViz Settings"),on_click:function(){i()("#SettingsMenu").show(),e.settingsMenu.updateUI()}},{icon_class:"disk",title:p()("Save visualization"),on_click:function(){var t=i()("#phylovizNexSelector option:selected").text();t&&e.phylovizView.phyloTree.set("title",t),e.phylovizView.phyloTree.save()}},{icon_class:"chevron-expand",title:"Search / Edit Nodes",on_click:function(){i()("#nodeSelectionView").show()}},{icon_class:"information",title:p()("Phyloviz Help"),on_click:function(){window.open("https://galaxyproject.org/learn/visualization/phylogenetic-tree/")}}],{tooltip_config:{placement:"bottom"}});i()("#panelHeaderRightBtns").append(t.$el)},initNavBtns:function(){var e=this,t=v.a.create_icon_buttons_menu([{icon_class:"zoom-in",title:p()("Zoom in"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"+"})}},{icon_class:"zoom-out",title:p()("Zoom out"),on_click:function(){e.phylovizView.zoomAndPan({zoom:"-"})}},{icon_class:"arrow-circle",title:"Reset Zoom/Pan",on_click:function(){e.phylovizView.zoomAndPan({zoom:"reset"})}}],{tooltip_config:{placement:"bottom"}});i()("#phyloVizNavBtns").append(t.$el)}}),F=H.extend({className:"Settings",initialize:function(e){var t=this;t.phyloTree=e.phyloTree,t.el=i()("#SettingsMenu"),t.inputs={separation:i()("#phyloVizTreeSeparation"),leafHeight:i()("#phyloVizTreeLeafHeight"),fontSize:i()("#phyloVizTreeFontSize")},i()("#settingsCloseBtn").off().on("click",(function(){t.el.hide()})),i()("#phylovizResetSettingsBtn").off().on("click",(function(){t.resetToDefaults()})),i()("#phylovizApplySettingsBtn").off().on("click",(function(){t.apply()}))},apply:function(){var e=this;e.isAcceptableValue(e.inputs.separation,50,2500)&&e.isAcceptableValue(e.inputs.leafHeight,5,30)&&e.isAcceptableValue(e.inputs.fontSize,5,20)&&i.a.each(e.inputs,(function(t,n){e.phyloTree.set(t,n.val())}))},updateUI:function(){var e=this;i.a.each(e.inputs,(function(t,n){n.val(e.phyloTree.get(t))}))},resetToDefaults:function(){i()(".tooltip").remove();var e=this;i.a.each(e.phyloTree.defaults,(function(t,n){e.phyloTree.set(t,n)})),e.updateUI()},render:function(){}}),V=H.extend({className:"Settings",initialize:function(e){var t=this;t.el=i()("#nodeSelectionView"),t.phyloTree=e.phyloTree,t.UI={enableEdit:i()("#phylovizEditNodesCheck"),saveChanges:i()("#phylovizNodeSaveChanges"),cancelChanges:i()("#phylovizNodeCancelChanges"),name:i()("#phyloVizSelectedNodeName"),dist:i()("#phyloVizSelectedNodeDist"),annotation:i()("#phyloVizSelectedNodeAnnotation")},t.valuesOfConcern={name:null,dist:null,annotation:null},i()("#nodeSelCloseBtn").off().on("click",(function(){t.el.hide()})),t.UI.saveChanges.off().on("click",(function(){t.updateNodes()})),t.UI.cancelChanges.off().on("click",(function(){t.cancelChanges()})),function(e){e.fn.enable=function(t){return e(this).each((function(){t?e(this).removeAttr("disabled"):e(this).attr("disabled","disabled")}))}}(i.a),t.UI.enableEdit.off().on("click",(function(){t.toggleUI()}))},toggleUI:function(){var e=this,t=e.UI.enableEdit.is(":checked");t||e.cancelChanges(),i.a.each(e.valuesOfConcern,(function(n,a){e.UI[n].enable(t)})),t?(e.UI.saveChanges.show(),e.UI.cancelChanges.show()):(e.UI.saveChanges.hide(),e.UI.cancelChanges.hide())},cancelChanges:function(){var e=this,t=e.phyloTree.get("selectedNode");t&&i.a.each(e.valuesOfConcern,(function(n,a){e.UI[n].val(t[n])}))},updateNodes:function(){var e=this,t=e.phyloTree.get("selectedNode");if(t){if(!e.isAcceptableValue(e.UI.dist,0,1)||e.hasIllegalJsonCharacters(e.UI.name)||e.hasIllegalJsonCharacters(e.UI.annotation))return;i.a.each(e.valuesOfConcern,(function(n,a){t[n]=e.UI[n].val()})),e.phyloTree.set("nodeAttrChangedTime",new Date)}else alert("No node selected")}}),U=H.extend({initialize:function(){var e=this;i()("#phyloVizSearchBtn").on("click",(function(){var t=i()("#phyloVizSearchTerm"),n=i()("#phyloVizSearchCondition").val().split("-"),a=n[0],o=n[1];e.hasIllegalJsonCharacters(t),"dist"===a&&e.isAcceptableValue(t,0,1),e.searchTree(a,o,t.val())}))},searchTree:function(e,t,n){m.selectAll("g.node").classed("searchHighlight",(function(a){var i=a[e];if(null!=i)if("dist"===e)switch(t){case"greaterEqual":return i>=+n;case"lesserEqual":return i<=+n;default:return}else if("name"===e||"annotation"===e)return-1!==i.toLowerCase().indexOf(n.toLowerCase())}))}}),W=n(59),B=n(64),q=n(29),J=d.a.Model.extend({defaults:{inputs:null,values:null}}),G=d.a.Model.extend({defaults:{tool:null,tree_data:null},initialize:function(e){var t=this;this.get("tool").get("inputs").each((function(e){e.on("change:min change:max change:num_samples",(function(e){e.get("in_ptree")&&t.set_tree_data()}),t),e.on("change:in_ptree",(function(e){e.get("in_ptree")?t.add_param(e):t.remove_param(e),t.set_tree_data()}),t)})),e.config&&l.a.each(e.config,(function(e){var n=t.get("tool").get("inputs").find((function(t){return t.get("name")===e.name}));t.add_param(n),n.set(e)}))},add_param:function(e){e.get("ptree_index")||(e.set("in_ptree",!0),e.set("ptree_index",this.get_tree_params().length))},remove_param:function(e){e.set("in_ptree",!1),e.set("ptree_index",null),l()(this.get_tree_params()).each((function(e,t){e.set("ptree_index",t+1)}))},set_tree_data:function(){var e=l.a.map(this.get_tree_params(),(function(e){return{param:e,samples:e.get_samples()}})),t=0;this.set("tree_data",{name:"Root",id:t++,children:0!==e.length?function e(n,a){var i=n[a],o=i.param,s=i.samples;return n.length-1===a?l.a.map(s,(function(e){return{id:t++,name:e,param:o,value:e}})):l.a.map(s,(function(i){return{id:t++,name:i,param:o,value:i,children:e(n,a+1)}}))}(e,0):null})},get_tree_params:function(){return l()(this.get("tool").get("inputs").where({in_ptree:!0})).sortBy((function(e){return e.get("ptree_index")}))},get_num_leaves:function(){return this.get_tree_params().reduce((function(e,t){return e*t.get_samples().length}),1)},get_node_settings:function(e){var t=this.get("tool").get_inputs_dict(),n=e.parent;if(n)for(;0!==n.depth;)t[n.param.get("name")]=n.value,n=n.parent;var a=this,i=function e(t,n){return t.param&&(n[t.param.get("name")]=t.value),t.children?l.a.flatten(l.a.map(t.children,(function(t){return e(t,l.a.clone(n))}))):new J({inputs:a.get("tool").get("inputs"),values:n})}(e,t);return l.a.isArray(i)||(i=[i]),i},get_connected_nodes:function(e){for(var t=[],n=e.parent;n;)t.push(n),n=n.parent;return l.a.flatten([t,function e(t){return t.children?l.a.flatten([t,l.a.map(t.children,(function(t){return e(t)}))]):t}(e)])},get_leaf:function(e){for(var t,n=this.get("tree_data");n.children;)t=n.children,n=l.a.find(t,(function(t){return e[t.param.get("name")]===t.value}));return n},toJSON:function(){return this.get_tree_params().map((function(e){return{name:e.get("name"),min:e.get("min"),max:e.get("max"),num_samples:e.get("num_samples")}}))}}),K=d.a.Model.extend({defaults:{track:null,mode:"Pack",settings:null,regions:null},initialize:function(e){if(this.set("regions",e.regions),e.track){var t=l.a.extend({data_url:"".concat(Object(u.getAppRoot)(),"dummy1"),converted_datasets_state_url:"".concat(Object(u.getAppRoot)(),"dummy2")},e.track);this.set("track",W.a.object_from_template(t,{},null))}},same_settings:function(e){var t=this.get("settings"),n=e.get("settings");for(var a in t)if(!n[a]||t[a]!==n[a])return!1;return!0},toJSON:function(){return{track:this.get("track").to_dict(),settings:this.get("settings"),regions:this.get("regions")}}}),Q=d.a.Collection.extend({model:K}),X=f.a.Visualization.extend({defaults:l.a.extend({},f.a.Visualization.prototype.defaults,{dataset:null,tool:null,parameter_tree:null,regions:null,tracks:null,default_mode:"Pack"}),initialize:function(e){this.set("dataset",new j.a(e.dataset)),this.set("tool",new B.a.Tool(e.tool)),this.set("regions",new f.a.GenomeRegionCollection(e.regions)),this.set("tracks",new Q(e.tracks));var t=this.get("tool");this.set("tool_with_samplable_inputs",t),t.remove_inputs(["data","hidden_data","conditional","text"]),this.set("parameter_tree",new G({tool:t,config:e.tree_config}))},add_track:function(e){this.get("tracks").add(e)},toJSON:function(){return{id:this.get("id"),title:"Parameter exploration for dataset '".concat(this.get("dataset").get("name"),"'"),type:"sweepster",dataset_id:this.get("dataset").id,tool_id:this.get("tool").id,regions:this.get("regions").toJSON(),tree_config:this.get("parameter_tree").toJSON(),tracks:this.get("tracks").toJSON()}}}),Z=d.a.View.extend({tagName:"tr",TILE_LEN:250,initialize:function(e){this.canvas_manager=e.canvas_manager,this.render(),this.model.on("change:track change:mode",this.draw_tiles,this)},render:function(){var e=this.model.get("settings"),t=e.get("values"),n=i()("<td/>").addClass("settings").appendTo(this.$el),a=i()("<div/>").addClass("track-info").hide().appendTo(n);a.append(i()("<div/>").css("font-weight","bold").text("Track Settings")),e.get("inputs").each((function(e){a.append("".concat(e.get("label"),": ").concat(t[e.get("name")],"<br/>"))}));var o=this;i()("<button/>").appendTo(a).text("Run on complete dataset").click((function(){a.toggle(),o.trigger("run_on_dataset",e)}));var s=v.a.create_icon_buttons_menu([{title:p()("Settings"),icon_class:"gear track-settings",on_click:function(){a.toggle()}},{title:p()("Remove"),icon_class:"cross-circle",on_click:function(){o.$el.remove(),i()(".tooltip").remove()}}]);n.prepend(s.$el),this.model.get("regions").each((function(){o.$el.append(i()("<td/>").addClass("tile").html(i()("<img/>").attr("src","".concat(Object(u.getAppRoot)(),"images/loading_large_white_bg.gif"))))})),this.model.get("track")&&this.draw_tiles()},draw_tiles:function(){var e=this,t=this.model.get("track"),n=this.model.get("regions"),a=this.$el.find("td.tile");t&&i.a.when(t.data_manager.data_is_ready()).then((function(o){n.each((function(n,o){var s=n.length()/e.TILE_LEN,r=1/s,l=e.model.get("mode");i.a.when(t.data_manager.get_data(n,l,s,{})).then((function(s){var c=e.canvas_manager.new_canvas();c.width=e.TILE_LEN,c.height=t.get_canvas_height(s,l,r,c.width),t.draw_tile(s,c.getContext("2d"),l,n,r),i()(a[o]).empty().append(c)}))}))}))}}),ee=d.a.View.extend({number_input_template:'<div class="form-row-input sweep"><input class="min" type="text" size="6" value="<%= min %>"> - <input class="max" type="text" size="6" value="<%= max %>"> samples: <input class="num_samples" type="text" size="1" value="<%= num_samples %>"></div>',select_input_template:'<div class="form-row-input sweep"><%= options %></div>',initialize:function(e){this.$el=e.tool_row,this.render()},render:function(){var e=this.model,t=this.$el.find(".form-row-input"),n=null;if(t.find(":input").change((function(){e.set("value",i()(this).val())})),e instanceof B.a.IntegerToolParameter)n=i()(l.a.template(this.number_input_template)(this.model.toJSON()));else if(e instanceof B.a.SelectToolParameter){var a=l.a.map(this.$el.find("select option"),(function(e){return i()(e).val()})).join(", ");n=i()(l.a.template(this.select_input_template)({options:a}))}n.insertAfter(t);var o=this,s=v.a.create_icon_buttons_menu([{title:p()("Add parameter to tree"),icon_class:"plus-button",on_click:function(){e.set("in_ptree",!0),t.hide(),n.show(),i()(this).hide(),o.$el.find(".icon-button.toggle").show()}},{title:p()("Remove parameter from tree"),icon_class:"toggle",on_click:function(){e.set("in_ptree",!1),n.hide(),t.show(),i()(this).hide(),o.$el.find(".icon-button.plus-button").show()}}],{});this.$el.prepend(s.$el),e.get("in_ptree")?(t.hide(),o.$el.find(".icon-button.plus-button").hide()):(o.$el.find(".icon-button.toggle").hide(),n.hide()),l.a.each(["min","max","num_samples"],(function(t){n.find(".".concat(t)).change((function(){e.set(t,parseFloat(i()(this).val()))}))}))}}),te=d.a.View.extend({className:"tree-design",initialize:function(e){this.render()},render:function(){var e=new B.a.ToolFormView({model:this.model.get("tool")});e.render(),this.$el.append(e.$el);var t=this.model.get("tool").get("inputs");this.$el.find(".form-row").not(".form-actions").each((function(e){new ee({model:t.at(e),tool_row:i()(this)})}))}}),ne=d.a.View.extend({className:"tool-parameter-tree",initialize:function(e){this.model.on("change:tree_data",this.render,this)},render:function(){this.$el.children().remove();var e=this.model.get_tree_params();if(e.length){this.width=100*(2+e.length),this.height=15*this.model.get_num_leaves();var t=this,n=m.layout.cluster().size([this.height,this.width-160]),a=m.svg.diagonal().projection((function(e){return[e.y,e.x]})),o=n.nodes(this.model.get("tree_data")),s=l.a.uniq(l.a.pluck(o,"y"));l.a.each(e,(function(e,n){var a=s[n+1],o=i()("#center").position().left;t.$el.append(i()("<div>").addClass("label").text(e.get("label")).css("left",a+o))}));var r=m.select(this.$el[0]).append("svg").attr("width",this.width).attr("height",this.height+30).append("g").attr("transform","translate(40, 20)");r.selectAll("path.link").data(n.links(o)).enter().append("path").attr("class","link").attr("d",a);var c=r.selectAll("g.node").data(o).enter().append("g").attr("class","node").attr("transform",(function(e){return"translate(".concat(e.y,",").concat(e.x,")")})).on("mouseover",(function(e){var n=l.a.pluck(t.model.get_connected_nodes(e),"id");c.filter((function(e){return void 0!==l.a.find(n,(function(t){return t===e.id}))})).style("fill","#f00")})).on("mouseout",(function(){c.style("fill","#000")}));c.append("circle").attr("r",9),c.append("text").attr("dx",(function(e){return e.children?-12:12})).attr("dy",3).attr("text-anchor",(function(e){return e.children?"end":"start"})).text((function(e){return e.name}))}}}),ae=d.a.View.extend({className:"Sweepster",helpText:"<div><h4>Getting Started</h4><ol><li>Create a parameter tree by using the icons next to the tool's parameter names to add or remove parameters.<li>Adjust the tree by using parameter inputs to select min, max, and number of samples<li>Run the tool with different settings by clicking on tree nodes</ol></div>",initialize:function(e){this.canvas_manager=new f.a.CanvasManager(this.$el.parents("body")),this.tool_param_tree_view=new ne({model:this.model.get("parameter_tree")}),this.track_collection_container=i()("<table/>").addClass("tracks"),this.model.get("parameter_tree").on("change:tree_data",this.handle_node_clicks,this);var t=this;this.model.get("tracks").each((function(e){e.get("track").view=t})),this.config=g.a.ConfigSettingCollection.from_models_and_saved_values([{key:"name",label:"Name",type:"text",default_value:""},{key:"a_color",label:"A Color",type:"color",default_value:"#FF0000"},{key:"c_color",label:"C Color",type:"color",default_value:"#00FF00"},{key:"g_color",label:"G Color",type:"color",default_value:"#0000FF"},{key:"t_color",label:"T Color",type:"color",default_value:"#FF00FF"},{key:"n_color",label:"N Color",type:"color",default_value:"#AAAAAA"},{key:"block_color",label:"Block color",type:"color"},{key:"reverse_strand_color",label:"Antisense strand color",type:"color"}],{})},render:function(){var e=new te({model:this.model.get("parameter_tree")});i()("#left").append(e.$el);var t=this,n=t.model.get("regions"),a=i()("<tr/>").appendTo(this.track_collection_container);n.each((function(e){a.append(i()("<th>").text(e.toString()))})),a.children().first().attr("colspan",2);var o=i()("<div>").addClass("tiles");i()("#right").append(o.append(this.track_collection_container)),t.model.get("tracks").each((function(e){t.add_track(e)}));var s=i()(this.helpText).addClass("help"),r=v.a.create_icon_buttons_menu([{title:p()("Close"),icon_class:"cross-circle",on_click:function(){i()(".tooltip").remove(),s.remove()}}]);s.prepend(r.$el.css("float","right")),i()("#center").append(s),this.tool_param_tree_view.render(),i()("#center").append(this.tool_param_tree_view.$el),this.handle_node_clicks();var c=v.a.create_icon_buttons_menu([{icon_class:"chevron-expand",title:"Set display mode"},{icon_class:"cross-circle",title:p()("Close"),on_click:function(){window.top.location="".concat(Object(u.getAppRoot)(),"visualizations/list")}}],{tooltip_config:{placement:"bottom"}}),d={};l.a.each(["Squish","Pack"],(function(e){d[e]=function(){t.model.set("default_mode",e),t.model.get("tracks").each((function(t){t.set("mode",e)}))}})),Object(q.b)(c.$el.find(".chevron-expand"),d),c.$el.attr("style","float: right"),i()("#right .unified-panel-header-inner").append(c.$el)},get_base_color:function(e){return this.config.get_value("".concat(e.toLowerCase(),"_color"))||this.config.get_value("n_color")},run_tool_on_dataset:function(e){var t=this.model.get("tool"),n=t.get("name"),a=this.model.get("dataset");t.set_input_values(e.get("values")),i.a.when(t.rerun(a)).then((function(e){})),A("Running ".concat(n," on complete dataset"),"".concat(n," is running on dataset '").concat(a.get("name"),"'. Outputs are in the dataset's history."),{Ok:function(){O()}})},add_track:function(e){var t=this,n=this.model.get("parameter_tree");t.model.add_track(e);var a=new Z({model:e,canvas_manager:t.canvas_manager});return a.on("run_on_dataset",t.run_tool_on_dataset,t),t.track_collection_container.append(a.$el),a.$el.hover((function(){var a=n.get_leaf(e.get("settings").get("values")),i=l.a.pluck(n.get_connected_nodes(a),"id");m.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").filter((function(e){return void 0!==l.a.find(i,(function(t){return t===e.id}))})).style("fill","#f00")}),(function(){m.select(t.tool_param_tree_view.$el[0]).selectAll("g.node").style("fill","#000")})),e},handle_node_clicks:function(){var e=this,t=this.model.get("parameter_tree"),n=this.model.get("regions");m.select(this.tool_param_tree_view.$el[0]).selectAll("g.node").on("click",(function(a,o){var s=e.model.get("tool"),r=e.model.get("dataset"),c=t.get_node_settings(a),d=i.a.Deferred();c.length>=10?A("Whoa there cowboy!","You clicked on a node to try ".concat(e.model.get("tool").get("name")," with ").concat(c.length," different combinations of settings. You can only run 10 jobs at a time."),{Ok:function(){O(),d.resolve(!1)}}):d.resolve(!0),i.a.when(d).then((function(t){if(t){var a=l.a.map(c,(function(t){var a=new K({settings:t,regions:n,mode:e.model.get("default_mode")});return e.add_track(a),a}));l.a.each(a,(function(t,a){setTimeout((function(){s.set_input_values(t.get("settings").get("values")),i.a.when(s.rerun(r,n)).then((function(n){var a=n.first(),i=a.get("track_config");i.dataset=a,i.tool=null,i.prefs=e.config.to_key_value_dict();var o=W.a.object_from_template(i,e,null);o.init_for_tool_data(),t.set("track",o)}))}),1e4*a)}))}}))}))}}),ie=n(213),oe=n.n(ie).a,se=n(7),re=n(214),le=n.n(re);function ce(e){document.querySelectorAll(e).forEach((function(e){e.innerHTML=le()(e.innerHTML)}))}var de=function(e,t){return function(n,a){return n.has(e)||a.has(e)?n.has(e)?a.has(e)?("number"==typeof n.get(e)?(i=n.get(e),o=a.get(e)):(i=n.get(e).toLowerCase(),o=a.get(e).toLowerCase()),i>o?"asc"===t?1:-1:o>i?"asc"===t?-1:1:0):-1:1:0;var i,o}},ue=d.a.Model.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/libraries/"),isVisible:function(e){var t=!0;return!e&&this.get("deleted")&&(t=!1),t}}),he=d.a.Collection.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/libraries"),model:ue,initialize:function(e){e=e||{}},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.filter((function(e){return-1!==e.get("name").toLowerCase().indexOf(t)}))},getVisible:function(e,t){return t=t||[],new he(this.filter((function(t){return t.isVisible(e)})))},sortLibraries:function(e,t){this.comparator=de(e,t),this.sort()}}),pe=d.a.Model.extend({}),me=pe.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/libraries/datasets/")}),fe=pe.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/folders/")}),_e=d.a.Collection.extend({model:pe}),ge=d.a.Model.extend({defaults:{folder:new _e,urlRoot:"".concat(Object(u.getAppRoot)(),"api/folders/"),id:"unknown"},search:function(e){if(""==e)return this;var t=e.toLowerCase();return this.get("folder").filter((function(e){return-1!==e.get("name").toLowerCase().indexOf(t)}))},sortFolder:function(e,t){return this.get("folder").comparator=de(e,t),this.get("folder").sort(),this.get("folder")},parse:function(e){var t=Object(o.a)();this.get("folder").reset();for(var n=0;n<e.folder_contents.length;n++)if("folder"===e.folder_contents[n].type){var a=new fe(e.folder_contents[n]);this.get("folder").add(a)}else if("file"===e.folder_contents[n].type){var i=new me(e.folder_contents[n]);this.get("folder").add(i)}else t.emit.error("Unknown folder item type encountered while parsing response.");return e}}),ve=d.a.Model.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/histories/")}),ye=d.a.Collection.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/histories/"),initialize:function(e){this.id=e.id},url:function(){return"".concat(this.urlRoot+this.id,"/contents")},model:ve}),be=d.a.Model.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/histories/")}),we=d.a.Collection.extend({url:"".concat(Object(u.getAppRoot)(),"api/histories"),model:be}),ke=d.a.Model.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/remote_files")}),Me={Library:ue,Libraries:he,Item:me,Ldda:me,FolderAsModel:fe,Folder:_e,FolderContainer:ge,HistoryItem:ve,HistoryContents:ye,GalaxyHistory:be,GalaxyHistories:we,Jstree:ke},xe=n(27),Le=n(63),Te={LibraryDatasetView:d.a.View.extend({el:"#center",model:null,options:{},defaults:{edit_mode:!1},events:{"click .toolbtn_modify_dataset":"enableModification","click .toolbtn_cancel_modifications":"render","click .toolbtn-download-dataset":"downloadDataset","click .toolbtn-import-dataset":"importIntoHistory","click .copy-link-to-clipboard":"copyToClipboard","click .make-private":"makeDatasetPrivate","click .remove-restrictions":"removeDatasetRestrictions","click .toolbtn_save_permissions":"savePermissions","click .toolbtn_save_modifications":"saveModifications","click .toolbtn_detect_datatype":"detectDatatype"},select_genome:null,select_extension:null,list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be. You can also upload compressed files, which will automatically be decompressed."},list_genomes:[],initialize:function(e){this.options=l.a.extend(this.options,e),this.fetchExtAndGenomes(),this.options.id&&this.fetchDataset()},fetchDataset:function(e){var t=Object(o.a)();this.options=l.a.extend(this.options,e),this.model=new Me.Item({id:this.options.id});var n=this;this.model.fetch({success:function(){n.options.show_permissions?n.showPermissions():n.options.show_version?n.fetchVersion():n.render()},error:function(e,n){void 0!==n.responseJSON?oe.error("".concat(n.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){t.libraries.library_router.back()}}):oe.error("An error occurred. Click this to go back.","",{onclick:function(){t.libraries.library_router.back()}})}})},render:function(e){this.options=l.a.extend(this.options,e),i()(".tooltip").remove();var t=this.templateDataset();this.$el.html(t({item:this.model})),i()(".peek").html(this.model.get("peek")),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("initialize")},_mountNametags:function(e){var t=this.$el.find(".nametags")[0];if(t){var n=this.model.get("tags");"string"==typeof n&&this.model.set({tags:n.split(", ")});var a=this.model.attributes,i=a.id,o=a.model_class,s=a.tags,r="".concat(o,"-").concat(i);Object(Le.a)({storeKey:r,tags:s},t)}},fetchVersion:function(e){this.options=l.a.extend(this.options,e);var t=this;this.options.ldda_id?(this.ldda=new Me.Ldda({id:this.options.ldda_id}),this.ldda.url="".concat(this.ldda.urlRoot+this.model.id,"/versions/").concat(this.ldda.id),this.ldda.fetch({success:function(){t.renderVersion()},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})):(this.render(),oe.error("Library dataset version requested but no id provided."))},renderVersion:function(){i()(".tooltip").remove();var e=this.templateVersion();this.$el.html(e({item:this.model,ldda:this.ldda})),i()(".peek").html(this.ldda.get("peek"))},enableModification:function(){i()(".tooltip").remove();var e=this.templateModifyDataset();this.$el.html(e({item:this.model})),this.renderSelectBoxes({genome_build:this.model.get("genome_build"),file_ext:this.model.get("file_ext")}),i()(".peek").html(this.model.get("peek")),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this._mountNametags("listener")},downloadDataset:function(){var e="".concat(Object(u.getAppRoot)(),"api/libraries/datasets/download/uncompressed"),t={ld_ids:this.id};this.processDownload(e,t)},processDownload:function(e,t,n){if(e&&t){t="string"==typeof t?t:i.a.param(t);var a="";i.a.each(t.split("&"),(function(){var e=this.split("=");a+='<input type="hidden" name="'.concat(e[0],'" value="').concat(e[1],'" />')})),i()('<form action="'.concat(e,'" method="').concat(n||"post",'">').concat(a,"</form>")).appendTo("body").submit().remove(),oe.info("Your download will begin soon.")}},importIntoHistory:function(){this.refreshUserHistoriesList((function(e){var t=Object(o.a)(),n=e.templateBulkImportInModal();e.modal=t.modal,e.modal.show({closing_events:!0,title:p()("Import into History"),body:n({histories:e.histories.models}),buttons:{Import:function(){e.importCurrentIntoHistory()},Close:function(){t.modal.hide()}}})}))},refreshUserHistoriesList:function(e){var t=this;this.histories=new Me.GalaxyHistories,this.histories.fetch({success:function(n){0===n.length?oe.warning("You have to create history first. Click this to do so.","",{onclick:function(){window.location=Object(u.getAppRoot)()}}):e(t)},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},importCurrentIntoHistory:function(){this.modal.disableButton("Import");var e=this.modal.$("input[name=history_name]").val(),t=this;if(""!==e)i.a.post("".concat(Object(u.getAppRoot)(),"api/histories"),{name:e}).done((function(e){t.processImportToHistory(e.id)})).fail((function(e,t,n){oe.error("An error occurred.")})).always((function(){t.modal.enableButton("Import")}));else{var n=i()(this.modal.$el).find("select[name=dataset_import_single] option:selected").val();this.processImportToHistory(n),this.modal.enableButton("Import")}},processImportToHistory:function(e){var t=Object(o.a)(),n=new Me.HistoryItem;n.url="".concat(n.urlRoot+e,"/contents"),i.a.getJSON("".concat(Object(u.getAppRoot)(),"history/set_as_current?id=").concat(e)),n.save({content:this.id,source:"library"},{success:function(){t.modal.hide(),oe.success("Dataset imported. Click this to start analyzing it.","",{onclick:function(){window.location=Object(u.getAppRoot)()}})},error:function(e,t){void 0!==t.responseJSON?oe.error("Dataset not imported. ".concat(t.responseJSON.err_msg)):oe.error("An error occurred. Dataset not imported. Please try again.")}})},showPermissions:function(e){var t=Object(o.a)(),n=this.templateDatasetPermissions(),a=this;this.options=l.a.extend(this.options,e),i()(".tooltip").remove(),void 0!==this.options.fetched_permissions&&(0===this.options.fetched_permissions.access_dataset_roles.length?this.model.set({is_unrestricted:!0}):this.model.set({is_unrestricted:!1})),this.$el.html(n({item:this.model,is_admin:t.config.is_admin_user})),i.a.get("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(a.id,"/permissions?scope=current")).done((function(e){a.prepareSelectBoxes({fetched_permissions:e,is_admin:t.config.is_admin_user})})).fail((function(){oe.error("An error occurred while attempting to fetch dataset permissions.")})),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},_serializeRoles:function(e){for(var t=[],n=0;n<e.length;n++)t.push("".concat(e[n][1],":").concat(e[n][0].replace(":"," ").replace(","," &")));return t},prepareSelectBoxes:function(e){this.options=l.a.extend(this.options,e),this.accessSelectObject=new xe.a.View(this._generate_select_options({selector:"access_perm",initialData:this._serializeRoles(this.options.fetched_permissions.access_dataset_roles)})),this.modifySelectObject=new xe.a.View(this._generate_select_options({selector:"modify_perm",initialData:this._serializeRoles(this.options.fetched_permissions.modify_item_roles)})),this.manageSelectObject=new xe.a.View(this._generate_select_options({selector:"manage_perm",initialData:this._serializeRoles(this.options.fetched_permissions.manage_dataset_roles)}))},_generate_select_options:function(e){var t={minimumInputLength:0,multiple:!0,placeholder:"Click to select a role",formatResult:function(e){return"".concat(e.name," type: ").concat(e.type)},formatSelection:function(e){return e.name},initSelection:function(e,t){var n=[];i()(e.val().split(",")).each((function(){var e=this.split(":");n.push({id:e[0],name:e[1]})})),t(n)},dropdownCssClass:"bigdrop"};return t.container=this.$el.find("#".concat(e.selector)),t.css=e.selector,t.initialData=e.initialData.join(","),t.ajax={url:"".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(this.id,"/permissions?scope=available"),dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:10,page:t}},results:function(e,t){var n=10*t<e.total;return{results:e.roles,more:n}}},t},detectDatatype:function(e){var t=this.model;t.set("file_ext","auto"),this._submitModification(t)},saveModifications:function(e){var t=!1,n=this.model,a=this.$el.find(".input_dataset_name").val();if(void 0!==a&&a!==n.get("name")){if(!(a.length>0))return void oe.warning("Library dataset name has to be at least 1 character long.");n.set("name",a),t=!0}var i=this.$el.find(".input_dataset_misc_info").val();void 0!==i&&i!==n.get("misc_info").trim()&&(n.set("misc_info",i),t=!0);var o=this.$el.find(".input_dataset_message").val();void 0!==o&&o!==n.get("message")&&(n.set("message",o),t=!0);var s=this.select_genome.$el.select2("data").id;void 0!==s&&s!==n.get("genome_build")&&(n.set("genome_build",s),t=!0);var r=this.select_extension.$el.select2("data").id;void 0!==r&&r!==n.get("file_ext")&&(n.set("file_ext",r),t=!0),t?this._submitModification(n):(this.render(),oe.info("Nothing has changed."))},_submitModification:function(e){var t=this;e.save(null,{patch:!0,success:function(e){t.render(),oe.success("Changes to library dataset saved.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred while attempting to update the library dataset.")}})},copyToClipboard:function(e){e.preventDefault();var t=d.a.history.location.href;-1!==t.lastIndexOf("/permissions")&&(t=t.substr(0,t.lastIndexOf("/permissions"))),window.prompt("Copy to clipboard: Ctrl+C, Enter",t)},makeDatasetPrivate:function(){var e=this;i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(e.id,"/permissions?action=make_private")).done((function(t){e.model.set({is_unrestricted:!1}),e.showPermissions({fetched_permissions:t}),oe.success("The dataset is now private to you.")})).fail((function(){oe.error("An error occurred while attempting to make dataset private.")}))},removeDatasetRestrictions:function(){var e=this;i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(e.id,"/permissions?action=remove_restrictions")).done((function(t){e.model.set({is_unrestricted:!0}),e.showPermissions({fetched_permissions:t}),oe.success("Access to this dataset is now unrestricted.")})).fail((function(){oe.error("An error occurred while attempting to make dataset unrestricted.")}))},_extractIds:function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n].id);return t},savePermissions:function(e){var t=this,n=this._extractIds(this.accessSelectObject.$el.select2("data")),a=this._extractIds(this.manageSelectObject.$el.select2("data")),o=this._extractIds(this.modifySelectObject.$el.select2("data"));i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(t.id,"/permissions?action=set_permissions"),{"access_ids[]":n,"manage_ids[]":a,"modify_ids[]":o}).done((function(e){t.showPermissions({fetched_permissions:e}),oe.success("Permissions saved.")})).fail((function(){oe.error("An error occurred while attempting to set dataset permissions.")}))},fetchExtAndGenomes:function(){var e=this;0==this.list_genomes.length&&_.a.get({url:"".concat(Object(u.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(t){for(var n in t)e.list_extensions.push({id:t[n].extension,text:t[n].extension,description:t[n].description,description_url:t[n].description_url});e.list_extensions.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.list_extensions.unshift(e.auto)}}),0==this.list_extensions.length&&_.a.get({url:"".concat(Object(u.getAppRoot)(),"api/genomes"),success:function(t){for(var n in t)e.list_genomes.push({id:t[n][1],text:t[n][0]});e.list_genomes.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0}))}})},renderSelectBoxes:function(e){var t="?",n="auto";void 0!==e&&(void 0!==e.genome_build&&(t=e.genome_build),void 0!==e.file_ext&&(n=e.file_ext)),this.select_genome=new xe.a.View({css:"dataset-genome-select",data:this.list_genomes,container:this.$el.find("#dataset_genome_select"),value:t}),this.select_extension=new xe.a.View({css:"dataset-extension-select",data:this.list_extensions,container:this.$el.find("#dataset_extension_select"),value:n})},templateDataset:function(){return l.a.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <button data-toggle="tooltip" data-placement="top" title="Download dataset"\n                        class="btn btn-secondary toolbtn-download-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-download"></span>\n                        &nbsp;Download\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Import dataset into history"\n                        class="btn btn-secondary toolbtn-import-dataset toolbar-item mr-1" type="button">\n                        <span class="fa fa-book"></span>\n                        &nbsp;to History\n                    </button>\n                    <% if (item.get("can_user_modify")) { %>\n                        <button data-toggle="tooltip" data-placement="top" title="Modify library item"\n                            class="btn btn-secondary toolbtn_modify_dataset toolbar-item mr-1" type="button">\n                            <span class="fa fa-pencil"></span>\n                            &nbsp;Modify\n                        </button>\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Attempt to detect the format of dataset"\n                            class="btn btn-secondary toolbtn_detect_datatype toolbar-item mr-1" type="button">\n                            <span class="fa fa-undo"></span>\n                            &nbsp;Auto-detect datatype\n                        </button>\n                    <% } %>\n                    <% if (item.get("can_user_manage")) { %>\n                        <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>/permissions">\n                            <button data-toggle="tooltip" data-placement="top" title="Manage permissions"\n                                class="btn btn-secondary toolbtn_change_permissions toolbar-item mr-1"\n                                type="button">\n                                <span class="fa fa-group"></span>\n                                &nbsp;Permissions\n                            </button>\n                        </a>\n                    <% } %>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="#/folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here"><%- path_item[1] %></span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <% if (item.get("is_unrestricted")) { %>\n                    <div>\n                        This dataset is unrestricted so everybody with the link can access it.\n                        Just share <span class="copy-link-to-clipboard"><a href="javascript:void(0)">this page</a></span>.\n                    </div>\n                <% } %>\n\n                \x3c!-- TABLE START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td><%= _.escape(item.get("name")) %></td>\n                        </tr>\n                        <% if (item.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(item.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(item.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(item.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(item.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(item.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(item.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("message")) { %>\n                            <tr>\n                                <th scope="row">Description</th>\n                                <td scope="row"><%= _.escape(item.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Misc. blurb</th>\n                                <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Misc. info</th>\n                                <td scope="row"><%= _.escape(item.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("uuid") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">UUID</th>\n                                <td scope="row"><%= _.escape(item.get("uuid")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if ( item.get("state") !== "ok" ) { %>\n                            <tr>\n                                <th scope="row">State</th>\n                                <td scope="row"><%= _.escape(item.get("state")) %></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <% if (item.get("job_stderr")) { %>\n                        <h4>Job Standard Error</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stderr")) %>\n                        </pre>\n                    <% } %>\n                    <% if (item.get("job_stdout")) { %>\n                        <h4>Job Standard Output</h4>\n                        <pre class="code">\n                            <%= _.escape(item.get("job_stdout")) %>\n                        </pre>\n                    <% } %>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                    <% if (item.get("has_versions")) { %>\n                        <div>\n                            <h3>Expired versions:</h3>\n                            <ul>\n                                <% _.each(item.get("expired_versions"), function(version) { %>\n                                    <li>\n                                        <a title="See details of this version"\n                                            href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>/versions/<%- version[0] %>">\n                                            <%- version[1] %>\n                                        </a>\n                                    </li>\n                                <% }) %>\n                            <ul>\n                        </div>\n                    <% } %>\n\n                \x3c!-- TABLE END --\x3e\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateVersion:function(){return l.a.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go to latest dataset"\n                            class="btn btn-secondary toolbar-item mr-1" type="button">\n                            <span class="fa fa-caret-left fa-lg"></span>\n                            &nbsp;Latest dataset\n                        </button>\n                    </a>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="#/folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="alert alert-warning">\n                    This is an expired version of the library dataset: <%= _.escape(item.get("name")) %>\n                </div>\n\n                \x3c!-- DATASET START --\x3e\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th scope="row" id="id_row" data-id="<%= _.escape(ldda.id) %>">Name</th>\n                            <td><%= _.escape(ldda.get("name")) %></td>\n                        </tr>\n                        <% if (ldda.get("file_ext")) { %>\n                            <tr>\n                                <th scope="row">Data type</th>\n                                <td><%= _.escape(ldda.get("file_ext")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("genome_build")) { %>\n                            <tr>\n                                <th scope="row">Genome build</th>\n                                <td><%= _.escape(ldda.get("genome_build")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("file_size")) { %>\n                            <tr>\n                                <th scope="row">Size</th>\n                                <td><%= _.escape(ldda.get("file_size")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("update_time")) { %>\n                            <tr>\n                                <th scope="row">Date last updated (UTC)</th>\n                                <td><%= _.escape(ldda.get("update_time")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("date_uploaded")) { %>\n                            <tr>\n                                <th scope="row">Date uploaded (UTC)</th>\n                                <td><%= _.escape(ldda.get("date_uploaded")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("uploaded_by")) { %>\n                            <tr>\n                                <th scope="row">Uploaded by</th>\n                                <td><%= _.escape(ldda.get("uploaded_by")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_data_lines")) { %>\n                            <tr>\n                                <th scope="row">Data Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_data_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_comment_lines")) { %>\n                            <tr>\n                                <th scope="row">Comment Lines</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_comment_lines")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_columns")) { %>\n                            <tr>\n                                <th scope="row">Number of Columns</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_columns")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("metadata_column_types")) { %>\n                            <tr>\n                                <th scope="row">Column Types</th>\n                                <td scope="row"><%= _.escape(ldda.get("metadata_column_types")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("message")) { %>\n                            <tr>\n                                <th scope="row">Message</th>\n                                <td scope="row"><%= _.escape(ldda.get("message")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_blurb")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous blurb</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_blurb")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (ldda.get("misc_info")) { %>\n                            <tr>\n                                <th scope="row">Miscellaneous information</th>\n                                <td scope="row"><%= _.escape(ldda.get("misc_info")) %></td>\n                            </tr>\n                        <% } %>\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                \x3c!-- DATASET END --\x3e\n                </div>\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateModifyDataset:function(){return l.a.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="#/folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n                <div class="dataset_table">\n                    <table class="grid table table-striped table-sm">\n                        <tr>\n                            <th class="dataset-first-column" scope="row" id="id_row"\n                                data-id="<%= _.escape(item.get("ldda_id")) %>">\n                                Name\n                            </th>\n                            <td>\n                                <input class="input_dataset_name form-control" type="text"\n                                    placeholder="name" value="<%= _.escape(item.get("name")) %>">\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Data type</th>\n                            <td>\n                                <span id="dataset_extension_select" class="dataset-extension-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Genome build</th>\n                            <td>\n                                <span id="dataset_genome_select" class="dataset-genome-select" />\n                            </td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Size</th>\n                            <td><%= _.escape(item.get("file_size")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date last updated (UTC)</th>\n                            <td><%= _.escape(item.get("update_time")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Date uploaded (UTC)</th>\n                            <td><%= _.escape(item.get("date_uploaded")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Uploaded by</th>\n                            <td><%= _.escape(item.get("uploaded_by")) %></td>\n                        </tr>\n                        <tr scope="row">\n                            <th scope="row">Data Lines</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_data_lines")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Comment Lines</th>\n                            <% if (item.get("metadata_comment_lines") === "") { %>\n                                <td scope="row"><%= _.escape(item.get("metadata_comment_lines")) %></td>\n                            <% } else { %>\n                                <td scope="row">unknown</td>\n                            <% } %>\n                        </tr>\n                        <tr>\n                            <th scope="row">Number of Columns</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_columns")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Column Types</th>\n                            <td scope="row"><%= _.escape(item.get("metadata_column_types")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Message</th>\n                            <td scope="row"><input class="input_dataset_message form-control" type="text"\n                                placeholder="message" value="<%= _.escape(item.get("message")) %>"></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. blurb</th>\n                            <td scope="row"><%= _.escape(item.get("misc_blurb")) %></td>\n                        </tr>\n                        <tr>\n                            <th scope="row">Misc. information</th>\n                            <td><input class="input_dataset_misc_info form-control" type="text"\n                                placeholder="info" value="<%= _.escape(item.get("misc_info")) %>"></td>\n                        </tr>\n\n                        \x3c!-- TODO: add functionality to modify tags here --\x3e\n                        <% if (item.get("tags")) { %>\n                            <tr>\n                                <th scope="row">Tags</th>\n                                <td scope="row"><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                            </tr>\n                        <% } %>\n                    </table>\n                    <div>\n                        <pre class="peek">\n                        </pre>\n                    </div>\n                </div>\n                <div class="d-flex">\n                    <button data-toggle="tooltip" data-placement="top" title="Cancel modifications"\n                        class="btn btn-secondary toolbtn_cancel_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-times"></span>\n                        &nbsp;Cancel\n                    </button>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications"\n                        class="btn btn-secondary toolbtn_save_modifications toolbar-item mr-1" type="button">\n                        <span class="fa fa-floppy-o"></span>\n                        &nbsp;Save\n                    </button>\n                </div>\n\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateDatasetPermissions:function(){return l.a.template('\x3c!-- CONTAINER START --\x3e\n            <div class="library_style_container">\n                <div class="d-flex mb-2">\n                    <a href="#folders/<%- item.get("folder_id") %>/datasets/<%- item.id %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go back to dataset"\n                            class="btn btn-secondary toolbar-item mr-1" type="button">\n                            <span class="fa fa-file-o"></span>\n                            &nbsp;Dataset Details\n                        </button>\n                    </a>\n                </div>\n\n                \x3c!-- BREADCRUMBS --\x3e\n                <ol class="breadcrumb">\n                    <li class="breadcrumb-item">\n                        <a title="Return to the list of libraries" href="#">Libraries</a>\n                    </li>\n                    <% _.each(item.get("full_path"), function(path_item) { %>\n                        <% if (path_item[0] != item.id) { %>\n                            <li class="breadcrumb-item">\n                                <a title="Return to this folder" href="#/folders/<%- path_item[0] %>">\n                                    <%- path_item[1] %>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="breadcrumb-item active">\n                                <span title="You are here">\n                                    <%- path_item[1] %>\n                                </span>\n                            </li>\n                        <% } %>\n                    <% }); %>\n                </ol>\n\n                <h1>Dataset: <%= _.escape(item.get("name")) %></h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any dataset\n                        on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types. However please\n                        read carefully the implications of such actions.\n                    <% } %>\n                </div>\n                <div class="dataset_table">\n                    <h2>Library-related permissions</h2>\n                    <h4>Roles that can modify the library item</h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify name, metadata,\n                        and other information about this library item.\n                    </div>\n                    <hr/>\n                    <h2>Dataset-related permissions</h2>\n                    <div class="alert alert-warning">\n                        Changes made below will affect <strong>every</strong> library item that was created from\n                        this dataset and also every history this dataset is part of.\n                    </div>\n                    <% if (!item.get("is_unrestricted")) { %>\n                        <p>\n                            You can <span class="remove-restrictions">\n                            <a href="javascript:void(0)">remove all access restrictions</a></span> on this dataset.\n                        </p>\n                    <% } else { %>\n                        <p>\n                            You can <span class="make-private">\n                            <a href="javascript:void(0)">make this dataset private</a></span> to you.</p>\n                    <% } %>\n                    <h4>Roles that can access the dataset</h4>\n                    <div id="access_perm" class="access_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User has to have <strong>all these roles</strong> in order to access this dataset.\n                        Users without access permission <strong>cannot</strong> have other permissions on this dataset.\n                        If there are no access roles set on the dataset it is considered <strong>unrestricted</strong>.\n                    </div>\n                    <h4>Roles that can manage permissions on the dataset</h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions of this dataset.\n                        If you remove yourself you will lose the ability manage this dataset unless you are an admin.\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications made on this page"\n                        class="btn btn-secondary toolbtn_save_permissions type="button">\n                        <span class="fa fa-floppy-o"></span>\n                        &nbsp;Save\n                    </button>\n                </div>\n            \x3c!-- CONTAINER END --\x3e\n            </div>')},templateBulkImportInModal:function(){return l.a.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select id="dataset_import_single" name="dataset_import_single"\n                        style="width:50%; margin-bottom: 1em;" autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">or create new:\n                    <input type="text" name="history_name" value="" placeholder="name of the new history"\n                        style="width:50%;" />\n                </div>\n            </div>')}})},Se={FolderRowView:d.a.View.extend({events:{"click .undelete_dataset_btn":"undeleteDataset","click .undelete_folder_btn":"undeleteFolder","click .edit_folder_btn":"startModifications","click .cancel_folder_btn":"cancelModifications","click .save_folder_btn":"saveModifications"},defaults:{type:null,visibility_config:{edit_folder_btn:!1,save_folder_btn:!1,cancel_folder_btn:!1,permission_folder_btn:!1},edit_mode:!1},initialize:function(e){this.options=l.a.defaults(e||{},this.defaults),this.render(this.options)},render:function(e){this.options=l.a.extend(this.options,e);var t=this.options.model,n=null,a=Object(o.a)();return"folder"===t.get("type")||"LibraryFolder"===t.get("model_class")?(this.options.type="folder",this.prepareButtons(t),n=t.get("deleted")?this.templateRowDeletedFolder():this.templateRowFolder()):"file"===t.get("type")||"LibraryDatasetDatasetAssociation"===t.get("model_class")||"LibraryDataset"===t.get("model_class")?(this.options.type="file",n=t.get("deleted")?this.templateRowDeletedFile():this.templateRowFile()):(a.emit.error("Unknown library item type found."),a.emit.error(t.get("type")||t.get("model_class"))),this.setElement(n({content_item:t,edit_mode:this.options.edit_mode,button_config:this.options.visibility_config})),this.$el.show(),this._mountNametags("initialize"),this},_mountNametags:function(e){var t=this.$el.find(".nametags")[0];if(t){var n=this.model.get("tags");"string"==typeof n&&this.model.set({tags:n.split(", ")});var a=this.model.attributes,i=a.id,o=a.model_class,s=a.tags,r="".concat(o,"-").concat(i);Object(Le.a)({storeKey:r,tags:s},t)}},prepareButtons:function(e){var t=this.options.visibility_config;!1===this.options.edit_mode?(t.save_folder_btn=!1,t.cancel_folder_btn=!1,!0===e.get("deleted")?(t.edit_folder_btn=!1,t.permission_folder_btn=!1):!1===e.get("deleted")&&(t.save_folder_btn=!1,t.cancel_folder_btn=!1,!0===e.get("can_modify")&&(t.edit_folder_btn=!0),!0===e.get("can_manage")&&(t.permission_folder_btn=!0))):!0===this.options.edit_mode&&(t.edit_folder_btn=!1,t.permission_folder_btn=!1,t.save_folder_btn=!0,t.cancel_folder_btn=!0),this.options.visibility_config=t},showDatasetDetails:function(){Object(o.a)().libraries.datasetView=new Te.LibraryDatasetView({id:this.id})},undeleteDataset:function(e){i()(".tooltip").hide();var t=Object(o.a)(),n=this,a=i()(e.target).closest("tr").data("id"),s=t.libraries.folderListView.collection.get(a);s.url="".concat(s.urlRoot+s.id,"?undelete=true"),s.destroy({success:function(e,i){t.libraries.folderListView.collection.remove(a);var o=new Me.Item(i);t.libraries.folderListView.collection.add(o),t.libraries.folderListView.collection.sortFolder("name","asc"),oe.success("Dataset undeleted. Click this to see it.","",{onclick:function(){var e=n.model.get("folder_id");window.location="".concat(Object(u.getAppRoot)(),"library/list#folders/").concat(e,"/datasets/").concat(n.id)}})},error:function(e,t){void 0!==t.responseJSON?oe.error("Dataset was not undeleted. ".concat(t.responseJSON.err_msg)):oe.error("An error occurred! Dataset was not undeleted. Please try again.")}})},undeleteFolder:function(e){var t=Object(o.a)();i()(".tooltip").hide();var n=i()(e.target).closest("tr").data("id"),a=t.libraries.folderListView.collection.get(n);a.url="".concat(a.urlRoot+a.id,"?undelete=true"),a.destroy({success:function(e,a){t.libraries.folderListView.collection.remove(n);var i=new Me.FolderAsModel(a);t.libraries.folderListView.collection.add(i),t.libraries.folderListView.collection.sortFolder("name","asc"),oe.success("Folder undeleted.")},error:function(e,t){void 0!==t.responseJSON?oe.error("Folder was not undeleted. ".concat(t.responseJSON.err_msg)):oe.error("An error occurred! Folder was not undeleted. Please try again.")}})},startModifications:function(){this.options.edit_mode=!0,this.repaint()},cancelModifications:function(){this.options.edit_mode=!1,this.repaint()},saveModifications:function(){var e=Object(o.a)().libraries.folderListView.collection.get(this.$el.data("id")),t=!1,n=this.$el.find(".input_folder_name").val();if(void 0!==n&&n!==e.get("name")){if(!(n.length>2))return void oe.warning("Folder name has to be at least 3 characters long.");e.set("name",n),t=!0}var a=this.$el.find(".input_folder_description").val();if(void 0!==a&&a!==e.get("description")&&(e.set("description",a),t=!0),t){var i=this;e.save(null,{patch:!0,success:function(e){i.options.edit_mode=!1,i.repaint(e),oe.success("Changes to folder saved.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred while attempting to update the folder.")}})}else this.options.edit_mode=!1,this.repaint(e),oe.info("Nothing has changed.")},repaint:function(){i()(".tooltip").hide();var e=this.$el;this.render(),e.replaceWith(this.$el),this.$el.find('[data-toggle="tooltip"]').tooltip({trigger:"hover"})},templateRowFolder:function(){return l.a.template('<tr class="folder_row library-row" data-id="<%- content_item.id %>">\n                <td class="mid">\n                    <span title="Folder" class="fa fa-folder-o"></span>\n                </td>\n                <td class="mid"><input style="margin: 0;" type="checkbox"></td>\n                <% if(!edit_mode) { %>\n                    <td>\n                        <a href="#folders/<%- content_item.id %>"><%- content_item.get("name") %></a>\n                    </td>\n                    <% if( content_item.get("description") ) { %>\n                        <% if( content_item.get("description").length > 40 ) { %>\n                            <td data-toggle="tooltip" data-placement="auto"\n                                title=\'<%= _.escape(content_item.get("description")) %>\'>\n                                <%= _.escape(content_item.get("description")).substring(0, 40) + "..." %>\n                            </td>\n                        <% } else { %>\n                            <td><%= _.escape(content_item.get("description"))%></td>\n                        <% } %>\n                    <% } else { %>\n                        <td></td>\n                    <% } %>\n                <% } else if(edit_mode){ %>\n                    <td>\n                        <textarea rows="4" class="form-control input_folder_name" placeholder="name" ><%- content_item.get("name") %></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_folder_description" placeholder="description" ><%- content_item.get("description") %></textarea>\n                    </td>\n                <% } %>\n                <td></td>\n                <td>folder</td>\n                <td></td>\n                <td>\n                    <%= _.escape(content_item.get("update_time")) %>\n                </td>\n                <td></td>\n                <td class="right-center">\n                    <% if(edit_mode) { %> \x3c!-- start edit mode --\x3e\n                        <button data-toggle="tooltip" data-placement="top" title="Save changes"\n                            class="primary-button btn-sm save_folder_btn" type="button"\n                            style="<% if(button_config.save_folder_btn === false) { print("display:none;") } %>">\n                            <span class="fa fa-floppy-o"></span> Save\n                        </button>\n                        <button data-toggle="tooltip" data-placement="top" title="Discard changes"\n                            class="primary-button btn-sm cancel_folder_btn" type="button"\n                            style="<% if(button_config.cancel_folder_btn === false) { print("display:none;") } %>">\n                            <span class="fa fa-times"></span> Cancel\n                        </button>\n                    <% } else if (!edit_mode){%> \x3c!-- start no edit mode --\x3e\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Modify \'<%- content_item.get("name") %>\'"\n                            class="primary-button btn-sm edit_folder_btn" type="button"\n                            style="<% if(button_config.edit_folder_btn === false) { print("display:none;") } %>">\n                            <span class="fa fa-pencil"></span> Edit\n                        </button>\n                        <a href="#/folders/<%- content_item.id %>/permissions">\n                            <button data-toggle="tooltip" data-placement="top"\n                                class="primary-button btn-sm permission_folder_btn"\n                                title="Permissions of \'<%- content_item.get("name") %>\'"\n                                    style="<% if(button_config.permission_folder_btn === false) { print("display:none;") } %>">\n                                <span class="fa fa-group"></span> Manage\n                            </button>\n                        </a>\n                    <% } %> \x3c!-- end no edit mode --\x3e\n               </td>\n            </tr>')},templateRowFile:function(){return l.a.template('<tr class="dataset_row library-row" data-id="<%- content_item.id %>">\n                <td class="mid">\n                    <span title="Dataset" class="fa fa-file-o"></span>\n                </td>\n                <td class="mid">\n                    <input style="margin: 0;" type="checkbox">\n                </td>\n                <td>\n                    <a href="#folders/<%- content_item.get("folder_id") %>/datasets/<%- content_item.id %>"\n                        class="library-dataset">\n                        <%- content_item.get("name") %>\n                    <a>\n                </td>\n                <% if( content_item.get("message") ) { %>\n                    <% if( content_item.get("message").length > 40 ) { %>\n                        <td data-toggle="tooltip" data-placement="auto"\n                            title=\'<%= _.escape(content_item.get("message")) %>\'>\n                            <%= _.escape(content_item.get("message")).substring(0, 40) + "..." %>\n                        </td>\n                    <% } else { %>\n                        <td><%= _.escape(content_item.get("message"))%></td>\n                    <% } %>\n                <% } %>\n                <td><div class="nametags">\x3c!-- Nametags mount here --\x3e</div></td>\n                <td><%= _.escape(content_item.get("file_ext")) %></td>\n                <td><%= _.escape(content_item.get("file_size")) %></td>\n                <td><%= _.escape(content_item.get("update_time")) %></td>\n                <td>\n                    <% if ( content_item.get("state") !== "ok" ) { %>\n                        <%= _.escape(content_item.get("state")) %>\n                    <% } %>\n                </td>\n                <td class="right-center">\n                    <% if (content_item.get("is_unrestricted")) { %>\n                        <span data-toggle="tooltip" data-placement="top" title="Unrestricted dataset"\n                            class="fa fa-globe"></span>\n                    <% } %>\n                    <% if (content_item.get("is_private")) { %>\n                        <span data-toggle="tooltip" data-placement="top" title="Private dataset"\n                            class="fa fa-key"></span>\n                    <% } %>\n                    <% if ((content_item.get("is_unrestricted") === false) && (content_item.get("is_private") === false)) { %>\n                        <span data-toggle="tooltip" data-placement="top" title="Restricted dataset"\n                            class="fa fa-shield"></span>\n                    <% } %>\n                    <% if (content_item.get("can_manage")) { %>\n                        <a href="#folders/<%- content_item.get("folder_id") %>/datasets/<%- content_item.id %>/permissions">\n                            <button data-toggle="tooltip" data-placement="top"\n                                class="primary-button btn-sm permissions-dataset-btn"\n                                title="Permissions of \'<%- content_item.get("name") %>\'">\n                                <span class="fa fa-group"></span> Manage\n                            </button>\n                        </a>\n                    <% } %>\n                </td>\n            </tr>')},templateRowDeletedFile:function(){return l.a.template('<tr class="active deleted_dataset library-row" data-id="<%- content_item.id %>">\n                <td class="mid">\n                    <span title="Dataset" class="fa fa-file-o"></span>\n                </td>\n                <td></td>\n                <td style="color:grey;">\n                    <%- content_item.get("name") %>\n                </td>\n                <td>\n                    <%- content_item.get("message") %>\n                </td>\n                <td>\n                    <div class="nametags">\x3c!-- Nametags mount here --\x3e</div>\n                </td>\n                <td>\n                    <%= _.escape(content_item.get("file_ext")) %>\n                </td>\n                <td>\n                    <%= _.escape(content_item.get("file_size")) %>\n                </td>\n                <td>\n                    <%= _.escape(content_item.get("update_time")) %>\n                </td>\n                <td>\n                    <% if ( content_item.get("state") !== "ok" ) { %>\n                        <%= _.escape(content_item.get("state")) %>\n                    <% } %>\n                </td>\n                <td class="right-center">\n                    <span data-toggle="tooltip" data-placement="top"\n                        title="Marked deleted" class="fa fa-ban"></span>\n                    <button data-toggle="tooltip" data-placement="top"\n                        title="Undelete \'<%- content_item.get("name") %>\'"\n                        class="primary-button btn-sm undelete_dataset_btn" type="button" style="margin-left:1em;">\n                        <span class="fa fa-unlock"></span> Undelete\n                    </button>\n                </td>\n            </tr>')},templateRowDeletedFolder:function(){return l.a.template('<tr class="active deleted_folder library-row" data-id="<%- content_item.id %>">\n                <td class="mid">\n                    <span title="Folder" class="fa fa-folder-o"></span>\n                </td>\n                <td></td>\n                <td style="color:grey;">\n                    <%- content_item.get("name") %>\n                </td>\n                <% if( content_item.get("description") ) { %>\n                    <% if( content_item.get("description").length > 40 ) { %>\n                        <td data-toggle="tooltip" data-placement="bottom"\n                            title=\'<%= _.escape(content_item.get("description")) %>\'>\n                            <%= _.escape(content_item.get("description")).substring(0, 40) + "..." %>\n                        </td>\n                    <% } else { %>\n                        <td><%= _.escape(content_item.get("description"))%></td>\n                    <% } %>\n                <% } else { %>\n                    <td></td>\n                <% } %>\n                <td></td>\n                <td>\n                    folder\n                </td>\n                <td></td>\n                <td>\n                    <%= _.escape(content_item.get("update_time")) %>\n                </td>\n                <td></td>\n                <td class="right-center">\n                    <span data-toggle="tooltip" data-placement="top"\n                        title="Marked deleted" class="fa fa-ban"></span>\n                    <button data-toggle="tooltip" data-placement="top"\n                        title="Undelete \'<%- content_item.get("name") %>\'"\n                        class="primary-button btn-sm undelete_folder_btn" type="button" style="margin-left:1em;">\n                        <span class="fa fa-unlock"></span> Undelete\n                    </button>\n                </td>\n            </tr>')}})},De={FolderListView:d.a.View.extend({el:"#folder_items_element",progress:0,progressStep:1,folderContainer:null,current_sort_order:"asc",current_sort_key:"name",events:{"click #select-all-checkboxes":"selectAll","click .dataset_row":"selectClickedRow","click .folder_row":"selectClickedRow","click .sort-folder-name":"sortColumnClicked","click .sort-folder-file_ext":"sortColumnClicked","click .sort-folder-message":"sortColumnClicked","click .sort-folder-update_time":"sortColumnClicked","click .sort-folder-raw_size":"sortColumnClicked","click .sort-folder-state":"sortColumnClicked"},collection:null,defaults:{include_deleted:!1,page_count:null,show_page:null},initialize:function(e){this.options=l.a.defaults(this.options||{},this.defaults,e),this.modal=null,this.rowViews={},this.collection=new Me.Folder,this.listenTo(this.collection,"add",this.renderOne),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"reset",this.rePaint),this.fetchFolder()},fetchFolder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.include_deleted=e.include_deleted;var t=this;this.folderContainer=new Me.FolderContainer({id:this.options.id}),this.folderContainer.url="".concat(this.folderContainer.attributes.urlRoot+this.options.id,"/contents"),this.options.include_deleted&&(this.folderContainer.url="".concat(this.folderContainer.url,"?include_deleted=true")),this.folderContainer.fetch({success:function(e){t.folder_container=e,t.render()},error:function(e,t){var n=Object(o.a)();void 0!==t.responseJSON?oe.error("".concat(t.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){n.libraries.library_router.back()}}):oe.error("An error occurred. Click this to go back.","",{onclick:function(){n.libraries.library_router.back()}})}})},render:function(e){this.options=l.a.extend(this.options,e);var t=this.templateFolder();i()(".tooltip").hide();var n,a=this.folderContainer.attributes.metadata.full_path;if(n=1===a.length?0:a[a.length-2][0],this.$el.html(t({path:this.folderContainer.attributes.metadata.full_path,parent_library_id:this.folderContainer.attributes.metadata.parent_library_id,id:this.options.id,upper_folder_id:n,order:this.current_sort_order})),this.options.dataset_id){var o=l.a.findWhere(self.rowViews,{id:this.options.dataset_id});o?o.showDatasetDetails():oe.error("Requested dataset not found. Showing folder instead.")}else(null===this.options.show_page||this.options.show_page<1)&&(this.options.show_page=1),this.paginate();i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},paginate:function(e){var t=Object(o.a)();this.options=l.a.extend(this.options,e),(null===this.options.show_page||this.options.show_page<1)&&(this.options.show_page=1),this.options.total_items_count=this.folder_container.get("folder").models.length,this.options.page_count=Math.ceil(this.options.total_items_count/t.libraries.preferences.get("folder_page_size"));var n=t.libraries.preferences.get("folder_page_size")*(this.options.show_page-1),a=null;a=this.folder_container.get("folder").models.slice(n,n+t.libraries.preferences.get("folder_page_size")),this.options.items_shown=a.length,t.libraries.preferences.get("folder_page_size")*this.options.show_page>this.options.total_items_count+t.libraries.preferences.get("folder_page_size")&&(a=[]),t.libraries.folderToolbarView.renderPaginator(this.options),this.collection.reset(a)},rePaint:function(e){this.options=l.a.extend(this.options,e),this.removeAllRows(),this.renderAll(),this.checkEmptiness()},addAll:function(e){var t=Object(o.a)();l.a.each(e,(function(e){t.libraries.folderListView.collection.add(e,{current_sort_order:!1})})),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),this.checkEmptiness(),this.postRender()},postRender:function(){var e=Object(o.a)(),t=this.folderContainer.attributes.metadata;t.contains_file_or_folder=void 0!==this.collection.findWhere({type:"file"})||void 0!==this.collection.findWhere({type:"folder"}),e.libraries.folderToolbarView.configureElements(t)},renderAll:function(){var e=this;l.a.each(this.collection.models.reverse(),(function(t){e.renderOne(t)})),this.postRender()},renderOne:function(e){this.options.contains_file_or_folder=!0,e.set("folder_id",this.id);var t=new Se.FolderRowView({model:e});this.rowViews[e.get("id")]=t,this.$el.find("#first_folder_item").after(t.el)},removeOne:function(e){this.$el.find("tr").filter((function(){return i()(this).data("id")&&i()(this).data("id")===e.id})).remove()},removeAllRows:function(){i()(".library-row").remove()},checkEmptiness:function(){0===this.$el.find(".dataset_row").length&&0===this.$el.find(".folder_row").length?this.$el.find(".empty-folder-message").show():this.$el.find(".empty-folder-message").hide()},sortColumnClicked:function(e){e.preventDefault(),this.current_sort_order="asc"===this.current_sort_order?"desc":"asc",this.current_sort_key=e.currentTarget.className.replace("sort-folder-","");var t=this.folder_container.sortFolder(this.current_sort_key,this.current_sort_order);this.collection.reset(t.models),this.renderSortIcon()},searchFolder:function(e){if(""!==i.a.trim(e)){var t=this.folder_container.search(e);this.collection.reset(t)}else this.paginate()},selectAll:function(e){var t=e.target.checked,n=this;i()(":checkbox","#folder_list_body").each((function(){this.checked=t;var e=i()(this).closest("tr");t?n.makeDarkRow(e):n.makeWhiteRow(e)}))},selectClickedRow:function(e){var t,n,a="";t=i()(e.target).closest("tr"),"input"===e.target.localName?(a=e.target,n="input"):"td"===e.target.localName&&(a=t.find(":checkbox")[0],n="td"),a.checked?"td"===n?(a.checked="",this.makeWhiteRow(t)):"input"===n&&this.makeDarkRow(t):"td"===n?(a.checked="selected",this.makeDarkRow(t)):"input"===n&&this.makeWhiteRow(t)},makeDarkRow:function(e){e.addClass("table-primary")},makeWhiteRow:function(e){e.removeClass("table-primary")},renderSortIcon:function(){i()('[class*="sort-icon"]').removeClass("fa-sort-alpha-desc").removeClass("fa-sort-alpha-asc"),"asc"===this.current_sort_order?i()(".sort-icon-".concat(this.current_sort_key)).addClass("fa-sort-alpha-asc"):i()(".sort-icon-".concat(this.current_sort_key)).addClass("fa-sort-alpha-desc")},createFolderInline:function(){var e=this;if(this.$el.find("tr.new-row").length)this.$el.find("tr.new-row textarea")[0].focus();else{var t=this.templateNewFolder();this.$el.find("#first_folder_item").after(t),this.$el.find("tr.new-row textarea")[0].focus(),this.$el.find("tr.new-row .save_folder_btn").click((function(){e.createNewFolder(e.$el.find("tr.new-row textarea")[0].value,e.$el.find("tr.new-row textarea")[1].value)})),this.$el.find("tr.new-row .cancel_folder_btn").click((function(){e.$el.find("tr.new-row").remove()}))}},createNewFolder:function(e,t){var n=this,a=Object(o.a)(),s={name:e,description:t};if(""!==s.name){var r,l=new Me.FolderAsModel,c=d.a.history.fragment.split("/");r=c.indexOf("page")>-1?c[c.length-3]:c[c.length-1],l.url=l.urlRoot+r,l.save(s,{success:function(e){oe.success("Folder created."),e.set({type:"folder"}),n.$el.find("tr.new-row").remove(),a.libraries.folderListView.collection.add(e),i()('tr[data-id="'.concat(e.attributes.id,'"')).addClass("table-success").on("mouseover click",(function(){i()(this).removeClass("table-success")}))},error:function(e,t){a.modal.hide(),void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})}else oe.error("Folder's name is missing.");return!1},templateNewFolder:function(){return l.a.template('<tr class="new-row">\n                <td class="mid">\n                    <span title="Folder" class="fa fa-folder-o"></span>\n                </td>\n                <td></td>\n                <td>\n                    <textarea name="input_folder_name" rows="4" class="form-control input_folder_name" placeholder="name" ></textarea>\n                </td>\n                <td>\n                    <textarea rows="4" class="form-control input_folder_description" placeholder="description" ></textarea>\n                </td>\n                <td>folder</td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td class="right-center">\n                    <button data-toggle="tooltip" data-placement="left" title="Save changes"\n                        class="btn btn-secondary btn-sm save_folder_btn" type="button">\n                        <span class="fa fa-floppy-o"></span> Save\n                    </button>\n                    <button data-toggle="tooltip" data-placement="left" title="Discard changes"\n                        class="btn btn-secondary btn-sm cancel_folder_btn" type="button">\n                        <span class="fa fa-times"></span> Cancel\n                    </button>\n                </td>\n            </tr>')},templateFolder:function(){return l.a.template('<ol class="breadcrumb">\n                <li class="breadcrumb-item">\n                    <a title="Return to the list of libraries" href="#">Libraries</a>\n                </li>\n                <% _.each(path, function(path_item) { %>\n                    <% if (path_item[0] != id) { %>\n                        <li class="breadcrumb-item">\n                            <a title="Return to this folder" href="#/folders/<%- path_item[0] %>">\n                                <%- path_item[1] %>\n                            </a>\n                        </li>\n                    <% } else { %>\n                        <li class="breadcrumb-item active">\n                            <span title="You are in this folder">\n                                <%- path_item[1] %>\n                            </span>\n                        </li>\n                    <% } %>\n                <% }); %>\n            </ol>\n\n            \x3c!-- FOLDER CONTENT --\x3e\n            <table data-library-id="<%- parent_library_id  %>" class="grid table table-hover table-sm folder-container">\n                <thead>\n                    <th class="button_heading"></th>\n                    <th class="mid" style="width: 20px;"\n                        title="Check to select all datasets">\n                        <input id="select-all-checkboxes" style="margin: 0;" type="checkbox">\n                    </th>\n                    <th>\n                        <a class="sort-folder-name" title="Click to reverse order" href="javascript:void(0)" role="button">Name</a>\n                        <span title="Sorted by Name" class="sort-icon-name fa fa-sort-alpha-<%- order %>"></span>\n                    </th>\n                    <th style="width:20%;">\n                        <a class="sort-folder-message" title="Click to reverse order" href="javascript:void(0)" role="button">Description</a>\n                        <span title="Sorted by Desc." class="sort-icon-message fa"></span>\n                    </th>\n                    <th style="width:5%;">\n                        <span>Tags</span>\n                    </th>\n                    <th style="width:5%;">\n                        <a class="sort-folder-file_ext" title="Click to reverse order" href="javascript:void(0)" role="button">Data Type</a>\n                        <span title="Sorted by Type" class="sort-icon-file_ext fa"></span>\n                    </th>\n                    <th style="width:10%;">\n                        <a class="sort-folder-raw_size" title="Click to reverse order" href="javascript:void(0)" role="button">Size</a>\n                        <span title="Sorted by Size" class="sort-icon-raw_size fa"></span>\n                    </th>\n                    <th style="width:160px;">\n                        <a class="sort-folder-update_time" title="Click to reverse order" href=href="javascript:void(0)" role="button">Date Updated (UTC)</a>\n                        <span title="Sorted by Date" class="sort-icon-update_time fa"></span>\n                    </th>\n                    <th style="width:5%;">\n                        <a class="sort-folder-state" title="Click to reverse order" href="javascript:void(0)">State</a>\n                        <span title="Sorted by State" class="sort-icon-state fa"></span>\n                    </th>\n                    <th style="width:160px;"></th>\n                </thead>\n                <tbody id="folder_list_body">\n                    <tr id="first_folder_item">\n                        <td>\n                            <a href="#<% if (upper_folder_id !== 0){ print("folders/" + upper_folder_id)} %>"\n                                title="Go to parent folder" class="btn_open_folder btn btn-secondary btn-sm">..<a>\n                        </td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </tbody>\n            </table>\n            <div class="empty-folder-message" style="display:none;">\n                This folder is either empty or you do not have proper access permissions to see the contents.\n                If you expected something to show up please consult the\n                <a href="https://galaxyproject.org/data-libraries/#permissions" target="_blank">\n                    library security wikipage\n                </a>.\n            </div>')}})},Ce=n(25),je=n.n(Ce),Ye={LibraryRowView:d.a.View.extend({events:{"click .edit_library_btn":"edit_button_clicked","click .cancel_library_btn":"cancel_library_modification","click .save_library_btn":"save_library_modification","click .delete_library_btn":"delete_library","click .undelete_library_btn":"undelete_library"},edit_mode:!1,element_visibility_config:{upload_library_btn:!1,edit_library_btn:!1,permission_library_btn:!1,save_library_btn:!1,cancel_library_btn:!1,delete_library_btn:!1,undelete_library_btn:!1},initialize:function(e){this.render(e)},render:function(e){void 0===e&&(e=Object(o.a)().libraries.libraryListView.collection.get(this.$el.data("id")),console.log(e));this.prepareButtons(e);var t=this.templateRow();return this.setElement(t({library:e,button_config:this.element_visibility_config,edit_mode:this.edit_mode})),this.$el.show(),this},repaint:function(e){this.$el.find('[data-toggle="tooltip"]').tooltip("dispose");var t=this.$el;this.render(),t.replaceWith(this.$el),this.$el.find('[data-toggle="tooltip"]').tooltip({trigger:"hover"}),ce("[data-linkify=true]")},prepareButtons:function(e){var t=this.element_visibility_config;!1===this.edit_mode?(t.save_library_btn=!1,t.cancel_library_btn=!1,t.delete_library_btn=!1,!0===e.get("deleted")?(t.undelete_library_btn=!0,t.upload_library_btn=!1,t.edit_library_btn=!1,t.permission_library_btn=!1):!1===e.get("deleted")&&(t.save_library_btn=!1,t.cancel_library_btn=!1,t.undelete_library_btn=!1,!0===e.get("can_user_add")&&(t.upload_library_btn=!0),!0===e.get("can_user_modify")&&(t.edit_library_btn=!0),!0===e.get("can_user_manage")&&(t.permission_library_btn=!0))):!0===this.edit_mode&&(t.upload_library_btn=!1,t.edit_library_btn=!1,t.permission_library_btn=!1,t.save_library_btn=!0,t.cancel_library_btn=!0,t.delete_library_btn=!0,t.undelete_library_btn=!1),this.element_visibility_config=t},edit_button_clicked:function(){this.edit_mode=!0,this.repaint()},cancel_library_modification:function(){this.edit_mode=!1,this.repaint()},save_library_modification:function(){var e=Object(o.a)().libraries.libraryListView.collection.get(this.$el.data("id")),t=!1,n=this.$el.find(".input_library_name").val();if(void 0!==n&&n!==e.get("name")){if(!(n.length>2))return void oe.warning("Library name has to be at least 3 characters long.");e.set("name",n),t=!0}var a=this.$el.find(".input_library_description").val();void 0!==a&&a!==e.get("description")&&(e.set("description",a),t=!0);var i=this.$el.find(".input_library_synopsis").val();if(void 0!==i&&i!==e.get("synopsis")&&(e.set("synopsis",i),t=!0),t){var s=this;e.save(null,{patch:!0,success:function(e){s.edit_mode=!1,s.repaint(e),oe.success("Changes to library saved.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred while attempting to update the library.")}})}else this.edit_mode=!1,this.repaint(e),oe.info("Nothing has changed.")},delete_library:function(){var e=Object(o.a)(),t=e.libraries.libraryListView.collection.get(this.$el.data("id")),n=this;t.destroy({success:function(t){t.set("deleted",!0),e.libraries.libraryListView.collection.add(t),n.edit_mode=!1,!1===e.libraries.preferences.get("with_deleted")?(i()(".tooltip").hide(),n.repaint(t),n.$el.remove()):!0===e.libraries.preferences.get("with_deleted")&&n.repaint(t),oe.success("Library has been marked deleted.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred during deleting the library.")}})},undelete_library:function(){var e=Object(o.a)(),t=e.libraries.libraryListView.collection.get(this.$el.data("id")),n=this;t.url="".concat(t.urlRoot+t.id,"?undelete=true"),t.destroy({success:function(t){t.set("deleted",!1),e.libraries.libraryListView.collection.add(t),n.edit_mode=!1,n.repaint(t),oe.success("Library has been undeleted.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred while undeleting the library.")}})},templateRow:function(){return l.a.template('<tr class="<% if(library.get("deleted") === true) { print("active") } %>"\n                style="display:none;" data-id="<%- library.get("id") %>">\n                <% if(!edit_mode) { %>\n                    <% if(library.get("deleted")) { %>\n                        <td style="color:grey;"><%- library.get("name") %></td>\n                    <% } else { %>\n                        <td>\n                            <a href="#folders/<%- library.get("root_folder_id") %>"><%- library.get("name") %></a>\n                        </td>\n                    <% } %>\n                    <% if(library.get("description")) { %>\n                        <% if( (library.get("description")).length> 40 ) { %>\n                            <td data-linkify=true data-toggle="tooltip" data-placement="bottom"\n                                title="<%= _.escape(library.get("description")) %>">\n                                <%= _.escape(library.get("description")).substring(0, 40) + "..." %>\n                            </td>\n                        <% } else { %>\n                            <td data-linkify=true><%= _.escape(library.get("description"))%></td>\n                        <% } %>\n                    <% } else { %>\n                        <td></td>\n                    <% } %>\n                    <% if(library.get("synopsis")) { %>\n                        <% if( (library.get("synopsis")).length> 40 ) { %>\n                            <td data-toggle="tooltip" data-placement="bottom"\n                                title="<%= _.escape(library.get("synopsis")) %>">\n                                <%= _.escape(library.get("synopsis")).substring(0, 40) + "..." %>\n                            </td>\n                        <% } else { %>\n                            <td><%= _.escape(library.get("synopsis"))%></td>\n                        <% } %>\n                    <% } else { %>\n                        <td></td>\n                    <% } %>\n                <% } else if(edit_mode){ %>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_name" placeholder="name" ><%- library.get("name") %></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_description" placeholder="description"><%- library.get("description") %></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_synopsis" placeholder="synopsis"><%- library.get("synopsis") %></textarea>\n                    </td>\n                <% } %>\n                <td class="right-center">\n                    <% if( (library.get("public")) && (library.get("deleted") === false) ) { %>\n                        <span data-toggle="tooltip" data-placement="left" title="Unrestricted library"\n                            class="fa fa-globe fa-lg"></span>\n                    <% }%>\n                    <button data-toggle="tooltip" data-placement="left" title="Modify \'<%- library.get("name") %>\'"\n                        class="btn btn-secondary btn-sm edit_library_btn" type="button"\n                        style="<% if(button_config.edit_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-pencil"></span> Edit\n                    </button>\n                    <a data-toggle="tooltip" data-placement="left"\n                        title="Permissions of \'<%- library.get("name") %>\'"\n                        href="#library/<%- library.get("id") %>/permissions">\n                        <button class="btn btn-secondary btn-sm permission_library_btn" type="button"\n                            style="<% if(button_config.permission_library_btn === false) { print("display:none;") } %>">\n                            <span class="fa fa-group"></span> Manage\n                        </button>\n                    </a>\n                    <button data-toggle="tooltip" data-placement="left" title="Save changes"\n                        class="btn btn-secondary btn-sm save_library_btn" type="button"\n                        style="<% if(button_config.save_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-floppy-o"></span> Save\n                    </button>\n                    <button data-toggle="tooltip" data-placement="left" title="Discard changes"\n                        class="btn btn-secondary btn-sm cancel_library_btn" type="button"\n                        style="<% if(button_config.cancel_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-times"></span> Cancel\n                    </button>\n                    <button data-toggle="tooltip" data-placement="left" title="Delete \'<%- library.get("name") %>\'"\n                        class="btn btn-secondary btn-sm delete_library_btn" type="button"\n                        style="<% if(button_config.delete_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-trash-o"></span> Delete\n                    </button>\n                    \x3c!-- For deleted libraries --\x3e\n                    <span data-toggle="tooltip" data-placement="left" title="Marked deleted"\n                        style="color:grey; <% if(button_config.undelete_library_btn === false) { print("display:none;") } %>"\n                        class="fa fa-ban fa-lg">\n                    </span>\n                    <button data-toggle="tooltip" data-placement="left" title="Undelete \'<%- library.get("name") %>\' "\n                        class="btn btn-secondary btn-sm undelete_library_btn" type="button"\n                        style="<% if(button_config.undelete_library_btn === false) { print("display:none;") } %>">\n                        <span class="fa fa-unlock"></span> Undelete\n                    </button>\n                </td>\n            </tr>')}})},Oe={LibraryListView:d.a.View.extend({el:"#libraries_element",events:{"click .sort-libraries-link":"sort_clicked"},defaults:{page_count:null,show_page:null,all_fetched:!1},initialize:function(e){this.options=je.a.defaults(this.options||{},e,this.defaults);var t=this;this.modal=null,this.collection=new Me.Libraries,this.collection.url="".concat(this.collection.urlRoot,"?deleted=false"),this.collection.fetch({success:function(){t.render()},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},render:function(e){var t=Object(o.a)();this.options=je.a.extend(this.options,e),this.setElement("#libraries_element");var n=this.templateLibraryList(),a=null,s=null,r=function(e){return!0===e.get("public")};if(i()(".tooltip").hide(),void 0!==e&&(s=void 0!==e.models?e.models:null),null!==this.collection&&null===s)this.sortLibraries(),a=t.libraries.preferences.get("with_deleted")?this.collection.models:this.collection.where({deleted:!1}),t.libraries.preferences.get("without_restricted")&&(a=je.a.filter(a,r));else if(null!==s){if(t.libraries.preferences.get("with_deleted"))a=s;else{a=je.a.filter(s,(function(e){return!1===e.get("deleted")}))}t.libraries.preferences.get("without_restricted")&&(a=je.a.filter(a,r))}else a=[];(null===this.options.show_page||this.options.show_page<1)&&(this.options.show_page=1),this.options.total_libraries_count=a.length;var l=t.libraries.preferences.get("library_page_size")*(this.options.show_page-1);this.options.page_count=Math.ceil(this.options.total_libraries_count/t.libraries.preferences.get("library_page_size")),this.options.total_libraries_count>0&&l<this.options.total_libraries_count?(a=a.slice(l,l+t.libraries.preferences.get("library_page_size")),this.options.libraries_shown=a.length,t.libraries.preferences.get("library_page_size")*this.options.show_page>this.options.total_libraries_count+t.libraries.preferences.get("library_page_size")&&(a=[]),this.$el.html(n({length:1,order:t.libraries.preferences.get("sort_order"),search_term:t.libraries.libraryToolbarView.options.search_term})),t.libraries.libraryToolbarView.renderPaginator(this.options),this.renderRows(a)):(this.$el.html(n({length:0,order:t.libraries.preferences.get("sort_order"),search_term:t.libraries.libraryToolbarView.options.search_term})),t.libraries.libraryToolbarView.renderPaginator(this.options));var c=i()('#center [data-toggle="tooltip"]');c.attr("title")||(c.tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")),ce("[data-linkify=true]")},fetchDeleted:function(){if(this.options.all_fetched)this.render();else{var e=this;this.collection.url="".concat(this.collection.urlRoot,"?deleted=true"),this.collection.fetch({remove:!1,success:function(){e.options.all_fetched=!0,e.render()},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})}},renderRows:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.renderOne({library:n})}},renderOne:function(e){var t=e.library,n=new Ye.LibraryRowView(t);this.$el.find("#library_list_body").append(n.el)},sort_clicked:function(){var e=Object(o.a)();"asc"===e.libraries.preferences.get("sort_order")?e.libraries.preferences.set({sort_order:"desc"}):e.libraries.preferences.set({sort_order:"asc"}),this.render()},sortLibraries:function(){var e=Object(o.a)();"name"===e.libraries.preferences.get("sort_by")&&("asc"===e.libraries.preferences.get("sort_order")?this.collection.sortLibraries("name","asc"):"desc"===e.libraries.preferences.get("sort_order")&&this.collection.sortLibraries("name","desc"))},searchLibraries:function(e){if(""!==i.a.trim(e)){var t;t=this.collection.search(e),this.options.searching=!0,this.render({models:t,show_page:1})}else this.options.searching=!1,this.render()},createLibraryInline:function(){var e=this;if(this.$el.find("tr.new-row").length)this.$el.find("tr.new-row textarea")[0].focus();else{var t=this.templateNewRow();this.$el.find("#library_list_body").closest("table").show(),this.$el.find("#library_list_body").prepend(t),this.$el.find("tr.new-row textarea")[0].focus(),this.$el.find("tr.new-row .save_library_btn").click((function(){e.createNewLibrary(e.$el.find("tr.new-row textarea")[0].value,e.$el.find("tr.new-row textarea")[1].value,e.$el.find("tr.new-row textarea")[2].value)})),this.$el.find("tr.new-row .cancel_library_btn").click((function(){e.$el.find("tr.new-row").remove()}))}},createNewLibrary:function(e,t,n){var a=this,s=Object(o.a)(),r={name:e,description:t,synopsis:n};""!==r.name?(new Me.Library).save(r,{success:function(e){s.libraries.libraryListView.collection.add(e),a.$el.find("tr.new-row").remove(),s.libraries.libraryListView.render(),i()('tr[data-id="'.concat(e.attributes.id,'"')).addClass("table-success").on("mouseover click",(function(){i()(this).removeClass("table-success")})),oe.success("Library created.")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}}):oe.error("Library's name is missing.");return!1},templateNewRow:function(){return je.a.template('<tr class="new-row">\n                    <td>\n                        <textarea name="input_library_name" rows="4" class="form-control input_library_name" placeholder="name" ></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_description" placeholder="description"></textarea>\n                    </td>\n                    <td>\n                        <textarea rows="4" class="form-control input_library_synopsis" placeholder="synopsis"></textarea>\n                    </td>\n                    <td class="right-center">\n                        <button data-toggle="tooltip" data-placement="left" title="Save changes"\n                            class="btn btn-secondary btn-sm save_library_btn" type="button">\n                            <span class="fa fa-floppy-o"></span> Save\n                        </button>\n                        <button data-toggle="tooltip" data-placement="left" title="Discard changes"\n                            class="btn btn-secondary btn-sm cancel_library_btn" type="button">\n                            <span class="fa fa-times"></span> Cancel\n                        </button>\n                    </td>     \n            </tr>')},templateLibraryList:function(){return je.a.template('<div class="library_container table-responsive">\n                <table class="grid table table-sm"\n                    <% if(length === 0) { %> style="display:none;" <% }%> >\n                    <thead>\n                        <th style="width:30%;">\n                            <a class="sort-libraries-link" title="Click to reverse order" href="javascript:void(0)" role="button">\n                                Name\n                            </a>\n                            <span title="Sorted alphabetically" class="fa fa-sort-alpha-<%- order %>"></span>\n                        </th>\n                        <th style="width:22%;">Description</th>\n                        <th style="width:22%;">Synopsis</th> \n                        <th style="width:26%;"></th>\n                    </thead>\n                    <tbody id="library_list_body">\n                    \x3c!-- library item views will attach here --\x3e\n                   </tbody>\n                </table>\n                    \n                <% if(length === 0) { %>\n                    <% if(search_term.length > 0) { %>\n                        <div>\n                            There are no libraries matching your search. Try different keyword.\n                        </div>\n                    <% } else{ %>\n                        <div>\n                            There are no libraries visible to you here. If you expected some to show up please consult the\n                            <a href="https://galaxyproject.org/data-libraries/#permissions" target="_blank">library security wikipage</a>.\n                        </div>\n                    <% }%>\n                <% }%>\n            </div>')}})},Ae={LibraryToolbarView:d.a.View.extend({el:"#center",defaults:{search_term:""},events:{"click #create_new_library_btn":"createLibraryInline","click #include_deleted_chk":"includeDeletedChecked","click #exclude_restricted_chk":"excludeRestrictedChecked","keydown .page_size":"changePageSize","blur .page_size":"changePageSize","keyup .library-search-input":"searchLibraries"},initialize:function(e){this.options=l.a.defaults(this.options||{},e,this.defaults),this.render()},render:function(){var e=Object(o.a)(),t=this.templateToolBar(),n=!1,a=!0;e.user&&(n=e.user.isAdmin(),a=e.user.isAnonymous()),this.$el.html(t({admin_user:n,anon_user:a,library_page_size:e.libraries.preferences.get("library_page_size")})),n&&(this.$el.find("#include_deleted_chk")[0].checked=e.libraries.preferences.get("with_deleted"),this.$el.find("#exclude_restricted_chk")[0].checked=e.libraries.preferences.get("without_restricted"))},renderPaginator:function(e){var t=Object(o.a)();this.options=l.a.extend(this.options,e);var n=this.templatePaginator(),a=this.templatePaginatorText();this.$el.find(".library-paginator > .paginator").html(n({show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_libraries_count:this.options.total_libraries_count,libraries_shown:this.options.libraries_shown,library_page_size:t.libraries.preferences.get("library_page_size")})),this.$el.find(".library-paginator > .paginator-text").html(a({show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_libraries_count:this.options.total_libraries_count,libraries_shown:this.options.libraries_shown,library_page_size:t.libraries.preferences.get("library_page_size")}))},createLibraryInline:function(){Object(o.a)().libraries.libraryListView.createLibraryInline()},changePageSize:function(e){if("focusout"===e.type||"keydown"===e.type&&13===e.keyCode){e.preventDefault();var t=Object(o.a)();t.libraries.preferences.set({library_page_size:parseInt(e.target.value)}),t.libraries.libraryListView.render({show_page:1})}},includeDeletedChecked:function(e){var t=Object(o.a)();e.target.checked?(t.libraries.preferences.set({with_deleted:!0}),t.libraries.libraryListView.fetchDeleted()):(t.libraries.preferences.set({with_deleted:!1}),t.libraries.libraryListView.render())},excludeRestrictedChecked:function(e){var t=Object(o.a)();e.target.checked?t.libraries.preferences.set({without_restricted:!0}):t.libraries.preferences.set({without_restricted:!1}),t.libraries.libraryListView.render()},searchLibraries:function(e){var t=Object(o.a)(),n=i()(".library-search-input").val();this.options.search_term=n,t.libraries.libraryListView.searchLibraries(n)},templateToolBar:function(){return l.a.template('<div class="library_style_container">\n                <div class="d-flex align-items-center mb-2 library-toolbar">\n                    <a class="btn btn-secondary mr-1" data-toggle="tooltip" data-placement="top" title="Go to first page" href="#" role="button">\n                        <span class="fa fa-home fa-lg"/>\n                    </a>\n                    <% if(admin_user === true) { %>\n                        <button data-toggle="tooltip" data-placement="top" title="Create new library" id="create_new_library_btn" class="mr-1 btn btn-secondary" type="button">\n                            <span class="fa fa-plus" /> Library\n                        </button>\n                    <% } %>\n                    <div class="d-flex align-items-center mr-1" />\n                        <form class="form-inline mr-1">\n                            <input type="text" id="library-filter" class="form-control library-search-input mr-1" placeholder="Search" size="15">\n                            <% if(admin_user === true) { %>\n                                <div class="form-check mr-1">\n                                    <input class="form-check-input" id="include_deleted_chk" type="checkbox"/>\n                                    <label class="form-check-label" for="include_deleted_chk">include deleted</label>\n                                </div>\n                                <div class="form-check mr-1">\n                                    <input class="form-check-input" id="exclude_restricted_chk" type="checkbox"/>\n                                    <label class="form-check-label" for="exclude_restricted_chk">exclude restricted</label>\n                                </div>\n                            <% } %>\n                        </form>\n                    </div>\n                    <div id="libraries_element" />\n                    <div class="d-flex justify-content-center align-items-center library-paginator mt-2 mb-2">\n                        <ul class="pagination paginator mr-1" />\n                        <input style="width: initial;" min="0" max="999" class="page_size form-control" type="number" value="<%- library_page_size %>" />\n                        <span class="text-muted ml-1 paginator-text" />\n                    </div>\n                </div>\n            </div>')},templatePaginator:function(){return l.a.template('\n                        <% if ( ( show_page - 1 ) > 0 ) { %>\n                            <% if ( ( show_page - 1 ) > page_count ) { %> \x3c!-- we are on higher page than total page count --\x3e\n                               <li class="page-item">\n                                    <a class="page-link" href="#page/1">\n                                        <span class="fa fa-angle-double-left"></span>\n                                    </a>\n                                </li>\n                                <li class="page-item disabled">\n                                    <a class="page-link" href="#page/<% print( show_page ) %>">\n                                        <% print( show_page - 1 ) %>\n                                    </a>\n                                </li>\n                            <% } else { %>\n                                <li class="page-item">\n                                    <a class="page-link" href="#page/1">\n                                        <span class="fa fa-angle-double-left"></span>\n                                    </a>\n                                </li>\n                                <li class="page-item">\n                                    <a class="page-link" href="#page/<% print( show_page - 1 ) %>">\n                                        <% print( show_page - 1 ) %>\n                                    </a>\n                                </li>\n                            <% } %>\n                        <% } else { %> \x3c!-- we are on the first page --\x3e\n                           <li class="page-item disabled">\n                                <a class="page-link" href="#page/1">\n                                    <span class="fa fa-angle-double-left"></span>\n                                </a>\n                            </li>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( show_page ) %>">\n                                    <% print( show_page - 1 ) %>\n                                </a>\n                            </li>\n                        <% } %>\n                            <li class="page-item active">\n                                <a class="page-link" href="#page/<% print( show_page ) %>">\n                                    <% print( show_page ) %>\n                                </a>\n                            </li>\n                        <% if ( ( show_page ) < page_count ) { %>\n                            <li class="page-item">\n                                <a class="page-link" href="#page/<% print( show_page + 1 ) %>">\n                                    <% print( show_page + 1 ) %>\n                                </a>\n                            </li>\n                            <li class="page-item">\n                                <a class="page-link" href="#page/<% print( page_count ) %>">\n                                    <span class="fa fa-angle-double-right"></span>\n                                </a>\n                            </li>\n                        <% } else { %>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( show_page  ) %>">\n                                    <% print( show_page + 1 ) %>\n                                </a>\n                            </li>\n                            <li class="page-item disabled">\n                                <a class="page-link" href="#page/<% print( page_count ) %>">\n                                    <span class="fa fa-angle-double-right"></span>\n                                </a>\n                            </li>\n                        <% } %>\n                ')},templatePaginatorText:function(){return l.a.template("per page, <%- total_libraries_count %> total")}})},Ie=n(41),Ee=n(139),He=n(145),$e=n(51),Pe=(n(432),{FolderToolbarView:d.a.View.extend({el:"#center",events:{"click .toolbtn-create-folder":"createFolderInline","click .toolbtn-bulk-import":"importToHistoryModal","click .include-deleted-datasets-chk":"checkIncludeDeleted","click .toolbtn-bulk-delete":"deleteSelectedItems","click .toolbtn-show-locinfo":"showLocInfo","keydown .page_size":"changePageSize","blur .page_size":"changePageSize","click .toolbtn-collection-import":"showCollectionSelect","keyup .folder-search-input":"searchFolder"},defaults:{can_add_library_item:!1,contains_file_or_folder:!1,chain_call_control:{total_number:0,failed_number:0},disabled_jstree_element:"folders"},modal:null,jstree:null,histories:null,select_genome:null,select_extension:null,list_extensions:[],auto:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be. You can also upload compressed files, which will automatically be decompressed."},list_genomes:[],initialize:function(e){this.options=l.a.defaults(e||{},this.defaults),this.fetchExtAndGenomes(),this.render()},render:function(e){this.options=l.a.extend(this.options,e);var t=Object(o.a)(),n=this.templateToolBar(),a={id:this.options.id,is_admin:!1,is_anonym:!0,multiple_add_dataset_options:!1,Galaxy:t,folder_page_size:t.libraries.preferences.get("folder_page_size")};t.user&&(a.is_admin=t.user.isAdmin(),a.is_anonym=t.user.isAnonymous(),null===t.config.user_library_import_dir&&!1===t.config.allow_library_path_paste&&null===t.config.library_import_dir||(a.multiple_add_dataset_options=!0)),this.$el.html(n(a))},renderPaginator:function(e){this.options=l.a.extend(this.options,e);var t=Object(o.a)(),n=this.templatePaginator(),a=this.templatePaginatorText();i()("body").find(".folder-paginator > .paginator").html(n({id:this.options.id,show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_items_count:this.options.total_items_count,items_shown:this.options.items_shown,folder_page_size:t.libraries.preferences.get("folder_page_size")})),i()("body").find(".folder-paginator > .paginator-text").html(a({id:this.options.id,show_page:parseInt(this.options.show_page),page_count:parseInt(this.options.page_count),total_items_count:this.options.total_items_count,items_shown:this.options.items_shown,folder_page_size:t.libraries.preferences.get("folder_page_size")}))},configureElements:function(e){this.options=l.a.extend(this.options,e);var t=Object(o.a)();!0===this.options.can_add_library_item?i()(".add-library-items").show():i()(".add-library-items").hide(),!0===this.options.contains_file_or_folder&&t.user?t.user.isAnonymous()?(i()(".dataset-manipulation").show(),i()(".logged-dataset-manipulation").hide()):(i()(".logged-dataset-manipulation").show(),i()(".dataset-manipulation").show()):(i()(".logged-dataset-manipulation").hide(),i()(".dataset-manipulation").hide()),this.$el.find('[data-toggle="tooltip"]').tooltip({trigger:"hover"})},createFolderInline:function(){Object(o.a)().libraries.folderListView.createFolderInline()},importToHistoryModal:function(e){var t=this;e.preventDefault();var n=Object(o.a)(),a=this.findCheckedRows(),i=this.templateImportIntoHistoryModal();0===a.length?oe.info("You must select some datasets first."):this.fetchUserHistories().done((function(){t.modal=n.modal,t.modal.show({closing_events:!0,title:p()("Import into History"),body:i({histories:t.histories.models}),buttons:{Import:function(){t.importAllIntoHistory()},Close:function(){n.modal.hide()}}})})).fail((function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}))},fetchUserHistories:function(){return this.histories=new Me.GalaxyHistories,this.histories.fetch()},importAllIntoHistory:function(){var e=this;this.modal.disableButton("Import");var t=this.modal.$("input[name=history_name]").val();if(""!==t)this.createNewHistory(t).done((function(t){e.processImportToHistory(t.id,t.name)})).fail((function(e,t,n){oe.error("An error occurred.")})).always((function(){e.modal.enableButton("Import")}));else{var n=i()("select[name=import_to_history] option:selected").val(),a=i()("select[name=import_to_history] option:selected").text();this.processImportToHistory(n,a),this.modal.enableButton("Import")}},createNewHistory:function(e){return i.a.post("".concat(Object(u.getAppRoot)(),"api/histories"),{name:e})},processImportToHistory:function(e,t){for(var n=this.findCheckedItems(),a=[],o=n.dataset_ids.length-1;o>=0;o--){var s=n.dataset_ids[o],r=new Me.HistoryItem;r.url="".concat(r.urlRoot+e,"/contents"),r.content=s,r.source="library",a.push(r)}for(var l=n.folder_ids.length-1;l>=0;l--){var c=n.folder_ids[l],d=new Me.HistoryItem;d.url="".concat(d.urlRoot+e,"/contents"),d.content=c,d.source="library_folder",a.push(d)}this.initChainCallControl({length:a.length,action:"to_history",history_name:t}),i.a.getJSON("".concat(Object(u.getAppRoot)(),"history/set_as_current?id=").concat(e)),this.chainCallImportingIntoHistory(a,t)},updateProgress:function(){this.progress+=this.progressStep,i()(".progress-bar-import").width("".concat(Math.round(this.progress),"%"));var e="".concat(Math.round(this.progress),"% Complete");i()(".completion_span").text(e)},download:function(e){var t=this.findCheckedItems(),n="".concat(Object(u.getAppRoot)(),"api/libraries/datasets/download/").concat(e),a={ld_ids:t.dataset_ids,folder_ids:t.folder_ids};this.processDownload(n,a,"get")},processDownload:function(e,t,n){if(e&&t){t="string"==typeof t?t:i.a.param(t);var a="";i.a.each(t.split("&"),(function(){var e=this.split("=");a+='<input type="hidden" name="'.concat(e[0],'" value="').concat(e[1],'" />')})),i()('<form action="'.concat(e,'" method="').concat(n||"post",'">').concat(a,"</form>")).appendTo("body").submit().remove(),oe.info("Your download will begin soon.")}else oe.error("An error occurred.")},addFilesFromHistoryModal:function(){var e=this,t=Object(o.a)();this.histories=new Me.GalaxyHistories,this.histories.fetch().done((function(){e.modal=t.modal;var n=e.templateAddFilesFromHistory();e.modal.show({closing_events:!0,title:p()("Adding datasets from your history"),body:n({histories:e.histories.models}),buttons:{Add:function(){e.addAllDatasetsFromHistory()},Close:function(){t.modal.hide()}},closing_callback:function(){t.libraries.library_router.navigate("folders/".concat(e.id),{trigger:!0})}}),e.fetchAndDisplayHistoryContents(e.histories.models[0].id),i()("#dataset_add_bulk").change((function(t){e.fetchAndDisplayHistoryContents(t.target.value)}))})).fail((function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}))},importFilesFromPathModal:function(){var e=this,t=Object(o.a)();this.modal=t.modal;var n=this.templateImportPathModal();this.modal.show({closing_events:!0,title:p()("Please enter paths to import"),body:n({}),buttons:{Import:function(){e.importFromPathsClicked(e)},Close:function(){t.modal.hide()}},closing_callback:function(){t.libraries.library_router.navigate("folders/".concat(e.id),{trigger:!0})}}),this.renderSelectBoxes()},fetchExtAndGenomes:function(){var e=this;_.a.get({url:"".concat(Object(u.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(t){for(var n in e.list_extensions=[],t)e.list_extensions.push({id:t[n].extension,text:t[n].extension,description:t[n].description,description_url:t[n].description_url});e.list_extensions.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),e.list_extensions.unshift(e.auto)},cache:!0}),_.a.get({url:"".concat(Object(u.getAppRoot)(),"api/genomes"),success:function(t){for(var n in e.list_genomes=[],t)e.list_genomes.push({id:t[n][1],text:t[n][0]});e.list_genomes.sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0}))},cache:!0})},renderSelectBoxes:function(){var e=Object(o.a)();this.select_genome=new xe.a.View({css:"library-genome-select",data:this.list_genomes,container:e.modal.$el.find("#library_genome_select"),value:"?"}),this.select_extension=new xe.a.View({css:"library-extension-select",data:this.list_extensions,container:e.modal.$el.find("#library_extension_select"),value:"auto"})},importFilesFromGalaxyFolderModal:function(e){var t=this,n=this.templateBrowserModal(),a=Object(o.a)();this.modal=a.modal,this.modal.show({closing_events:!0,title:p()("Please select folders or files"),body:n({}),buttons:{Import:function(){t.importFromJstreePath(t,e)},Close:function(){a.modal.hide()}},closing_callback:function(){a.libraries.library_router.navigate("folders/".concat(t.id),{trigger:!0})}}),i()(".libimport-select-all").bind("click",(function(){i()("#jstree_browser").jstree("check_all")})),i()(".libimport-select-none").bind("click",(function(){i()("#jstree_browser").jstree("uncheck_all")})),this.renderSelectBoxes(),e.disabled_jstree_element="folders",this.renderJstree(e),i()("input[type=radio]").change((function(n){"jstree-disable-folders"===n.target.value?(e.disabled_jstree_element="folders",t.renderJstree(e),i()(".jstree-folders-message").hide(),i()(".jstree-preserve-structure").hide(),i()(".jstree-files-message").show()):"jstree-disable-files"===n.target.value&&(i()(".jstree-files-message").hide(),i()(".jstree-folders-message").show(),i()(".jstree-preserve-structure").show(),e.disabled_jstree_element="files",t.renderJstree(e))}))},renderJstree:function(e){this.options=l.a.extend(this.options,e);var t=e.source||"userdir",n=this.options.disabled_jstree_element;this.jstree=new Me.Jstree,this.jstree.url="".concat(this.jstree.urlRoot,"?target=").concat(t,"&format=jstree&disable=").concat(n),this.jstree.fetch({success:function(e,t){i()("#jstree_browser").jstree("destroy"),i()("#jstree_browser").jstree({core:{data:e},plugins:["types","checkbox"],types:{folder:{icon:"jstree-folder"},file:{icon:"jstree-file"}},checkbox:{three_state:!1}})},error:function(e,t){void 0!==t.responseJSON?404001===t.responseJSON.err_code?oe.warning(t.responseJSON.err_msg):oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},importFromPathsClicked:function(){var e=this.modal.$el.find(".preserve-checkbox").is(":checked"),t=this.modal.$el.find(".link-checkbox").is(":checked"),n=this.modal.$el.find(".spacetab-checkbox").is(":checked"),a=this.modal.$el.find(".posix-checkbox").is(":checked"),o=this.modal.$el.find(".tag-files").is(":checked"),s=this.select_extension.value(),r=this.select_genome.value(),l=i()("textarea#import_paths").val(),c=[];if(l){this.modal.disableButton("Import");for(var d=(l=l.split("\n")).length-1;d>=0;d--){var u=l[d].trim();0!==u.length&&c.push(u)}this.initChainCallControl({length:c.length,action:"adding_datasets"}),this.chainCallImportingFolders({paths:c,preserve_dirs:e,link_data:t,space_to_tab:n,to_posix_lines:a,source:"admin_path",file_type:s,tag_using_filenames:o,dbkey:r})}else oe.info("Please enter a path relative to Galaxy root.")},initChainCallControl:function(e){var t,n=Object(o.a)();switch(e.action){case"adding_datasets":t=this.templateAddingDatasetsProgressBar(),this.modal.$el.find(".modal-body").html(t({folder_name:this.options.folder_name}));break;case"deleting_datasets":t=this.templateDeletingItemsProgressBar(),this.modal.$el.find(".modal-body").html(t());break;case"to_history":t=this.templateImportIntoHistoryProgressBar(),this.modal.$el.find(".modal-body").html(t({history_name:e.history_name}));break;default:n.emit.error("Wrong action specified.","datalibs")}this.progress=0,this.progressStep=100/e.length,this.options.chain_call_control.total_number=e.length,this.options.chain_call_control.failed_number=0},importFromJstreePath:function(e,t){var n=i()("#jstree_browser").jstree().get_selected(!0),a=l.a.filter(n,(function(e){return 0==e.state.disabled})),o=this.modal.$el.find(".preserve-checkbox").is(":checked"),s=this.modal.$el.find(".link-checkbox").is(":checked"),r=this.modal.$el.find(".spacetab-checkbox").is(":checked"),c=this.modal.$el.find(".posix-checkbox").is(":checked"),d=this.select_extension.value(),u=this.select_genome.value(),h=this.modal.$el.find(".tag-files").is(":checked"),p=a[0].type,m=[];if(a.length<1)oe.info("Please select some items first.");else{this.modal.disableButton("Import");for(var f=a.length-1;f>=0;f--)void 0!==a[f].li_attr.full_path&&m.push(a[f].li_attr.full_path);if(this.initChainCallControl({length:m.length,action:"adding_datasets"}),"folder"===p){var _="".concat(t.source,"_folder");this.chainCallImportingFolders({paths:m,preserve_dirs:o,link_data:s,space_to_tab:r,to_posix_lines:c,source:_,file_type:d,dbkey:u,tag_using_filenames:h})}else if("file"===p){var g="".concat(t.source,"_file");this.chainCallImportingUserdirFiles({paths:m,file_type:d,dbkey:u,link_data:s,space_to_tab:r,to_posix_lines:c,source:g,tag_using_filenames:h})}}},fetchAndDisplayHistoryContents:function(e){var t=this;new Me.HistoryContents({id:e}).fetch({success:function(n){var a=t.templateHistoryContents();n.length>0?(t.histories.get(e).set({contents:n}),t.modal.$el.find(".library_selected_history_content").html(a({history_contents:n.models.reverse()})),t.modal.$el.find(".history-import-select-all").bind("click",(function(){i()(".library_selected_history_content [type=checkbox]").prop("checked",!0)})),t.modal.$el.find(".history-import-unselect-all").bind("click",(function(){i()(".library_selected_history_content [type=checkbox]").prop("checked",!1)})),t.modal.$el.find(".history-import-toggle-all").bind("click",(function(e){t.selectAll(e)})),t.modal.$el.find(".dataset_row").bind("click",(function(e){t.selectClickedRow(e)}))):t.modal.$el.find(".library_selected_history_content").html("<p>Selected history is empty.</p>")},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},addAllDatasetsFromHistory:function(){var e=this.modal.$el.find(".library_selected_history_content").find(":checked"),t=[],n=[],a=[];if(e.length<1)oe.info("You must select some datasets first.");else{this.modal.disableButton("Add"),e.each((function(){var e=i()(this).closest("tr").data("id");if(e){var a=i()(this).closest("tr").data("name");t.push(e),n.push(a)}}));for(var o=t.length-1;o>=0;o--){var s=t[o],r=new Me.Item;r.url="".concat(Object(u.getAppRoot)(),"api/folders/").concat(this.options.id,"/contents"),"collection"===n[o]?r.set({from_hdca_id:s}):r.set({from_hda_id:s}),a.push(r)}this.initChainCallControl({length:a.length,action:"adding_datasets"}),this.chainCallAddingHdas(a)}},selectAll:function(e){var t=e.target.checked,n=this;i()(":checkbox","#dataset_list tbody").each((function(){this.checked=t;var e=i()(this).closest("tr");t?n.makeDarkRow(e):n.makeWhiteRow(e)}))},selectClickedRow:function(e){var t,n,a="";t=i()(e.target).closest("tr"),"input"===e.target.localName?(a=e.target,n="input"):"td"===e.target.localName&&(a=t.find(":checkbox")[0],n="td"),a.checked?"td"===n?(a.checked="",this.makeWhiteRow(t)):"input"===n&&this.makeDarkRow(t):"td"===n?(a.checked="selected",this.makeDarkRow(t)):"input"===n&&this.makeWhiteRow(t)},makeDarkRow:function(e){e.addClass("table-primary")},makeWhiteRow:function(e){e.removeClass("table-primary")},chainCallImportingIntoHistory:function(e,t){var n=this,a=Object(o.a)(),s=e.pop();if(void 0===s)return 0===this.options.chain_call_control.failed_number?oe.success("Selected datasets imported into history. Click this to start analyzing it.","",{onclick:function(){window.location=Object(u.getAppRoot)()}}):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?oe.error("There was an error and no datasets were imported into history."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&oe.warning("Some of the datasets could not be imported into history. Click this to see what was imported.","",{onclick:function(){window.location=Object(u.getAppRoot)()}}),a.modal.hide(),!0;i.a.when(s.save({content:s.content,source:s.source})).done((function(){n.updateProgress(),n.chainCallImportingIntoHistory(e,t)})).fail((function(){n.options.chain_call_control.failed_number+=1,n.updateProgress(),n.chainCallImportingIntoHistory(e,t)}))},chainCallImportingUserdirFiles:function(e){var t=this,n=Object(o.a)(),a=e.paths.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?(oe.success("Selected files imported into the current folder"),n.modal.hide()):oe.error("An error occurred."),!0;var s="".concat(Object(u.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:e.source,path:a,file_type:e.file_type,link_data:e.link_data,space_to_tab:e.space_to_tab,to_posix_lines:e.to_posix_lines,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};i.a.when(i.a.post(s,r)).done((function(n){t.updateProgress(),t.chainCallImportingUserdirFiles(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,t.updateProgress(),t.chainCallImportingUserdirFiles(e)}))},chainCallImportingFolders:function(e){var t=this,n=Object(o.a)(),a=e.paths.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?(oe.success("Selected folders and their contents imported into the current folder."),n.modal.hide()):oe.error("An error occurred."),!0;var s="".concat(Object(u.getAppRoot)(),"api/libraries/datasets"),r={encoded_folder_id:this.id,source:e.source,path:a,preserve_dirs:e.preserve_dirs,link_data:e.link_data,to_posix_lines:e.to_posix_lines,space_to_tab:e.space_to_tab,file_type:e.file_type,dbkey:e.dbkey,tag_using_filenames:e.tag_using_filenames};i.a.when(i.a.post(s,r)).done((function(n){t.updateProgress(),t.chainCallImportingFolders(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,t.updateProgress(),t.chainCallImportingFolders(e)}))},chainCallAddingHdas:function(e){var t=this,n=Object(o.a)();this.added_hdas=new Me.Folder;var a=e.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?oe.success("Selected datasets from history added to the folder"):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?oe.error("There was an error and no datasets were added to the folder."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&oe.warning("Some of the datasets could not be added to the folder"),n.modal.hide(),this.added_hdas;i.a.when(a.save({from_hda_id:a.get("from_hda_id")})).done((function(a){n.libraries.folderListView.collection.add(a),t.updateProgress(),t.chainCallAddingHdas(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,t.updateProgress(),t.chainCallAddingHdas(e)}))},chainCallDeletingItems:function(e){var t=this,n=Object(o.a)();this.deleted_items=new Me.Folder;var a=e.pop();if(void 0===a)return 0===this.options.chain_call_control.failed_number?oe.success("Selected items were deleted."):this.options.chain_call_control.failed_number===this.options.chain_call_control.total_number?oe.error("There was an error and no items were deleted. Please make sure you have sufficient permissions."):this.options.chain_call_control.failed_number<this.options.chain_call_control.total_number&&oe.warning("Some of the items could not be deleted. Please make sure you have sufficient permissions."),n.modal.hide(),this.deleted_items;a.destroy().done((function(i){if(n.libraries.folderListView.collection.remove(a.id),t.updateProgress(),n.libraries.folderListView.options.include_deleted){var o=null;"folder"===i.type||"LibraryFolder"===i.model_class?o=new Me.FolderAsModel(i):"file"===i.type||"LibraryDataset"===i.model_class?o=new Me.Item(i):(n.emit.error("Unknown library item type found.","datalibs"),n.emit.error(i.type||i.model_class,"datalibs")),n.libraries.folderListView.collection.add(o)}t.chainCallDeletingItems(e)})).fail((function(){t.options.chain_call_control.failed_number+=1,t.updateProgress(),t.chainCallDeletingItems(e)}))},checkIncludeDeleted:function(e){var t=Object(o.a)();e.target.checked?t.libraries.folderListView.fetchFolder({include_deleted:!0}):t.libraries.folderListView.fetchFolder({include_deleted:!1})},deleteSelectedItems:function(){var e=Object(o.a)(),t=[],n=[],a=this.findCheckedRows();if(0===a.length)oe.info("You must select at least one item for deletion.");else{var s=this.templateDeletingItemsProgressBar();this.modal=e.modal,this.modal.show({closing_events:!0,title:p()("Deleting selected items"),body:s({}),buttons:{Close:function(){e.modal.hide()}}}),this.options.chain_call_control.total_number=0,this.options.chain_call_control.failed_number=0,a.each((function(){var e=i()(this).closest("tr").data("id").toString();void 0!==e&&("F"==e.substring(0,1)?n.push(e):t.push(e))}));var r=t.length+n.length;this.progressStep=100/r,this.progress=0;for(var l=[],c=t.length-1;c>=0;c--){var d=new Me.Item({id:t[c]});l.push(d)}for(var u=n.length-1;u>=0;u--){var h=new Me.FolderAsModel({id:n[u]});l.push(h)}this.options.chain_call_control.total_number=r,this.chainCallDeletingItems(l)}},showLocInfo:function(){var e=this,t=Object(o.a)(),n=null;null!==t.libraries.libraryListView?(n=t.libraries.libraryListView.collection.get(this.options.parent_library_id),this.showLocInfoModal(n)):(n=new Me.Library({id:this.options.parent_library_id})).fetch({success:function(){e.showLocInfoModal(n)},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},showLocInfoModal:function(e){var t=Object(o.a)(),n=this.templateLocInfoInModal();this.modal=t.modal,this.modal.show({closing_events:!0,title:p()("Location Details"),body:n({library:e,options:this.options}),buttons:{Close:function(){t.modal.hide()}}})},showImportModal:function(e){var t=Object(o.a)();switch(e.source){case"history":this.addFilesFromHistoryModal();break;case"importdir":this.importFilesFromGalaxyFolderModal({source:"importdir"});break;case"path":this.importFilesFromPathModal();break;case"userdir":this.importFilesFromGalaxyFolderModal({source:"userdir"});break;default:t.libraries.library_router.back(),oe.error("Invalid import source.")}},changePageSize:function(e){if("focusout"===e.type||"keydown"===e.type&&13===e.keyCode){e.preventDefault();var t=Object(o.a)();t.libraries.preferences.set({folder_page_size:parseInt(e.target.value)}),t.libraries.folderListView.render({id:this.options.id,show_page:1})}},findCheckedRows:function(){return i()("#folder_list_body").find(":checked")},findCheckedItems:function(){var e=[],t=[];return this.findCheckedRows().each((function(){var n=i()(this).closest("tr").data("id").toString();"F"==n.substring(0,1)?e.push(n):t.push(n)})),{folder_ids:e,dataset_ids:t}},showCollectionSelect:function(e){var t=this;e.preventDefault();var n=Object(o.a)(),a=this.findCheckedItems(),i=this.templateCollectionSelectModal();this.fetchUserHistories().done((function(){t.modal=n.modal,t.modal.show({closing_events:!0,title:"Create History Collection from Datasets",body:i({selected_datasets:a.dataset_ids.length,histories:t.histories.models}),buttons:{Continue:function(){t.showCollectionBuilder(a.dataset_ids)},Close:function(){n.modal.hide()}}})})).fail((function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}))},showCollectionBuilder:function(e){var t=this,n=Object(o.a)(),a=[],i=this.modal.$('input[type="radio"]:checked').val();if("selection"===i)for(var s=e.length-1;s>=0;s--){var r={},l=n.libraries.folderListView.folder_container.get("folder").get(e[s]);r.id=l.get("ldda_id"),r.name=l.get("name"),r.deleted=l.get("deleted"),r.state=l.get("state"),a.push(r)}else if("folder"===i)for(var c=n.libraries.folderListView.folder_container.get("folder").where({type:"file"}),u=(a=new d.a.Collection(c).toJSON()).length-1;u>=0;u--)a[u].id=a[u].ldda_id;var h=this.modal.$("input[name=history_name]").val();if(""!==h)this.createNewHistory(h).done((function(e){oe.success("History created"),t.collectionImport(a,e.id,e.name)})).fail((function(e,t,n){oe.error("An error occurred.")}));else{this.select_collection_history=this.modal.$el.find("#library-collection-history-select");var p=this.select_collection_history.val(),m=this.select_collection_history.find("option:selected").text();this.collectionImport(a,p,m)}},collectionImport:function(e,t,n){var a,i,o=this,s="Creating Collection in ".concat(n);if(this.collectionType=this.modal.$el.find("#library-collection-type-select").val(),"list"===this.collectionType)a=Ie.a.ListCollectionCreator,i=function(e,n,a){return e=e.map((function(e){return{id:e.id,name:e.name,src:"ldda"}})),o.createHDCA(e,o.collectionType,n,a,t)},Ie.a.collectionCreatorModal(e,{creationFn:i,title:s,defaultHideSourceItems:!0},a);else if("paired"===this.collectionType)a=Ee.a.PairCollectionCreator,i=function(e,n,a){return e=[{name:"forward",src:"ldda",id:e[0].id},{name:"reverse",src:"ldda",id:e[1].id}],o.createHDCA(e,o.collectionType,n,a,t)},Ie.a.collectionCreatorModal(e,{creationFn:i,title:s,defaultHideSourceItems:!0},a);else if("list:paired"===this.collectionType){var r=e.map((function(e){return{id:e.id,name:e.name,src:"ldda"}}));He.a.pairedCollectionCreatorModal(r,{historyId:t,title:s,defaultHideSourceItems:!0})}else if("rules"===this.collectionType){Ie.a.ruleBasedCollectionCreatorModal(e,"library_datasets","collections",{creationFn:function(e,n,a,i){return o.createHDCA(e,n,a,i,t)},defaultHideSourceItems:!0})}},createHDCA:function(e,t,n,a,i,o){return new $e.a.HistoryDatasetCollection({history_content_type:"dataset_collection",collection_type:t,history_id:i,name:n,hide_source_items:a||!1,element_identifiers:e}).save(o)},searchFolder:function(e){var t=Object(o.a)(),n=i()(".folder-search-input").val();this.options.search_term=n,t.libraries.folderListView.searchFolder(n)},templateToolBar:function(){return l.a.template('<div class="library_style_container">\n                <div class="d-flex align-items-center mb-2">\n                    <a class="mr-1 btn btn-secondary" href="list" data-toggle="tooltip" title="Go to first page">\n                        <span class="fa fa-home"/>\n                    </a>\n                    <div>\n                        <form class="form-inline">\n                            <input type="text" id="folder-filter" class="form-control folder-search-input mr-1" placeholder="Search" size="15">\n                            <button style="display:none;" title="Create new folder"\n                                class="btn btn-secondary toolbtn-create-folder add-library-items add-library-items-folder mr-1"\n                                type="button">\n                                <span class="fa fa-plus"></span> Folder\n                            </button>\n                            <% if(multiple_add_dataset_options) { %>\n                                <div title="Add datasets to current folder"\n                                    class="dropdown add-library-items add-library-items-datasets mr-1" style="display:none;">\n                                    <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                                        <span class="fa fa-plus"></span> Datasets <span class="caret"/>\n                                    </button>\n                                <div class="dropdown-menu">\n                                    <a class="dropdown-item" href="#folders/<%= id %>/import/history"> from History</a>\n                                    <% if(Galaxy.config.user_library_import_dir !== null) { %>\n                                        <a class="dropdown-item" href="#folders/<%= id %>/import/userdir">\n                                            from User Directory\n                                        </a>\n                                    <% } %>\n                                    <% if(Galaxy.config.library_import_dir !== null || Galaxy.config.allow_library_path_paste) { %>\n                                        <h5 class="dropdown-header">Admins only</h5>\n                                        <% if(Galaxy.config.library_import_dir !== null) { %>\n                                            <a class="dropdown-item" href="#folders/<%= id %>/import/importdir">\n                                                from Import Directory\n                                            </a>\n                                        <% } %>\n                                        <% if(Galaxy.config.allow_library_path_paste) { %>\n                                            <a class="dropdown-item" href="#folders/<%= id %>/import/path">\n                                                from Path\n                                            </a>\n                                        <% } %>\n                                    <% } %>\n                                </div>\n                            </div>\n                            <% } else { %>\n                                <a title="Add Datasets to Current Folder" style="display:none;"\n                                    class="btn btn-secondary add-library-items add-library-items-datasets mr-1"\n                                    href="#folders/<%= id %>/import/history" role="button">\n                                    <span class="fa fa-plus"></span> Datasets\n                                </a>\n                            <% } %>\n                            <div class="dropdown mr-1">\n                                <button type="button" class="primary-button dropdown-toggle add-to-history"\n                                    data-toggle="dropdown">\n                                    <span class="fa fa-book"></span> Export to History <span class="caret"></span>\n                                </button>\n                                <div class="dropdown-menu" role="menu">\n                                    <a href="javascript:void(0)" role="button" class="toolbtn-bulk-import add-to-history-datasets dropdown-item">\n                                        as Datasets\n                                    </a>\n                                    <a href="javascript:void(0)" role="button" class="toolbtn-collection-import add-to-history-collection dropdown-item">\n                                        as a Collection\n                                    </a>\n                                </div>\n                            </div>\n                            <div title="Download items as archive"\n                                class="dropdown dataset-manipulation mr-1" style="display:none; ">\n                                <button type="button" class="primary-button dropdown-toggle" data-toggle="dropdown">\n                                    <span class="fa fa-save"></span> Download <span class="caret"></span>\n                                </button>\n                                <div class="dropdown-menu" role="menu">\n                                    <a class="dropdown-item" href="#/folders/<%= id %>/download/tgz">.tar.gz</a>\n                                    <a class="dropdown-item" href="#/folders/<%= id %>/download/tbz">.tar.bz</a>\n                                    <a class="dropdown-item" href="#/folders/<%= id %>/download/zip">.zip</a>\n                                </div>\n                            </div>\n                            <button data-toggle="tooltip" title="Mark items deleted"\n                                class="primary-button toolbtn-bulk-delete logged-dataset-manipulation mr-1"\n                                style="display:none;" type="button">\n                                <span class="fa fa-trash"></span> Delete\n                            </button>\n                            <span class="mr-1" data-toggle="tooltip" title="Show location details">\n                                <button data-id="<%- id %>" class="primary-button toolbtn-show-locinfo" type="button">\n                                    <span class="fa fa-info-circle"></span>&nbsp;Details\n                                </button>\n                            </span>\n                            <div class="form-check logged-dataset-manipulation mr-1" style="display:none;">\n                                <input class="form-check-input include-deleted-datasets-chk"\n                                    id="include_deleted_datasets_chk" type="checkbox" />\n                                <label class="form-check-label" for="include_deleted_datasets_chk">\n                                    include deleted\n                                </label>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n                <div id="folder_items_element" />\n\n                <div class="d-flex justify-content-center align-items-center folder-paginator mt-2 mb-2">\n                    <ul class="pagination paginator mr-1" />\n                    <input style="width: initial;" min="0" max="999" class="page_size form-control" type="number" value="<%- folder_page_size %>" />\n                    <span class="text-muted ml-1 paginator-text" />\n                </div>\n            </div>')},templateLocInfoInModal:function(){return l.a.template('<div>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Library</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- library.get("name") %></td>\n                        </tr>\n                        <% if(library.get("description") !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- library.get("description") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("synopsis") !== "") { %>\n                            <tr>\n                                <td>synopsis</td>\n                                <td><%- library.get("synopsis") %></td>\n                            </tr>\n                        <% } %>\n                        <% if(library.get("create_time_pretty") !== "") { %>\n                            <tr>\n                                <td>created</td>\n                                <td>\n                                    <span title="<%- library.get("create_time") %>">\n                                        <%- library.get("create_time_pretty") %>\n                                    </span>\n                                </td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- library.get("id") %></td>\n                        </tr>\n                    </tbody>\n                </table>\n                <table class="grid table table-sm">\n                    <thead>\n                        <th style="width: 25%;">Folder</th>\n                        <th></th>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>name</td>\n                            <td><%- options.folder_name %></td>\n                        </tr>\n                        <% if(options.folder_description !== "") { %>\n                            <tr>\n                                <td>description</td>\n                                <td><%- options.folder_description %></td>\n                            </tr>\n                        <% } %>\n                        <tr>\n                            <td>id</td>\n                            <td><%- options.id %></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>')},templateImportIntoHistoryModal:function(){return l.a.template('<div>\n                <div class="library-modal-item">\n                    Select history:\n                    <select name="import_to_history" style="width:50%; margin-bottom: 1em; " autofocus>\n                        <% _.each(histories, function(history) { %>\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library-modal-item">\n                    or create new:\n                    <input type="text" name="history_name" value=""\n                        placeholder="name of the new history" style="width:50%;" />\n                </div>\n            </div>')},templateImportIntoHistoryProgressBar:function(){return l.a.template('<div class="import_text">\n                Importing selected items to history <b><%= _.escape(history_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateAddingDatasetsProgressBar:function(){return l.a.template('<div class="import_text">\n                Adding selected datasets to library folder <b><%= _.escape(folder_name) %></b>\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateDeletingItemsProgressBar:function(){return l.a.template('<div class="import_text">\n            </div>\n            <div class="progress">\n                <div class="progress-bar progress-bar-import" role="progressbar" aria-valuenow="0" aria-valuemin="0"\n                    aria-valuemax="100" style="width: 00%;">\n                    <span class="completion_span">0% Complete</span>\n                </div>\n            </div>')},templateBrowserModal:function(){return l.a.template('<div id="file_browser_modal">\n                    <div style="margin-bottom:1em;">\n                        <label title="Switch to selecting files" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-folders" checked="checked">\n                            Choose Files\n                        </label>\n                        <label title="Switch to selecting folders" class="radio-inline import-type-switch">\n                            <input type="radio" name="jstree-radio" value="jstree-disable-files">\n                            Choose Folders\n                        </label>\n                    </div>\n                    <div class="alert alert-info jstree-files-message">\n                        All files you select will be imported into the current folder ignoring their folder structure.\n                    </div>\n                    <div class="alert alert-info jstree-folders-message" style="display:none;">\n                        All files within the selected folders and their subfolders will be imported into the current folder.\n                    </div>\n                    <div style="margin-bottom:1em;">\n                        <label class="checkbox-inline jstree-preserve-structure" style="display:none;">\n                            <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                                Preserve directory structure\n                            </label>\n                        <label class="checkbox-inline">\n                            <input class="link-checkbox" type="checkbox" value="link_files">\n                                Link files instead of copying\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                                Convert line endings to POSIX\n                        </label>\n                        <label class="checkbox-inline">\n                            <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                                Convert spaces to tabs\n                        </label>\n                    </div>\n                    <button title="Select all files" type="button" class="button primary-button libimport-select-all">\n                        Select all\n                    </button>\n                    <button title="Select no files" type="button" class="button primary-button libimport-select-none">\n                        Unselect all\n                    </button>\n                    <hr /> \x3c!-- append jstree object here --\x3e\n                    <div id="jstree_browser">\n                    </div>\n                    <hr />\n                    <p>You can set extension type and genome for all imported datasets at once:</p>\n                    <div>\n                        Type: <span id="library_extension_select" class="library-extension-select" />\n                        Genome: <span id="library_genome_select" class="library-genome-select" />\n                    </div>\n                    <br />\n                    <div>\n                        <label class="checkbox-inline tag-files">\n                            Tag datasets based on file names\n                            <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                        </label>\n                    </div>\n                </div>')},templateImportPathModal:function(){return l.a.template('<div id="file_browser_modal">\n                <div class="alert alert-info jstree-folders-message">\n                    All files within the given folders and their subfolders will be imported into the current folder.\n                </div>\n                <div style="margin-bottom: 0.5em;">\n                    <label class="checkbox-inline">\n                        <input class="preserve-checkbox" type="checkbox" value="preserve_directory_structure">\n                        Preserve directory structure\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="link-checkbox" type="checkbox" value="link_files">\n                        Link files instead of copying\n                    </label>\n                    <br>\n                    <label class="checkbox-inline">\n                        <input class="posix-checkbox" type="checkbox" value="to_posix_lines" checked="checked">\n                        Convert line endings to POSIX\n                    </label>\n                    <label class="checkbox-inline">\n                        <input class="spacetab-checkbox" type="checkbox" value="space_to_tab">\n                        Convert spaces to tabs\n                    </label>\n                </div>\n                <textarea id="import_paths" class="form-control" rows="5"\n                    placeholder="Absolute paths (or paths relative to Galaxy root) separated by newline" autofocus>\n                </textarea>\n                <hr />\n                <p>You can set extension type and genome for all imported datasets at once:</p>\n                <div>\n                    Type: <span id="library_extension_select" class="library-extension-select"></span>\n                    Genome: <span id="library_genome_select" class="library-genome-select"></span>\n                </div>\n                <div>\n                    <label class="checkbox-inline tag-files">\n                        Tag datasets based on file names\n                        <input class="tag-files" type="checkbox" value="tag_using_filenames">\n                    </label>\n                </div>\n            </div>')},templateAddFilesFromHistory:function(){return l.a.template('<div id="add_files_modal">\n                <div class="form-group">\n                    <label>1. Select history:</label>\n                    <select id="dataset_add_bulk" name="dataset_add_bulk" class="form-control">\n                        <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                            <option value="<%= _.escape(history.get("id")) %>">\n                                <%= _.escape(history.get("name")) %>\n                            </option>\n                        <% }); %>\n                    </select>\n                </div>\n                <div class="library_selected_history_content">\n                </div>\n            </div>')},templateHistoryContents:function(){return l.a.template('<div class="form-group">\n                <label>2. Choose the datasets to import:</label>\n                <div class="library_style_container" style="width: 100%;" id="dataset_list">\n                    <table class="grid table table-hover table-sm">\n                        <thead>\n                            <tr>\n                                <th style="width: 30px;" class="mid" title="Check to select all datasets">\n                                    <input class="history-import-toggle-all" style="margin: 0;" type="checkbox" />\n                                </th>\n                                <th style="width: 30px;"></th>\n                                <th>Name</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <% _.each(history_contents, function(history_item) { %>\n                                <% if (history_item.get("deleted") != true ) { %>\n                                    <% var item_name = history_item.get("name") %>\n                                    <% if (history_item.get("type") === "collection") { %>\n                                        <% var collection_type = history_item.get("collection_type") %>\n                                        <% if (collection_type === "list") { %>\n                                            <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                                data-name="<%= _.escape(history_item.get("type")) %>">\n                                                <td><input style="margin: 0;" type="checkbox"></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection)\n                                                </td>\n                                            </tr>\n                                        <% } else { %>\n                                            <tr class="dataset_row" title="You can convert this collection into a collection of type list using the Collection Tools">\n                                                <td><input style="margin: 0;" type="checkbox" onclick="return false;" disabled="disabled" /></td>\n                                                <td><%= _.escape(history_item.get("hid")) %></td>\n                                                <td>\n                                                    <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                                    (Dataset Collection of type <%= _.escape(collection_type) %> not supported.)\n                                                </td>\n                                            </tr>\n                                        <% } %>\n                                    <% } else if (history_item.get("visible") === true && history_item.get("state") === "ok") { %>\n                                        <tr class="dataset_row" data-id="<%= _.escape(history_item.get("id")) %>"\n                                            data-name="<%= _.escape(history_item.get("type")) %>">\n                                            <td><input style="margin: 0;" type="checkbox"></td>\n                                            <td><%= _.escape(history_item.get("hid")) %></td>\n                                            <td>\n                                                <%= item_name.length > 75 ? _.escape("...".concat(item_name.substr(-75))) : _.escape(item_name) %>\n                                            </td>\n                                        </tr>\n                                    <% } %>\n                                <% } %>\n                            <% }); %>\n                        </tbody>\n                    </table>\n                </div>\n            </div>')},templatePaginator:function(){return l.a.template('\n                <% if ( ( show_page - 1 ) > 0 ) { %>\n                    <% if ( ( show_page - 1 ) > page_count ) { %> \x3c!-- we are on higher page than total page count --\x3e\n                        <li class="page-item">\n                            <a class="page-link" href="#folders/<%= id %>/page/1">\n                                <span class="fa fa-angle-double-left"></span>\n                            </a>\n                        </li>\n                        <li class="page-item disabled">\n                            <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page ) %>">\n                                <% print( show_page - 1 ) %>\n                            </a>\n                        </li>\n                    <% } else { %>\n                        <li class="page-item">\n                            <a class="page-link" href="#folders/<%= id %>/page/1">\n                                <span class="fa fa-angle-double-left"></span>\n                            </a>\n                        </li>\n                        <li class="page-item">\n                            <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page - 1 ) %>">\n                                <% print( show_page - 1 ) %>\n                            </a>\n                        </li>\n                    <% } %>\n                <% } else { %> \x3c!-- we are on the first page --\x3e\n                    <li class="page-item disabled">\n                        <a class="page-link" href="#folders/<%= id %>/page/1">\n                            <span class="fa fa-angle-double-left"></span>\n                        </a>\n                    </li>\n                    <li class="page-item disabled">\n                        <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page ) %>">\n                            <% print( show_page - 1 ) %>\n                        </a>\n                    </li>\n                <% } %>\n                <li class="page-item active">\n                    <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page ) %>">\n                        <% print( show_page ) %>\n                    </a>\n                </li>\n                <% if ( ( show_page ) < page_count ) { %>\n                    <li class="page-item">\n                        <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page + 1 ) %>">\n                            <% print( show_page + 1 ) %>\n                        </a>\n                    </li>\n                    <li class="page-item">\n                        <a class="page-link" href="#folders/<%= id %>/page/<% print( page_count ) %>">\n                            <span class="fa fa-angle-double-right"></span>\n                        </a>\n                    </li>\n                <% } else { %>\n                    <li class="page-item disabled">\n                        <a class="page-link" href="#folders/<%= id %>/page/<% print( show_page  ) %>">\n                            <% print( show_page + 1 ) %>\n                        </a>\n                    </li>\n                    <li class="page-item disabled">\n                        <a class="page-link" href="#folders/<%= id %>/page/<% print( page_count ) %>">\n                            <span class="fa fa-angle-double-right"></span>\n                        </a>\n                    </li>\n                <% } %>\n            ')},templatePaginatorText:function(){return l.a.template("per page,\n            <%- total_items_count %> total")},templateCollectionSelectModal:function(){return l.a.template('<div> \x3c!-- elements selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Which datasets?</h4>\n                    <form class="form-inline">\n                        <div class="form-check form-check-inline">\n                            <input class="form-check-input" type="radio" name="radio_elements" id="selection_radio" value="selection"\n                                <% if (!selected_datasets) { %> disabled <% } else { %> checked <% } %> />\n                            <label class="form-check-label" for="selection_radio">\n                                current selection\n                                <% if (selected_datasets) { %>\n                                    (<%- selected_datasets %>)\n                                <% } %>\n                            </label>\n                        </div>\n                        <div class="form-check form-check-inline">\n                            <input class="form-check-input" type="radio" name="radio_elements" id="folder_radio" value="folder" <% if (!selected_datasets) { %> checked <% } %> >\n                            <label class="form-check-label" for="folder_radio">all datasets in current folder</label>\n                        </div>\n                    </form>\n                </div>\n                \x3c!-- type selection --\x3e\n                <div class="library-modal-item">\n                    <h4>Collection type</h4>\n                    <div class="form-group">\n                        <select id="library-collection-type-select" name="library-collection-type-select" class="form-control">\n                            <option value="list">List</option>\n                            <option value="paired">Paired</option>\n                            <option value="list:paired">List of Pairs</option>\n                            <option value="rules">From Rules</option>\n                        </select>\n                    </div>\n                    <h5>Which type to choose?</h5>\n                    <dl class="row">\n                        <dt class="col-sm-3">List</dt>\n                        <dd class="col-sm-9">Generic collection which groups any number of datasets into a set; similar to file system folder.</dd>\n\n                        <dt class="col-sm-3">Paired</dt>\n                        <dd class="col-sm-9">Simple collection containing exactly two sequence datasets; one reverse and the other forward.</dd>\n\n                        <dt class="col-sm-3">List of Pairs</dt>\n                        <dd class="col-sm-9">Advanced collection containing any number of Pairs; imagine as Pair-type collections inside of a List-type collection.</dd>\n\n                        <dt class="col-sm-3">From Rules</dt>\n                        <dd class="col-sm-9">Use Galaxy\'s rule builder to describe collections. This is more of an advanced feature that allows building any number of collections or any type.</dd>\n                    </dl>\n                </div>\n                \x3c!-- history selection/creation --\x3e\n                <div class="library-modal-item">\n                    <h4>Select history</h4>\n                    <div class="form-group">\n                        <select id="library-collection-history-select" name="library-collection-history-select" class="form-control">\n                            <% _.each(histories, function(history) { %> \x3c!-- history select box --\x3e\n                                <option value="<%= _.escape(history.get("id")) %>">\n                                    <%= _.escape(history.get("name")) %>\n                                </option>\n                            <% }); %>\n                        </select>\n                        <label>or create new:</label>\n                        <input class="form-control" type="text" name="history_name" value="" placeholder="name of the new history" />\n                    </div>\n                </div>\n            </div>')}})}),Re={LibraryView:d.a.View.extend({el:"#center",model:null,options:{},events:{"click .toolbtn_save_permissions":"savePermissions"},initialize:function(e){this.options=l.a.extend(this.options,e),this.options.id&&this.fetchLibrary()},fetchLibrary:function(e){this.options=l.a.extend(this.options,e),this.model=new Me.Library({id:this.options.id});var t=this;this.model.fetch({success:function(){t.options.show_permissions&&t.showPermissions()},error:function(e,t){var n=Object(o.a)();void 0!==t.responseJSON?oe.error("".concat(t.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){n.libraries.library_router.back()}}):oe.error("An error occurred. Click this to go back.","",{onclick:function(){n.libraries.library_router.back()}})}})},showPermissions:function(e){this.options=l.a.extend(this.options,e),i()(".tooltip").remove(),void 0!==this.options.fetched_permissions&&(0===this.options.fetched_permissions.access_library_role_list.length?this.model.set({is_unrestricted:!0}):this.model.set({is_unrestricted:!1}));var t=!1,n=Object(o.a)();n.user&&(t=n.user.isAdmin());var a=this.templateLibraryPermissions();this.$el.html(a({library:this.model,is_admin:t}));var s=this;i.a.get("".concat(Object(u.getAppRoot)(),"api/libraries/").concat(s.id,"/permissions?scope=current")).done((function(e){s.prepareSelectBoxes({fetched_permissions:e})})).fail((function(){oe.error("An error occurred while attempting to fetch library permissions.")})),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},_serializeRoles:function(e){for(var t=[],n=0;n<e.length;n++)t.push("".concat(e[n][1],":").concat(e[n][0]));return t},prepareSelectBoxes:function(e){this.options=l.a.extend(this.options,e);var t=this.options.fetched_permissions,n=this._serializeRoles(t.access_library_role_list),a=this._serializeRoles(t.add_library_item_role_list),i=this._serializeRoles(t.manage_library_role_list),o=this._serializeRoles(t.modify_library_role_list);this.accessSelectObject=new xe.a.View(this._createSelectOptions(this,"access_perm",n,!0)),this.addSelectObject=new xe.a.View(this._createSelectOptions(this,"add_perm",a,!1)),this.manageSelectObject=new xe.a.View(this._createSelectOptions(this,"manage_perm",i,!1)),this.modifySelectObject=new xe.a.View(this._createSelectOptions(this,"modify_perm",o,!1))},_createSelectOptions:function(e,t,n,a){return a=!0===a&&a,{minimumInputLength:0,css:t,multiple:!0,placeholder:"Click to select a role",container:e.$el.find("#".concat(t)),ajax:{url:"".concat(Object(u.getAppRoot)(),"api/libraries/").concat(e.id,"/permissions?scope=available&is_library_access=").concat(a),dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:10,page:t}},results:function(e,t){var n=10*t<e.total;return{results:e.roles,more:n}}},formatResult:function(e){return"".concat(e.name," type: ").concat(e.type)},formatSelection:function(e){return e.name},initSelection:function(e,t){var n=[];i()(e.val().split(",")).each((function(){var e=this.split(":");n.push({id:e[0],name:e[1]})})),t(n)},initialData:n,dropdownCssClass:"bigdrop"}},makeDatasetPrivate:function(){var e=this;i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(e.id,"/permissions?action=make_private")).done((function(t){e.model.set({is_unrestricted:!1}),e.showPermissions({fetched_permissions:t}),oe.success("The dataset is now private to you.")})).fail((function(){oe.error("An error occurred while attempting to make dataset private.")}))},removeDatasetRestrictions:function(){var e=this;i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/datasets/").concat(e.id,"/permissions?action=remove_restrictions")).done((function(t){e.model.set({is_unrestricted:!0}),e.showPermissions({fetched_permissions:t}),oe.success("Access to this dataset is now unrestricted.")})).fail((function(){oe.error("An error occurred while attempting to make dataset unrestricted.")}))},_extractIds:function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n].id);return t},savePermissions:function(e){var t=this,n=this._extractIds(this.accessSelectObject.$el.select2("data")),a=this._extractIds(this.addSelectObject.$el.select2("data")),o=this._extractIds(this.manageSelectObject.$el.select2("data")),s=this._extractIds(this.modifySelectObject.$el.select2("data"));i.a.post("".concat(Object(u.getAppRoot)(),"api/libraries/").concat(t.id,"/permissions?action=set_permissions"),{"access_ids[]":n,"add_ids[]":a,"manage_ids[]":o,"modify_ids[]":s}).done((function(e){t.showPermissions({fetched_permissions:e}),oe.success("Permissions saved.")})).fail((function(){oe.error("An error occurred while attempting to set library permissions.")}))},templateLibraryPermissions:function(){return l.a.template('<div class="library_style_container">\n                <div>\n                    <a href="#">\n                        <button data-toggle="tooltip" data-placement="top"\n                            title="Go back to the list of Libraries" class="btn btn-secondary primary-button" type="button">\n                            <span class="fa fa-list"></span>&nbsp;Libraries\n                        </button>\n                    </a>\n                </div>\n                <h1>\n                    Library: <%= _.escape(library.get("name")) %>\n                </h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any library\n                        on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types.\n                        However please read carefully the implications of such actions.\n                    <% }%>\n                </div>\n                <div class="dataset_table">\n                    <h2>Library permissions</h2>\n                    <h4>Roles that can access the library</h4>\n                    <div id="access_perm" class="access_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can access this library.\n                        If there are no access roles set on the library it is considered <strong>unrestricted</strong>.\n                    </div>\n                    <h4>Roles that can manage permissions on this library</h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions on this library\n                        (includes giving access).\n                    </div>\n                    <h4>Roles that can add items to this library</h4>\n                    <div id="add_perm" class="add_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can add items to this library (folders and datasets).\n                    </div>\n                    <h4>Roles that can modify this library</h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify this library (name, synopsis, etc.).\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top"\n                        title="Save modifications made on this page"\n                        class="btn btn-secondary toolbtn_save_permissions primary-button" type="button">\n                        <span class="fa fa-floppy-o"></span>&nbsp;Save\n                    </button>\n                </div>\n            </div>')}})},Ne={FolderView:d.a.View.extend({el:"#center",model:null,options:{},events:{"click .toolbtn_save_permissions":"savePermissions"},initialize:function(e){this.options=l.a.extend(this.options,e),this.options.id&&this.fetchFolder()},fetchFolder:function(e){var t=Object(o.a)();this.options=l.a.extend(this.options,e),this.model=new Me.FolderAsModel({id:this.options.id});var n=this;this.model.fetch({success:function(){n.options.show_permissions&&n.showPermissions()},error:function(e,n){void 0!==n.responseJSON?oe.error("".concat(n.responseJSON.err_msg," Click this to go back."),"",{onclick:function(){t.libraries.library_router.back()}}):oe.error("An error occurred. Click this to go back.","",{onclick:function(){t.libraries.library_router.back()}})}})},showPermissions:function(e){var t=Object(o.a)();this.options=l.a.extend(this.options,e),i()(".tooltip").remove();var n=!1;t.user&&(n=t.user.isAdmin());var a=this.templateFolderPermissions();this.$el.html(a({folder:this.model,is_admin:n}));var s=this;i.a.get("".concat(Object(u.getAppRoot)(),"api/folders/").concat(s.id,"/permissions?scope=current")).done((function(e){s.prepareSelectBoxes({fetched_permissions:e})})).fail((function(){oe.error("An error occurred while attempting to fetch folder permissions.")})),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},_serializeRoles:function(e){for(var t=[],n=0;n<e.length;n++)t.push("".concat(e[n][1],":").concat(e[n][0]));return t},prepareSelectBoxes:function(e){this.options=l.a.extend(this.options,e);var t=this.options.fetched_permissions,n=this._serializeRoles(t.add_library_item_role_list),a=this._serializeRoles(t.manage_folder_role_list),i=this._serializeRoles(t.modify_folder_role_list);this.addSelectObject=new xe.a.View(this._createSelectOptions(this,"add_perm",n,!1)),this.manageSelectObject=new xe.a.View(this._createSelectOptions(this,"manage_perm",a,!1)),this.modifySelectObject=new xe.a.View(this._createSelectOptions(this,"modify_perm",i,!1))},_createSelectOptions:function(e,t,n){return{minimumInputLength:0,css:t,multiple:!0,placeholder:"Click to select a role",container:e.$el.find("#".concat(t)),ajax:{url:"".concat(Object(u.getAppRoot)(),"api/folders/").concat(e.id,"/permissions?scope=available"),dataType:"json",quietMillis:100,data:function(e,t){return{q:e,page_limit:10,page:t}},results:function(e,t){var n=10*t<e.total;return{results:e.roles,more:n}}},formatResult:function(e){return"".concat(e.name," type: ").concat(e.type)},formatSelection:function(e){return e.name},initSelection:function(e,t){var n=[];i()(e.val().split(",")).each((function(){var e=this.split(":");n.push({id:e[0],name:e[1]})})),t(n)},initialData:n.join(","),dropdownCssClass:"bigdrop"}},_extractIds:function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n].id);return t},savePermissions:function(e){var t=this,n=this._extractIds(this.addSelectObject.$el.select2("data")),a=this._extractIds(this.manageSelectObject.$el.select2("data")),o=this._extractIds(this.modifySelectObject.$el.select2("data"));i.a.post("".concat(Object(u.getAppRoot)(),"api/folders/").concat(t.id,"/permissions?action=set_permissions"),{"add_ids[]":n,"manage_ids[]":a,"modify_ids[]":o}).done((function(e){t.showPermissions({fetched_permissions:e}),oe.success("Permissions saved.")})).fail((function(){oe.error("An error occurred while attempting to set folder permissions.")}))},templateFolderPermissions:function(){return l.a.template('<div class="library_style_container">\n                <div>\n                    <a href="#/folders/<%= folder.get("parent_id") %>">\n                        <button data-toggle="tooltip" data-placement="top" title="Go back to the parent folder"\n                            class="btn btn-secondary primary-button" type="button">\n                            <span class="fa fa-caret-left fa-lg"/>\n                            &nbsp;Parent folder\n                        </button>\n                    </a>\n                </div>\n                <h1>\n                    Folder: <%= _.escape(folder.get("name")) %>\n                </h1>\n                <div class="alert alert-warning">\n                    <% if (is_admin) { %>\n                        You are logged in as an <strong>administrator</strong> therefore you can manage any\n                        folder on this Galaxy instance. Please make sure you understand the consequences.\n                    <% } else { %>\n                        You can assign any number of roles to any of the following permission types.\n                        However please read carefully the implications of such actions.\n                    <% }%>\n                </div>\n                <div class="dataset_table">\n                    <h2>Folder permissions</h2>\n                    <h4>\n                        Roles that can manage permissions on this folder\n                    </h4>\n                    <div id="manage_perm" class="manage_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can manage permissions on this folder.\n                    </div>\n                    <h4>\n                        Roles that can add items to this folder\n                    </h4>\n                    <div id="add_perm" class="add_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can add items to this folder (folders and datasets).\n                    </div>\n                    <h4>\n                        Roles that can modify this folder\n                    </h4>\n                    <div id="modify_perm" class="modify_perm roles-selection"></div>\n                    <div class="alert alert-info roles-selection">\n                        User with <strong>any</strong> of these roles can modify this folder (name, etc.).\n                    </div>\n                    <button data-toggle="tooltip" data-placement="top" title="Save modifications"\n                        class="btn btn-secondary toolbtn_save_permissions primary-button" type="button">\n                        <span class="fa fa-floppy-o"/>\n                        &nbsp;Save\n                    </button>\n                </div>\n            </div>')}})},ze=d.a.Router.extend({initialize:function(){this.routesHit=0,d.a.history.on("route",(function(){this.routesHit++}),this),this.bind("route",this.trackPageview)},routes:{"":"libraries","page/:show_page":"libraries_page","library/:library_id/permissions":"library_permissions","folders/:folder_id/permissions":"folder_permissions","folders/:id":"folder_content","folders/:id/page/:show_page":"folder_page","folders/:folder_id/datasets/:dataset_id":"dataset_detail","folders/:folder_id/datasets/:dataset_id/permissions":"dataset_permissions","folders/:folder_id/datasets/:dataset_id/versions/:ldda_id":"dataset_version","folders/:folder_id/download/:format":"download","folders/:folder_id/import/:source":"import_datasets"},back:function(){this.routesHit>1?window.history.back():this.navigate("#",{trigger:!0,replace:!0})},trackPageview:function(){var e=d.a.history.getFragment();/^\//.test(e)||""==e||(e="/".concat(e)),"undefined"!=typeof ga&&ga("send","pageview","".concat(Object(u.getAppRoot)(),"library/list").concat(e))}}),Fe=se.a.SessionStorageModel.extend({defaults:{with_deleted:!1,without_restricted:!1,sort_order:"asc",sort_by:"name",library_page_size:20,folder_page_size:15}}),Ve={GalaxyApp:d.a.View.extend({libraryToolbarView:null,libraryListView:null,library_router:null,libraryView:null,folderToolbarView:null,folderListView:null,datasetView:null,initialize:function(){var e,t,n,a,s,r,l=Object(o.a)();l.config.ga_code&&(e=window,t=document,n="script",a="ga",e.GoogleAnalyticsObject=a,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(n),r=t.getElementsByTagName(n)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(s,r),ga("create",l.config.ga_code,"auto"),ga("send","pageview")),l.libraries=this,this.preferences=new Fe({id:"global-lib-prefs"}),this.library_router=new ze,this.library_router.on("route:libraries",(function(){l.libraries.libraryToolbarView&&l.libraries.libraryToolbarView.$el.unbind("click"),l.libraries.libraryToolbarView=new Ae.LibraryToolbarView,l.libraries.libraryListView=new Oe.LibraryListView})),this.library_router.on("route:libraries_page",(function(e){null===l.libraries.libraryToolbarView?(l.libraries.libraryToolbarView=new Ae.LibraryToolbarView,l.libraries.libraryListView=new Oe.LibraryListView({show_page:e})):l.libraries.libraryListView.render({show_page:e})})),this.library_router.on("route:folder_content",(function(e){l.libraries.folderToolbarView&&l.libraries.folderToolbarView.$el.unbind("click"),l.libraries.folderToolbarView=new Pe.FolderToolbarView({id:e}),l.libraries.folderListView=new De.FolderListView({id:e})})),this.library_router.on("route:folder_page",(function(e,t){null===l.libraries.folderToolbarView?(l.libraries.folderToolbarView=new Pe.FolderToolbarView({id:e}),l.libraries.folderListView=new De.FolderListView({id:e,show_page:t})):l.libraries.folderListView.render({id:e,show_page:parseInt(t)})})),this.library_router.on("route:download",(function(e,t){0===i()("#folder_list_body").find(":checked").length?(oe.info("You must select at least one dataset to download"),l.libraries.library_router.navigate("folders/".concat(e),{trigger:!0,replace:!0})):(l.libraries.folderToolbarView.download(t),l.libraries.library_router.navigate("folders/".concat(e),{trigger:!1,replace:!0}))})),this.library_router.on("route:dataset_detail",(function(e,t){l.libraries.datasetView&&l.libraries.datasetView.$el.unbind("click"),l.libraries.datasetView=new Te.LibraryDatasetView({id:t,show_version:!1,show_permissions:!1})})),this.library_router.on("route:dataset_version",(function(e,t,n){l.libraries.datasetView&&l.libraries.datasetView.$el.unbind("click"),l.libraries.datasetView=new Te.LibraryDatasetView({id:t,ldda_id:n,show_version:!0})})),this.library_router.on("route:dataset_permissions",(function(e,t){l.libraries.datasetView&&l.libraries.datasetView.$el.unbind("click"),l.libraries.datasetView=new Te.LibraryDatasetView({id:t,show_permissions:!0})})),this.library_router.on("route:library_permissions",(function(e){l.libraries.libraryView&&l.libraries.libraryView.$el.unbind("click"),l.libraries.libraryView=new Re.LibraryView({id:e,show_permissions:!0})})),this.library_router.on("route:folder_permissions",(function(e){l.libraries.folderView&&l.libraries.folderView.$el.unbind("click"),l.libraries.folderView=new Ne.FolderView({id:e,show_permissions:!0})})),this.library_router.on("route:import_datasets",(function(e,t){l.libraries.folderToolbarView&&l.libraries.folderListView?l.libraries.folderToolbarView.showImportModal({source:t}):(l.libraries.folderToolbarView=new Pe.FolderToolbarView({id:e}),l.libraries.folderListView=new De.FolderListView({id:e}),l.libraries.folderToolbarView.showImportModal({source:t}))})),d.a.history.start({pushState:!1})}})},Ue=n(10),We=n.n(Ue),Be=n(50);var qe=n(26),Je=function(e,t){A(p()("Saving page"),p()("progress")),We.a.post("".concat(Object(u.getAppRoot)(),"api/pages/").concat(e,"/revisions"),{content:t}).finally(O).catch((function(e){return oe.error("Failed to save page: "+Object(qe.a)(e))}))},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);return new Proxy(t,{get:function(e,t){if(t in e)return e[t];console.warn("Requested missing config prop",t)}})}();var Ke=window.WYMeditor,Qe=null,Xe={ITEM_HISTORY:"item_history",ITEM_DATASET:"item_dataset",ITEM_WORKFLOW:"item_workflow",ITEM_PAGE:"item_page",ITEM_VISUALIZATION:"item_visualization",DIALOG_HISTORY_LINK:"link_history",DIALOG_DATASET_LINK:"link_dataset",DIALOG_WORKFLOW_LINK:"link_workflow",DIALOG_PAGE_LINK:"link_page",DIALOG_VISUALIZATION_LINK:"link_visualization",DIALOG_EMBED_HISTORY:"embed_history",DIALOG_EMBED_DATASET:"embed_dataset",DIALOG_EMBED_WORKFLOW:"embed_workflow",DIALOG_EMBED_PAGE:"embed_page",DIALOG_EMBED_VISUALIZATION:"embed_visualization"};function Ze(e){var t,n,a,i;switch(e){case Xe.ITEM_HISTORY:t="History",n="Histories",a="history",i="History";break;case Xe.ITEM_DATASET:t="Dataset",n="Datasets",a="dataset",i="HistoryDatasetAssociation";break;case Xe.ITEM_WORKFLOW:t="Workflow",n="Workflows",a="workflow",i="StoredWorkflow";break;case Xe.ITEM_PAGE:t="Page",n="Pages",a="page",i="Page";break;case Xe.ITEM_VISUALIZATION:t="Visualization",n="Visualizations",a="visualization",i="Visualization"}var o="list_".concat(n.toLowerCase(),"_for_selection");return{singular:t,plural:n,controller:a,iclass:i,list_ajax_url:Ge.list_objects_url.replace("LIST_ACTION",o)}}function et(e,t,n){var a=Ge.set_accessible_url.replace("ITEM_CONTROLLER",e);i.a.ajax({type:"POST",url:a,data:{id:t,accessible:"True"},error:function(){alert("Making ".concat(n," accessible failed"))}})}function tt(e,t){var n=Object(u.getAppRoot)();!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(Ge,e)}({page_id:e,page_list_url:"".concat(n,"pages/list"),list_objects_url:"".concat(n,"page/LIST_ACTION"),set_accessible_url:"".concat(n,"ITEM_CONTROLLER/set_accessible_async"),get_name_and_link_url:"".concat(n,"ITEM_CONTROLLER/get_name_and_link_async?id="),editor_base_path:"".concat(n,"static/wymeditor/"),iframe_base_path:"".concat(n,"static/wymeditor/iframe/galaxy/")}),i()(document).ajaxError((function(e,t){return A("Server error",t.responseText||t.statusText||"Could not connect to server",{"Ignore error":O}),!1})),i()("[name=page_content]").val(t).wymeditor({skin:"galaxy",basePath:Ge.editor_base_path,iframeBasePath:Ge.iframe_base_path,boxHtml:"<table class='wym_box' width='100%' height='100%'><tr><td><div class='wym_area_top'>".concat(Ke.TOOLS,"</div></td></tr><tr height='100%'><td><div class='wym_area_main' style='height: 100%;'>").concat(Ke.IFRAME).concat(Ke.STATUS,"</div></div></td></tr></table>"),toolsItems:[{name:"Bold",title:"Strong",css:"wym_tools_strong"},{name:"Italic",title:"Emphasis",css:"wym_tools_emphasis"},{name:"Superscript",title:p()("Superscript"),css:"wym_tools_superscript"},{name:"Subscript",title:p()("Subscript"),css:"wym_tools_subscript"},{name:"InsertOrderedList",title:"Ordered_List",css:"wym_tools_ordered_list"},{name:"InsertUnorderedList",title:"Unordered_List",css:"wym_tools_unordered_list"},{name:"Indent",title:"Indent",css:"wym_tools_indent"},{name:"Outdent",title:"Outdent",css:"wym_tools_outdent"},{name:"Undo",title:"Undo",css:"wym_tools_undo"},{name:"Redo",title:"Redo",css:"wym_tools_redo"},{name:"CreateLink",title:"Link",css:"wym_tools_link"},{name:"Unlink",title:"Unlink",css:"wym_tools_unlink"},{name:"InsertImage",title:"Image",css:"wym_tools_image"},{name:"InsertTable",title:"Table",css:"wym_tools_table"}]}),Qe=i.a.wymeditors(0);var a=i()("<div class='galaxy-page-editor-button'><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Paragraph type</a></div>");i()(".wym_area_top").append(a);var o={};i.a.each(Qe._options.containersItems,(function(e,t){var n=t.name;o[t.title.replace("_"," ")]=function(){Qe.container(n)}})),Object(q.b)(a,o);var s=i()("<div><a id='insert-galaxy-link' class='action-button popup' href='javascript:void(0)' role='button'>Insert Link to Galaxy Object</a></div>").addClass("galaxy-page-editor-button");i()(".wym_area_top").append(s),Object(q.b)(s,{"Insert History Link":function(){Qe.dialog(Xe.DIALOG_HISTORY_LINK)},"Insert Dataset Link":function(){Qe.dialog(Xe.DIALOG_DATASET_LINK)},"Insert Workflow Link":function(){Qe.dialog(Xe.DIALOG_WORKFLOW_LINK)},"Insert Page Link":function(){Qe.dialog(Xe.DIALOG_PAGE_LINK)},"Insert Visualization Link":function(){Qe.dialog(Xe.DIALOG_VISUALIZATION_LINK)}});var r=i()("<div><a id='embed-galaxy-object' class='action-button popup' href='javascript:void(0)' role=''button'>Embed Galaxy Object</a></div>").addClass("galaxy-page-editor-button");i()(".wym_area_top").append(r),Object(q.b)(r,{"Embed History":function(){Qe.dialog(Xe.DIALOG_EMBED_HISTORY)},"Embed Dataset":function(){Qe.dialog(Xe.DIALOG_EMBED_DATASET)},"Embed Workflow":function(){Qe.dialog(Xe.DIALOG_EMBED_WORKFLOW)},"Embed Visualization":function(){Qe.dialog(Xe.DIALOG_EMBED_VISUALIZATION)}})}Ke.editor.prototype.dialog=function(e,t,n){var a,s,r=this,l=r.uniqueStamp(),c=r.selected();e==Ke.DIALOG_LINK&&(c&&(i()(r._options.hrefSelector).val(i()(c).attr(Ke.HREF)),i()(r._options.srcSelector).val(i()(c).attr(Ke.SRC)),i()(r._options.titleSelector).val(i()(c).attr(Ke.TITLE)),i()(r._options.altSelector).val(i()(c).attr(Ke.ALT))),c&&(null==(a=i()(c).attr("href"))&&(a=""),null==(s=i()(c).attr("title"))&&(s="")),A("Create Link","<div><div><label id='link_attribute_label'>URL <span style='float: right; font-size: 90%'><a href='javascript:void(0)' role=\"button\" id='set_link_id'>Create in-page anchor</a></span></label><br><input type='text' class='wym_href' value='".concat(a,"' size='40' /></div><div><label>Title</label><br><input type='text' class='wym_title' value='").concat(s,"' size='40' /></div><div>"),{"Make link":function(){var e=i()(r._options.hrefSelector).val()||"",t=i()(".wym_id").val()||"",n=i()(r._options.titleSelector).val()||"";if(e||t){r._exec(Ke.CREATE_LINK,l);var a=i()("a[href=".concat(l,"]"),r._doc.body);a.attr(Ke.HREF,e).attr(Ke.TITLE,n).attr("id",t),0===a.text().indexOf("wym-")&&a.text(n)}O()},Cancel:function(){O()}},{},(function(){i()("#set_link_id").click((function(){i()("#link_attribute_label").text("ID/Name");var e=i()(".wym_href");e.addClass("wym_id").removeClass("wym_href"),c&&e.val(i()(c).attr("id")),i()(this).remove()}))})));if(e==Ke.DIALOG_IMAGE)return r._selected_image&&(i()("".concat(r._options.dialogImageSelector," ").concat(r._options.srcSelector)).val(i()(r._selected_image).attr(Ke.SRC)),i()("".concat(r._options.dialogImageSelector," ").concat(r._options.titleSelector)).val(i()(r._selected_image).attr(Ke.TITLE)),i()("".concat(r._options.dialogImageSelector," ").concat(r._options.altSelector)).val(i()(r._selected_image).attr(Ke.ALT))),void A("Image","<div class='row'><label>URL</label><br><input type='text' class='wym_src' value='' size='40' /></div><div class='row'><label>Alt text</label><br><input type='text' class='wym_alt' value='' size='40' /></div><div class='row'><label>Title</label><br><input type='text' class='wym_title' value='' size='40' /></div>",{Insert:function(){var e=i()(r._options.srcSelector).val();e.length>0&&(r._exec(Ke.INSERT_IMAGE,l),i()("img[src$=".concat(l,"]"),r._doc.body).attr(Ke.SRC,e).attr(Ke.TITLE,i()(r._options.titleSelector).val()).attr(Ke.ALT,i()(r._options.altSelector).val())),O()},Cancel:function(){O()}});if(e==Ke.DIALOG_TABLE&&A("Table","<div class='row'><label>Caption</label><br><input type='text' class='wym_caption' value='' size='40' /></div><div class='row'><label>Summary</label><br><input type='text' class='wym_summary' value='' size='40' /></div><div class='row'><label>Number Of Rows<br></label><input type='text' class='wym_rows' value='3' size='3' /></div><div class='row'><label>Number Of Cols<br></label><input type='text' class='wym_cols' value='2' size='3' /></div>",{Insert:function(){var e=i()(r._options.rowsSelector).val(),t=i()(r._options.colsSelector).val();if(e>0&&t>0){var n=r._doc.createElement(Ke.TABLE),a=null,o=i()(r._options.captionSelector).val();n.createCaption().innerHTML=o;for(var s=0;s<e;s++){a=n.insertRow(s);for(var l=0;l<t;l++)a.insertCell(l)}i()(n).attr("summary",i()(r._options.summarySelector).val());var c=i()(r.findUp(r.container(),Ke.MAIN_CONTAINERS)).get(0);c&&c.parentNode?i()(c).after(n):i()(r._doc.body).append(n)}O()},Cancel:function(){O()}}),e==Xe.DIALOG_HISTORY_LINK||e==Xe.DIALOG_DATASET_LINK||e==Xe.DIALOG_WORKFLOW_LINK||e==Xe.DIALOG_PAGE_LINK||e==Xe.DIALOG_VISUALIZATION_LINK){var d;switch(e){case Xe.DIALOG_HISTORY_LINK:d=Ze(Xe.ITEM_HISTORY);break;case Xe.DIALOG_DATASET_LINK:d=Ze(Xe.ITEM_DATASET);break;case Xe.DIALOG_WORKFLOW_LINK:d=Ze(Xe.ITEM_WORKFLOW);break;case Xe.DIALOG_PAGE_LINK:d=Ze(Xe.ITEM_PAGE);break;case Xe.DIALOG_VISUALIZATION_LINK:d=Ze(Xe.ITEM_VISUALIZATION)}var u=new Be.a({url_base:d.list_ajax_url,embedded:!0}),h=Object(o.a)();h.modal.show({title:"Insert Link to ".concat(d.singular),body:i()("<div/>").append(u.$el).append(i()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(d.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,buttons:{Insert:function(){var e=!1;null!=i()("#make-importable:checked").val()&&(e=!0),u.$("input[name=id]:checked").each((function(){var t=i()(this).val();e&&et(d.controller,t,d.singular);var n=(Ge.get_name_and_link_url+t).replace("ITEM_CONTROLLER",d.controller);i.a.getJSON(n,(function(e){r._exec(Ke.CREATE_LINK,l);var n=i()("a[href=".concat(l,"]"),r._doc.body).text();""==n||n==l?r.insert("<a href='".concat(e.link,"'>").concat(d.singular," '").concat(e.name,"'</a>")):i()("a[href=".concat(l,"]"),r._doc.body).attr(Ke.HREF,e.link).attr(Ke.TITLE,d.singular+t)}))})),h.modal.hide()},Close:function(){h.modal.hide()}}})}if(e==Xe.DIALOG_EMBED_HISTORY||e==Xe.DIALOG_EMBED_DATASET||e==Xe.DIALOG_EMBED_WORKFLOW||e==Xe.DIALOG_EMBED_PAGE||e==Xe.DIALOG_EMBED_VISUALIZATION){var p;switch(e){case Xe.DIALOG_EMBED_HISTORY:p=Ze(Xe.ITEM_HISTORY);break;case Xe.DIALOG_EMBED_DATASET:p=Ze(Xe.ITEM_DATASET);break;case Xe.DIALOG_EMBED_WORKFLOW:p=Ze(Xe.ITEM_WORKFLOW);break;case Xe.DIALOG_EMBED_PAGE:p=Ze(Xe.ITEM_PAGE);break;case Xe.DIALOG_EMBED_VISUALIZATION:p=Ze(Xe.ITEM_VISUALIZATION)}var m=new Be.a({url_base:p.list_ajax_url,embedded:!0}),f=Object(o.a)();f.modal.show({title:"Insert Link to ".concat(p.singular),body:i()("<div/>").append(m.$el).append(i()("<div/>").append('<input id="make-importable" type="checkbox" checked/>').append("Make the selected ".concat(p.plural.toLowerCase()," accessible so that they can viewed by everyone."))),closing_events:!0,extra_class:"pages-embed",buttons:{Embed:function(){var e=!1;null!=i()("#make-importable:checked").val()&&(e=!0),m.$("input[name=id]:checked").each((function(){var t=i()(this),n=t.val(),a=t.closest("td").next("td").find("label").text();e&&et(p.controller,n,p.singular);var o=["<div id='","".concat(p.iclass,"-").concat(n),"' class='embedded-item ",p.singular.toLowerCase()," placeholder'>","<p class='title'>","Embedded Galaxy ",p.singular," '",a,"'","</p>","<p class='content'>","[Do not edit this block; Galaxy will fill it in with the annotated ",p.singular.toLowerCase()," when it is displayed.]","</p>","</div>"].join("");r.insert(o)})),f.modal.hide()},Close:function(){f.modal.hide()}}})}};var nt={props:{pageId:{required:!0,type:String},content:{type:String}},created:function(){var e=this;this.$nextTick((function(){tt(e.pageId,e.content)}))},methods:{saveContent:function(){Je(this.pageId,Qe.xhtml())}}},at=(n(239),n(6)),it=Object(at.a)(nt,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel-body"},[t("textarea",{attrs:{name:"page_content",val:this.content}})])}),[],!1,null,null,null).exports,ot=n(115),st='\n<p>\n    For an overview of standard Markdown visit the\n    <a href="https://commonmark.org/help/tutorial/">commonmark.org tutorial</a>.\n</p>\n\n<p>\n    The Galaxy extensions to Markdown are represented as code blocks, these blocks start\n    with the line <tt>```galaxy</tt> and end with the line <tt>```</tt> and have a\n    command with arguments that reference parts of the workflow in the middle.\n</p>',rt="\n<dt><tt>history_dataset_display</tt></dt>\n<dd>Embed a dataset description in the resulting document.</dd>\n<dt><tt>history_dataset_collection_display</tt></dt>\n<dd>Embed a dataset collection description in the resulting document.</dd>\n<dt><tt>history_dataset_as_image</tt></dt>\n<dd>Embed a dataset as an image in the resulting document - the dataset should be an image datatype.</dd>\n<dt><tt>history_dataset_peek</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'peek' into the resulting document - this is datatype dependent metadata but usually this is a few lines from the start of a file.</dd>\n<dt><tt>history_dataset_info</tt></dt>\n<dd>Embed Galaxy's metadata attribute 'info' into the resulting document - this is datatype dependent metadata but usually this is the program output that generated the dataset.</dd>\n</dl>\n</div>\n",lt="\n<div>\n<h3>Overview</h3>\n\n<p>\n    This document Markdown document will be used to generate your Galaxy Page.\n    This document should be Markdown with embedded command for extracting and\n    displaying Galaxy objects and their metadata. \n</p>\n\n".concat(st,"\n\n<h3>History Contents Commands</h3>\n\n<p>\n    These commands reference a dataset. For instance, the following examples would display\n    the dataset collection corresponding to a Galaxy dataset collection ID and display a\n    single dataset as an image corresponding to a Galaxy dataset ID.\n</p>\n\n<pre>\n```galaxy\nhistory_dataset_collection_display(history_dataset_collection_id=33b43b4e7093c91f)\n```\n</pre>\n\n<pre>\n```galaxy\nhistory_dataset_as_image(history_dataset_id=33b43b4e7093c91f)\n```\n</pre>\n\n\n").concat(rt,"\n\n<h3>Workflow Commands</h3>\n\n<p>\n    These commands reference a workflow (currently only one). The following example would\n    display a representation of the workflow in the resulting Galaxy Page:\n</p>\n\n<pre>\n```galaxy\nworkflow_display(workflow_id=33b43b4e7093c91f>)\n```\n</pre>\n\n<dl>\n<dt><tt>workflow_display</tt></dt>\n<dd>Embed a description of the workflow itself in the resulting document.</dd>\n</dl>\n\n<h3>Job Commands</h3>\n\n<p>\n    These commands reference a Galaxy job.For instance, the\n    following example would show the job parameters the job ID 33b43b4e7093c91f:\n</p>\n\n<pre>\n```galaxy\njob_parameters(job_id=33b43b4e7093c91f)\n```\n</pre>\n\n<dt><tt>tool_stderr</tt></dt>\n<dd>Embed the tool standard error stream for this job in the resulting document.</dd>\n<dt><tt>tool_stdout</tt></dt>\n<dd>Embed the tool standard output stream for this job in the resulting document.</dd>\n<dt><tt>job_metrics</tt></dt>\n<dd>Embed the job metrics for this job in the resulting document (if Galaxy is configured and you have permission).</dd>\n<dt><tt>job_parameters</tt></dt>\n<dd>Embed the tool parameters for this job in the resulting document.</dd>\n");function ct(){A("Pages Markdown Help",i()(lt),{Ok:O})}var dt={components:{MarkdownEditor:ot.a},data:function(){return{content:"",showMarkdownHelp:ct}},props:{pageId:{required:!0,type:String},initialContent:{type:String}},methods:{onUpdate:function(e){this.content=e},saveContent:function(){Je(this.pageId,this.content)}}},ut=(n(241),Object(at.a)(dt,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel-body editor-body"},[t("markdown-editor",{ref:"markdownEditor",attrs:{"initial-markdown":this.initialContent,onupdate:this.onUpdate,toolbar:!0,"show-markdown-help":this.showMarkdownHelp}})],1)}),[],!1,null,"5f6f508e",null).exports),ht={props:{pageId:{required:!0,type:String},publicUrl:{required:!0,type:String},content:{type:String},contentFormat:{type:String,default:"html"},title:{type:String}},computed:{},methods:{saveContent:function(){this.$refs.contentEditor.saveContent()},viewContent:function(){!0===window.confirm("This will leave the current page editor, if you have unsaved changes they will be lost. Do you wish to continue?")&&(window.location="".concat(Object(u.getAppRoot)()).concat(this.publicUrl))}},components:{PageEditorHtml:it,PageEditorMarkdown:ut}},pt=Object(at.a)(ht,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[e._v("\n            Page Editor: "+e._s(e.title)+"\n            "),n("a",{staticClass:"btn btn-secondary fa fa-save float-right",attrs:{id:"save-button",href:"javascript:void(0)"},on:{click:e.saveContent}}),e._v(" "),n("a",{staticClass:"btn btn-secondary fa fa-eye float-right",attrs:{id:"view-button",href:"javascript:void(0)"},on:{click:e.viewContent}})])]),e._v(" "),"html"==e.contentFormat?n("page-editor-html",{ref:"contentEditor",attrs:{"page-id":e.pageId,content:e.content}}):e._e(),e._v(" "),"markdown"==e.contentFormat?n("page-editor-markdown",{ref:"contentEditor",attrs:{"page-id":e.pageId,"initial-content":e.content}}):e._e()],1)}),[],!1,null,null,null).exports,mt=n(11);function ft(){var e=i()("#page-editor-content").attr("page_id");We.a.get("".concat(Object(u.getAppRoot)(),"api/pages/").concat(e)).then((function(t){var n=t.data;new(mt.default.extend(pt))({propsData:{publicUrl:"u/".concat(n.username,"/p/").concat(n.slug),pageId:e,content:n.content,contentFormat:n.content_format,title:n.title},el:"#page-editor-content"})})).catch((function(e){var t=e.response;void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}))}var _t=n(54),gt=n(85),vt=n(99),yt=n(70),bt=n(69),wt=n(48),kt=n(67),Mt=(n(154),d.a.View.extend(se.a.LoggableMixin).extend({_logNamespace:"history",tagName:"div",className:"history-column flex-column flex-row-container",id:function(){return this.model?"history-column-".concat(this.model.get("id")):""},initialize:function(e){e=e||{},this.purgeAllowed=!l.a.isUndefined(e.purgeAllowed)&&e.purgeAllowed,this.panel=e.panel||this.createPanel(e),this.setUpListeners()},createPanel:function(e){return new vt.a.HistoryViewEdit(l.a.defaults(e,{model:this.model,purgeAllowed:this.purgeAllowed,dragItems:!0,$scrollContainer:function(){return this.$el}}))},setUpListeners:function(){var e=this;this.once("rendered",(function(){e.trigger("rendered:initial",e)})),this.setUpPanelListeners()},setUpPanelListeners:function(){var e=this;this.listenTo(this.panel,{rendered:function(){e.trigger("rendered",e)},"view:expanded view:rendered":function(e){e.$(".rerun-btn").off()}},this)},inView:function(e,t){var n=this.$el.offset().left;return!(n+this.$el.width()<e)&&n<=t},$panel:function(){return this.$(".history-panel")},render:function(e){e=void 0!==e?e:"fast";var t=this.model?this.model.toJSON():{};return this.$el.html(this.template(t)),this.renderPanel(e),this.panel.$el.css("display","flex"),this.setUpBehaviors(),this},setUpBehaviors:function(){},template:function(e){return e=l.a.extend(e||{},{isCurrentHistory:this.currentHistory}),i()('\n            <div class="panel-controls mb-1">\n                <div class="flex-row flex-column-container no-gutters justify-content-between">\n                    '.concat(this.controlsLeftTemplate({history:e,view:this}),"\n                    ").concat(this.controlsRightTemplate({history:e,view:this}),'\n                </div>\n            </div>\n            <div class="inner flex-row flex-column-container">\n                <div id="history-').concat(e.id,'" class="history-column history-panel flex-column"></div>\n            </div>'))},renderPanel:function(e){return e=void 0!==e?e:"fast",this.panel.setElement(this.$panel()).render(e),this.currentHistory&&this.panel.$list().before(this.panel._renderDropTargetHelp()),this},events:{"click .switch-to.btn":function(){this.model.setAsCurrent()},"click .delete-history":function(){var e=this;this.model._delete().done((function(t){e.render()}))},"click .undelete-history":function(){var e=this;this.model.undelete().done((function(t){e.render()}))},"click .purge-history":function(){var e=this;window.confirm(p()("This will permanently remove the data. Are you sure?"))&&this.model.purge().done((function(t){e.render()}))},"click .copy-history":"copy"},copy:function(){Object(bt.a)(this.model)},controlsLeftTemplate:l.a.template('\n        <div class="text-left col-8">\n            <% if( data.history.isCurrentHistory ){ %>\n                <strong class="current-label">\n                    '.concat(p()("Current History"),'\n                </strong>\n            <% } else { %>\n                <button class="switch-to btn btn-secondary">\n                    ').concat(p()("Switch to"),"\n                </button>\n            <% } %>\n        </div>"),{variable:"data"}),controlsRightTemplate:l.a.template('<div class="text-right col-4">\n            <% if( !data.history.purged ){ %>\n                <div class="panel-menu btn-group">\n                    <button \n                    history-dropdown-btn="<%= data.history.id %>" \n                    type="button"\n                    class="btn btn-secondary dropdown-toggle"\n                    data-toggle="dropdown">\n                        <span class="caret"></span>\n                    </button>\n                    <div history-dropdown-menu="<%= data.history.id %>"  class="dropdown-menu" role="menu">\n                        <% if( !data.history.deleted ){ %>\n                            <a class="dropdown-item copy-history" href="javascript:void(0);">\n                                '.concat(p()("Copy"),'\n                            </a>\n                            <a class="dropdown-item delete-history" href="javascript:void(0);">\n                                ').concat(p()("Delete"),'\n                            </a>\n                        <% } else /* if is deleted */ { %>\n                            <a class="dropdown-item undelete-history" href="javascript:void(0);">\n                                ').concat(p()("Undelete"),'\n                            </a>\n                        <% } %>\n                        <% if( data.view.purgeAllowed ){ %>\n                            <a class="dropdown-item purge-history" href="javascript:void(0);">\n                                ').concat(p()("Purge"),"\n                            </a>\n                        <% } %>\n                    </div>\n                </div>\n            <% } %>\n        </div>"),{variable:"data"}),toString:function(){return"HistoryViewColumn(".concat(this.panel?this.panel:"",")")}})),xt={MultiPanelColumns:d.a.View.extend(se.a.LoggableMixin).extend({_logNamespace:"history",className:"multi-panel-history",initialize:function(e){e=e||{},this.log("".concat(this,".init"),e),this.$el.addClass(this.className),this.options={columnWidth:312,borderWidth:1,columnGap:8,headerHeight:29,footerHeight:0,controlsHeight:20},this.perPage=e.perPage||10,this.hdaQueue=new kt.a.NamedAjaxQueue([],!1),this.collection=null,this.columnMap={},this.columnOptions=e.columnOptions||{},this.historySearch=null,this.datasetSearch=null,this.setCollection(e.histories),this.setUpListeners()},setUpListeners:function(){var e=this;this.on("end-of-scroll",(function(){e.collection.fetchMore()}))},setCollection:function(e){return this.stopListening(this.collection),this.collection=e||new _t.b,this.setUpCollectionListeners(),this.createColumns(),this.hdaQueue.clear(),this.trigger("new-collection",this),this},addModels:function(e,t,n){var a=this;return n=n||{},(e=l.a.isArray(e)?e:[e]).forEach((function(e){a.addColumn(e,!1)})),this},setUpCollectionListeners:function(){this.listenTo(this.collection,{error:this.errorHandler,add:this.addModels,"all-fetched":this._postFetchAll,"new-current":this.addAsCurrentColumn,"set-as-current":this.setCurrentHistory,"change:deleted change:purged":this.handleDeletedHistory,sort:function(){this.renderColumns(0)}})},_postFetchAll:function(e){if(this.$(".histories-loading-indicator").remove(),!this.historySearch){var t=this.$(".outer-middle");t.scrollLeft(t.scrollLeft()+24)}},setCurrentHistory:function(e){this.log("setCurrentHistory:",e);var t=l.a.findWhere(this.columnMap,{currentHistory:!0});t&&(t.currentHistory=!1,t.$el.height(""));var n=this.columnMap[this.collection.currentHistoryId];return n.currentHistory=!0,this.collection.sort(),this._recalcFirstColumnHeight(),n},handleDeletedHistory:function(e){if(e.get("deleted")||e.get("purged")){this.log("handleDeletedHistory",this.collection.includeDeleted,e);var t=this.columnMap[e.id];if(!t)return;t.model.id===this.collection.currentHistoryId||this.collection.includeDeleted||this.removeColumn(t)}},errorHandler:function(e,t,n){if(!t||0!==t.status||0!==t.readyState){if(this.error(e,t,n),l.a.isString(e)&&l.a.isString(t)){var a=e;return wt.a.errorModal(a,t,n)}return t&&502===t.status?wt.a.badGatewayErrorModal():wt.a.ajaxErrorModal(e,t,n)}},_ajaxErrorHandler:function(){wt.a.ajaxErrorModal.apply(null,l.a.toArray(arguments))},create:function(e){return this.collection.create({current:!0})},createColumns:function(e,t){var n=this;t=t||this.options.columnOptions,this.columnMap={},this.collection.each((function(e,a){n.columnMap[e.id]=n.createColumn(e,t)}))},createColumn:function(e,t){var n=Object(o.a)();t=l.a.extend({},t,{model:e,purgeAllowed:n.config.allow_user_dataset_purge});var a=new Mt(t);return e.id===this.collection.currentHistoryId&&(a.currentHistory=!0),this.setUpColumnListeners(a),this.datasetSearch&&(a.panel.searchItems(this.datasetSearch),this.queueHdaFetchDetails(a)),a},addColumn:function(e,t){t=void 0===t||t;var n=this.createColumn(e);return this.columnMap[e.id]=n,t&&this.renderColumns(),n},addAsCurrentColumn:function(e,t,n){var a=this,i=this.addColumn(e,!1);return this.setCurrentHistory(e),i.once("rendered",(function(){a.queueHdaFetch(i)})),i},removeColumn:function(e,t){var n=this;if(t=void 0===t||t,this.log("removeColumn",e),e){var a=this.options.columnWidth+this.options.columnGap;e.$el.fadeOut("fast",(function(){t&&(i()(n).remove(),n.$(".middle").width(n.$(".middle").width()-a),n.checkColumnsInView(),n._recalcFirstColumnHeight()),n.stopListening(e.panel),n.stopListening(e),delete n.columnMap[e.model.id],e.remove()}))}},setUpColumnListeners:function(e){var t=this;this.listenTo(e,{"in-view":this.queueHdaFetch}),this.listenTo(e.panel,{"view:draggable:dragstart":function(e,n,a,i){t._dropData=JSON.parse(e.dataTransfer.getData("text")),t.currentColumnDropTargetOn()},"view:draggable:dragend":function(e,n,a,i){t._dropData=null,t.currentColumnDropTargetOff()},"droptarget:drop":function(e,n,a){var i=t._dropData.filter((function(e){return a.model.contents.isCopyable(e)}));t._dropData=null;var o=new kt.a.NamedAjaxQueue;0!==a.model.contents.currentPage&&o.add({name:"fetch-front-page",fn:function(){return a.model.contents.fetchPage(0)}}),i.reverse().forEach((function(e){o.add({name:"copy-".concat(e.id),fn:function(){return a.model.contents.copy(e)}})})),o.start(),o.done((function(e){a.model.fetch()}))}})},columnMapLength:function(){return Object.keys(this.columnMap).length},sortedFilteredColumns:function(e){return(e=e||this.filters)&&e.length?this.sortedColumns().filter((function(t,n){return t.currentHistory||l.a.every(e.map((function(e){return e.call(t)})))})):this.sortedColumns()},sortedColumns:function(){var e=this;return this.collection.map((function(t,n){return e.columnMap[t.id]}))},render:function(e){return e=void 0!==e?e:this.fxSpeed,this.log("".concat(this,".render")),this.$el.html(this.mainTemplate),this.renderColumns(e),this.setUpBehaviors(),this.trigger("rendered",this),this},renderColumns:function(e){e=l.a.isNumber(e)?e:this.fxSpeed;var t=this.sortedFilteredColumns(),n=this.$(".middle").empty();return this._addColumns(t,e),this.collection.allFetched||n.append(this.loadingIndicatorTemplate),this.trigger("columns-rendered",t,this),(!this.datasetSearch||t.length>1)&&(this.checkColumnsInView(),this._recalcFirstColumnHeight()),t},_addColumns:function(e,t){t=l.a.isNumber(t)?t:this.fxSpeed;var n=this.$(".middle"),a=n.children(".history-column").length;n.width(this._calcMiddleWidth(e.length+a)),e.forEach((function(e,a){e.delegateEvents().render(t).$el.appendTo(n)}))},_calcMiddleWidth:function(e){return e*(this.options.columnWidth+this.options.columnGap)+this.options.columnGap+16},queueHdaFetch:function(e){var t=e.model.contents;if(0===t.length&&e.model.contentsShown()){var n={silent:!0},a=l.a.values(t.storage.allExpanded()).join();a&&(n.details=a),this.hdaQueue.add({name:e.model.id,fn:function(){return t.fetchCurrentPage(n).done((function(){e.panel.renderItems()})).done((function(){yt.a.FETCH_STATE_ON_ADD||t.jobStateSummariesCollection.fetch()}))}}),this.hdaQueue.running||this.hdaQueue.start()}},queueHdaFetchDetails:function(e){var t=e.model.contents;!(0===t.length&&e.model.contentsShown())&&t.haveDetails()||(this.hdaQueue.add({name:e.model.id,fn:function(){return t.progressivelyFetchDetails().done((function(){e.panel._renderEmptyMessage()}))}}),this.hdaQueue.running||this.hdaQueue.start())},renderInfo:function(e){return this.$(".header .header-info").text(e)},events:{"click .done.btn":"close","click .create-new.btn":"create","click #include-deleted":"_clickToggleDeletedHistories","click .order .set-order":"_chooseOrder","click #toggle-deleted":"_clickToggleDeletedDatasets","click #toggle-hidden":"_clickToggleHiddenDatasets"},close:function(e){window.location=Object(u.getAppRoot)()},_clickToggleDeletedHistories:function(e){this.toggleDeletedHistories(i()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedHistories:function(e){window.location="".concat(Object(u.getAppRoot)(),e?"history/view_multiple?include_deleted_histories=True":"history/view_multiple")},_clickToggleDeletedDatasets:function(e){this.toggleDeletedDatasets(i()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleDeletedDatasets:function(e){e=void 0!==e&&e,this.sortedFilteredColumns().forEach((function(t,n){l.a.delay((function(){t.panel.toggleShowDeleted(e,!1)}),200*n)}))},_clickToggleHiddenDatasets:function(e){this.toggleHiddenDatasets(i()(e.currentTarget).is(":checked")),this.toggleOptionsPopover()},toggleHiddenDatasets:function(e){e=void 0!==e&&e,this.sortedFilteredColumns().forEach((function(t,n){l.a.delay((function(){t.panel.toggleShowHidden(e,!1)}),200*n)}))},_chooseOrder:function(e){var t=this,n=this.collection,a=i()(e.currentTarget).data("order");this.$(".current-order").text(this.orderDescriptions[a]),this.toggleOptionsPopover(),n.setOrder(a);var o=n.slice(0,1);n.fetchFirst().done((function(){n.unshift(o,{silent:!0}),t.createColumns(),t.hdaQueue.clear(),t.render()})),this.once("columns-rendered",this._scrollLeft)},_scrollLeft:function(e){e=l.a.isNumber(e)?e:0,this.$(".outer-middle").scrollLeft(e)},setUpBehaviors:function(){var e=this;this._moreOptionsPopover();var t=function(t){var n=e;e.historySearch=t,e.filters=[function(){return this.model.matchesAll(n.historySearch)}],e.renderColumns(0)};this.$("#search-histories").searchInput({name:"search-histories",placeholder:p()("search histories"),onfirstsearch:function(n){e.$("#search-histories").searchInput("toggle-loading"),e.renderInfo(p()("loading all histories for search")),e.collection.fetchAll().done((function(){e.$("#search-histories").searchInput("toggle-loading"),e.renderInfo(""),t(n)}))},onsearch:t,onclear:function(t){e.historySearch=null,e.filters=[],e.renderColumns(0)},advsearchlink:!0}),this.$("#search-datasets").searchInput({name:"search-datasets",placeholder:p()("search all datasets"),onfirstsearch:function(t){e.hdaQueue.clear(),e.$("#search-datasets").searchInput("toggle-loading"),e.datasetSearch=t,e.sortedFilteredColumns().forEach((function(n){n.panel.searchItems(t),e.queueHdaFetchDetails(n)})),e.hdaQueue.progress((function(t){e.renderInfo([p()("searching"),t.curr+1,p()("of"),t.total].join(" "))})),e.hdaQueue.deferred.done((function(){e.renderInfo(""),e.$("#search-datasets").searchInput("toggle-loading")}))},onsearch:function(t){e.datasetSearch=t,e.sortedFilteredColumns().forEach((function(e){e.panel.searchItems(t)}))},onclear:function(t){e.datasetSearch=null,e.sortedFilteredColumns().forEach((function(e){e.panel.clearSearch()}))},advsearchlink:!0}),i()(window).resize((function(){e._recalcFirstColumnHeight()}));var n=l.a.debounce((function(){var t=e._viewport();e.checkColumnsInView(t),e.checkForEndOfScroll(t)}),100);this.$(".middle").parent().scroll(n)},_moreOptionsPopover:function(){return this.$(".open-more-options.btn").popover({container:".header",placement:"bottom",html:!0,content:i()(this.optionsPopoverTemplate(this))})},toggleOptionsPopover:function(e){this.$(".open-more-options.btn").popover("toggle")},_recalcFirstColumnHeight:function(){var e=this.$(".history-column").first(),t=this.$(".middle").height(),n=e.find(".panel-controls").height();e.height(t).find(".inner").height(t-n)},_viewport:function(){var e=this.$(".middle").parent(),t=e.offset().left;return{left:t,right:t+e.width()}},columnsInView:function(e){var t=e||this._viewport();return this.sortedFilteredColumns().filter((function(e){return e.currentHistory||e.inView(t.left,t.right)}))},checkColumnsInView:function(){this.columnsInView().forEach((function(e){e.trigger("in-view",e)}))},checkForEndOfScroll:function(e){e=e||this._viewport();var t=this.$(".middle");t.parent().scrollLeft()+e.right>=t.width()-16&&this.trigger("end-of-scroll")},currentColumnDropTargetOn:function(){var e=this.columnMap[this.collection.currentHistoryId];e&&(e.panel.dataDropped=function(e){},e.panel.dropTargetOn())},currentColumnDropTargetOff:function(){var e=this.columnMap[this.collection.currentHistoryId];e&&(e.panel.dataDropped=vt.a.HistoryViewEdit.prototype.dataDrop,e.panel.dropTarget=!1,e.panel.$(".history-drop-target").remove())},toString:function(){return"MultiPanelColumns(".concat(this.columns?this.columns.length:0,")")},mainTemplate:'\n        <div class="header flex-column-container">\n            <div class="control-column control-column-left flex-column">\n                <div id="search-histories" class="search-control"></div>\n                <div id="search-datasets" class="search-control"></div>\n                <a class="open-more-options btn btn-secondary" tabindex="3">\n                    <span class="fa fa-ellipsis-h"></span>\n                </a>\n            </div>\n            <div class="control-column control-column-center flex-column">\n                <div class="header-info">\n                </div>\n            </div>\n            <div class="control-column control-column-right flex-column">\n                <button class="create-new btn btn-secondary" tabindex="4">\n                    '.concat(p()("Create new"),'\n                </button>\n            </div>\n        </div>\n        <div class="outer-middle flex-row flex-row-container">\n            <div class="middle flex-column-container flex-row"></div>\n        </div>\n        <div class="footer flex-column-container"></div>'),loadingIndicatorTemplate:'\n        <div class="histories-loading-indicator">\n            <span class="fa fa-spin fa-spinner"></span>\n            '.concat(p()("Loading histories")," ...\n        </div>"),orderDescriptions:{update_time:p()("most recent first"),"update_time-asc":p()("least recent first"),name:p()("name, a to z"),"name-dsc":p()("name, z to a"),size:p()("size, large to small"),"size-asc":p()("size, small to large")},optionsPopoverTemplate:l.a.template('<div class="more-options d-flex flex-column">\n            <div class="order btn-group mb-2">\n                <button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown">\n                    '.concat(p()("Order histories by"),'\n                    <span class="current-order"><%- view.orderDescriptions[ view.collection.order ] %></span>\n                    <span class="caret"/>\n                </button>\n                <div class="dropdown-menu" role="menu">\n                    <% _.each( view.orderDescriptions, function( text, order ){ %>\n                        <a href="javascript:void(0);" class="dropdown-item set-order" data-order="<%- order %>">\n                            <%- text %>\n                        </a>\n                    <% }); %>\n                </div>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="include-deleted" type="checkbox" <%= view.collection.includeDeleted? " checked" : "" %>>\n                    ').concat(p()("Include deleted histories"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-deleted" type="checkbox">\n                    ').concat(p()("Include deleted datasets"),'\n                </label>\n            </div>\n            <div class="checkbox">\n                <label>\n                    <input id="toggle-hidden" type="checkbox">\n                    ').concat(p()("Include hidden datasets"),"\n                </label>\n            </div>\n        </div>"),{variable:"view"})})},Lt=n(80),Tt=Lt.a.HistoryView,St={AnnotatedHistoryView:Tt.extend({className:"".concat(Tt.prototype.className," annotated-history-panel"),_buildNewRender:function(){var e=Tt.prototype._buildNewRender.call(this);return this.renderHistoryAnnotation(e),e},renderHistoryAnnotation:function(e){var t=this.model.get("annotation");t&&e.find("> .controls .subtitle").text(t)},renderItems:function(e){e=e||this.$el,Tt.prototype.renderItems.call(this,e);var t=e.find("> .controls");return t.find(".contents-container.headers").remove(),i()('<div class="contents-container headers"/>').append([i()('<div class="history-content header"/>').text(p()("Dataset")),i()('<div class="additional-info header"/>').text(p()("Annotation"))]).appendTo(t),self.views},_renderItemView$el:function(e){return i()('<div class="contents-container"/>').append([e.render(0).$el,i()('<div class="additional-info"/>').text(e.model.get("annotation")||"")])},events:l.a.extend(l.a.clone(Tt.prototype.events),{"click .contents-container":function(e){e.stopPropagation(),i()(e.currentTarget).find(".list-item .title-bar").click()},"click .icon-btn":function(e){e.stopPropagation();var t=i()(e.currentTarget);t.length&&"dropdown"===t.attr("data-toggle")&&t.dropdown("toggle")}}),_clickSectionLink:function(e){var t=i()(e.currentTarget).parent().parent().data("section");this.openSection(t)},toString:function(){return"AnnotatedHistoryView(".concat(this.model?this.model.get("name"):"",")")}})},Dt=n(108),Ct=n(65),jt=n(180),Yt=n(74),Ot=n(111),At=n(87);i.a.ajaxSettings.traditional=!0;var It=i.a,Et=d.a.View.extend({grid:null,initialize:function(e){this.grid=new jt.a,this.dict_format=e.dict_format,this.title=e.title,this.title_id=e.title_id;var t=this;if(window.add_tag_to_grid_filter=function(e,n){var a=e+(void 0!==n&&""!==n?":".concat(n):"");It("#advanced-search").is(":visible")||(It("#standard-search").slideToggle("fast"),It("#advanced-search").slideToggle("fast")),t.add_filter_condition("tags",a)},this.dict_format)if(this.setElement("<div/>"),e.url_base&&!e.items){var n=e.url_data||{};l.a.each(e.filters,(function(e,t){n["f-".concat(t)]=e})),It.ajax({url:"".concat(e.url_base,"?").concat(It.param(n)),success:function(n){n.embedded=e.embedded,n.filters=e.filters||{},t.init_grid(n)}})}else this.init_grid(e);else this.setElement("#grid-container"),this.init_grid(e);e.use_panels&&It("#center").css({padding:"10px",overflow:"auto"})},handle_refresh:function(e){e&&It.inArray("history",e)>-1&&window.top.Galaxy&&window.top.Galaxy.currHistoryPanel&&window.top.Galaxy.currHistoryPanel.loadCurrentHistory()},init_grid:function(e){this.grid.set(e);var t=this.grid.attributes;this.allow_title_display&&t.title&&_.a.setWindowTitle(t.title),this.handle_refresh(t.refresh_frames);var n=this.grid.get("url_base");if(n=n.replace(/^.*\/\/[^\/]+/,""),this.grid.set("url_base",n),this.$el.html(Yt.a.grid(t)),this.$el.find("#grid-table-header").html(Yt.a.header(t)),this.$el.find("#grid-table-body").html(Yt.a.body(t)),this.$el.find("#grid-table-footer").html(Yt.a.footer(t)),t.message){this.$el.find("#grid-message").html(Yt.a.message(t));var a=this;t.use_hide_message&&setTimeout((function(){a.$el.find("#grid-message").html("")}),5e3)}this.init_grid_elements(),this.init_grid_controls(),Object(At.a)()},init_grid_controls:function(){var e=this;this.$el.find(".operation-button").each((function(){It(this).off(),It(this).click((function(){return e.submit_operation(this),!1}))})),this.$el.find("input[type=text]").each((function(){It(this).off(),It(this).click((function(){It(this).select()})).keyup((function(){It(this).css("font-style","normal")}))})),this.$el.find(".sort-link").each((function(){It(this).off(),It(this).click((function(){return e.set_sort_condition(It(this).attr("sort_key")),!1}))})),this.$el.find(".text-filter-form").each((function(){It(this).off(),It(this).submit((function(){var t=It(this).attr("column_key"),n=It("#input-".concat(t,"-filter")),a=n.val();return n.val(""),e.add_filter_condition(t,a),!1}))})),this.$el.find(".text-filter-val > a").each((function(){It(this).off(),It(this).click((function(){return It(this).parent().remove(),e.remove_filter_condition(It(this).attr("filter_key"),It(this).attr("filter_val")),!1}))})),this.$el.find(".categorical-filter > a").each((function(){It(this).off(),It(this).click((function(){return e.set_categorical_filter(It(this).attr("filter_key"),It(this).attr("filter_val")),!1}))})),this.$el.find(".advanced-search-toggle").each((function(){It(this).off(),It(this).click((function(){return e.$el.find("#standard-search").slideToggle("fast"),e.$el.find("#advanced-search").slideToggle("fast"),!1}))})),this.$el.find("#check_all").off(),this.$el.find("#check_all").on("click",(function(){e.check_all_items()}))},init_grid_elements:function(){this.$el.find(".grid").each((function(){var e=It(this).find("input.grid-row-select-checkbox"),t=It(this).find("span.grid-selected-count"),n=function(){t.text(It(e).filter(":checked").length)};It(e).each((function(){It(this).change(n)})),n()})),0!==this.$el.find(".community_rating_star").length&&this.$el.find(".community_rating_star").rating({});var e=this.grid.attributes,t=this;this.$el.find(".page-link > a").each((function(){It(this).click((function(){return t.set_page(It(this).attr("page_num")),!1}))})),this.$el.find(".use-target").each((function(){It(this).click((function(){return t.execute({href:It(this).attr("href"),target:It(this).attr("target")}),!1}))})),0!==e.items.length&&l.a.each(e.items,(function(n,a){var i=t.$("#grid-".concat(n.encode_id,"-popup")).off(),o=new Ot.a(i);l.a.each(e.operations,(function(e){t._add_operation(o,e,n)}))}))},_add_operation:function(e,t,n){var a=this,i=n.operation_config[t.label];i.allowed&&t.allow_popup&&e.addItem({html:t.label,href:i.url_args,target:i.target,confirmation_text:t.confirm,func:function(e){e.preventDefault();var i=It(e.target).html();t.onclick?t.onclick(n.encode_id):a.execute(this.findItemByHtml(i))}})},add_filter_condition:function(e,t){if(""===t)return!1;this.grid.add_filter(e,t,!0);var n=It(Yt.a.filter_element(e,t)),a=this;n.click((function(){It(this).remove(),a.remove_filter_condition(e,t)})),this.$el.find("#".concat(e,"-filtering-criteria")).append(n),this.go_page_one(),this.execute()},remove_filter_condition:function(e,t){this.grid.remove_filter(e,t),this.go_page_one(),this.execute()},set_sort_condition:function(e){var t=this.grid.get("sort_key"),n=e;-1!==t.indexOf(e)&&"-"!==t.substring(0,1)&&(n="-".concat(e)),this.$el.find(".sort-arrow").remove();var a="-"==n.substring(0,1)?"&uarr;":"&darr;",i=It("<span>".concat(a,"</span>")).addClass("sort-arrow");this.$el.find("#".concat(e,"-header")).append(i),this.grid.set("sort_key",n),this.go_page_one(),this.execute()},set_categorical_filter:function(e,t){var n=this.grid.get("categorical_filters")[e],a=this.grid.get("filters")[e],i=this;this.$el.find(".".concat(e,"-filter")).each((function(){var o=It.trim(It(this).text()),s=n[o][e];if(s==t)It(this).empty(),It(this).addClass("current-filter"),It(this).append(o);else if(s==a){It(this).empty();var r=It('<a href="javascript:void(0)" role="button">'.concat(o,"</a>"));r.click((function(){i.set_categorical_filter(e,s)})),It(this).removeClass("current-filter"),It(this).append(r)}})),this.grid.add_filter(e,t),this.go_page_one(),this.execute()},set_page:function(e){var t=this;this.$el.find(".page-link").each((function(){var n,a=It(this).attr("id"),i=parseInt(a.split("-")[2],10),o=t.grid.get("cur_page");if(i===e)n=It(this).children().text(),It(this).empty(),It(this).addClass("inactive-link"),It(this).text(n);else if(i===o){n=It(this).text(),It(this).empty(),It(this).removeClass("inactive-link");var s=It('<a href="javascript:void(0)" role="button">'.concat(n,"</a>"));s.click((function(){t.set_page(i)})),It(this).append(s)}})),"all"===e?this.grid.set("cur_page",e):this.grid.set("cur_page",parseInt(e,10)),this.execute()},submit_operation:function(e,t){var n=It(e).val();if(this.$el.find('input[name="id"]:checked').length<1)return!1;var a=l.a.findWhere(this.grid.attributes.operations,{label:n});a&&!t&&(t=a.confirm||"");var i=[];this.$el.find("input[name=id]:checked").each((function(){i.push(It(this).val())}));var o={operation:n,id:i,confirmation_text:t};return"top"!=a.target&&"center"!=a.target||(o=l.a.extend(o,{href:a.href,target:a.target})),this.execute(o),!0},check_all_items:function(){var e=this.$(".grid-row-select-checkbox"),t=this.$("#check_all").prop("checked");l.a.each(e,(function(e){It(e).prop("checked",t)})),this.init_grid_elements()},go_page_one:function(){var e=this.grid.get("cur_page");null!=e&&"all"!==e&&this.grid.set("cur_page",1)},execute:function(e){var t=null,n=null,a=null,i=null,o=null;if(e&&(n=e.href,a=e.operation,t=e.id,i=e.confirmation_text,o=e.target,void 0!==n&&-1!=n.indexOf("operation="))){var s=n.split("?");if(s.length>1)for(var r=s[1].split("&"),l=0;l<r.length;l++)-1!=r[l].indexOf("operation")?a=(a=r[l].split("=")[1]).replace(/\+/g," "):-1!=r[l].indexOf("id")&&(t=r[l].split("=")[1])}return a&&t?!(i&&""!==i&&"None"!=i&&"null"!=i&&!confirm(i))&&(a=a.toLowerCase(),this.grid.set({operation:a,item_ids:t}),"top"==o?window.top.location="".concat(n,"?").concat(It.param(this.grid.get_url_data())):"center"==o?It("#galaxy_main").attr("src","".concat(n,"?").concat(It.param(this.grid.get_url_data()))):this.grid.can_async_op(a)||this.dict_format?this.update_grid():this.go_to(o,n),!1):n?(this.go_to(o,n),!1):(this.grid.get("async")||this.dict_format?this.update_grid():this.go_to(o,n),!1)},go_to:function(e,t){var n=this.grid.get("async");this.grid.set("async",!1);var a=this.$el.find("#advanced-search").is(":visible");switch(this.grid.set("advanced_search",a),t||(t="".concat(this.grid.get("url_base"),"?").concat(It.param(this.grid.get_url_data()))),this.grid.set({operation:void 0,item_ids:void 0,async:n}),e){case"center":It("#galaxy_main").attr("src",t);break;case"top":window.top.location=t;break;default:window.location=t}},update_grid:function(){var e=this.grid.get("operation")?"POST":"GET";this.$el.find(".loading-elt-overlay").show();var t=this;It.ajax({type:e,url:t.grid.get("url_base"),data:t.grid.get_url_data(),error:function(){alert("Grid refresh failed")},success:function(e){var n=t.grid.get("embedded"),a=t.grid.get("insert"),i=t.$el.find("#advanced-search").is(":visible"),o=t.dict_format?e:It.parseJSON(e);o.embedded=n,o.insert=a,o.advanced_search=i,t.init_grid(o),t.$el.find(".loading-elt-overlay").hide()},complete:function(){t.grid.set({operation:void 0,item_ids:void 0})}})}});function Ht(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function $t(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()-t,e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Pt(e,t,n,a){var o,s,r=e,l=[],c=(o=new Date,new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),0,0));for(s=0;s<24;s++)l.push($t(c,s));var d=[];for(s=0;s<30;s++)d.push(Ht(c,s));var u=60,h=50,p=60,f=0;"hours"==n?f=12.5:"days"==n&&(f=10);var _,g=300+p+30,v=1.75;_=0!==m.max(r)?150/m.max(r):1;var y=150+u+h;i()(".charts").css("height",y*v);var b=m.select("#".concat(t)).attr("width",g).attr("height",y).attr("preserveAspectRatio","xMidYMin").attr("viewBox","0 0 ".concat(g," ").concat(y)).on("click",(function(){var e=m.select(this).attr("class");e=e.split(" "),m.selectAll(".".concat(e[0])).filter(".".concat(e[1])).style("cursor","zoom-in").transition().duration(750).attr("height",y).attr("width",g),m.select(this).style("cursor","default").transition().duration(750).attr("height",y*v).attr("width",g*v)})),w=b.selectAll("g").data(r).enter().append("g").attr("transform",(function(e,t){var n=p;return"translate(".concat(n+=+t*f,",").concat(u,")")})).on("mouseenter",(function(e){for(var t=1,n=e;n>=10;)n/=10,t++;var a=4*t+10;m.select(m.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(p-5,", ").concat(150-e*_+u+10," )")).attr("visibility","visible").text(e),m.select(m.event.target.parentElement).select(".tool_tip").attr("width","".concat(a,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(p-a,", ").concat(150-e*_+u," )")).attr("width","".concat(a,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(e){m.select(m.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),m.select(m.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","").text(e)}));b.append("g").append("text").attr("class","title").attr("text-anchor","end").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(a),b.append("g").attr("class","axis").append("path").attr("class","x").attr("d",(function(){var e=u+150,t=p+300;return"M".concat(p," ").concat(e," L ").concat(t," ").concat(e)}));var k=m.scale.linear().range([150,0]),M=m.svg.axis().scale(k).orient("left").tickFormat((function(e){return m.round(e*m.max(r),0)}));b.append("g").attr("class","y axis").attr("id","y_".concat(t)).attr("text-anchor","end").attr("transform","translate( ".concat(p,",").concat(u,")")).call(M).select(".domain"),b.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=m.select("#y_".concat(t)).node(),n=p-e.getBoundingClientRect().width-5,a=u+e.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(a,")rotate(-90)")})).text("Number of Jobs"),w.append("rect").attr("y",(function(e){return 150-e*_})).attr("height",(function(e){return e*_})).attr("width",f-1);var x=!1;if("hours"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(f/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 10, ".concat(160," )")).text((function(e,t){return l[t].getHours()<10?"0".concat(String(l[t].getHours())):l[t].getHours()}));var L="";x=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(e,t){var n=0;return l[t].getDate()!=L&&(x?n=20:(n=27,x=!0),L=l[t].getDate()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),L="";var T="";x=!1,w.append("text").attr("fill","rgb(0,0,0)").attr("pointer-events","none").text((function(e,t){var n="";return l[t].getDate()!=T&&(n=String(l[t].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(l[t].getDate())),T=l[t].getDate()),n})).attr("transform",(function(e,t){var n=150,a=m.select(this).node().getBBox().width;return l[t].getDate()!=L&&(x?n+=18:(n+=26,x=!0),L=l[t].getDate()),"translate( ".concat(a+2,", ").concat(n," )")}))}else if("days"==n){w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",3).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( ".concat(f/2,", ").concat(150,")")})),w.append("text").attr("fill","rgb(0,0,0)").attr("transform","translate( 9, ".concat(160," )")).text((function(e,t){return d[t].getDate()<10?"0".concat(String(d[t].getDate())):d[t].getDate()}));var S="";x=!1,w.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(e,t){var n=0;return d[t].getMonth()!=S&&(x?n=20:(n=27,x=!0),S=d[t].getMonth()),n})).attr("stroke","black").attr("stroke-width",1).attr("pointer-events","none").attr("transform",(function(){return"translate( 0, ".concat(150,")")})),S="";var D="";x=!1,w.append("text").attr("fill","rgb(0,100,0)").attr("pointer-events","none").text((function(e,t){var n="";return d[t].getMonth()!=D&&(n=String(d[t].toLocaleString("en-us",{month:"long"})),n+=" ".concat(String(d[t].getFullYear())),D=d[t].getMonth()),n})).attr("transform",(function(e,t){var n=150,a=m.select(this).node().getBBox().width;return d[t].getMonth()!=S&&(x?n+=18:(n+=26,x=!0),S=d[t].getMonth()),"translate( ".concat(a+2,", ").concat(n," )")}))}b.append("g").attr("class","tool_tip").append("rect"),b.select(".tool_tip").append("text"),"jc_dy_chart"!=t&&"jc_hr_chart"!=t||m.select("#".concat(t)).attr("height",y*v).attr("width",g*v).style("cursor","default")}function Rt(e,t,n){var a=e,i=1.75,o=60,s=60,r=150+o+50,l=300+s+30,c=m.scale.linear().domain([0,m.max(a)]).range([0,300]);a=m.layout.histogram().bins(c.ticks(20))(a);for(var d,u=[],h=0;h<a.length;h++)u.push(a[h].length);d=0!==m.max(a)?150/m.max(u):1;var p=m.scale.linear().domain([0,m.max(a,(function(e){return e.y}))]).range([150,0]);var f=m.select("#".concat(t)).attr("viewBox","0 0 ".concat(l," ").concat(r)).attr("width",l).attr("height",r).attr("preserveAspectRatio","xMidYMin").on("click",(function(){var e=m.select(this).attr("class");e=e.split(" "),m.selectAll(".".concat(e[0])).filter(".".concat(e[1])).style("cursor","zoom-in").transition().duration(750).attr("height",r).attr("width",l),m.select(this).style("cursor","default").transition().duration(750).attr("height",r*i).attr("width",l*i)}));f.append("g").append("text").attr("class","title").attr("transform",(function(){return"translate( ".concat(300,",15 )")})).text(n);var _,g=f.selectAll(".bar").data(a).enter().append("g").attr("class","bar").attr("transform",(function(e){return"translate(".concat(+c(e.x)+s,",").concat(+p(e.y)+o,")")})).on("mouseenter",(function(e){for(var t=0,n=e.length;n>=1;)n/=10,t++;var a=4*t+10;m.select(m.event.target.parentElement).select(".tool_tip").select("text").attr("transform","translate( ".concat(s-5,", ").concat(150-e.length*d+o+10," )")).attr("visibility","visible").text(e.length),m.select(m.event.target.parentElement).select(".tool_tip").attr("width","".concat(a,"px")).attr("height","15px").select("rect").attr("transform","translate( ".concat(s-a,", ").concat(150-e.length*d+o," )")).attr("width","".concat(a,"px")).attr("height","15px").attr("fill","#ebd9b2")})).on("mouseleave",(function(){m.select(m.event.target.parentElement).select(".tool_tip").select("text").attr("visibility","hidden"),m.select(m.event.target.parentElement).select(".tool_tip").select("rect").attr("width","0").attr("height","0").attr("fill","")}));_=void 0===a[0]?1:c(a[0].dx),g.append("rect").attr("x",1).attr("width",_-1).attr("height",(function(e){return 150-p(e.y)}));var v=m.svg.axis().scale(c).orient("bottom").tickFormat((function(e){var t=Math.floor(e/60),n=Math.floor(e-60*t);return t<10&&(t="0".concat(t)),n<10&&(n="0".concat(n)),"".concat(t,":").concat(n)}));f.append("g").attr("class","x axis").attr("id","x_".concat(t)).attr("transform","translate( ".concat(s,",").concat(150+o,")")).call(v),f.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=m.select("#x_".concat(t)).node(),n=s+e.getBoundingClientRect().width/2+30,a=o+150+e.getBoundingClientRect().height+10;return"translate(".concat(n,",").concat(a,")")})).text("ETA - hrs:mins");var y=m.svg.axis().scale(p).orient("left");f.append("g").attr("class","y axis").attr("id","y_".concat(t)).attr("transform","translate( ".concat(s,",").concat(o,")")).call(y),f.append("g").append("text").attr("class","ax_title").attr("transform",(function(){var e=m.select("#y_".concat(t)).node(),n=s-e.getBoundingClientRect().width-5,a=o+e.getBoundingClientRect().height/2-30;return"translate(".concat(n,",").concat(a,")rotate(-90)")})).text("Number of Jobs"),f.append("g").attr("class","tool_tip").append("rect"),f.select(".tool_tip").append("text")}var Nt=d.a.Model.extend({urlRoot:"".concat(Object(u.getAppRoot)(),"api/groups")}),zt={Group:Nt,Groups:d.a.Collection.extend({url:"".concat(Object(u.getAppRoot)(),"api/groups"),model:Nt})},Ft={GroupListRowView:d.a.View.extend({events:{},initialize:function(e){this.render(e.group)},render:function(e){var t=this.templateRow();return this.setElement(t({group:e})),this.$el.show(),this},templateRow:function(){return l.a.template(['<tr class="" data-id="<%- group.get("id") %>">','<td><a href="groups#/<%= group.get("id") %>"><%= _.escape(group.get("name")) %></a></td>','<td><%= group.get("total_members") %></td>','<td><%= group.get("total_repos") %></td>',"</tr>"].join(""))}})},Vt={GroupListView:d.a.View.extend({el:"#groups_element",defaults:{},initialize:function(e){this.options=l.a.defaults(this.options||{},this.defaults,e);var t=this;window.globalTS.groups.collection=new zt.Groups,window.globalTS.groups.collection.fetch({success:function(e){t.render()},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},fetch:function(){},render:function(e){this.options=l.a.extend(this.options,e),i()(".tooltip").hide();var t=this.templateGroupsList();this.$el.html(t({length:window.globalTS.groups.collection.models.length})),this.renderRows(window.globalTS.groups.collection.models),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},renderRows:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.renderOne({group:n})}},renderOne:function(e){var t=new Ft.GroupListRowView(e);this.$el.find("#group_list_body").append(t.el)},templateGroupsList:function(){var e=[];return e.push('<div id="groups">'),e.push("</div>"),e.push('<div class="groups_container table-responsive">'),e.push("<% if(length === 0) { %>"),e.push("<div>There are no groups yet.</div>"),e.push("<% } else{ %>"),e.push('<table class="grid table table-sm">'),e.push("   <thead>"),e.push("     <th>Name</th>"),e.push("     <th>Members</th> "),e.push("     <th>Repositories</th>"),e.push("   </thead>"),e.push('   <tbody id="group_list_body">'),e.push("   </tbody>"),e.push("</table>"),e.push("<% }%>"),e.push("</div>"),l.a.template(e.join(""))}})},Ut={GroupDetailView:d.a.View.extend({el:"#groups_element",options:{},app:null,initialize:function(e){this.options=l.a.extend(this.options,e),this.app=window.globalTS.groups,null!==this.app.collection?(this.model=this.app.collection.get(this.options.group_id),this.render()):this.fetchGroup()},fetchGroup:function(e){var t=this;this.options=l.a.extend(this.options,e),this.model=new zt.Group({id:this.options.group_id}),this.model.fetch({success:function(e){console.log("received data: "),console.log(e),t.render()},error:function(e,t){void 0!==t.responseJSON?oe.error(t.responseJSON.err_msg):oe.error("An error occurred.")}})},render:function(){var e=this.templateRow();this.$el.html(e({group:this.model})),i()('#center [data-toggle="tooltip"]').tooltip({trigger:"hover"}),i()("#center").css("overflow","auto")},templateRow:function(){return l.a.template(["<div>",'<h3><%= _.escape(group.get("name")) %></h3>','<p class="" style="color:gray;">','A group of <%= group.get("members").length %> members with <%= group.get("repositories").length %> repositories and a total of <%= group.get("total_downloads") %> combined repository clones.</p>',"<h3>Members</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Repositories</th>","<th>Registered</th>","</thead>","<tbody>",'<% _.each(group.get("members"), function(member) { %>',"<tr>","<td>","<%= _.escape(member.username) %>","</td>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Repositories of <%= _.escape(member.username) %>" href="/repository/browse_repositories_by_user?user_id=<%= member.id %>&use_panels=true" id="<%= member.id %>"><%= member.user_repos_count %></a>',"</td>","<td>","<%= member.time_created %>","</td>","</tr>","<% }); %>","</tbody>","</table>","<h3>Repositories</h3>",'<table class="grid table table-sm">',"<thead>","<th>Name</th>","<th>Description</th>","<th>Clones</th>","<th>Owner</th>","<th>Categories</th>","<th>Created</th>","<th>Updated</th>","<th>Rating</th>","<th>Verified</th>","</thead>","<tbody>",'<% _.each(group.get("repositories"), function(repo) { %>',"<tr>","<td>",'<a data-toggle="tooltip" data-placement="top" title="Details of <%= _.escape(repo.name) %>" href="/view/<%= _.escape(repo.owner) %>/<%= _.escape(repo.name) %>" id="<%= repo.id %>"><%= _.escape(repo.name) %></a>',"</td>","<td>","<%= _.escape(repo.description) %>","</td>","<td>","<%= repo.times_downloaded %>","</td>","<td>","<%= _.escape(repo.owner) %>","</td>","<td>","<% _.each((repo.categories), function(cat) { %>",'<a data-toggle="tooltip" data-placement="top" title="Repositories in <%= cat.name %>" href="/repository/browse_repositories_in_category?id=<%= cat.id %>&use_panels=true"><%= cat.name %></a><br/>',"<% }); %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_created_full %>">',"<%= repo.time_created %>","</td>",'<td data-toggle="tooltip" data-placement="top" title="<%= repo.time_updated_full %>">',"<%= repo.time_updated %>","</td>","<td>","<%= repo.ratings_mean %>","</td>","<td>","<%= repo.approved %>","</td>","</tr>","<% }); %>","</tbody>","</table>","</div>"].join(""))}})},Wt=d.a.Router.extend({routes:{"":"groups",":group_id":"group_page"}}),Bt={ToolshedGroups:d.a.View.extend({groupListView:null,groupDetailView:null,collection:null,initialize:function(){window.globalTS.groups=this,this.ts_router=new Wt,this.ts_router.on("route:groups",(function(){window.globalTS.groups.groupListView=new Vt.GroupListView})),this.ts_router.on("route:group_page",(function(e){window.globalTS.groups.groupDetailView=new Ut.GroupDetailView({group_id:e})})),d.a.history.start({pushState:!1})}})};function qt(){i()("#spinner").remove(),i()("#main").children().remove()}function Jt(){i()("#main").append('<div id="ie-loading-spinner"></div>')}function Gt(e,t,n,a,i,o,s,r){return{type:void 0!==e?e:"GIE spin",ajax_timeout:void 0!==t?t:2e3,ajax_timeout_max:void 0!==n?n:16e3,ajax_timeout_step:void 0!==a?a:500,sleep:void 0!==i?i:500,sleep_max:void 0!==o?o:8e3,sleep_step:void 0!==s?s:100,log_attempts:void 0===r||r,count:0}}function Kt(e,t,n){console.log(e),n&&qt(),"string"==typeof t&&(oe.clear(),oe.error(t,"Error",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))}function Qt(e){e.sleep<e.sleep_max&&(e.sleep+=e.sleep_step),e.log_attempts&&console.log("".concat(e.type," request ").concat(e.count," request timeout ").concat(e.ajax_timeout,"ms sleeping ").concat(e.sleep/1e3,"s")),window.setTimeout(e.spinner,e.sleep)}function Xt(e,t,n,a,o,s){var r=function(){var r={url:e,xhrFields:{withCredentials:!0},type:"GET",timeout:s.ajax_timeout,success:function(e,t,a){n(e,t,a)||(s.count++,Qt(s))},error:function(e,t,n){"timeout"==t?(s.ajax_timeout<s.ajax_timeout_max&&(s.ajax_timeout+=s.ajax_timeout_step),s.count++,a(e,t,n)||Qt(s)):(s.count++,o(e,t,n)||Qt(s))}};t&&(r.dataType="json"),i.a.ajax(r)};console.log("Setting up new spinner for ".concat(s.type," on ").concat(e)),s.spinner=r,window.setTimeout(r,s.sleep)}function Zt(e,t,n,a,i){var o=function(e,t){1==t.count&&(Jt(),oe.info(e,null,{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}))},s=function(e,t,a){return o(n.waiting,i),40==i.count&&oe.warning(n.wait_warn,"Warning",{closeButton:!0,timeOut:0,extendedTimeOut:0,tapToDismiss:!1}),!1};Xt(e,t,(function(e){if(!t||t&&1==e)console.log(n.success),qt(),oe.clear(),a();else{if(t&&0==e)return o(n.not_ready,i),!1;Kt("Invalid response to ".concat(i.type," request"),n.invalid_response,!0)}return!0}),s,s,i)}var en={append_notebook:function(e){qt(),i()("#main").append('<iframe frameBorder="0" seamless="seamless" style="width: 100%; height: 100%; overflow:hidden;" scrolling="no" src="'.concat(e,'"></iframe>'))},clear_main_area:qt,display_spinner:Jt,make_spin_state:Gt,spin_error:Kt,spin:Xt,test_ie_availability:function(e,t){Zt(e,!1,{success:"IE connection succeeded, returning",waiting:"Interactive environment container is running, attempting to connect to the IE. Please wait...",wait_warn:"It is taking an usually long time to connect to the interactive environment. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"An error was encountered while attempting to connect to the interactive environment, contact your administrator."},t,Gt("IE availability"))},load_when_ready:function(e,t){Zt(e,!0,{success:"Galaxy reports IE container ready, returning",not_ready:"Galaxy is launching a container in which to run this interactive environment. Please wait...",unknown_response:"Galaxy failed to launch a container in which to run this interactive environment, contact a Galaxy administrator.",waiting:"Galaxy is launching a container in which to run this interactive environment. Please wait...",wait_warn:"It is taking an usually long time to start a container. Attempts will continue but you may want to report this condition to a Galaxy administrator if it does not succeed soon.",error:"Galaxy encountered an error while attempting to determine the readiness of this interactive environment's container, contact a Galaxy administrator."},t,Gt("IE container readiness"))},keepAlive:function(e){var t=0,n=window.setInterval((function(){i.a.ajax({url:e,xhrFields:{withCredentials:!0},type:"GET",timeout:500,success:function(){console.log("Connected to IE, returning")},error:function(e,a,i){t++,console.log("Request "+t),t>30&&(window.clearInterval(n),qt(),oe.error("Could not connect to IE, contact your administrator","Error",{closeButton:!0,timeOut:2e4,tapToDismiss:!1}))}})}),1e4)}},tn=n(121),nn=n(130),an=n(168),on=n(113),sn=n(37),rn=n(16),ln=d.a.Model.extend({defaults:{config:{}},urlRoot:function(){return Object(u.getAppRoot)()+"api/visualizations"},initialize:function(e){l.a.isObject(e.config)&&l.a.isObject(this.defaults.config)&&l.a.defaults(e.config,this.defaults.config),this._setUpListeners()},_setUpListeners:function(){},set:function(e,t){if("config"===e){var n=this.get("config");l.a.isObject(n)&&(t=l.a.extend(l.a.clone(n),t))}return d.a.Model.prototype.set.call(this,e,t),this},toString:function(){var e=this.get("id")||"";return this.get("title")&&(e+=":".concat(this.get("title"))),"Visualization(".concat(e,")")}}),cn=(d.a.Collection.extend({model:ln,url:function(){return"".concat(Object(u.getAppRoot)(),"api/visualizations")},initialize:function(e,t){t=t||{}},set:function(e,t){var n=this;e=l.a.map(e,(function(e){var t=n.get(e.id);if(!t)return e;var a=t.toJSON();return l.a.extend(a,e),a})),d.a.Collection.prototype.set.call(this,e,t)},toString:function(){return["VisualizationCollection(",[this.historyId,this.length].join(),")"].join("")}}),d.a.Model.extend({defaults:{title:"",type:"",date:null,state:"",state_info:"",modified:!0,dataset_id:"",dataset_id_job:null},initialize:function(e,t){this.groups=new d.a.Collection,this.settings=new d.a.Model,this.visualization_id=t.visualization_id,this.visualization_name=t.visualization_name,this.dataset_id=t.dataset_id,this.chart_dict=t.chart_dict,console.debug("model::initialize() - Initialized with configuration:"),console.debug(t)},reset:function(){this.clear().set({title:"New Chart",dataset_id:this.dataset_id}),this.settings.clear(),this.groups.reset(),this.groups.add({id:_.a.uid()})},state:function(e,t){this.set({state:e,state_info:t}),this.trigger("set:state"),console.debug("model::state() - "+t+" ("+e+")")},serialize:function(){var e={attributes:this.attributes,settings:this.settings.attributes,groups:[]};return this.groups.each((function(t){e.groups.push(t.attributes)})),e},save:function(e){var t=this;e=e||{},this.chart_dict=this.serialize(),new ln({id:this.visualization_id||void 0,type:this.visualization_name,title:this.get("title")||"",config:{dataset_id:this.dataset_id,chart_dict:this.chart_dict}}).save().then((function(n){n&&n.id?(t.visualization_id=n.id,e.success&&e.success(),console.debug("model::save() - Received visualization id: "+n.id)):(e.error&&e.error(),console.debug("model::save() - Unrecognized response. Saving may have failed."))})).fail((function(t){e.error&&e.error(),console.debug("model::save() - Saving failed.")})),console.debug("model::save() - Saving with configuration.")},load:function(e){var t=e||this.chart_dict;return t&&(console.debug("model::load() - Attempting to load with configuration:"),console.debug(t)),this.reset(),t&&t.attributes?(this.set(t.attributes),this.state("ok","Loading saved visualization..."),this.settings.set(t.settings),this.groups.reset(),this.groups.add(t.groups),this.set("modified",!1),this.trigger("load"),console.debug("model::load() - Loading chart model "+t.attributes.type+"."),!0):(this.set("modified",!0),this.trigger("load"),console.debug("model::load() - Visualization attributes unavailable."),!1)}})),dn=n(112),un=n(38),hn=n(144),pn=n(79),mn=d.a.View.extend({initialize:function(e,t){var n=this;this.deferred=e.deferred,this.chart=e.chart,this.group=t.group,this.setElement(i()("<div/>")),this.listenTo(this.chart,"change:dataset_id",(function(){n.render()})),this.render()},render:function(){var e=this,t=_.a.clone(this.chart.plugin.groups)||[],n=this.chart.get("dataset_id");n&&(this.chart.state("wait","Loading metadata..."),this.deferred.execute((function(a){_.a.get({url:Object(u.getAppRoot)()+"api/datasets/"+n,cache:!0,success:function(n){var i={};pn.a.visitInputs(t,(function(t,a){if("data_column"==t.type){i[a]=_.a.clone(t);var o=[];t.is_auto&&o.push({label:"Column: Row Number",value:"auto"}),t.is_zero&&o.push({label:"Column: None",value:"zero"});var s=n.metadata_column_types;for(var r in s)(-1!=["int","float"].indexOf(s[r])&&t.is_numeric||t.is_label)&&o.push({label:"Column: "+(parseInt(r)+1),value:r});t.data=o}var l=e.group.get(a);void 0===l||t.hidden||(t.value=l)})),t.push({name:"__data_columns",type:"hidden",hidden:!0,value:i}),e.chart.state("ok","Metadata initialized..."),e.form=new un.a({inputs:t,onchange:function(){e.group.set(e.form.data.create()),e.chart.set("modified",!0),e.chart.trigger("redraw")}}),e.group.set(e.form.data.create()),e.$el.empty().append(e.form.$el),a.resolve(),e.chart.trigger("redraw")}})})))}}),fn=d.a.View.extend({initialize:function(e){var t=this;this.app=e,this.chart=e.chart,this.repeat=new hn.a.View({title:"Data series",title_new:"Data series",min:1,onnew:function(){t.chart.groups.add({id:_.a.uid()})}}),this.setElement(i()("<div/>").append(this.repeat.$el)),this.listenTo(this.chart.groups,"remove",(function(e){t.repeat.del(e.id),t.chart.trigger("redraw")})),this.listenTo(this.chart.groups,"reset",(function(){t.repeat.delAll()})),this.listenTo(this.chart.groups,"add",(function(e){t.repeat.add({id:e.id,$el:new mn(t.app,{group:e}).$el,ondel:function(){t.chart.groups.remove(e)}})}))},render:function(){l.a.size(this.chart.plugin.groups)>0?this.repeat.$el.show():this.repeat.$el.hide()}}),_n=d.a.View.extend({initialize:function(e,t){var n=this;this.chart=e.chart,this.setElement("<div/>"),this.listenTo(this.chart,"load",(function(){n.render()}))},render:function(){var e=this,t=_.a.clone(this.chart.plugin.settings)||[],n=this.chart.plugin.specs.use_panels;"optional"==n?t.push({name:"__use_panels",type:"boolean",label:"Use multi-panels",help:"Would you like to separate your data into individual panels?"}):this.chart.settings.set("__use_panels","yes"==n?"true":"false"),this.$el.empty(),l.a.size(t)>0&&(pn.a.visitInputs(t,(function(t,n){var a=e.chart.settings.get(n);void 0===a||t.hidden||(t.value=a)})),this.form=new un.a({inputs:t,onchange:function(){e.chart.settings.set(e.form.data.create()),e.chart.trigger("redraw")}}),this.chart.settings.set(this.form.data.create()),this.$el.append(this.form.$el))}}),gn=d.a.View.extend({initialize:function(e){this.plugin=e.chart.plugin,this.setElement(this._template()),this.$title=this.$(".charts-description-title"),this.$image=this.$(".charts-description-image"),this.$text=this.$(".charts-description-text"),this.render()},render:function(){this.plugin.logo?(this.$image.attr("src",Object(u.getAppRoot)()+this.plugin.logo),this.$title.html(this.plugin.html||"Unavailable"),this.$text.html(_.a.linkify(this.plugin.description||"")),this.$el.show()):this.$el.hide()},_template:function(){return'<div class="charts-description">\n                    <table>\n                    <tr>\n                        <td class="charts-description-image-td">\n                            <img alt="charts description" class="charts-description-image"/>\n                        </td>\n                        <td>\n                            <div class="charts-description-title"/>\n                        </td>\n                    </tr>\n                    </table>\n                    <div class="charts-description-text"/>\n                </div>'}}),vn=d.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.chart=this.app.chart,this.description=new gn(this.app),this.title=new rn.a.Input({onchange:function(){n.chart.set("title",n.title.value())}}),this.tabs=new dn.a.View({}),this.tabs.add({id:"settings",icon:"fa fa-gear",tooltip:"Change settings.",$el:i()("<div/>").append("<label><b>Provide a title</b><label>").append(this.title.$el).append(i()("<div/>").addClass("form-text text-muted").html("This title will appear in the list of 'Saved Visualizations'.")).append(new _n(this.app).$el)}),this.chart.plugin.groups&&this.tabs.add({id:"groups",icon:"fa-database",tooltip:"Select data.",$el:new fn(this.app).$el}),this.setElement("<div class='charts-editor'/>"),this.$el.append(this.description.$el),this.$el.append(this.tabs.$el),this.listenTo(this.chart,"load",(function(){n.title.value(n.chart.get("title"))}))}}),yn=d.a.View.extend({initialize:function(e,t){var n=this;this.app=e,this.chart=this.app.chart,this.options=t,this.setElement(i()("<div/>").addClass("charts-viewer").append(i()("<div/>").addClass("info").append(i()("<span/>").addClass("icon")).append(i()("<span/>").addClass("text")))),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,20),this._createContainer("div"),this.chart.on("redraw",(function(e){n.chart.get("modified")&&n.chart.plugin.specs.confirm&&!e?n.chart.state("info","Please confirm the settings before rendering the results."):n.app.deferred.execute((function(e){console.debug("viewer:redraw() - Redrawing..."),n._draw(e,n.chart)}))})),this.chart.on("set:state",(function(){var e=n.$(".charts-viewer-container"),t=n.$info,a=n.$icon,i=n.$text;switch(a.removeClass(),t.show(),i.html(n.chart.get("state_info")),n.chart.get("state")){case"ok":t.hide(),e.show();break;case"failed":a.addClass("icon fa fa-warning"),e.hide();break;case"info":a.addClass("icon fa fa-info"),e.hide();break;default:a.addClass("icon fa fa-spinner fa-spin"),e.show()}}))},_fullscreen:function(e,t){e.css("height",i()(window).height()-t),i()(window).resize((function(){e.css("height",i()(window).height()-t)}))},_createContainer:function(e,t){e=e||"div",t=t||1,this.$(".charts-viewer-container").remove(),this.targets=[];for(var n=0;n<t;n++){var a=_.a.uid(),o=i()("<div/>").addClass("charts-viewer-container").width(parseInt(100/t)+"%").append(i()("<"+e+" class='charts-viewer-canvas' />").attr("id",a));this.$el.append(o),this.targets.push(a)}},_draw:function(e,t){var n="true"==t.settings.get("__use_panels")?t.groups.length:1;this._createContainer(t.plugin.specs.tag,n),t.set("date",_.a.time()),t.state("wait","Please wait..."),this.app.chart_load({process:e,chart:t,dataset:this.app.dataset,targets:this.targets})}});function bn(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}function wn(e,t){bn(e.replace("image/png","image/octet-stream"),"".concat(t||"GalaxyImage",".png"))}function kn(e){var t=e.$el.find("svg");if(0!=t.length||!e.error){var n=t.length,a=parseInt(t.first().css("height")),o=parseInt(t.first().css("width")),s=new XMLSerializer,r=i()("<svg/>").attr({version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:o*n,height:a}),l=0;return t.each((function(){var e=i()(this).clone();!function(e){for(var t in document.styleSheets){var n=document.styleSheets[t].cssRules;if(n)for(var a=0,i=n.length;a<i;a++)try{e.find(n[a].selectorText).each((function(e,t){t.style.cssText+=n[a].style.cssText}))}catch(e){console.error(e)}}}(e);var t=i()('<g transform="translate('+l+', 0)">').attr("xmlns","http://www.w3.org/2000/svg");t.append(e.find("g").first()),r.append(t),l+=o})),{string:s.serializeToString(r[0]),height:a,width:o}}e.error("No SVG found. This visualization type does not support SVG/PDF export.")}var Mn={createPNG:function(e){e.$el.find("svg").length>0?function(e){var t=kn(e),n=document.createElement("canvas"),a=n.getContext("2d"),o=new Image,s=i()('<div style="display:none;"/>').append(i()(n));i()("body").append(s),n.width=5*t.width,n.height=5*t.height,o.src="data:image/svg+xml;base64,"+window.btoa(t.string),o.onload=function(){a.drawImage(o,0,0,n.width,n.height),wn(n.toDataURL("image/png"),e.title),s.remove()}}(e):function(e){var t=e.$el.find(".charts-viewer-canvas");try{if(0!==t.width()&&0!==t.height()){var n=document.createElement("canvas");n.width=t.outerWidth(!0),n.height=t.outerHeight(!0);var a=n.getContext("2d");a.save(),a.fillStyle="rgb(255,255,255)",a.fillRect(0,0,n.width,n.height),a.restore(),a.translate(0,0),a.textAlign="left",a.textBaseline="top",t.children().each((function(){!function e(t,n,a,o){var s=t.prop("tagName").toLowerCase(),r=t.position(),l=n+r.left+parseInt(t.css("marginLeft"),10)+parseInt(t.css("borderLeftWidth"),10)+parseInt(t.css("paddingLeft"),10),c=a+r.top+parseInt(t.css("marginTop"),10)+parseInt(t.css("borderTopWidth"),10)+parseInt(t.css("paddingTop"),10);"div"==s||"span"==s?t.children().each((function(){e(i()(this),l,c)})):"canvas"==s&&o.drawImage(t[0],l,c)}(i()(this),0,0,a)}));var o=n.toDataURL("image/png");o&&wn(o,e.title)}}catch(t){console.debug("FAILED - screenshot::_canvas2png() - "+t),e.error&&e.error("Please reduce your visualization to a single panel and try again.")}}(e)},createSVG:function(e){bn("data:none/none;base64,".concat(window.btoa(kn(e).string)),"".concat(e.title||"GalaxyImage",".svg"))},createPDF:function(e){var t=kn(e),n={filename:"visualization",type:"application/pdf",height:t.height,width:t.width,scale:2,svg:t.string},a=i()("body"),o=a.find("#viewer-form");for(var s in 0===o.length&&(o=i()("<form>",{id:"viewer-form",method:"post",action:"http://export.highcharts.com/",display:"none"}),a.append(o)),o.empty(),n){var r=i()("<input/>",{type:"hidden",name:s,value:n[s]});o.append(r)}try{o.submit()}catch(e){console.log(e)}}},xn=d.a.View.extend({initialize:function(e){var t=this;this.app=e,this.model=new d.a.Model({visible:!0}),this.execute_button=new rn.a.Button({icon:"fa-check-square",tooltip:"Confirm",onclick:function(){e.chart.trigger("redraw",!0)}}),this.export_button=new rn.a.ButtonMenu({icon:"fa-camera",tooltip:"Export"}),this.export_button.addMenu({key:"png",title:"Save as PNG",icon:"fa-file",onclick:function(){t._wait(e.chart,(function(){Mn.createPNG({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}),this.export_button.addMenu({key:"svg",title:"Save as SVG",icon:"fa-file-text-o",onclick:function(){t._wait(e.chart,(function(){Mn.createSVG({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}),this.export_button.addMenu({key:"pdf",title:"Save as PDF",icon:"fa-file-o",onclick:function(){e.modal.show({title:"Send visualization data for PDF creation",body:"Galaxy does not provide integrated PDF export scripts. You may click 'Continue' to create the PDF by using a 3rd party service (https://export.highcharts.com).",buttons:{Cancel:function(){e.modal.hide()},Continue:function(){e.modal.hide(),t._wait(e.chart,(function(){Mn.createPDF({$el:e.viewer.$el,title:e.chart.get("title"),error:function(t){e.message.update({message:t,status:"danger"})}})}))}}})}}),this.left_button=new rn.a.Button({icon:"fa-angle-double-left",tooltip:"Show",onclick:function(){t.model.set("visible",!0),window.dispatchEvent(new Event("resize"))}}),this.right_button=new rn.a.Button({icon:"fa-angle-double-right",tooltip:"Hide",onclick:function(){t.model.set("visible",!1),window.dispatchEvent(new Event("resize"))}}),this.save_button=new rn.a.Button({icon:"fa-save",tooltip:"Save",onclick:function(){e.chart.get("title")?(e.message.update({message:"Saving '".concat(e.chart.get("title"),"'. It will appear in the list of 'Saved Visualizations'."),status:"success"}),e.chart.save({error:function(){e.message.update({message:"Could not save visualization.",status:"danger"})}})):e.message.update({message:"Please provide a name.",status:"danger"})}}),this.buttons=[this.left_button,this.right_button,this.execute_button,this.export_button,this.save_button],this.setElement("<div/>");var n=!0,a=!1,i=void 0;try{for(var o,s=this.buttons[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;this.$el.append(r.$el)}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}this.listenTo(this.model,"change",(function(){return t.render()})),this.render()},render:function(){var e=this.model.get("visible");this.app.$el[e?"removeClass":"addClass"]("charts-fullscreen"),this.execute_button.model.set("visible",e&&!!this.app.chart.plugin.specs.confirm),this.save_button.model.set("visible",e),this.export_button.model.set("visible",e),this.right_button.model.set("visible",e),this.left_button.model.set("visible",!e);var t=this.app.chart.plugin.specs.exports||[];this.export_button.collection.each((function(e){e.set("visible",-1!==t.indexOf(e.get("key")))}))},_wait:function(e,t){this.app.deferred.ready()?t():this.app.message.update({message:"Your visualization is currently being processed. Please wait and try again."})}}),Ln=d.a.View.extend({initialize:function(e){var t=this,n=Object(o.a)();this.modal=n&&n.modal?n.modal:new sn.a.View,this.setElement(i()("<div/>").addClass("charts-client").append(i()("<div/>").addClass("charts-buttons")).append(i()("<div/>").addClass("charts-center")).append(i()("<div/>").addClass("charts-right"))),this.$center=this.$(".charts-center"),this.$right=this.$(".charts-right"),this.$buttons=this.$(".charts-buttons"),this.chart=new cn({},e),this.chart.plugin=e.visualization_plugin,this.chart.plugin.specs=this.chart.plugin.specs||{},this.chart_load=e.chart_load,this.message=new rn.a.Message,this.deferred=new on.a,this.viewer=new yn(this),this.editor=new vn(this),this.menu=new xn(this),this.$center.append(this.viewer.$el),this.$right.append(this.message.$el).append(this.editor.$el),this.$buttons.append(this.menu.$el),i.a.ajax({url:"".concat(Object(u.getAppRoot)(),"api/datasets/").concat(e.dataset_id)}).done((function(e){t.dataset=e,t.chart.load(),t.chart.trigger("redraw")})).fail((function(e){var n=e.responseJSON&&e.responseJSON.err_msg;t.errormessage=n||"Import failed for unkown reason."}))}}),Tn={},Sn=function(e){var t=e.dataset_groups,n=e.dataset_id,a=[];t.each((function(e){l.a.each(e.get("__data_columns"),(function(t,i){var o=e.get(i),s=Cn(n,o);-1!==a.indexOf(o)||Tn[s]||"auto"==o||"zero"==o||void 0===o||a.push(o)}))})),0!==a.length?_.a.get({url:Object(u.getAppRoot)()+"api/datasets/"+n,data:{data_type:"raw_data",provider:"dataset-column",indeces:a.toString()},success:function(t){for(var i=a.length,o=new Array(i),s=0;s<o.length;s++)o[s]=[];for(var r in t.data){var l=t.data[r];for(var c in l){var d=l[c];void 0!==d&&2147483647!=d&&c<i&&o[c].push(d)}}for(var u in console.debug("tabular-datasets::_fetch() - Fetching complete."),o){var h=a[u],p=Cn(n,h);Tn[p]=o[u]}Dn(e)}}):Dn(e)},Dn=function(e){var t=e.dataset_groups,n=e.dataset_id;console.debug("tabular-datasets::_fillFromCache() - Filling request from cache.");var a=0;t.each((function(e){l.a.each(e.get("__data_columns"),(function(t,i){var o=e.get(i),s=Cn(n,o),r=Tn[s];r&&(a=Math.max(a,r.length))}))})),0===a&&(console.debug("tabular-datasets::_fillFromCache() - No data available."),e.chart&&e.chart.state("failed","No data available."));var i=[];t.each((function(e,t){for(var n=_.a.merge({key:t+":"+e.get("key"),values:[]},e.attributes),o=0;o<a;o++)n.values[o]={x:parseInt(o)};i.push(n)})),t.each((function(e,t){var o=i[t].values;l.a.each(e.get("__data_columns"),(function(t,i){var s=e.get(i);switch(s){case"auto":for(var r=0;r<a;r++)o[r][i]=parseInt(r);break;case"zero":for(var l=0;l<a;l++)o[l][i]=0;break;default:for(var c=Cn(n,s),d=Tn[c],u=0;u<a;u++){var h=o[u],p=d[u];isNaN(p)&&!t.is_label&&(p=0),h[i]=p}}}))})),e.success(i)},Cn=function(e,t){return e+"__"+t},jn={request:Sn,requestPanels:function(e){var t=e.process,n=e.chart,a=e.render,i=e.targets,o=e.dataset_id||e.chart.get("dataset_id"),s=e.dataset_groups||e.chart.groups;Sn({chart:n,dataset_id:o,dataset_groups:s,success:function(e){try{if(i.length==e.length){var o=!0;for(var s in e){var r=e[s];if(!a(i[s],[r])){o=!1;break}}o&&n.state("ok","Multi-panel chart drawn.")}else 1==i.length?a(i[0],e)&&n.state("ok","Chart drawn."):n.state("failed","Invalid panel count.");t.resolve()}catch(e){console.debug("FAILED: tabular-utilities::panelHelper() - "+e),n.state("failed",e),t.reject()}}})}};function Yn(e,t){l.a.each(t,(function(t){l.a.each(t.values,(function(t,n){for(var a in e)t[a]=parseInt(n)}))}))}var On={makeCategories:function(e,t){var n={},a=e[0].__data_columns;return l.a.each(t,(function(e){a[e].is_label&&(n[e]=[])})),e&&e[0]&&l.a.each(e[0].values,(function(e){for(var t in n)n[t].push(String(e[t]))})),Yn(n,e),{array:n}},makeUniqueCategories:function(e,t){var n={},a={},i={},o=e[0].__data_columns;for(var s in l.a.each(o,(function(e,t){e.is_label&&(n[t]={},a[t]=[],i[t]=0)})),e){var r=e[s];for(var c in r.values){var d=r.values[c];for(var u in n){var h=String(d[u]);void 0===n[u][h]&&(n[u][h]=i[u],a[u].push(t?[i[u],h]:h),i[u]++)}}}for(var p in e){var m=e[p];for(var f in m.values){var _=m.values[f];for(var g in n){var v=String(_[g]);_[g]=n[g][v]}}}return{categories:n,array:a,counter:i}},makeSeries:function(e,t){var n=[];for(var a in e){var i=e[a],o=[];for(var s in i.values){var r=[];if(t)for(var l in t){var c=t[l];r.push(i.values[s][c])}else for(var d in i.values[s])r.push(i.values[s][d]);o.push(r)}n.push(o)}return n},getDomains:function(e,t){function n(t,n){var a;for(var i in e){var o=m[t](e[i].values,(function(e){return e[n]}));a=void 0===a?o:Math[t](a,o)}return a}var a={};for(var i in t){var o=t[i];a[o]={min:n("min",o),max:n("max",o)}}return a},mapCategories:Yn,makeTickFormat:function(e){var t=e.type,n=e.precision,a=e.categories,i=e.formatter;if("hide"==t)i((function(){return""}));else if("auto"==t)a&&i((function(e){return a[e]||""}));else{var o=function(e){switch(t){case"s":var a=m.formatPrefix(e);return a.scale(e).toFixed()+a.symbol;default:return m.format("."+n+t)(e)}};i(a?function(e){var t=a[e];if(!t)return"";if(isNaN(t))return t;try{return o(t)}catch(e){return t}}:function(e){return o(e)})}},addZoom:function(e){var t=100,n=e.yAxis,a=e.xAxis,i=e.xDomain||a.scale().domain,o=e.yDomain||n.scale().domain,s=e.redraw,r=e.svg,l=a.scale(),c=n.scale(),d=l.domain().slice(),u=c.domain().slice(),h=m.behavior.zoom();function p(e,n){return e[0]=Math.min(Math.max(e[0],n[0]),n[1]-n[1]/t),e[1]=Math.max(n[0]+n[1]/t,Math.min(e[1],n[1])),e}return l.nice(),c.nice(),h.x(l).y(c).scaleExtent([1,t]).on("zoom",(function(){o(p(c.domain(),u)),i(p(l.domain(),d)),s()})),r.call(h).on("dblclick.zoom",(function(){i(d),o(u),s(),h.scale(1),h.translate([0,0])})),h}},An=function e(t,n,a){_.a.request({type:"GET",url:Object(u.getAppRoot)()+"api/datasets/"+t.get("dataset_id_job"),data:{},success:function(i){var o=!1;switch(i.state){case"ok":t.state("wait","Job completed successfully..."),n&&n(i),o=!0;break;case"error":t.state("failed","Job has failed. Please check the history for details."),a&&a(i),o=!0;break;case"running":t.state("wait","Your job is running in the background and you may close the browser tab. Results will be available in your saved visualizations list.")}o||window.setTimeout((function(){e(t,n,a)}),1e3)}})},In=function(){var e=Object(o.a)();e&&e.currHistoryPanel&&e.currHistoryPanel.refreshContents()},En={request:function(e,t,n,a){e.state("wait","Requesting job results..."),e.get("modified")&&e.get("dataset_id_job")&&(_.a.request({type:"PUT",url:Object(u.getAppRoot)()+"api/histories/none/contents/"+e.get("dataset_id_job"),data:{deleted:!0},success:function(){In()}}),e.set("dataset_id_job",null),e.set("modified",!1)),e.get("dataset_id_job")?An(e,n,a):(e.state("wait","Sending job request..."),_.a.request({type:"POST",url:Object(u.getAppRoot)()+"api/tools",data:t,success:function(t){if(t.outputs&&0!==t.outputs.length){In();var i=t.outputs[0];e.state("wait","Your job has been queued. You may close the browser window. The job will run in the background."),e.set("dataset_id_job",i.id),e.save(),An(e,n,a)}else e.state("failed","Job submission failed. No response."),a&&a()},error:function(n){var i="";n&&n.message&&n.message.data&&n.message.data.input&&(i=n.message.data.input+"."),e.state("failed","This visualization requires the '"+t.tool_id+"' tool. Please make sure it is installed. "+i),a&&a()}}))},requestCharts:function(e,t){var n="",a="",i=0;for(var o in e.settings.attributes){var s=e.settings.get(o);l.a.each([[" ","&#32;"],[",","&#44;"],[":","&#58;"]],(function(e){s=s.replace(new RegExp(e[0],"g"),e[1])})),n+=o+":"+s+", "}return n=n.substring(0,n.length-2),e.groups.each((function(e){i++,l.a.each(e.get("__data_columns"),(function(t,n){a+=n+"_"+i+":"+(parseInt(e.get(n))+1)+", "}))})),a=a.substring(0,a.length-2),{tool_id:"toolshed.g2.bx.psu.edu/repos/iuc/charts/charts/1.0.1",inputs:{input:{id:e.get("dataset_id"),src:"hda"},module:t,columns:a,settings:n}}}},Hn=n(150),$n={mounted:function(){this.backboneRender()},updated:function(){this.backboneRender()},methods:{backboneRender:function(){if(window.top===window){var e=Object(o.a)();e.masthead||(e.masthead=new Hn.a.View(this.$props));var t=e.masthead.render();this.$el.appendChild(t.$el[0])}}}},Pn=(n(243),Object(at.a)($n,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"masthead"}})}),[],!1,null,null,null).exports);function Rn(e,t){return console.log("initMasthead"),new(mt.default.extend(Pn))({props:Object.keys(e),propsData:e,el:t})}function Nn(e){console.log("panelManagement"),console.log("(looks like it's assinging some global handlers to window to manage the left and right panel views?)");var t=e.left_panel,n=e.right_panel,a=e.rightPanelSelector,i=e.leftPanelSelector;if(t){var o=new window.bundleEntries.panels.LeftPanel({el:i});window.force_left_panel=function(e){console.log("window.force_left_panel fired"),o.force_panel(e)}}if(n){var s=new window.bundleEntries.panels.RightPanel({el:a});window.handle_minwidth_hint=function(e){console.log("window.handle_minwidth_hint",e),s.handle_minwidth_hint(e)},window.force_right_panel=function(e){console.log("window.force_right_panel",e),s.force_panel(e)}}}var zn=n(62),Fn=n(109),Vn=n(110),Un=n(34),Wn=n(114),Bn=n(156);function qn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xn=function e(t){Qn(this,e);var n=this,a=t.node;this.workflow=t.workflow,ea(this,a),this.form=new un.a(Gn({},t,{onchange:function(){We.a.post("".concat(Object(u.getAppRoot)(),"api/workflows/build_module"),{id:a.id,type:a.type,content_id:a.content_id,inputs:n.form.data.create()}).then((function(e){var t=e.data;a.update_field_data(t)}))}}))},Zn=function(){function e(t){Qn(this,e);var n=this,a=t.node;this.workflow=t.workflow,this.datatypes=t.datatypes,this._customize(a),this.form=new Bn.a(Gn({},a.config_form,{text_enable:"Set in Advance",text_disable:"Set at Runtime",narrow:!0,initial_errors:!0,cls:"ui-portlet-section",postchange:function(e,t){var i=Object(o.a)(),s=t.model.attributes,r={tool_id:s.id,tool_version:s.version,type:"tool",inputs:Object.assign({},t.data.create())};i.emit.debug("tool-form-workflow::postchange()","Sending current state.",r),We.a.post("".concat(Object(u.getAppRoot)(),"api/workflows/build_module"),r).then((function(t){var o=t.data;n._customize(o),n.form.model.set(o.config_form),n.form.update(o.config_form),n.form.errors(o.config_form),a.update_field_data(o),i.emit.debug("tool-form-workflow::postchange()","Received new model.",o),e.resolve()})).catch((function(t){i.emit.debug("tool-form-workflow::postchange()","Refresh request failed.",t),e.reject()}))}}))}var t,n,a;return t=e,(n=[{key:"_customize",value:function(e){var t=e.config_form.inputs;_.a.deepeach(t,(function(e){e.type&&(-1!=["data","data_collection"].indexOf(e.type)?(e.type="hidden",e.info="Data input '".concat(e.name,"' (").concat(_.a.textify(e.extensions),")"),e.value={__class__:"RuntimeValue"}):e.fixed||(e.connectable=!0,e.collapsible_value={__class__:"RuntimeValue"},e.is_workflow=e.options&&0===e.options.length||-1!=["integer","float"].indexOf(e.type)))})),_.a.deepeach(t,(function(e){"conditional"===e.type&&(e.connectable=!1,e.test_param.collapsible_value=void 0)})),function(e,t){var n=t.config_form.inputs,a=t.post_job_actions,i=t.output_terminals&&Object.keys(t.output_terminals)[0];if(i)for(var o in n.push({name:"pja__".concat(i,"__EmailAction"),label:"Email notification",type:"boolean",value:String(Boolean(a["EmailAction".concat(i)])),ignore:"false",help:p()("An email notification will be sent when the job has completed."),payload:{host:window.location.host}}),n.push({name:"pja__".concat(i,"__DeleteIntermediatesAction"),label:"Output cleanup",type:"boolean",value:String(Boolean(a["DeleteIntermediatesAction".concat(i)])),ignore:"false",help:"Upon completion of this step, delete non-starred outputs from completed workflow steps if they are no longer required as inputs."}),t.output_terminals){var s=t.output_terminals[o].label||o;n.push(ta(e,o,s,t))}}(this,e),ea(this,e)}}])&&qn(t.prototype,n),a&&qn(t,a),e}();function ea(e,t){var n=e.workflow,a=t.config_form.inputs;a.unshift({type:"text",name:"__annotation",label:"Annotation",fixed:!0,value:t.annotation,area:!0,help:"Add an annotation or notes to this step. Annotations are available when a workflow is viewed."}),a.unshift({type:"text",name:"__label",label:"Label",value:t.label,help:p()("Add a step label."),fixed:!0,onchange:function(a){var i=!1;for(var o in n.nodes){var s=n.nodes[o];if(s.label&&s.label==a&&s.id!=t.id){i=!0;break}}var r=e.form.data.match("__label");e.form.element_list[r].model.set("error_text",i&&"Duplicate label. Please fix this before saving the workflow."),e.form.trigger("change")}})}function ta(e,t,n,a){var i=[],o=[],s=e.datatypes,r=e.workflow;for(var l in s)i.push({0:s[l],1:s[l]});for(var c in a.input_terminals)o.push({name:a.input_terminals[c].name,label:a.input_terminals[c].label});var d,u,h=(d='This action will rename the output dataset. Click <a href="https://galaxyproject.org/learn/advanced-workflow/variables/">here</a> for more information. Valid input variables are:',d+="\n        <ul>\n            ".concat(o.map((function(e){return"<li><strong>".concat(e.name.replace(/\|/g,"."),"</strong>\n                                                         ").concat(e.label?"(".concat(e.label,")"):"","\n                                             </li>")})).join(""),"\n        </ul>\n    "));i.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0})),i.unshift({0:"Sequences",1:"Sequences"}),i.unshift({0:"Roadmaps",1:"Roadmaps"}),i.unshift({0:"Leave unchanged",1:"__empty__"});var m={title:"Configure Output: '".concat(n,"'"),type:"section",flat:!0,inputs:[{label:"Label",type:"text",value:(u=a.getWorkflowOutput(t))&&u.label||"",help:"This will provide a short name to describe the output - this must be unique across workflows.",onchange:function(e){r.attemptUpdateOutputLabel(a,t,e)}},{action:"RenameDatasetAction",pja_arg:"newname",label:"Rename dataset",type:"text",value:"",ignore:"",help:h},{action:"ChangeDatatypeAction",pja_arg:"newtype",label:"Change datatype",type:"select",ignore:"__empty__",value:"__empty__",options:i,help:"This action will change the datatype of the output to the indicated datatype.",onchange:function(e){"__empty__"===e&&(e=null),r.updateDatatype(a,t,e)}},{action:"TagDatasetAction",pja_arg:"tags",label:"Add Tags",type:"text",value:"",ignore:"",help:"This action will set tags for the dataset."},{action:"RemoveTagDatasetAction",pja_arg:"tags",label:"Remove Tags",type:"text",value:"",ignore:"",help:"This action will remove tags for the dataset."},{title:p()("Assign columns"),type:"section",flat:!0,inputs:[{action:"ColumnSetAction",pja_arg:"chromCol",label:"Chrom column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"startCol",label:"Start column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"endCol",label:"End column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"strandCol",label:"Strand column",type:"integer",value:"",ignore:""},{action:"ColumnSetAction",pja_arg:"nameCol",label:"Name column",type:"integer",value:"",ignore:""}],help:"This action will set column assignments in the output dataset. Blank fields are ignored."}]};return function e(t,n,a,i){var o=i.post_job_actions;for(var s in(n=n||[]).push(t),t.inputs){var r=t.inputs[s];if(r.action){if(r.name="pja__".concat(a,"__").concat(r.action),r.pja_arg&&(r.name+="__".concat(r.pja_arg)),r.payload)for(var l in r.payload)r.payload["".concat(r.name,"__").concat(l)]=r.payload[l],delete r.payload[l];var c=o[r.action+a];if(c){for(var d in n)n[d].expanded=!0;r.pja_arg?r.value=c.action_arguments&&c.action_arguments[r.pja_arg]||r.value:r.value="true"}}r.inputs&&e(r,n.slice(0),a,i)}}(m,[],t,a),m}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function aa(){i()(".right-content").hide(),i()("#edit-attributes").show()}function ia(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var oa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.dragging=!1,this.innerClass="ribbon-inner",this.canvas=document.createElement("div"),this.canvas.style.position="absolute",document.getElementById("canvas-container").appendChild(this.canvas),this.svg=m.select(this.canvas).append("svg"),this.svg.attr("class","ribbon"),n&&a&&this.connect(n,a)}var t,n,a;return t=e,(n=[{key:"connect",value:function(e,t){this.handle1=e,this.handle1&&this.handle1.connect(this),this.handle2=t,this.handle2&&this.handle2.connect(this)}},{key:"destroy",value:function(){this.handle1&&this.handle1.disconnect(this),this.handle2&&this.handle2.disconnect(this),this.canvas.remove()}},{key:"destroyIfInvalid",value:function(e){this.handle1&&this.handle2&&!this.handle2.attachable(this.handle1).canAccept&&(e&&oe.warning("Destroying a connection because collection type has changed."),this.destroy())}},{key:"dropStart",value:function(e){this.innerClass=e?"ribbon-inner-valid":"ribbon-inner-invalid"}},{key:"dropEnd",value:function(){this.innerClass="ribbon-inner"}},{key:"redraw",value:function(){var e=this.handle1,t=this.handle2,n=i()("#canvas-container"),a=this.manager.canvasZoom;this.dragging&&(this.canvas.style.zIndex=1e3),this.canvas.setAttribute("handle1-id",e&&e.element.getAttribute?e.element.getAttribute("id"):""),this.canvas.setAttribute("handle2-id",t&&t.element.getAttribute?t.element.getAttribute("id"):"");var o=function(e){return(i()(e).offset().left-n.offset().left)/a},s=function(e){return(i()(e).offset().top-n.offset().top)/a};if(e&&t){var r=o(e.element)+8,l=s(e.element)+.5*i()(e.element).height(),c=o(t.element)+8,d=s(t.element)+.5*i()(t.element).height(),u=Math.min(r,c),h=Math.max(r,c),p=Math.min(l,d),m=Math.max(l,d),f=u-100,_=p-100,g=h-u+200,v=m-p+200;this.canvas.style.left="".concat(f,"px"),this.canvas.style.top="".concat(_,"px"),this.svg.style("width","".concat(g,"px")),this.svg.style("height","".concat(v,"px")),r-=f,l-=_,c-=f,d-=_;var y=Math.min(Math.max(Math.abs(m-p)/2,10),30);this.drawRibbon(e,t,y,r,l,c,d)}}},{key:"drawRibbon",value:function(e,t,n,a,i,o,s){var r=e&&e.isMappedOver(),l=t&&t.isMappedOver(),c=[0],d=[0],u=[-8,-4,0,4,8],h=1;r&&(c=u,h=u.length),l&&(d=u,h=u.length),this.svg.selectAll("*").remove();for(var p=0;p<h;p++){var m=4,f=6;(c.length>1||d.length>1)&&(m=1,f=3),this.drawCurve(a,i,o,s,n,m,f,c[p%c.length],d[p%d.length])}}},{key:"drawCurve",value:function(e,t,n,a,i,o,s,r,l){var c=[{x:e,y:t+(r=r||0)},{x:e+i,y:t+r},{x:n-i,y:a+(l=l||0)},{x:n,y:a+l}],d=m.svg.line().x((function(e){return e.x})).y((function(e){return e.y})).interpolate("basis");this.svg.append("path").attr("class","ribbon-outer").attr("d",d(c)).attr("stroke-width",s).attr("fill","none"),this.svg.append("path").attr("class",this.innerClass).attr("d",d(c)).attr("stroke-width",o).attr("fill","none")}}])&&ia(t.prototype,n),a&&ia(t,a),e}(),sa=n(153),ra=n.n(sa);function la(e,t,n){return(la="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ma(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ha(e,t,n){return t&&ua(e.prototype,t),n&&ua(e,n),e}function pa(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ma(e){return(ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function va(e){this.collectionType=e,this.isCollection=!0,this.rank=e.split(":").length}function ya(e,t){this.canAccept=e,this.reason=t}var ba={isCollection:!1,canMatch:function(){return!1},canMapOver:function(){return!1},toString:function(){return"NullCollectionType[]"},append:function(e){return e},equal:function(e){return e===this}},wa={isCollection:!0,canMatch:function(e){return ba!==e},canMapOver:function(){return!1},toString:function(){return"AnyCollectionType[]"},append:function(){return wa},equal:function(e){return e===this}};i.a.extend(va.prototype,{append:function(e){return e===ba?this:e===wa?e:new va("".concat(this.collectionType,":").concat(e.collectionType))},canMatch:function(e){return e!==ba&&(e===wa||e.collectionType==this.collectionType)},canMapOver:function(e){if(e===ba)return!1;if(e===wa)return!1;if(this.rank<=e.rank)return!1;var t=e.collectionType;return this._endsWith(this.collectionType,t)},effectiveMapOver:function(e){var t=e.collectionType;return new va(this.collectionType.substring(0,this.collectionType.length-t.length-1))},equal:function(e){return e.collectionType==this.collectionType},toString:function(){return"CollectionType[".concat(this.collectionType,"]")},_endsWith:function(e,t){return-1!==e.indexOf(t,e.length-t.length)}});var ka=function(e){function t(e){var n;return da(this,t),(n=pa(this,ma(t).call(this))).element=e.element,n.mapOver=e.mapOver||ba,n.attributes=e,n.connectors=[],n}return fa(t,e),ha(t,[{key:"connect",value:function(e){this.connectors.push(e),this.node&&this.node.markChanged()}},{key:"disconnect",value:function(e){this.connectors.splice(i.a.inArray(e,this.connectors),1),this.node&&(this.node.markChanged(),this.resetMappingIfNeeded(),e.dragging||e.handle2.resetCollectionTypeSource()),this.emit("change")}},{key:"redraw",value:function(){i.a.each(this.connectors,(function(e,t){t.redraw()}))}},{key:"destroy",value:function(){i.a.each(this.connectors.slice(),(function(e,t){t.destroy()})),this.emit("change")}},{key:"destroyInvalidConnections",value:function(){l.a.each(this.connectors,(function(e){e&&e.destroyIfInvalid()})),this.emit("change")}},{key:"setMapOver",value:function(e){var t=e;if(this.multiple){var n=new va("list");if(e.collectionType===n.collectionType)return;t=e.effectiveMapOver?e.effectiveMapOver(n):e}this.mapOver.equal(e)||(this.mapOver=e,l.a.each(this.node.output_terminals,(function(e){e.setMapOver(t)}))),this.emit("change")}},{key:"isMappedOver",value:function(){return this.mapOver.isCollection}},{key:"resetMapping",value:function(){this.mapOver=ba,this.emit("change")}},{key:"resetCollectionTypeSource",value:function(){var e=this.node;l.a.each(e.output_terminals,(function(e){e.attributes.collection_type_source&&e.attributes.collection_type&&(e.attributes.collection_type=null,e.update(e.attributes))}))}},{key:"resetMappingIfNeeded",value:function(){}}]),t}(ra.a),Ma=function(e){function t(e){var n;return da(this,t),(n=pa(this,ma(t).call(this,e))).datatypes=e.datatypes,n.optional=e.optional,n.force_datatype=e.force_datatype,n}return fa(t,e),ha(t,[{key:"resetMappingIfNeeded",value:function(){this.node.hasConnectedOutputTerminals()||this.node.hasConnectedMappedInputTerminals()||l.a.each(this.node.mappedInputTerminals(),(function(e){e.resetMappingIfNeeded()})),!this.node.hasMappedOverInputTerminals()&&this.resetMapping()}},{key:"resetMapping",value:function(){la(ma(t.prototype),"resetMapping",this).call(this),l.a.each(this.connectors,(function(e){var t=e.handle2;t&&(t.resetMappingIfNeeded(),e.destroyIfInvalid())}))}}]),t}(ka),xa=function(e){function t(e){var n;return da(this,t),(n=pa(this,ma(t).call(this,e))).app=e.app,n.update(e.input),n}return fa(t,e),ha(t,[{key:"canAccept",value:function(e){return this._inputFilled()?new ya(!1,"Input already filled with another connection, delete it before connecting another output."):this.attachable(e)}},{key:"resetMappingIfNeeded",value:function(){this.mapOver.isCollection&&((this.node.hasConnectedMappedInputTerminals()||!this.node.hasConnectedOutputTerminals())&&this.resetMapping())}},{key:"resetMapping",value:function(){la(ma(t.prototype),"resetMapping",this).call(this),this.node.hasMappedOverInputTerminals()||l.a.each(this.node.output_terminals,(function(e){e.resetMapping()}))}},{key:"connected",value:function(){return 0!==this.connectors.length}},{key:"_inputFilled",value:function(){return!!this.connected()&&(!this.multiple||!!this._collectionAttached())}},{key:"_collectionAttached",value:function(){if(this.connected()){var e=this.connectors[0].handle1;return!!e&&!!(e.isCollection||e.isMappedOver()||e.datatypes.indexOf("input")>0)}return!1}},{key:"_mappingConstraints",value:function(){if(!this.node)return[];var e=this.mapOver;if(e.isCollection)return[e];var t=[];return this.node.hasConnectedOutputTerminals()?t.push(l.a.first(l.a.values(this.node.output_terminals)).mapOver):l.a.each(this.node.connectedMappedInputTerminals(),(function(e){t.push(e.mapOver)})),t}},{key:"_producesAcceptableDatatype",value:function(e){for(var t in this.datatypes){var n=this.datatypes[t];if("input"==n)return new ya(!0,null);var a=[],i=e.force_datatype?[e.force_datatype]:e.datatypes;for(var o in a=a.concat(i)){var s=a[o];if("input"==s||"_sniff_"==s||this.app.isSubType(a[o],n))return new ya(!0,null)}}return new ya(!1,"Effective output data type(s) [".concat(a,"] do not appear to match input type(s) [").concat(this.datatypes,"]."))}},{key:"_producesAcceptableDatatypeAndOptionalness",value:function(e){return this.optional||this.multiple||!e.optional?this._producesAcceptableDatatype(e):new ya(!1,"Cannot connect an optional output to a non-optional input")}},{key:"_otherCollectionType",value:function(e){var t=ba;e.isCollection&&(t=e.collectionType);var n=e.mapOver;return n.isCollection&&(t=n.append(t)),t}}]),t}(ka),La={InputTerminal:function(e){function t(){return da(this,t),pa(this,ma(t).apply(this,arguments))}return fa(t,e),ha(t,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.datatypes=e.extensions,this.multiple=e.multiple,this.optional=e.optional,this.collection=!1}},{key:"connect",value:function(e){la(ma(t.prototype),"connect",this).call(this,e);var n=e.handle1;if(n){var a=this._otherCollectionType(n);a.isCollection&&this.setMapOver(a)}}},{key:"attachable",value:function(e){var t=this._otherCollectionType(e),n=this.mapOver;if(t.isCollection){if(this.multiple){if(this.connected()&&!this._collectionAttached())return new ya(!1,"Cannot attach collections to data parameters with individual data inputs already attached.");if(t.collectionType&&t.collectionType.endsWith("paired"))return new ya(!1,"Cannot attach paired inputs to multiple data parameters, only lists may be treated this way.")}return n.isCollection&&n.canMatch(t)?this._producesAcceptableDatatypeAndOptionalness(e):this.multiple&&new va("list").canMatch(t)?this._producesAcceptableDatatypeAndOptionalness(e):this._mappingConstraints().every(l.a.bind(t.canMatch,t))?this._producesAcceptableDatatypeAndOptionalness(e):n.isCollection?this.node.hasConnectedMappedInputTerminals()?new ya(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new ya(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new ya(!1,"Can't map over this input with output collection type - an output of this tool is not mapped over constraining this input. Disconnect output(s) and retry.")}return n.isCollection?new ya(!1,"Cannot attach non-collection outputs to mapped over inputs, consider disconnecting inputs and outputs to reset this input's mapping."):this._producesAcceptableDatatypeAndOptionalness(e)}}]),t}(xa),InputParameterTerminal:function(e){function t(){return da(this,t),pa(this,ma(t).apply(this,arguments))}return fa(t,e),ha(t,[{key:"update",value:function(e){this.type=e.type,this.optional=e.optional}},{key:"effectiveType",value:function(e){return"select"==e?"text":e}},{key:"attachable",value:function(e){return new ya(this.effectiveType(this.type)==this.effectiveType(e.attributes.type),"")}}]),t}(xa),OutputTerminal:Ma,OutputParameterTerminal:ka,InputCollectionTerminal:function(e){function t(){return da(this,t),pa(this,ma(t).apply(this,arguments))}return fa(t,e),ha(t,[{key:"update",value:function(e){this.multiple=!1,this.collection=!0,this.collection_type=e.collection_type,this.datatypes=e.extensions,this.optional=e.optional;var t=[];e.collection_types?l.a.each(e.collection_types,(function(e){t.push(new va(e))})):t.push(wa),this.collectionTypes=t}},{key:"connect",value:function(e){la(ma(t.prototype),"connect",this).call(this,e);var n=e.handle1;if(n){var a=this.node;l.a.each(a.output_terminals,(function(t){t.attributes.collection_type_source&&!e.dragging&&(n.isMappedOver()?n.isCollection?t.attributes.collection_type=n.mapOver.append(n.collectionType).collectionType:t.attributes.collection_type=n.mapOver.collectionType:t.attributes.collection_type=n.attributes.collection_type,t.update(t.attributes))}));var i=this._effectiveMapOver(n);this.setMapOver(i)}}},{key:"_effectiveMapOver",value:function(e){var t=this.collectionTypes,n=this._otherCollectionType(e);if(!l.a.some(t,(function(e){return e.canMatch(n)})))for(var a in t){var i=t[a];if(n.canMapOver(i)){var o=n.effectiveMapOver(i);if(o!=ba)return o}}return ba}},{key:"_effectiveCollectionTypes",value:function(){var e=this.mapOver;return l.a.map(this.collectionTypes,(function(t){return e.append(t)}))}},{key:"attachable",value:function(e){var t=this._otherCollectionType(e);if(t.isCollection){var n=this._effectiveCollectionTypes(),a=this.mapOver;if(l.a.some(n,(function(e){return e.canMatch(t)})))return this._producesAcceptableDatatypeAndOptionalness(e);if(a.isCollection)return this.node.hasConnectedMappedInputTerminals()?new ya(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new ya(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry.");if(l.a.some(this.collectionTypes,(function(e){return t.canMapOver(e)}))){var i=this._effectiveMapOver(e);return i.isCollection?this._mappingConstraints().every((function(e){return i.canMatch(e)}))?this._producesAcceptableDatatypeAndOptionalness(e):this.node.hasConnectedMappedInputTerminals()?new ya(!1,"Can't map over this input with output collection type - other inputs have an incompatible map over collection type. Disconnect inputs (and potentially outputs) and retry."):new ya(!1,"Can't map over this input with output collection type - this step has outputs defined constraining the mapping of this tool. Disconnect outputs and retry."):new ya(!1,"Incompatible collection type(s) for attachment.")}return new ya(!1,"Incompatible collection type(s) for attachment.")}return new ya(!1,"Cannot attach a data output to a collection input.")}}]),t}(xa),OutputCollectionTerminal:function(e){function t(e){var n;(da(this,t),(n=pa(this,ma(t).call(this,e))).datatypes=e.datatypes,n.optional=e.optional,n.force_datatype=e.force_datatype,e.collection_type)?n.collectionType=new va(e.collection_type):(e.collection_type_source||console.log("Warning: No collection type or collection type source defined."),n.collectionType=wa);return n.isCollection=!0,n}return fa(t,e),ha(t,[{key:"update",value:function(e){var t;(this.optional=e.optional,e.collection_type)?t=new va(e.collection_type):(e.collection_type_source||console.log("Warning: No collection type or collection type source defined."),t=wa);var n=this.collectionType;this.collectionType=t;var a=this.connectors.slice(0);t.collectionType!=n.collectionType&&l.a.each(a,(function(e){e.destroyIfInvalid(!0)}))}}]),t}(ka),CollectionTypeDescription:va,NULL_COLLECTION_TYPE_DESCRIPTION:ba,ANY_COLLECTION_TYPE_DESCRIPTION:wa},Ta=n(42);function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ya(e,t)}function Ya(e,t){return(Ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ia(e,t,n){return t&&Aa(e.prototype,t),n&&Aa(e,n),e}var Ea=0,Ha=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oa(this,e),this.app=t,this.el=document.createElement("div"),this.el.className="terminal input-terminal";var a=n.node,o=n.input,s=o.name,r=Ea++;this.id="node-".concat(r,"-input-").concat(s),this.terminal=this.terminalForInput(o),this.terminal.node=a,this.terminal.name=s,this.terminal.label=o.label,a.input_terminals[s]=this.terminal,this.el.terminal=this.terminal,this.$el=i()(this.el),this.$el.attr("input-name",s),this.$el.attr("id",this.id),this.$el.append(i()("<icon/>"));var l=this;this.$el.on("dropinit",(function(e,t){return l.onDropInit(e,t)})),this.$el.on("dropstart",(function(e,t){return l.onDropStart(e,t)})),this.$el.on("dropend",(function(e,t){return l.onDropEnd(e,t)})),this.$el.on("drop",(function(e,t){return l.onDrop(e,t)})),this.$el.on("hover",(function(){return l.onHover()})),this.terminal.on("change",this.render.bind(this))}return Ia(e,[{key:"render",value:function(){this.terminal.mapOver&&this.terminal.mapOver.isCollection?this.$el.addClass("multiple"):this.$el.removeClass("multiple")}},{key:"onDropInit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.terminal,a=i()(t.drag).hasClass("output-terminal")&&n.canAccept(t.drag.terminal);return a.canAccept?(this.$el.addClass("can-accept"),this.$el.removeClass("cannot-accept"),this.reason=null):(this.$el.addClass("cannot-accept"),this.$el.removeClass("can-accept"),this.reason=a.reason),!0}},{key:"onDropStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.proxy.terminal&&(this.$el.hasClass("can-accept")?(t.proxy.terminal.connectors[0].dropStart(!0),t.proxy.dropTooltip=""):(t.proxy.terminal.connectors[0].dropStart(!1),this.reason?(t.proxy.dropTooltip=this.reason,i()(t.proxy).tooltip("show")):t.proxy.dropTooltip=""))}},{key:"onDropEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.proxy.dropTooltip="",t.proxy.terminal&&t.proxy.terminal.connectors[0].dropEnd()}},{key:"onDrop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.proxy.dropTooltip="",this.$el.hasClass("can-accept")){var n=this.terminal,a=new oa(this.app.canvas_manager,t.drag.terminal,n);a.redraw()}}},{key:"onHover",value:function(){var e=this.terminal;if(e.connectors.length>0){var t=i()("<div/>").addClass("delete-terminal").click((function(){i.a.each(e.connectors,(function(e,t){t&&t.destroy()})),t.remove()})).on("mouseleave",(function(){t.remove()}));i()(this.el).parent().append(t)}}}]),e}(),$a=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForInput",value:function(e){return new La.InputTerminal({app:this.app,element:this.el,input:e})}}]),t}(Ha),Pa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForInput",value:function(e){return new La.InputParameterTerminal({app:this.app,element:this.el,input:e})}}]),t}(Ha),Ra=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new La.InputCollectionTerminal({app:this.app,element:this.el,input:e})}}]),t}(Ha),Na=function(){function e(t,n){Oa(this,e),this.app=t,this.el=document.createElement("div"),this.el.className="terminal output-terminal";var a=n.node,o=n.output,s=o.name,r=Ea++;this.id="node-".concat(r,"-output-").concat(s),this.terminal=this.terminalForOutput(o),this.terminal.node=a,this.terminal.name=s,this.terminal.label=o.label,a.output_terminals[s]=this.terminal,this.el.terminal=this.terminal,this.$el=i()(this.el),this.$el.attr("output-name",s),this.$el.attr("id",this.id),this.$el.append(i()("<icon/>")),this.$el.attr("aria-label","connect output ".concat(s," from ").concat(a.name," to input. Press space to see a list of available inputs")),this.$el.attr("tabindex","0"),this.$el.attr("aria-grabbed","false");var l=this;this.$el.on("drag",(function(e,t){return l.onDrag(e,t)})),this.$el.on("dragstart",(function(e,t){return l.onDragStart(e,t)})),this.$el.on("dragend",(function(e,t){return l.onDragEnd(e,t)})),this.$el.on("keydown",(function(e){return l.screenReaderSelectOutputNode(e)})),this.terminal.on("change",this.render.bind(this))}return Ia(e,[{key:"render",value:function(){this.terminal.mapOver&&this.terminal.mapOver.isCollection?this.$el.addClass("multiple"):this.$el.removeClass("multiple")}},{key:"screenReaderSelectOutputNode",value:function(e){var t,n=this,a=function(e){e.stopPropagation();var t=e.currentTarget,a=t.previousSibling,o=t.nextSibling,s=t.input.context.terminal,r=function(e,t){t.classList.add("active"),t.focus(),e.classList.remove("active")};switch(e.keyCode){case 40:r(t,o||t.parentNode.firstChild);break;case 38:r(t,a||t.parentNode.lastChild);break;case 32:if(i()(t.parentNode).remove(),n.$el.removeAttr("aria-owns"),n.$el.attr("aria-grabbed","false"),n.$el.focus(),new oa(n.app.canvas_manager,n.terminal,s).redraw(),Object(Ta.a)("Node connected"),s.connectors.length>0){var l=i()("<div/>").addClass("delete-terminal").attr("tabindex","0").attr("aria-label","delete terminal").on("keydown click",(function(e){32!==e.keyCode&&"click"!==e.type||(i.a.each(s.connectors,(function(e,t){t&&(t.destroy(),Object(Ta.a)("Connection destroyed"))})),l.remove())}));i()(t.input).parent().append(l)}}};32===e.keyCode&&(Object(Ta.a)("Node selected"),t=document.createElement("ul"),i()(t).focusout((function(e){t.contains(e.relatedTarget)||i()(t).hide()})),t.id="input-choices-menu",t.className="list-group",t.setAttribute("role","menu"),n.$el.attr("aria-grabbed","true"),n.$el.attr("aria-owns","input-choices-menu"),i()(".input-terminal").each((function(e,o){var s=i()(o),r=s.context.terminal;if(r.canAccept(n.terminal).canAccept){var l=document.createElement("li");l.textContent="".concat(r.name," in ").concat(r.node.name," node"),l.tabIndex=-1,l.input=s,l.onkeydown=a,l.className="list-group-item",l.setAttribute("role","menuitem"),t.appendChild(l)}})),t.firstChild?(n.$el.append(t),t.firstChild.classList.add("active"),t.firstChild.focus()):Object(Ta.a)("There are no available inputs for this selected output"))}},{key:"onDrag",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(){var e=t.app.canvas_manager.canvasZoom,a=i()(n.proxy).offsetParent().offset(),o=n.offsetX-a.left,s=n.offsetY-a.top;i()(n.proxy).css({left:o/e,top:s/e}),n.proxy.terminal.redraw(),t.app.canvas_manager.update_viewport_overlay()};a(),i()("#canvas-container").get(0).scroll_panel.test(e,a)}},{key:"onDragStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i()(t.available).addClass("input-terminal-active");var n=i()("<div class='drag-terminal'/>").appendTo("#canvas-container").get(0);n.dropTooltip="",i()(n).tooltip({title:function(){return n.dropTooltip||""}}),n.terminal=new La.OutputTerminal({element:n});var a=new oa(this.app.canvas_manager);return a.dragging=!0,a.connect(this.terminal,n.terminal),n}},{key:"onDragEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.proxy.terminal.connectors[0];n&&n.destroy(),i()(t.proxy).tooltip("dispose"),i()(t.proxy).remove(),i()(t.available).removeClass("input-terminal-active"),i()("#canvas-container").get(0).scroll_panel.stop()}}]),e}(),za=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForOutput",value:function(e){var t=e.extensions;return new La.OutputTerminal({element:this.el,datatypes:t,force_datatype:e.force_datatype,optional:e.optional})}}]),t}(Na),Fa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForOutput",value:function(e){var t=e.collection_type,n=e.collection_type_source;return new La.OutputCollectionTerminal({element:this.el,collection_type:t,collection_type_source:n,datatypes:e.extensions,force_datatype:e.force_datatype,optional:e.optional})}}]),t}(Na),Va={InputTerminalView:$a,InputParameterTerminalView:Pa,InputCollectionTerminalView:Ra,OutputTerminalView:za,OutputParameterTerminalView:function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oa(this,t),Da(this,Ca(t).call(this,e,n))}return ja(t,e),Ia(t,[{key:"terminalForOutput",value:function(e){return new La.OutputParameterTerminal({element:this.el,type:e.type,optional:e.optional})}}]),t}(Na),OutputCollectionTerminalView:Fa};function Ua(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Wa(e,t,n){return t&&Ua(e.prototype,t),n&&Ua(e,n),e}function Ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qa=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ba(this,e),this.input=t.input,this.nodeView=t.nodeView,this.terminalElement=t.terminalElement,this.$el=i()('<div class="form-row dataRow input-data-row"/>'),this.$el.attr("name",this.input.name).html(this.input.label||this.input.name),t.skipResize||(this.$el.css({position:"absolute",left:-1e3,top:-1e3,display:"none"}),i()("body").append(this.el),this.nodeView.updateMaxWidth(this.$el.outerWidth()),this.$el.css({position:"",left:"",top:"",display:""}),this.$el.remove())},Ja=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ba(this,e),this.$el=i()('<div class="form-row dataRow"/>'),this.output=n.output,this.terminalElement=n.terminalElement,this.nodeView=n.nodeView;var a=this.output,o=a.label||a.name,s=this.nodeView.node,r=a.extensions.indexOf("input")>=0,l=a.force_datatype||a.extensions.join(", ");if(r||(o="".concat(o," (").concat(l,")")),this.$el.html(o),this.calloutView=null,["tool","subworkflow"].indexOf(s.type)>=0){var c=new Ka(t,{label:o,output:a,node:s});this.calloutView=c,this.$el.prepend(c.$el)}this.$el.css({position:"absolute",left:-1e3,top:-1e3,display:"none"}),i()("body").append(this.el),this.nodeView.updateMaxWidth(this.$el.outerWidth()+17),this.$el.css({position:"",left:"",top:"",display:""}).detach()}return Wa(e,[{key:"redrawWorkflowOutput",value:function(){this.calloutView&&this.calloutView.render()}}]),e}(),Ga=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ba(this,e),this.$el=i()('<div class="form-row dataRow"/>'),this.output=n.output,this.terminalElement=n.terminalElement,this.nodeView=n.nodeView;var a=this.output,o=a.label||a.name,s=this.nodeView.node;if(this.$el.html(o),this.calloutView=null,["tool","subworkflow"].indexOf(s.type)>=0){var r=new Ka(t,{label:o,output:a,node:s});this.calloutView=r,this.$el.append(r.$el)}this.$el.css({position:"absolute",left:-1e3,top:-1e3,display:"none"}),i()("body").append(this.el),this.nodeView.updateMaxWidth(this.$el.outerWidth()+17),this.$el.css({position:"",left:"",top:"",display:""}).detach()}return Wa(e,[{key:"redrawWorkflowOutput",value:function(){this.calloutView&&this.calloutView.render()}}]),e}(),Ka=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ba(this,e),this.$el=i()("<div/>"),this.label=a.label,this.node=a.node,this.output=a.output;var o=this.node,s=this.output.name;this.$el.attr("class","callout-terminal ".concat(s)).append(i()("<icon />").addClass("mark-terminal").click((function(){o.isWorkflowOutput(s)?o.removeWorkflowOutput(s):o.addWorkflowOutput(s),n.render(),t.has_changes=!0,t.canvas_manager.draw_overview()}))).tooltip({delay:500,title:"Unchecked output datasets will be hidden."}),this.render()}return Wa(e,[{key:"render",value:function(){this.node.isWorkflowOutput(this.output.name)?this.$el.find("icon").addClass("mark-terminal-active"):this.$el.find("icon").removeClass("mark-terminal-active")}}]),e}();function Qa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Xa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.$el=n.$el,this.node=n.node,this.output_width=Math.max(150,this.$el.width()),this.node_body=this.$el.find(".node-body"),this.node_body.find("div").remove(),this.newInputsDiv().appendTo(this.node_body),this.terminalViews={},this.outputViews={}}var t,n,a;return t=e,(n=[{key:"render",value:function(){this.renderLabel(),this.renderErrors(),this.$el.css("width",Math.min(250,Math.max(this.$el.width(),this.output_width)))}},{key:"renderLabel",value:function(){this.$el.find(".node-title").text(this.node.label||this.node.name),this.$el.attr("node-label",this.node.label)}},{key:"renderErrors",value:function(){this.node.errors?(this.$el.addClass("node-error"),this.node_body.text(this.node.errors)):this.$el.removeClass("node-error")}},{key:"newInputsDiv",value:function(){return i()("<div/>").addClass("inputs")}},{key:"updateMaxWidth",value:function(e){this.output_width=Math.max(this.output_width,e)}},{key:"addRule",value:function(){this.node_body.append(i()("<div/>").addClass("rule"))}},{key:"addDataInput",value:function(e,t){var n=!0;t||(t=this.$el.find(".inputs"),n=!1);var a=this.terminalViews[e.name],i=Va.InputTerminalView;if("dataset_collection"==e.input_type?i=Va.InputCollectionTerminalView:"parameter"==e.input_type&&(i=Va.InputParameterTerminalView),!a||a instanceof i||(a.terminal.destroy(),a=null),a){var o=a.terminal;o.update(e),o.destroyInvalidConnections()}else a=new i(this.app,{node:this.node,input:e});this.terminalViews[e.name]=a;var s=a.el,r=new qa({terminalElement:s,input:e,nodeView:this,skipResize:n}).$el;return t.append(r.prepend(a.el)),a}},{key:"terminalViewForOutput",value:function(e){var t=Va.OutputTerminalView;return e.collection?t=Va.OutputCollectionTerminalView:e.parameter&&(t=Va.OutputParameterTerminalView),new t(this.app,{node:this.node,output:e})}},{key:"outputViewforOutput",value:function(e,t){return new(e.parameter?Ga:Ja)(this.app,{output:e,terminalElement:t.el,nodeView:this})}},{key:"addDataOutput",value:function(e){var t=this.terminalViewForOutput(e),n=this.outputViewforOutput(e,t);this.outputViews[e.name]=n,this.node_body.append(n.$el.append(t.el))}},{key:"redrawWorkflowOutputs",value:function(){je.a.each(this.outputViews,(function(e){e.redrawWorkflowOutput()}))}},{key:"updateDataOutput",value:function(e){this.node.output_terminals[e.name].update(e)}}])&&Qa(t.prototype,n),a&&Qa(t,a),e}();function Za(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ei=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.element=n.element,this.input_terminals={},this.output_terminals={},this.errors=null,this.workflow_outputs=[]}var t,n,a;return t=e,(n=[{key:"getWorkflowOutput",value:function(e){return l.a.findWhere(this.workflow_outputs,{output_name:e})}},{key:"isWorkflowOutput",value:function(e){return void 0!==this.getWorkflowOutput(e)}},{key:"removeWorkflowOutput",value:function(e){for(;this.isWorkflowOutput(e);){var t=this.getWorkflowOutput(e);this.workflow_outputs.splice(l.a.indexOf(this.workflow_outputs,t),1)}}},{key:"addWorkflowOutput",value:function(e,t){if(!this.isWorkflowOutput(e)){var n={output_name:e};return t&&(n.label=t),this.workflow_outputs.push(n),!0}return!1}},{key:"markWorkflowOutput",value:function(e){i()(this.element).find(".callout-terminal.".concat(e.replace(/(?=[()])/g,"\\"))).find("icon").addClass("mark-terminal-active")}},{key:"labelWorkflowOutput",value:function(e,t){var n=!1,a=null;if(this.isWorkflowOutput(e)){var i=this.getWorkflowOutput(e);a=i.label,i.label=t,n=a!=t}else n=this.addWorkflowOutput(e,t);return n&&(this.app.updateOutputLabel(a,t),this.markChanged(),this.nodeView.redrawWorkflowOutputs()),n}},{key:"changeOutputDatatype",value:function(e,t){var n=this.output_terminals[e],a=this.nodeView.outputViews[e].output;n.force_datatype=t,a.force_datatype=t,t?this.post_job_actions["ChangeDatatypeAction"+e]={action_arguments:{newtype:t},action_type:"ChangeDatatypeAction",output_name:e}:delete this.post_job_actions["ChangeDatatypeAction"+e],this.markChanged(),n.destroyInvalidConnections()}},{key:"connectedOutputTerminals",value:function(){return this._connectedTerminals(this.output_terminals)}},{key:"_connectedTerminals",value:function(e){var t=[];return i.a.each(e,(function(e,n){n.connectors.length>0&&t.push(n)})),t}},{key:"hasConnectedOutputTerminals",value:function(){var e=this.output_terminals;for(var t in e)if(e[t].connectors.length>0)return!0;return!1}},{key:"connectedMappedInputTerminals",value:function(){return this._connectedMappedTerminals(this.input_terminals)}},{key:"hasConnectedMappedInputTerminals",value:function(){var e=this.input_terminals;for(var t in e){var n=e[t];if(n.connectors.length>0&&n.isMappedOver())return!0}return!1}},{key:"_connectedMappedTerminals",value:function(e){var t=[];return i.a.each(e,(function(e,n){n.mapOver.isCollection&&n.connectors.length>0&&t.push(n)})),t}},{key:"mappedInputTerminals",value:function(){return this._mappedTerminals(this.input_terminals)}},{key:"_mappedTerminals",value:function(e){var t=[];return i.a.each(e,(function(e,n){n.mapOver.isCollection&&t.push(n)})),t}},{key:"hasMappedOverInputTerminals",value:function(){var e=!1;return l.a.each(this.input_terminals,(function(t){t.mapOver.isCollection&&(e=!0)})),e}},{key:"redraw",value:function(){i.a.each(this.input_terminals,(function(e,t){t.redraw()})),i.a.each(this.output_terminals,(function(e,t){t.redraw()}))}},{key:"clone",value:function(){var e=this,t={name:this.name,label:this.label,annotation:this.annotation,post_job_actions:this.post_job_actions},n=this.app.create_node(this.type,this.name,this.content_id);_.a.request({type:"POST",url:"".concat(Object(u.getAppRoot)(),"api/workflows/build_module"),data:{type:this.type,tool_id:this.content_id,tool_state:this.tool_state},success:function(a){var i=Object.assign({},a,t);n.init_field_data(i),n.update_field_data(i),e.app.activate_node(n)}})}},{key:"destroy",value:function(){i.a.each(this.input_terminals,(function(e,t){t.destroy()})),i.a.each(this.output_terminals,(function(e,t){t.destroy()})),this.app.remove_node(this),i()(this.element).remove()}},{key:"make_active",value:function(){i()(this.element).addClass("node-active")}},{key:"make_inactive",value:function(){var e,t=this.element.get(0);(e=t.parentNode).removeChild(t),e.appendChild(t),i()(t).removeClass("node-active")}},{key:"set_tool_version",value:function(){"tool"===this.type&&this.config_form&&(this.tool_version=this.config_form.version,this.content_id=this.config_form.id)}},{key:"init_field_data",value:function(e){e.type&&(this.type=e.type),this.name=e.name,this.config_form=e.config_form,this.set_tool_version(),this.tool_state=e.tool_state,this.errors=e.errors,this.tooltip=e.tooltip?e.tooltip:"",this.annotation=e.annotation,this.post_job_actions=e.post_job_actions?e.post_job_actions:{},this.label=e.label,this.uuid=e.uuid,this.workflow_outputs=e.workflow_outputs?e.workflow_outputs:[];var t=new Xa(this.app,{$el:this.element,node:this});this.nodeView=t,i.a.each(e.inputs,(function(e,n){t.addDataInput(n)})),e.inputs.length>0&&e.outputs.length>0&&t.addRule(),i.a.each(e.outputs,(function(e,n){t.addDataOutput(n)})),t.render(),this.app.node_changed(this)}},{key:"update_field_data",value:function(e){var t=this,n=t.nodeView;if("post_job_actions"in e){var a=e.post_job_actions;this.post_job_actions=a||{}}var o=[];i.a.each(n.outputViews,(function(t,n){var a=n.output.name,i=e.outputs,s=!1;l.a.each(i,(function(e){e.name==a&&(s=!0)})),!1===s&&o.push(a)})),l.a.each(o,(function(e){l.a.each(n.outputViews[e].terminalElement.terminal.connectors,(function(e){e&&e.destroy()})),n.outputViews[e].$el.remove(),delete n.outputViews[e],delete t.output_terminals[e]})),i.a.each(t.workflow_outputs,(function(e,n){n&&!t.output_terminals[n.output_name]&&t.workflow_outputs.splice(e,1)})),i.a.each(e.outputs,(function(e,a){if(n.outputViews[a.name]){t.output_terminals[a.name].datatypes=a.extensions;var i=t.post_job_actions["ChangeOutputDatatype"+a.name];t.output_terminals[a.name].force_datatype=i?i.action_arguments.newtype:null,"parameter_input"==t.type&&(t.output_terminals[a.name].attributes.type=a.type),t.output_terminals[a.name].optional=a.optional,t.output_terminals[a.name].destroyInvalidConnections()}else n.addDataOutput(a)})),this.tool_state=e.tool_state,this.config_form=e.config_form,this.set_tool_version(),this.errors=e.errors,this.annotation=e.annotation,this.label=e.label,t.nodeView.renderErrors();var s=n.$el.find("div.inputs"),r=n.newInputsDiv(),c={};l.a.each(e.inputs,(function(e){c[e.name]=t.nodeView.addDataInput(e,r)})),l.a.each(l.a.difference(l.a.values(n.terminalViews),l.a.values(c)),(function(e){e.terminal.destroy()})),n.terminalViews=c,t.nodeView.render();var d=e.outputs;1==d.length&&"collection_type"in d[0]&&n.updateDataOutput(d[0]),s.replaceWith(r),"workflow_outputs"in e&&(this.workflow_outputs=e.workflow_outputs?e.workflow_outputs:[]),this.markChanged(),this.redraw()}},{key:"markChanged",value:function(){this.app.node_changed(this)}}])&&Za(t.prototype,n),a&&Za(t,a),e}();function ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ni(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ai(e,t,n){return t&&ni(e.prototype,t),n&&ni(e,n),e}var ii=[.25,.33,.5,.67,.75,.8,.9,1,1.1,1.25,1.33,1.5,2,2.5,3,4],oi=7,si=function(){function e(t){ti(this,e),this.panel=t}return ai(e,[{key:"test",value:function(e,t){var n=this;window.clearTimeout(this.timeout);var a=e.pageX,o=e.pageY,s=i()(this.panel),r=s.position(),l=s.width(),c=s.height(),d=s.parent(),u=d.width(),h=d.height(),p=d.offset(),m=p.left,f=p.top,_=m+d.width(),g=f+d.height(),v=-(l-u/2),y=-(c-h/2),b=u/2,w=h/2,k=!1,M=0;a-5<m?r.left<b&&(M=Math.min(23,b-r.left),s.css("left",r.left+M),k=!0):a+5>_?r.left>v&&(M=Math.min(23,r.left-v),s.css("left",r.left-M),k=!0):o-5<f?r.top<w&&(M=Math.min(23,w-r.top),s.css("top",r.top+M),k=!0):o+5>g&&r.top>y&&(M=Math.min(23,r.top-v),s.css("top","".concat(r.top-M,"px")),k=!0),k&&(t(),this.timeout=window.setTimeout((function(){n.test(e,t)}),50))}},{key:"stop",value:function(){window.clearTimeout(this.timeout)}}]),e}(),ri=function(){function e(t,n,a){ti(this,e),this.app=t,this.cv=n,this.cc=this.cv.find("#canvas-container"),this.overview=a,this.oc=a.find("#overview-canvas"),this.ov=a.find("#overview-viewport"),this.zoomLevel=oi,this.canvasZoom=ii[oi],this.init_drag(),this.init_copy_paste()}return ai(e,[{key:"setZoom",value:function(e){return this.zoomLevel=Math.min(Math.max(0,e),ii.length-1),this.canvasZoom=ii[this.zoomLevel],this.cv.css("transform-origin","top left"),this.cv.css("transform","scale("+this.canvasZoom+")"),this.cv.css("width","".concat(100/this.canvasZoom,"%")),this.cv.css("height","".concat(100/this.canvasZoom,"%")),this.app.fit_canvas_to_nodes(),this.zoomLevel}},{key:"init_drag",value:function(){var e,t,n=this,a=this,o=function(e,t){e=Math.min(e,a.cv.width()/2),e=Math.max(e,-a.cc.width()+a.cv.width()/2),t=Math.min(t,a.cv.height()/2),t=Math.max(t,-a.cc.height()+a.cv.height()/2),a.cc.css({left:e,top:t}),a.cv.css({"background-position-x":e,"background-position-y":t}),a.update_viewport_overlay()};this.cc.each((function(){this.scroll_panel=new si(this)})),this.cv.bind("click",(function(){document.activeElement.blur()})).bind("dragstart",(function(){var n=i()(this).offset(),o=a.cc.position();t=o.top-n.top,e=o.left-n.left})).bind("drag",(function(a,i){o((i.offsetX+e)/n.canvasZoom,(i.offsetY+t)/n.canvasZoom)})).bind("dragend",(function(){a.app.fit_canvas_to_nodes(),a.draw_overview()})),this.overview.click((function(e){if(a.overview.hasClass("blockaclick"))a.overview.removeClass("blockaclick");else{var t=a.cc.width(),n=a.cc.height(),i=a.oc.width(),s=a.oc.height(),r=e.pageX-a.oc.offset().left-a.ov.width()/2,l=e.pageY-a.oc.offset().top-a.ov.height()/2;o(-r/i*t,-l/s*n),a.app.fit_canvas_to_nodes(),a.draw_overview()}})),this.ov.bind("drag",(function(e,t){var n=a.cc.width(),i=a.cc.height(),s=a.oc.width(),r=a.oc.height(),l=t.offsetX-a.overview.offset().left,c=t.offsetY-a.overview.offset().top;o(-l/s*n,-c/r*i)})).bind("dragend",(function(){a.overview.addClass("blockaclick"),a.app.fit_canvas_to_nodes(),a.draw_overview()})),i()(".workflow-overview").bind("drag",(function(e,t){var n=i()(this).offsetParent(),o=n.offset(),s=Math.max(n.width()-(t.offsetX-o.left),n.height()-(t.offsetY-o.top));i()(this).css({width:s,height:s}),a.draw_overview()})),i()(".workflow-overview div").bind("drag",(function(){}))}},{key:"init_copy_paste",value:function(){var e=this;document.addEventListener("copy",(function(t){""===window.getSelection().toString()&&(e.app.active_node&&"subworkflow"!==e.app.active_node.type&&t.clipboardData.setData("application/json",JSON.stringify({nodeId:e.app.active_node.id})),t.preventDefault())})),document.addEventListener("paste",(function(t){if(document.activeElement&&"textarea"!==document.activeElement.type&&"text"!==document.activeElement.type){var n;try{n=JSON.parse(t.clipboardData.getData("application/json")).nodeId}catch(e){console.debug(e)}n&&Object.prototype.hasOwnProperty.call(e.app.nodes,n)&&e.app.nodes[n].clone(),t.preventDefault()}}))}},{key:"update_viewport_overlay",value:function(){var e=this.cc,t=this.cv,n=this.oc,a=this.ov,i=e.width(),o=e.height(),s=n.width(),r=n.height(),l=e.position();a.css({left:-l.left/i*s,top:-l.top/o*r,width:t.width()/i*s-2,height:t.height()/o*r-2})}},{key:"draw_overview",value:function(){var e,t,n,a,o=i()("#overview-canvas"),s=o.parent().parent().width(),r=o.get(0).getContext("2d"),l=i()("#canvas-container").width(),c=i()("#canvas-container").height(),d=this.cv.width(),u=this.cv.height();l<d&&c<u?(a=(s-(n=l/d*s))/2,t=(s-(e=c/u*s))/2):l<c?(t=0,e=s,a=(s-(n=Math.ceil(e*l/c)))/2):(n=s,a=0,t=(s-(e=Math.ceil(n*c/l)))/2),o.parent().css({left:a,top:t,width:n,height:e}),o.attr("width",n),o.attr("height",e),i.a.each(this.app.nodes,(function(t,a){r.fillStyle="#25537b";var o=i()(a.element),s=o.position(),d=s.left/l*n,u=s.top/c*e,h=o.width()/l*n,p=o.height()/c*e;a.errors&&(r.fillStyle="#e31a1e"),r.fillRect(d,u,h,p)})),this.update_viewport_overlay()}}]),e}();function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function di(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pi(e,t){return(pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mi=function(e){function t(e,n){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=function(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?hi(e):t}(this,ui(t).call(this))).ext_to_type=e.datatypes_mapping.ext_to_class_name,a.type_to_type=e.datatypes_mapping.class_to_classes,a.canvas_container=i()(n),a.id_counter=0,a.nodes={},a.name=null,a.has_changes=!1,a.workflowOutputLabels={},a.workflow_version=0,a.popover_counter=0,a.canvas_manager=new ri(hi(a),i()("#canvas-viewport"),i()("#overview-container"));var o=localStorage.getItem("overview-size");return void 0!==o&&i()(".workflow-overview").css({width:o,height:o}),i()(".workflow-overview").bind("dragend",(function(e,t){var n=i()(this).offsetParent(),a=n.offset(),o=Math.max(n.width()-(t.offsetX-a.left),n.height()-(t.offsetY-a.top));localStorage.setItem("overview-size","".concat(o,"px"))})),window.onbeforeunload=function(){if(a.has_changes)return"There are unsaved changes to your workflow which will be lost."},a}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pi(e,t)}(t,e),n=t,(a=[{key:"set_node",value:function(e,t){e.init_field_data(t),e.update_field_data(t),Object.values(e.output_terminals).forEach((function(t){e.addWorkflowOutput(t.name),e.markWorkflowOutput(t.name)})),this.activate_node(e)}},{key:"isSubType",value:function(e,t){return e=this.ext_to_type[e],t=this.ext_to_type[t],this.type_to_type[e]&&t in this.type_to_type[e]}},{key:"canLabelOutputWith",value:function(e){return!(e&&e in this.workflowOutputLabels)}},{key:"registerOutputLabel",value:function(e){e&&(this.workflowOutputLabels[e]=!0)}},{key:"unregisterOutputLabel",value:function(e){e&&delete this.workflowOutputLabels[e]}},{key:"updateOutputLabel",value:function(e,t){e&&this.unregisterOutputLabel(e),this.canLabelOutputWith(t)||oe.warning("Workflow contains duplicate workflow output labels ".concat(t,". This must be fixed before it can be saved.")),t&&this.registerOutputLabel(t)}},{key:"attemptUpdateOutputLabel",value:function(e,t,n){return!!this.canLabelOutputWith(n)&&(e.labelWorkflowOutput(t,n),!0)}},{key:"updateDatatype",value:function(e,t,n){return e.changeOutputDatatype(t,n),!0}},{key:"create_node",value:function(e,t,n){var a=this.prebuildNode(e,t,n);return this.add_node(a),this.fit_canvas_to_nodes(),this.canvas_manager.draw_overview(),this.activate_node(a),a}},{key:"add_node",value:function(e){e.id=this.id_counter,e.element.attr("id","wf-node-step-".concat(e.id)),e.element.attr("node-label",e.label),this.id_counter++,this.nodes[e.id]=e,this.has_changes=!0,e.workflow=this}},{key:"prebuildNode",value:function(e,t,n){var a=this,o=document.createElement("div");o.className="workflow-node",document.getElementById("canvas-container").appendChild(o);var s=i()(o),r=new ei(this,{element:s});r.type=e,r.content_id=n;var l=document.createElement("div");o.appendChild(l),Vi(l,{id:n,type:e,title:t,node:r,nodeId:this.popover_counter.toString()}),this.popover_counter++,s.css("left",i()(window).scrollLeft()+20),s.css("top",i()(window).scrollTop()+20);var c=i()("#canvas-container").position(),d=i()("#canvas-container").parent(),u=s.outerWidth()+50,h=s.height();return s.css({left:-c.left+d.width()/2-u/2,top:-c.top+d.height()/2-h/2}),s.css("width",u),s.bind("dragstart",(function(){a.activate_node(r)})).bind("dragend",(function(){a.node_changed(r),a.fit_canvas_to_nodes(),a.canvas_manager.draw_overview()})).bind("dragclickonly",(function(){a.activate_node(r)})).bind("drag",(function(e,t){var n=i()(this).offsetParent().offset(),o=(t.offsetX-n.left)/a.canvas_manager.canvasZoom,s=(t.offsetY-n.top)/a.canvas_manager.canvasZoom;i()(this).css({left:o,top:s}),i()(this).find(".terminal").each((function(){this.terminal.redraw()}))})),r}},{key:"remove_node",value:function(e){this.active_node==e&&this.clear_active_node(),delete this.nodes[e.id],this.has_changes=!0,this.emit("onRemoveNode")}},{key:"remove_all",value:function(){var e=this;Object.values(this.nodes).forEach((function(t){t.destroy(),e.remove_node(t)}))}},{key:"rectify_workflow_outputs",value:function(){var e=this,t=!1,n=!1;Object.values(this.nodes).forEach((function(e){"tool"===e.type&&e.workflow_outputs&&e.workflow_outputs.length>0&&(t=!0),Object.values(e.post_job_actions).forEach((function(e){"HideDatasetAction"===e.action_type&&(n=!0)}))})),!1===t&&!1===n||Object.values(this.nodes).forEach((function(n){var a=!1;null===n.post_job_actions&&(n.post_job_actions={},a=!0);var i=[];Object.entries(n.post_job_actions).forEach((function(e){var t=ci(e,2),n=t[0];"HideDatasetAction"==t[1].action_type&&i.push(n)})),i.length>0&&i.forEach((function(e){a=!0,delete n.post_job_actions[e]})),t&&Object.values(n.output_terminals).forEach((function(e){if(!0==!n.isWorkflowOutput(e.name)){a=!0;var t={action_type:"HideDatasetAction",output_name:e.name,action_arguments:{}};n.post_job_actions["HideDatasetAction".concat(e.name)]=null,n.post_job_actions["HideDatasetAction".concat(e.name)]=t}})),e.active_node==n&&!0===a&&e.reload_active_node()}))}},{key:"to_simple",value:function(){var e={};Object.values(this.nodes).forEach((function(t){var n={};Object.values(t.input_terminals).forEach((function(e){n[e.name]=null;var t=[];e.connectors.forEach((function(a,i){if(a.handle1){var o={id:a.handle1.node.id,output_name:a.handle1.name},s=e.attributes.input.input_subworkflow_step_id;void 0!==s&&(o.input_subworkflow_step_id=s),t[i]=o,n[e.name]=t}}))}));var a={};t.post_job_actions&&Object.values(t.post_job_actions).forEach((function(e){var t={action_type:e.action_type,output_name:e.output_name,action_arguments:e.action_arguments};a[e.action_type+e.output_name]=null,a[e.action_type+e.output_name]=t})),t.workflow_outputs||(t.workflow_outputs=[]);var o={id:t.id,type:t.type,content_id:t.content_id,tool_version:t.config_form?t.config_form.version:null,tool_state:t.tool_state,errors:t.errors,input_connections:n,position:i()(t.element).position(),annotation:t.annotation,post_job_actions:t.post_job_actions,uuid:t.uuid,label:t.label,workflow_outputs:t.workflow_outputs};e[t.id]=o}));var t=this.report;return{steps:e,report:t}}},{key:"from_simple",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,i=0;n?(a.remove_all(),a.name=e.name):i=Object.keys(a.nodes).length;var o=i,s=!1;a.workflow_version=e.version,a.report=e.report||{},Object.entries(e.steps).forEach((function(e){var t=ci(e,2),r=t[0],l=t[1],c=a.prebuildNode(l.type,l.name,l.content_id);n||(l.uuid=null,l.workflow_outputs.forEach((function(e){e.uuid=null}))),c.init_field_data(l),l.position&&c.element.css({top:l.position.top,left:l.position.left}),c.id=parseInt(l.id)+i,c.element.attr("id","wf-node-step-".concat(c.id)),c.element.attr("node-label",l.label),a.nodes[c.id]=c,o=Math.max(o,parseInt(r)+i),s||(c.workflow_outputs.length>0?s=!0:Object.values(c.post_job_actions).forEach((function(e){"HideDatasetAction"===e.action_type&&(s=!0)})))})),a.id_counter=o+1,Object.entries(e.steps).forEach((function(e){var n=ci(e,2),o=n[0],r=n[1],l=a.nodes[parseInt(o)+i];Object.entries(r.input_connections).forEach((function(e){var n=ci(e,2),o=n[0],s=n[1];s&&(Array.isArray(s)||(s=[s]),s.forEach((function(e){var n=a.nodes[parseInt(e.id)+i],s=new oa(t.canvas_manager);s.connect(n.output_terminals[e.output_name],l.input_terminals[o]),s.redraw()})))})),s&&Object.values(l.output_terminals).forEach((function(e){void 0===l.post_job_actions["HideDatasetAction".concat(e.name)]&&(l.addWorkflowOutput(e.name),l.markWorkflowOutput(e.name),a.has_changes=!0)}))}))}},{key:"reload_active_node",value:function(){if(this.active_node){var e=this.active_node;this.clear_active_node(),this.activate_node(e)}}},{key:"clear_active_node",value:function(){this.active_node&&(this.active_node.make_inactive(),this.active_node=null),document.activeElement.blur(),this.emit("onClearActiveNode")}},{key:"activate_node",value:function(e){this.active_node!=e&&(this.clear_active_node(),e.make_active(),this.active_node=e),this.emit("onActiveNode",e)}},{key:"node_changed",value:function(e){this.has_changes=!0,this.emit("onNodeChange",e)}},{key:"scroll_to_nodes",value:function(){var e,t,n=i()("#canvas-viewport"),a=i()("#canvas-container");t=a.width()<n.width()?(n.width()-a.width())/2:0,e=a.height()<n.height()?(n.height()-a.height())/2:0,a.css({left:t,top:e})}},{key:"layout_auto",value:function(){this.layout(),this.fit_canvas_to_nodes(),this.scroll_to_nodes(),this.canvas_manager.draw_overview()}},{key:"layout",value:function(){this.has_changes=!0;var e={},t={};Object.keys(this.nodes).forEach((function(n){void 0===e[n]&&(e[n]=0),void 0===t[n]&&(t[n]=[])})),Object.values(this.nodes).forEach((function(n){Object.values(n.input_terminals).forEach((function(a){a.connectors.forEach((function(a){var i=a.handle1.node;e[n.id]+=1,t[i.id].push(n.id)}))}))}));for(var n=[];;){var a=[];for(var o in e)0===e[o]&&a.push(o);if(0===a.length)break;for(var s in n.push(a),a){var r=a[s];for(var l in delete e[r],t[r])e[t[r][l]]-=1}}if(!e.length){var c=this.nodes,d=80;n.forEach((function(e){e.sort((function(e,t){return i()(c[e].element).position().top-i()(c[t].element).position().top}));var t=0,n=30;e.forEach((function(e){var a=c[e],o=i()(a.element);i()(o).css({top:n,left:d}),t=Math.max(t,i()(o).width()),n+=i()(o).height()+30})),d+=t+80})),Object.values(c).forEach((function(e){e.redraw()}))}}},{key:"bounds_for_all_nodes",value:function(){var e,t=1/0,n=-1/0,a=1/0,o=-1/0;return Object.values(this.nodes).forEach((function(s){var r=i()(s.element);e=r.position(),t=Math.min(t,e.left),n=Math.max(n,e.left+r.width()),a=Math.min(a,e.top),o=Math.max(o,e.top+r.width())})),{xmin:t,xmax:n,ymin:a,ymax:o}}},{key:"fit_canvas_to_nodes",value:function(){function e(e,t){return Math.ceil(e/t)*t}function t(e,t){return e<t||e>3*t?-(e-(Math.ceil(e%t/t)+1)*t):0}var n=this.canvas_manager.canvasZoom,a=this.bounds_for_all_nodes(),o=this.canvas_container.position(),s=this.canvas_container.parent(),r=t(a.xmin,100),l=t(a.ymin,100);r=Math.max(r,o.left),l=Math.max(l,o.top);var c=o.left-r,d=o.top-l,u=e(a.xmax+100,100)+r,h=e(a.ymax+100,100)+l;u=Math.max(u,-c+s.width()),h=Math.max(h,-d+s.height()),this.canvas_container.css({left:c/n,top:d/n,width:u,height:h}),this.canvas_container.children().each((function(){var e=i()(this).position();i()(this).css("left",(e.left+r)/n),i()(this).css("top",(e.top+l)/n)}))}}])&&di(n.prototype,a),o&&di(n,o),t}(ra.a),fi={props:{canvas:{type:Boolean,required:!0}}},_i=Object(at.a)(fi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-header-buttons"},[e.canvas?n("span",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"workflow-save-button",role:"button",title:"Save Workflow",variant:"link","aria-label":"Save Workflow"},on:{click:function(t){return e.$emit("onSave")}}},[n("span",{staticClass:"fa fa-floppy-o"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"workflow-report-button",role:"button",title:"Edit Report",variant:"link","aria-label":"Edit Report"},on:{click:function(t){return e.$emit("onReport")}}},[n("span",{staticClass:"fa fa-edit"})]),e._v(" "),n("b-dropdown",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{"no-caret":"",right:"",id:"workflow-options-button",role:"button",title:"Workflow Options",variant:"link","aria-label":"Workflow Options"},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("span",{staticClass:"fa fa-cog"})]},proxy:!0}],null,!1,2396378870)},[e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onSaveAs")}}},[e._v("Save As")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onAttributes")}}},[e._v("Edit Attributes")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onLayout")}}},[e._v("Auto Layout")]),e._v(" "),n("b-dropdown-item",{attrs:{href:"#"},on:{click:function(t){return e.$emit("onDownload")}}},[e._v("Download")])],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{id:"workflow-run-button",role:"button",title:"Run Workflow",variant:"link","aria-label":"Run Workflow"},on:{click:function(t){return e.$emit("onRun")}}},[n("span",{staticClass:"fa fa-play"})])],1):n("span",[n("b-button",{attrs:{id:"workflow-canvas-button",role:"button",title:"Return to Workflow",sm:"size",variant:"link","aria-label":"Return to Workflow"},on:{click:function(t){return e.$emit("onEdit")}}},[n("span",{staticClass:"fa fa-times"})])],1)])}),[],!1,null,null,null).exports,gi=n(169),vi=n(170),yi=n(161);function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ki={name:"ToolBox",components:{ToolSection:gi.a,ToolSearch:vi.a},data:function(){return{query:null,results:null}},props:{toolbox:{type:Array,required:!0},workflows:{type:Array,required:!0},dataManagers:{type:Array,required:!0},moduleSections:{type:Array,required:!0}},computed:{workflowSection:function(){return{name:p()("Workflows"),elems:this.workflows}},dataManagerSection:function(){return{name:p()("Data Managers"),elems:this.dataManagers}},sections:function(){return Object(yi.a)(this.toolsLayout,this.results)},toolsLayout:function(){return this.toolbox.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{elems:e.elems&&e.elems.map((function(e){return e.disabled=!e.is_workflow_compatible,e}))})}))}},methods:{onQuery:function(e){this.query=e},onResults:function(e){this.results=e},onInsertTool:function(e,t){t.preventDefault(),this.$emit("onInsertTool",e.id,e.name)},onInsertModule:function(e,t){t.preventDefault(),this.$emit("onInsertModule",e.name,e.title)},onInsertWorkflow:function(e,t){t.preventDefault(),this.$emit("onInsertWorkflow",e.latest_id,e.name)},onInsertWorkflowSteps:function(e){this.$emit("onInsertWorkflowSteps",e.id,e.step_count)}}},Mi=Object(at.a)(ki,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"unified-panel"},[e._m(0),e._v(" "),n("div",{staticClass:"unified-panel-controls"},[n("tool-search",{attrs:{placeholder:"search tools"},on:{onQuery:e.onQuery,onResults:e.onResults}})],1),e._v(" "),n("div",{staticClass:"unified-panel-body"},[n("div",{staticClass:"toolMenuContainer"},[e._l(e.moduleSections,(function(t){return n("tool-section",{key:t.name,attrs:{"hide-name":!0,category:t,"tool-key":"name","section-name":t.name,"query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertModule}})})),e._v(" "),n("tool-section",{key:e.dataManagerSection.id,attrs:{category:e.dataManagerSection,"query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertTool}}),e._v(" "),n("div",{staticClass:"toolMenu",attrs:{id:"workflow-tool-menu"}},e._l(e.sections,(function(t){return n("tool-section",{key:t.id,attrs:{category:t,"query-filter":e.query},on:{onClick:e.onInsertTool}})})),1),e._v(" "),n("tool-section",{key:e.workflowSection.name,attrs:{category:e.workflowSection,"operation-icon":"fa fa-files-o","operation-title":"Insert individual steps.","query-filter":e.query,"disable-filter":!0},on:{onClick:e.onInsertWorkflow,onOperation:e.onInsertWorkflowSteps}})],2)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[t("div",{staticClass:"panel-header-text"},[this._v("Tools")])])])}],!1,null,null,null).exports,xi=n(162),Li={data:function(){return{datasetCommandsHtml:rt,markdownGeneralHelpHtml:st}}},Ti={name:"EditorPanel",components:{ReportHelp:Object(at.a)(Li,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4"},[n("h3",[e._v("Workflow Reports")]),e._v(" "),e._m(0),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.markdownGeneralHelpHtml)}}),e._v(" "),n("h3",[e._v("Workflow Commands")]),e._v(" "),n("p",[e._v("\n            These commands do not take any arguments and do reference the whole workflow. For instance, the following\n            example would display a representation of the workflow in the resulting report:\n        ")]),e._v(" "),n("pre",[e._v("\\`\\`\\`galaxy\nworkflow_display()\n\\`\\`\\`\n")]),e._v(" "),n("dl",[n("dt",[n("tt",[e._v("workflow_display")])],1),e._v(" "),n("dd",[e._v("Embed a description of the workflow itself in the resulting report.")]),e._v(" "),n("dt",[n("tt",[e._v("invocation_inputs")])],1),e._v(" "),n("dd",[e._v("Embed the labeled workflow inputs in the resulting report.")]),e._v(" "),n("dt",[n("tt",[e._v("invocation_outputs")])],1),e._v(" "),n("dd",[e._v("Embed the labeled workflow outputs in the resulting report.")])]),e._v(" "),n("h3",[e._v("Step Commands")]),e._v(" "),n("p",[e._v("\n            These commands reference a workflow step label and refer to job corresponding to that step. A current\n            limitation is the report will break if these refer to a collection mapping step, these must identify a\n            single job. For instance, the following example would show the job parameters the step labeled 'qc' was run\n            with:\n        ")]),e._v(" "),n("pre",[e._v('\\`\\`\\`galaxy\njob_parameters(step="qc")\n\\`\\`\\`\n')]),e._v(" "),n("dt",[n("tt",[e._v("tool_stderr")])],1),e._v(" "),n("dd",[e._v("Embed the tool standard error stream for this step in the resulting report.")]),e._v(" "),n("dt",[n("tt",[e._v("tool_stdout")])],1),e._v(" "),n("dd",[e._v("Embed the tool standard output stream for this step in the resulting report.")]),e._v(" "),n("dt",[n("tt",[e._v("job_metrics")])],1),e._v(" "),n("dd",[e._v("Embed the job metrics for this step in the resulting report (if user has permission).")]),e._v(" "),n("dt",[n("tt",[e._v("job_parameters")])],1),e._v(" "),n("dd",[e._v("Embed the tool parameters for this step in the resulting report.")]),e._v(" "),n("h3",[e._v("Input/Output Commands")]),e._v(" "),n("p",[e._v('\n            These commands reference a workflow input or output by label. For instance, the following example would\n            display the dataset collection corresponding to output "Merged BAM":\n        ')]),e._v(" "),n("pre",[e._v('\\`\\`\\`galaxy\nhistory_dataset_collection_display(output="Merged Bam")\n\\`\\`\\`\n')]),e._v(" "),n("div",{domProps:{innerHTML:e._s(e.datasetCommandsHtml)}})])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n            The "),t("b",[this._v("Markdown")]),this._v(" document you see will be used to generate a workflow invocation report. You can use\n            Markdown with embedded commands for extracting and displaying parts of the workflow, its invocation\n            metadata, its inputs and outputs, etc..\n        ")])}],!1,null,null,null).exports},props:{canvas:{type:Boolean,required:!0}}},Si=Object(at.a)(Ti,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"unified-panel"},[t("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[t("div",{staticClass:"unified-panel-header-inner"},[this._t("buttons")],2)]),this._v(" "),t("div",{staticClass:"unified-panel-body workflow-right"},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.canvas,expression:"canvas"}],staticClass:"m-1"},[this._t("attributes"),this._v(" "),t("div",{staticClass:"right-content",attrs:{id:"right-content"}})],2),this._v(" "),t("ReportHelp",{directives:[{name:"show",rawName:"v-show",value:!this.canvas,expression:"!canvas"}]})],1)])}),[],!1,null,null,null).exports,Di=n(18),Ci=n(98),ji=n(158);mt.default.use(Di.a);var Yi={name:"Attributes",components:{Tags:ji.a},props:{id:{type:String,required:!0},name:{type:String,required:!0},tags:{type:Array,required:!0},annotation:{type:String,default:""},version:{type:Number,default:null},versions:{type:Array,default:null},parameters:{type:Array,default:null}},data:function(){return{message:null,messageVariant:null,tagsCurrent:this.tags,versionCurrent:this.version}},created:function(){this.services=new Ci.a},computed:{hasParameters:function(){return this.parameters.length>0},versionOptions:function(){for(var e=[],t=0;t<this.versions.length;t++){var n=this.versions[t],a="Version ".concat(n.version,", ").concat(n.steps," steps");t==this.version&&(a="".concat(a," (active)")),e.push({version:t,label:a})}return e}},methods:{onTags:function(e){this.tagsCurrent=e,this.onAttributes({tags:e})},onAnnotation:function(e){this.onAttributes({annotation:e})},onRename:function(e){this.onAttributes({name:e}),this.$emit("onRename",e)},onVersion:function(){this.$emit("onVersion",this.versionCurrent)},onError:function(e){this.message=e,this.messageVariant="danger"},onAttributes:function(e){var t=this;this.services.updateWorkflow(this.id,e).catch((function(e){t.onError(e)}))}}},Oi=Object(at.a)(Yi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"right-content p-2",attrs:{id:"edit-attributes"}},[n("b-alert",{attrs:{variant:e.messageVariant,show:!!e.message}},[e._v("\n        "+e._s(e.message)+"\n    ")]),e._v(" "),n("div",{attrs:{id:"workflow-name-area"}},[n("b",[e._v("Name")]),e._v(" "),n("b-input",{attrs:{id:"workflow-name",value:e.name},on:{change:e.onRename}})],1),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-version-area"}},[n("b",[e._v("Version")]),e._v(" "),n("b-form-select",{on:{change:e.onVersion},model:{value:e.versionCurrent,callback:function(t){e.versionCurrent=t},expression:"versionCurrent"}},e._l(e.versionOptions,(function(t){return n("b-form-select-option",{key:t.version,attrs:{value:t.version}},[e._v("\n                "+e._s(t.label)+"\n            ")])})),1)],1),e._v(" "),e.hasParameters?n("div",{staticClass:"mt-2",attrs:{id:"workflow-parameters-area"}},[n("b",[e._v("Parameters")]),e._v(" "),n("b-list-group",e._l(e.parameters.entries(),(function(t){var a=t[0],i=t[1];return n("b-list-group-item",{key:a},[e._v(e._s(a+1)+": "+e._s(i)+"\n            ")])})),1)],1):e._e(),e._v(" "),n("div",{staticClass:"mt-2",attrs:{id:"workflow-annotation-area"}},[n("b",[e._v("Annotation")]),e._v(" "),n("b-textarea",{attrs:{id:"workflow-annotation",value:e.annotation},on:{change:e.onAnnotation}}),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("\n            These notes will be visible when this workflow is viewed.\n        ")])],1),e._v(" "),n("div",{staticClass:"mt-2"},[n("b",[e._v("Tags")]),e._v(" "),n("Tags",{attrs:{tags:e.tagsCurrent},on:{input:e.onTags}}),e._v(" "),n("div",{staticClass:"form-text text-muted"},[e._v("\n            Apply tags to make it easy to search for and find items with the same tag.\n        ")])],1)],1)}),[],!1,null,null,null).exports;mt.default.use(Di.a);var Ai={props:{zoomLevel:{type:Number,required:!0}},data:function(){return{zoomDefault:this.zoomLevel}},computed:{zoomPercentage:function(){return Math.floor(100*ii[this.zoomLevel])}},methods:{onZoomIn:function(){this.$emit("onZoom",this.zoomLevel+1)},onZoomOut:function(){this.$emit("onZoom",this.zoomLevel-1)},onZoomReset:function(){this.$emit("onZoom",this.zoomDefault)}}},Ii=(n(248),Object(at.a)(Ai,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"zoom-control float-right btn-group-horizontal"},[t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-minus",attrs:{role:"button",title:"Zoom Out",size:"sm","aria-label":"Zoom Out"},on:{click:this.onZoomOut}}),this._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"zoom-reset",attrs:{role:"button",variant:"light",title:"Reset Zoom Level",size:"sm","aria-label":"Reset Zoom Level"},on:{click:this.onZoomReset}},[this._v("\n        "+this._s(this.zoomPercentage)+"%\n    ")]),this._v(" "),t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-plus",attrs:{role:"button",title:"Zoom In",size:"sm","aria-label":"Zoom In"},on:{click:this.onZoomIn}})],1)}),[],!1,null,"522a2e2e",null).exports),Ei={components:{EditorPanel:Si,MarkdownEditor:ot.a,SidePanel:xi.a,ToolBoxWorkflow:Mi,WorkflowOptions:_i,WorkflowAttributes:Oi,ZoomControl:Ii},props:{id:{type:String,required:!0},version:{type:Number,required:!0},name:{type:String,required:!0},tags:{type:Array,required:!0},annotation:{type:String,required:!0},moduleSections:{type:Array,required:!0},dataManagers:{type:Array,required:!0},workflows:{type:Array,required:!0},toolbox:{type:Array,required:!0}},data:function(){return{isCanvas:!0,versions:[],parameters:[],zoomLevel:7}},created:function(){var e=this;Object(Un.b)().then((function(t){var n=t.datatypes,a=t.datatypes_mapping;e.manager=new mi({datatypes_mapping:a},e.$refs.canvas),e.manager.on("onRemoveNode",(function(){aa()})).on("onActiveNode",(function(t){!function(e,t,n){if(t&&t.config_form){var a=t.config_form,o="right-content",s="".concat(o,"-").concat(t.id),r=i()("#".concat(o));if(0===r.find("#".concat(s)).length){var l=i()('<div id="'.concat(s,'" class="').concat(o,'"/>'));a.node=t,a.workflow=e,a.datatypes=n,a.icon=Wn.a[t.type],a.cls="ui-portlet-section";var c=null;c="tool"==t.type?new Zn(a):new Xn(a),l.append(c.form.$el),r.append(l)}i()(".".concat(o)).hide(),r.find("#".concat(s)).show(),r.show(),r.scrollTop()}}(e.manager,t,n)})).on("onNodeChange",(function(){var t,n,a,i;e.parameters=(t=e.manager.nodes,n=/\$\{.+?\}/g,a=[],i=[],Object.entries(t).forEach((function(e){var t=na(e,2),o=(t[0],t[1]);o.config_form&&o.config_form.inputs&&_.a.deepeach(o.config_form.inputs,(function(e){if("string"==typeof e.value){var t=e.value.match(n);t&&(i=i.concat(t))}})),o.post_job_actions&&Object.values(o.post_job_actions).forEach((function(e){e.action_arguments&&Object.values(e.action_arguments).forEach((function(e){if("string"==typeof e){var t=e.match(n);t&&(i=i.concat(t))}}))})),i&&Object.entries(i).forEach((function(e){var t=na(e,2),n=(t[0],t[1]);-1===a.indexOf(n)&&a.push(n)}))})),Object.entries(a).forEach((function(e){var t=na(e,2),n=t[0],i=t[1];a[n]=i.substring(2,i.length-1)})),a)})),e.loadCurrent(e.id,e.version)}))},methods:{onInsertTool:function(e,t){var n=this;if(this.isCanvas){var a=this.manager.create_node("tool",t,e),i={type:"tool",tool_id:e,_:"true"};Object(Un.c)(i).then((function(e){n.manager.set_node(a,e)}))}else this.isCanvas=!0},onInsertModule:function(e,t){var n=this;if(this.isCanvas){var a=this.manager.create_node(e,t),i={type:e,_:"true"};Object(Un.c)(i).then((function(e){n.manager.set_node(a,e)}))}else this.isCanvas=!0},onInsertWorkflow:function(e,t){var n=this;if(this.isCanvas){var a=this.manager.create_node("subworkflow",t,e),i={type:"subworkflow",content_id:e,_:"true"};Object(Un.c)(i).then((function(e){n.manager.set_node(a,e)}))}else this.isCanvas=!0},onInsertWorkflowSteps:function(e,t){this.isCanvas?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=function(){I("Importing workflow","progress"),Object(Un.f)(e,t,null,!1).then((function(t){var n="";i.a.each(t.upgrade_messages,(function(t,a){n+="<li>Step ".concat(parseInt(t,10)+1,": ").concat(e.nodes[t].name,"<ul>"),i.a.each(a,(function(e,t){n+="<li>".concat(t,"</li>")})),n+="</ul></li>"})),n?A("Subworkflow embedded with changes","Problems were encountered loading this workflow (possibly a result of tool upgrades). Please review the following parameters and then save.<ul>".concat(n,"</ul>"),{Continue:O}):O()}))};n<2?a():A(p()("Warning"),"This will copy ".concat(n," new steps into your workflow."),{Cancel:O,Copy:a})}(this.manager,e,t):this.isCanvas=!0},onDownload:function(){window.location="".concat(Object(u.getAppRoot)(),"api/workflows/").concat(this.id,"/download?format=json-download")},onSaveAs:function(){var e;e=this.manager,A("Save As a New Workflow",i()('<form><label style="display:inline-block; width: 100%;">Save as name: </label><input type="text" id="workflow_rename" style="width: 80%;" autofocus/><br><label style="display:inline-block; width: 100%;">Annotation: </label><input type="text" id="wf_annotation" style="width: 80%;" /></form>'),{OK:function(){var t=i()("#workflow_rename").val().length>0?i()("#workflow_rename").val():"SavedAs_".concat(e.name),n=i()("#wf_annotation").val().length>0?i()("#wf_annotation").val():"";i.a.ajax({url:"".concat(Object(u.getAppRoot)(),"workflow/save_workflow_as"),type:"POST",data:{workflow_name:t,workflow_annotation:n,from_tool_form:!0,workflow_data:function(){return JSON.stringify(e.to_simple())}}}).done((function(e){window.onbeforeunload=void 0,window.location="".concat(Object(u.getAppRoot)(),"workflow/editor?id=").concat(e),O()})).fail((function(e){console.debug(e),O(),alert("Saving this workflow failed. Please contact this site's administrator.")}))},Cancel:O})},onLayout:function(){this.manager.layout_auto()},onAttributes:function(){aa()},onEdit:function(){this.isCanvas=!0},onReport:function(){this.isCanvas=!1},onRename:function(e){this.name=e},onReportUpdate:function(e){this.manager.has_changes=!0,this.manager.report.markdown=e},onRun:function(){window.location="".concat(Object(u.getAppRoot)(),"workflows/run?id=").concat(this.id)},onZoom:function(e){this.zoomLevel=this.manager.canvas_manager.setZoom(e)},onSave:function(){var e=this;I("Saving workflow...","progress"),Object(Un.g)(this.manager,this.id).then((function(t){!function(e){var t=i()("<div/>").text(e.message);if(e.errors){t.addClass("warningmark");var n=i()("<ul/>");i.a.each(e.errors,(function(e,t){i()("<li/>").text(t).appendTo(n)})),t.append(n)}else t.addClass("donemark");e.errors?A("Saving workflow",t,{Ok:O}):O()}(t),Object(Un.e)(e.id).then((function(t){e.versions=t,O()}))})).catch((function(e){A("Saving workflow failed...",e,{Ok:O})}))},onVersion:function(e){if(e!=this.manager.workflow_version){if(this.manager.has_changes)if(0==window.confirm("There are unsaved changes to your workflow which will be lost. Continue ?"))return void(this.version=this.manager.workflow_version);this.version=e,this.loadCurrent(this.id,e)}},loadCurrent:function(e,t){var n=this;I("Loading workflow...","progress"),Object(Un.f)(this.manager,e,t).then((function(e){var t=(e.report||{}).markdown||"\n# Workflow Execution Report\n\n## Workflow Inputs\n```galaxy\ninvocation_inputs()\n```\n\n## Workflow Outputs\n```galaxy\ninvocation_outputs()\n```\n\n## Workflow\n```galaxy\nworkflow_display()\n```\n";n.$refs["report-editor"].input=t,function(e,t){var n="";l.a.each(t.steps,(function(a,i){var o="";a.errors&&(o+="<li>".concat(a.errors,"</li>")),l.a.each(t.upgrade_messages[i],(function(e){o+="<li>".concat(e,"</li>")})),o&&(n+="<li>Step ".concat(parseInt(i,10)+1,": ").concat(e.nodes[i].name,"<ul>").concat(o,"</ul></li>"))})),n?A("Issues loading this workflow","Please review the following issues, possibly resulting from tool upgrades or changes.<p><ul>".concat(n,"</ul></p>"),{Continue:O}):O()}(n.manager,e),Object(Un.e)(n.id).then((function(e){n.versions=e}))})).catch((function(e){A("Loading workflow failed...",e,{Ok:O})}))}}},Hi=Object(at.a)(Ei,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workflow-client",attrs:{id:"columns"}},[n("SidePanel",{attrs:{id:"left",side:"left"},scopedSlots:e._u([{key:"panel",fn:function(){return[n("ToolBoxWorkflow",{attrs:{toolbox:e.toolbox,"module-sections":e.moduleSections,"data-managers":e.dataManagers,workflows:e.workflows},on:{onInsertTool:e.onInsertTool,onInsertModule:e.onInsertModule,onInsertWorkflow:e.onInsertWorkflow,onInsertWorkflowSteps:e.onInsertWorkflowSteps}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"workflow-center inbound",attrs:{id:"center"}},[n("div",{staticClass:"unified-panel-header",attrs:{unselectable:"on"}},[n("div",{staticClass:"unified-panel-header-inner"},[n("span",{staticClass:"sr-only"},[e._v("Workflow Editor")]),e._v("\n                "+e._s(e.name)+"\n            ")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isCanvas,expression:"isCanvas"}],staticClass:"unified-panel-body workflow-canvas",attrs:{id:"workflow-canvas"}},[n("ZoomControl",{attrs:{"zoom-level":e.zoomLevel},on:{onZoom:e.onZoom}}),e._v(" "),n("div",{attrs:{id:"canvas-viewport"}},[n("div",{ref:"canvas",attrs:{id:"canvas-container"}})]),e._v(" "),e._m(0)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCanvas,expression:"!isCanvas"}],staticClass:"unified-panel-body workflow-report-body"},[n("MarkdownEditor",{ref:"report-editor",attrs:{"initial-markdown":"",onupdate:e.onReportUpdate,toolbar:!1}})],1)]),e._v(" "),n("SidePanel",{attrs:{id:"right",side:"right"},scopedSlots:e._u([{key:"panel",fn:function(){return[n("EditorPanel",{staticClass:"workflow-panel",attrs:{canvas:e.isCanvas},scopedSlots:e._u([{key:"attributes",fn:function(){return[n("WorkflowAttributes",{attrs:{id:e.id,name:e.name,tags:e.tags,parameters:e.parameters,annotation:e.annotation,version:e.version,versions:e.versions},on:{onVersion:e.onVersion,onRename:e.onRename}})]},proxy:!0},{key:"buttons",fn:function(){return[n("WorkflowOptions",{attrs:{canvas:e.isCanvas},on:{onSave:e.onSave,onSaveAs:e.onSaveAs,onRun:e.onRun,onDownload:e.onDownload,onReport:e.onReport,onLayout:e.onLayout,onEdit:e.onEdit,onAttributes:e.onAttributes}})]},proxy:!0}])})]},proxy:!0}])})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"workflow-overview",attrs:{"aria-hidden":"true"}},[t("div",{staticClass:"workflow-overview-body"},[t("div",{attrs:{id:"overview-container"}},[t("canvas",{attrs:{width:"0",height:"0",id:"overview-canvas"}}),this._v(" "),t("div",{attrs:{id:"overview-viewport"}})])])])}],!1,null,null,null).exports,$i=n(57),Pi={components:{LoadingSpan:$i.a},props:{node:{type:Object,required:!0}},data:function(){return{compatibleTools:[],isDeprecated:!1,popoverHeaderText:p()("Tool recommendations"),noRecommendationsMessage:p()("No tool recommendations"),deprecatedMessage:"",showLoading:!0}},created:function(){this.loadRecommendations()},methods:{getToolId:function(e){if(null!=e&&e.indexOf("/")>-1){var t=e.split("/");e=t[t.length-2]}return e},getWorkflowPath:function(e,t){var n={},a={};for(var i in e.steps){var o=e.steps[i],s=o.input_connections;for(var r in a[o.id]=this.getToolId(o.content_id),s){var l=s[r];if(null!=l){var c=[],d=!0,u=!1,h=void 0;try{for(var p,m=l[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var f=p.value;c.push(f.id.toString())}}catch(e){u=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(u)throw h}}n[o.id.toString()]=c}}}var _=[],g=[];_.push(t),_=function e(t,a){for(var i in n)if(parseInt(i)===parseInt(t)){var o=parseInt(n[i][0]);null!=o&&(a.push(o),void 0!==n[o]&&null!==n[o]&&e(o,a))}return a}(t,_);var v=!0,y=!1,b=void 0;try{for(var w,k=_[Symbol.iterator]();!(v=(w=k.next()).done);v=!0){var M=a[w.value.toString()];null!=M&&g.push(M)}}catch(e){y=!0,b=e}finally{try{v||null==k.return||k.return()}finally{if(y)throw b}}return g.join(",")},loadRecommendations:function(){var e=this,t=this.node.app.to_simple(),n=this.node,a={tool_sequence:this.getWorkflowPath(t,n.id)};Object(Un.d)(a).then((function(t){var n=t.predicted_data,a=n.o_extensions,i=n.children,o=e.node.app;if(e.isDeprecated=n.is_deprecated,e.deprecatedMessage=n.message,i.length>0){var s=[],r=!0,l=!1,c=void 0;try{for(var d,u=i.entries()[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var h=d.value,p={},m=h[1].i_extensions,f=!0,_=!1,g=void 0;try{for(var v,y=a.entries()[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value,w=!0,k=!1,M=void 0;try{for(var x,L=m.entries()[Symbol.iterator]();!(w=(x=L.next()).done);w=!0){var T=x.value;if(!0===o.isSubType(b[1],T[1])||"input"===b[1]||"_sniff_"===b[1]||"input_collection"===b[1]){p.id=h[1].tool_id,p.name=h[1].name,s.push(p);break}}}catch(e){k=!0,M=e}finally{try{w||null==L.return||L.return()}finally{if(k)throw M}}}}catch(e){_=!0,g=e}finally{try{f||null==y.return||y.return()}finally{if(_)throw g}}}}catch(e){l=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(l)throw c}}e.compatibleTools=s}e.showLoading=!1}))}}},Ri=Object(at.a)(Pi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workflow-recommendations"},[n("div",{staticClass:"header-background"},[n("h4",[e._v(e._s(e.popoverHeaderText))])]),e._v(" "),e.showLoading?n("LoadingSpan",{attrs:{message:"Loading recommendations"}}):e._e(),e._v(" "),e.compatibleTools.length>0&&!e.isDeprecated?n("div",e._l(e.compatibleTools,(function(t){return n("div",{key:t.id},[n("i",{staticClass:"fa mr-1 fa-wrench"}),e._v(" "),n("a",{attrs:{href:"#",title:"Open tool",id:t.id},on:{click:function(n){return e.$emit("onCreate",t.id,n)}}},[e._v("\n                "+e._s(t.name)+"\n            ")])])})),0):e.isDeprecated?n("div",[e._v("\n        "+e._s(e.deprecatedMessage)+"\n    ")]):e._e(),e._v(" "),0!==e.compatibleTools.length||e.showLoading?e._e():n("div",[e._v("\n        "+e._s(e.noRecommendationsMessage)+"\n    ")])],1)}),[],!1,null,null,null).exports;mt.default.use(Di.a);var Ni={components:{LoadingSpan:$i.a,WorkflowRecommendations:Ri},data:function(){return{popoverShow:!1}},props:{id:{type:String,default:""},title:{type:String,default:"title"},type:{type:String,default:"tool"},node:{type:Object,default:null},nodeId:{type:String,default:""}},computed:{iconClass:function(){var e=Wn.a[this.type];return e?"icon fa fa-fw ".concat(e):null},popoverId:function(){return"popover-".concat(this.nodeId)},canClone:function(){return"subworkflow"!=this.type},isEnabled:function(){return Object(o.a)().config.enable_tool_recommendations}},methods:{onDestroy:function(){this.node.destroy()},onClone:function(){this.node.clone()},onCreate:function(e,t){var n=this,a={tool_id:e,type:"tool",_:"true"};Object(Un.c)(a).then((function(t){var a=n.node.app.create_node("tool",t.name,e);n.node.app.set_node(a,t),n.popoverShow=!1}))}}},zi=Object(at.a)(Ni,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"node-header unselectable clearfix"},[n("b-button",{staticClass:"node-destroy py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"clone node"},on:{click:e.onDestroy}},[n("i",{staticClass:"fa fa-times"})]),e._v(" "),e.isEnabled?n("b-button",{staticClass:"node-recommendations py-0 float-right",attrs:{id:e.popoverId,variant:"primary",size:"sm","aria-label":"tool recommendations"}},[n("i",{staticClass:"fa fa-arrow-right"})]):e._e(),e._v(" "),n("b-popover",{attrs:{target:e.popoverId,triggers:"hover",placement:"bottom",show:e.popoverShow},on:{"update:show":function(t){e.popoverShow=t}}},[n("WorkflowRecommendations",{attrs:{node:e.node},on:{onCreate:e.onCreate}})],1),e._v(" "),e.canClone?n("b-button",{staticClass:"node-clone py-0 float-right",attrs:{variant:"primary",size:"sm","aria-label":"clone node"},on:{click:e.onClone}},[n("i",{staticClass:"fa fa-files-o"})]):e._e(),e._v(" "),n("i",{class:e.iconClass}),e._v(" "),n("span",{staticClass:"node-title"},[e._v(e._s(e.title))])],1),e._v(" "),n("div",{staticClass:"node-body"},[n("div",[n("loading-span",{attrs:{message:"Loading details"}})],1)])])}),[],!1,null,null,null).exports,Fi=function(e){return new(mt.default.extend(Hi))({propsData:e,el:"#columns"})},Vi=function(e,t){return new(mt.default.extend(zi))({propsData:t,el:e})};function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bi={components:{Markdown:n(172).a},props:{pageId:{type:String,required:!0}},computed:{dataUrl:function(){return Object(u.getAppRoot)()+"api/pages/".concat(this.pageId)},exportUrl:function(){return this.dataUrl+".pdf"}},data:function(){return{markdownConfig:{}}},created:function(){this.ajaxCall()},methods:{ajaxCall:function(){var e=this;We.a.get(this.dataUrl).then((function(t){e.markdownConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){Wi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.data,{markdown:t.data.content})})).catch((function(e){console.error(e)}))}}},qi=Object(at.a)(Bi,(function(){var e=this.$createElement;return(this._self._c||e)("markdown",{attrs:{"markdown-config":this.markdownConfig,"export-link":this.exportUrl}})}),[],!1,null,null,null).exports,Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()("#page-display-content").each((function(t,n){var a=i()(n).attr("page_id"),o=mt.default.extend(qi);return e.pageId=a,new o({propsData:e}).$mount(n)}))},Gi=n(82);function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xi={props:{jobId:{type:String,required:!0}},created:function(){this.fetchJobDestinationParams(this.jobId)},computed:{jobDestinationParams:function(){return this.$store.getters.jobDestinationParams(this.jobId)}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){Qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(Gi.b)(["fetchJobDestinationParams"]))},Zi=Object(at.a)(Xi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"tabletip info_data_table",attrs:{id:"destination_parameters"}},[n("tbody",e._l(e.jobDestinationParams,(function(t,a){return n("tr",{key:a},[n("td",[e._v(e._s(a))]),e._v(" "),n("td",[e._v(e._s(t))])])})),0)])])}),[],!1,null,null,null).exports,eo=n(43),to=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(".job-destination-parameters").each((function(t,n){e.jobId=i()(n).attr("job_id"),Object(eo.a)(Zi)(e,n)}))},no=n(209),ao=n.n(no);function io(e){new s.b(e)}function oo(e){new C.GalaxyApp(e)}function so(e){new Ve.GalaxyApp(e)}function ro(e){const t=new _t.b([],{includeDeleted:e.includingDeleted,order:e.order,limitOnFirstFetch:e.limit,limitPerFetch:e.limit,currentHistoryId:e.current_history_id}),n=new xt.MultiPanelColumns({el:i()("#center").get(0),histories:t});t.fetchFirst({silent:!0}).done((function(){n.createColumns(),n.render(0)}))}function lo(e){return new Ln(e)}n.d(t,"trackster",(function(){return io})),n.d(t,"circster",(function(){return oo})),n.d(t,"library",(function(){return so})),n.d(t,"multiHistory",(function(){return ro})),n.d(t,"chart",(function(){return lo})),n.d(t,"chartUtilities",(function(){return co})),n.d(t,"getGalaxyInstance",(function(){return o.a})),n.d(t,"setGalaxyInstance",(function(){return o.b})),n.d(t,"TracksterUI",(function(){return s.a})),n.d(t,"phyloviz",(function(){return N})),n.d(t,"SweepsterVisualization",(function(){return X})),n.d(t,"SweepsterVisualizationView",(function(){return ae})),n.d(t,"pages",(function(){return ft})),n.d(t,"createTabularDatasetChunkedView",(function(){return j.d})),n.d(t,"History",(function(){return _t.a})),n.d(t,"HistoryContents",(function(){return gt.a})),n.d(t,"history",(function(){return Lt.b})),n.d(t,"HistoryViewAnnotated",(function(){return St})),n.d(t,"HistoryCopyDialog",(function(){return bt.a})),n.d(t,"HDAListItemEdit",(function(){return Dt.a})),n.d(t,"HDAModel",(function(){return Ct.a})),n.d(t,"LegacyGridView",(function(){return Et})),n.d(t,"create_chart",(function(){return Pt})),n.d(t,"create_histogram",(function(){return Rt})),n.d(t,"ToolshedGroups",(function(){return Bt})),n.d(t,"IES",(function(){return en})),n.d(t,"Toast",(function(){return oe})),n.d(t,"panels",(function(){return tn.a})),n.d(t,"show_in_overlay",(function(){return E})),n.d(t,"hide_modal",(function(){return O})),n.d(t,"show_message",(function(){return I})),n.d(t,"show_modal",(function(){return A})),n.d(t,"Modal",(function(){return Y})),n.d(t,"make_popupmenu",(function(){return q.b})),n.d(t,"make_popup_menus",(function(){return q.a})),n.d(t,"render_embedded_items",(function(){return nn.a})),n.d(t,"async_save_text",(function(){return an.a})),n.d(t,"initMasthead",(function(){return Rn})),n.d(t,"panelManagement",(function(){return Nn})),n.d(t,"mountMakoTags",(function(){return zn.a})),n.d(t,"mountJobMetrics",(function(){return Fn.b})),n.d(t,"mountJobParameters",(function(){return Vn.b})),n.d(t,"mountWorkflowEditor",(function(){return Fi})),n.d(t,"mountPageDisplay",(function(){return Ji})),n.d(t,"mountDestinationParams",(function(){return to})),n.d(t,"store",(function(){return ao.a}));const co={Datasets:jn,Jobs:En,Series:On}},function(e,t,n){"use strict";n.r(t);var a=n(268),i=n(467),o=n(468),s=n(1027),r=n(1030),l=n(61),c={options:{root:Object(l.a)()},bootstrapped:{},form_input_auto_focus:!1,sentry:{}},d=n(45);n.d(t,"config$",(function(){return m})),n.d(t,"set",(function(){return f})),n.d(t,"get",(function(){return _})),n.d(t,"getAppRoot",(function(){return g})),n.d(t,"addInitialization",(function(){return d.a}));const u=new a.a,h=u.pipe(Object(o.a)(e=>e instanceof Object),Object(s.a)((e,t)=>Object.assign({},e,t),c)),p=new i.a(c);h.subscribe(p);const m=p.asObservable().pipe(Object(o.a)(Boolean),Object(r.a)(100));function f(...e){e.forEach(e=>u.next(e))}function _(){return p.getValue()}function g(e="/"){let t=e;try{t=_().options.root}catch(n){try{t=Object(l.a)(e)}catch(e){console.warn("Unable to find index link in head",e)}}return t}},function(e,t,n){"use strict";var a=n(18),i=n(11),o=n(40),s=n(10),r=n.n(s),l=function(e){return Object(o.c)()+e};var c=n(70),d=n(155),u=n(159),h=n(47);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){return Object(o.c)()+e};i.default.use(a.a);var g={components:{ProgressBar:u.a},mixins:[d.a],props:{invocationId:{type:String,required:!0},provideContext:{type:Boolean,default:!0}},data:function(){return{stepStatesInterval:null,jobStatesInterval:null}},created:function(){this.pollStepStatesUntilTerminal(),this.pollJobStatesUntilTerminal()},computed:m({},Object(h.c)(["getInvocationById","getInvocationJobsSummaryById"]),{invocationState:function(){var e=this.getInvocationById(this.invocationId);return e?e.state:"new"},createdTime:function(){return this.getInvocationById(this.invocationId)?this.getInvocationById(this.invocationId).create_time:null},stepCount:function(){var e=this.getInvocationById(this.invocationId);return e?e.steps.length:null},stepStates:function(){var e={},t=this.getInvocationById(this.invocationId);if(!t)return{};var n=!0,a=!1,i=void 0;try{for(var o,s=t.steps[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;e[r.state]?e[r.state]+=1:e[r.state]=1}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return e},invocationLink:function(){return _("workflows/invocations/report?id=".concat(this.invocationId))},invocationPdfLink:function(){return _("api/invocations/".concat(this.invocationId,"/report.pdf"))},invocationSchedulingTerminal:function(){return"scheduled"==this.invocationState||"cancelled"==this.invocationState||"failed"==this.invocationState},jobStatesTerminal:function(){return this.jobStatesSummary&&this.jobStatesSummary.terminal()},stepScheduledPercent:function(){var e=0;return null!==this.stepCount&&(e=(this.stepStates.scheduled||0)/this.stepCount),e},stepOtherPercent:function(){return 1-this.stepScheduledPercent},stepStatesStr:function(){return"".concat(this.stepStates.scheduled||0," of ").concat(this.stepCount," steps successfully scheduled")},jobStatesStr:function(){var e="".concat(this.jobStatesSummary.states().ok||0," of ").concat(this.jobCount," jobs complete");return this.invocationSchedulingTerminal||(e+=" (total number of jobs will change until all steps fully scheduled)"),e},okMessage:function(){return"".concat(this.okCount," jobs completed successfully")},errorMessage:function(){return"".concat(this.errorCount," jobs failed")},runningMessage:function(){return"".concat(this.runningCount," jobs currently running")},jobStatesSummary:function(){var e=this.getInvocationJobsSummaryById(this.invocationId);return e?new c.a.JobStatesSummary(e):null}}),methods:m({},Object(h.b)(["fetchInvocationForId","fetchInvocationJobsSummaryForId"]),{pollStepStatesUntilTerminal:function(){clearInterval(this.stepStatesInterval),this.invocationSchedulingTerminal||(this.fetchInvocationForId(this.invocationId),this.stepStatesInterval=setInterval(this.pollStepStatesUntilTerminal,3e3))},pollJobStatesUntilTerminal:function(){clearInterval(this.jobStatesInterval),this.jobStatesTerminal||(this.fetchInvocationJobsSummaryForId(this.invocationId),this.jobStatesInterval=setInterval(this.pollJobStatesUntilTerminal,3e3))},onError:function(e){console.error(e)},cancelWorkflowScheduling:function(){var e,t;(e=this.invocationId,t=l("api/invocations/".concat(e)),r.a.delete(t)).catch(this.onError)}}),beforeDestroy:function(){clearInterval(this.jobStatesInterval),clearInterval(this.stepStatesInterval)}},v=(n(505),n(6)),y=Object(v.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.provideContext?n("span",[n("b",[e._v("Workflow Invocation State")]),e._v(" "),e.createdTime?n("span",[e._v(" (invoked at "+e._s(e.createdTime)+")")]):e._e()]):e._e(),e._v(" "),n("div",{class:{"context-wrapped":e.provideContext}},[n("div",[e._v("\n            Step Scheduling\n            "),e.stepCount&&!e.invocationSchedulingTerminal?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times",attrs:{title:"Cancel scheduling of workflow invocation"},on:{click:e.cancelWorkflowScheduling}}):e._e(),e._v(" "),e.stepCount?"cancelled"==e.invocationState?n("div",[n("progress-bar",{attrs:{note:"Invocation scheduling cancelled - expected jobs and outputs may not be generated","error-progress":1}})],1):"failed"==e.invocationState?n("div",[n("progress-bar",{attrs:{note:"Invocation scheduling failed - Galaxy administrator may have additional details in logs","error-progress":1}})],1):n("div",[n("progress-bar",{attrs:{note:e.stepStatesStr,"ok-progress":e.stepScheduledPercent,"new-progress":e.stepOtherPercent}})],1):n("div",[n("progress-bar",{attrs:{note:"Loading step state summary",loading:!0,"info-progress":1}})],1)]),e._v(" "),n("div",[e._v("\n            Job Execution\n            "),e.jobCount?n("div",[n("progress-bar",{attrs:{note:e.jobStatesStr,"ok-progress":e.okPercent,"running-progress":e.runningPercent,"new-progress":e.otherPercent,"error-progress":e.errorPercent,"ok-message":e.okMessage,"running-message":e.runningMessage,"error-message":e.errorMessage}})],1):n("div",[n("progress-bar",{attrs:{note:"Loading job summary",loading:!0,"info-progress":1}})],1)]),e._v(" "),e.invocationSchedulingTerminal&&e.jobStatesTerminal?n("span",[n("a",{attrs:{href:e.invocationLink}},[e._v("View Invocation Report")]),e._v(" "),n("a",{staticClass:"fa fa-print",attrs:{href:e.invocationPdfLink}})]):e._e()])])}),[],!1,null,"dabde51e",null).exports;n(0),n(43);n.d(t,"a",(function(){return y}))},function(e,t,n){"use strict";var a=n(4),i=n(98),o={props:["workflow"],computed:{urlEdit:function(){return"".concat(Object(a.getAppRoot)(),"workflow/editor?id=").concat(this.workflow.id)},urlDownload:function(){return"".concat(Object(a.getAppRoot)(),"api/workflows/").concat(this.workflow.id,"/download?format=json-download")},urlShare:function(){return"".concat(Object(a.getAppRoot)(),"workflow/sharing?id=").concat(this.workflow.id)},urlView:function(){return"".concat(Object(a.getAppRoot)(),"workflow/display_by_id?id=").concat(this.workflow.id)},urlViewShared:function(){return"".concat(Object(a.getAppRoot)(),"workflow/display_by_username_and_slug?username=").concat(this.workflow.owner,"&slug=").concat(this.workflow.slug)},icon:function(){return this.workflow.shared?"fa fa-share-alt":"fa fa-caret-down"}},created:function(){this.root=Object(a.getAppRoot)(),this.services=new i.a({root:this.root})},methods:{onCopy:function(){var e=this;this.services.copyWorkflow(this.workflow).then((function(t){e.$emit("onAdd",t),e.$emit("onSuccess","Successfully copied workflow '".concat(e.workflow.name,"' to '").concat(t.name,"'."))})).catch((function(t){e.$emit("onError",t)}))},onDelete:function(){var e=this,t=this.workflow.id,n=this.workflow.name;window.confirm("Are you sure you want to delete workflow '".concat(n,"'?"))&&this.services.deleteWorkflow(t).then((function(n){e.$emit("onRemove",t),e.$emit("onSuccess",n)})).catch((function(t){e.$emit("onError",t)}))},onRename:function(){var e=this,t=this.workflow.id,n=this.workflow.name,a=window.prompt("Enter a new name for workflow '".concat(n,"'"),n);if(a){var i={name:a};this.services.updateWorkflow(t,i).then((function(){e.$emit("onUpdate",t,i),e.$emit("onSuccess","Successfully changed name of workflow '".concat(n,"' to '").concat(a,"'."))})).catch((function(t){e.$emit("onError",t)}))}}}},s=n(6),r=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-link",{staticClass:"workflow-dropdown font-weight-bold",attrs:{id:"workflow-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("span",{class:e.icon}),e._v(" "),n("span",[e._v(e._s(e.workflow.name))])]),e._v(" "),e.workflow.description?n("p",[e._v(e._s(e.workflow.description))]):e._e(),e._v(" "),e.workflow.shared?n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onCopy(t)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),n("span",[e._v("Copy")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlViewShared}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),n("span",[e._v("View")])])]):n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"workflow-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:e.urlEdit}},[n("span",{staticClass:"fa fa-edit fa-fw mr-1"}),e._v(" "),n("span",[e._v("Edit")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onCopy(t)}}},[n("span",{staticClass:"fa fa-copy fa-fw mr-1"}),e._v(" "),n("span",[e._v("Copy")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlDownload}},[n("span",{staticClass:"fa fa-download fa-fw mr-1"}),e._v(" "),n("span",[e._v("Download")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onRename(t)}}},[n("span",{staticClass:"fa fa-signature fa-fw mr-1"}),e._v(" "),n("span",[e._v("Rename")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlShare}},[n("span",{staticClass:"fa fa-share-alt fa-fw mr-1"}),e._v(" "),n("span",[e._v("Share")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlView}},[n("span",{staticClass:"fa fa-eye fa-fw mr-1"}),e._v(" "),n("span",[e._v("View")])]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onDelete(t)}}},[n("span",{staticClass:"fa fa-trash fa-fw mr-1"}),e._v(" "),n("span",[e._v("Delete")])])])],1)}),[],!1,null,null,null);t.a=r.exports},,,,,,,,,,,,,,,,,function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},a=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(e){return function(t,n,o,s){var r=a(t),l=i[e][a(t)];return 2===r&&(l=l[n?0:1]),l.replace(/%d/i,t)}},s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-dz",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"أح_إث_ثلا_أر_خم_جم_سب".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},a={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(e){return function(t,i,o,s){var r=n(t),l=a[e][n(t)];return 2===r&&(l=l[i?0:1]),l.replace(/%d/i,t)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a,i;return"m"===n?t?"хвіліна":"хвіліну":"h"===n?t?"гадзіна":"гадзіну":e+" "+(a=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:t?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n].split("_"),a%10==1&&a%100!=11?i[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?i[1]:i[2])}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:t,mm:t,h:t,hh:t,d:"дзень",dd:t,M:"месяц",MM:t,y:"год",yy:t},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(function e(t){return t>9?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a=e+" ";switch(n){case"ss":return a+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return a+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return a+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return a+=1===e?"dan":"dana";case"MM":return a+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return a+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),a=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],i=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function o(e){return e>1&&e<5&&1!=~~(e/10)}function s(e,t,n,a){var i=e+" ";switch(n){case"s":return t||a?"pár sekund":"pár sekundami";case"ss":return t||a?i+(o(e)?"sekundy":"sekund"):i+"sekundami";case"m":return t?"minuta":a?"minutu":"minutou";case"mm":return t||a?i+(o(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":a?"hodinu":"hodinou";case"hh":return t||a?i+(o(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||a?"den":"dnem";case"dd":return t||a?i+(o(e)?"dny":"dní"):i+"dny";case"M":return t||a?"měsíc":"měsícem";case"MM":return t||a?i+(o(e)?"měsíce":"měsíců"):i+"měsíci";case"y":return t||a?"rok":"rokem";case"yy":return t||a?i+(o(e)?"roky":"let"):i+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n,a=this._calendarEl[e],i=t&&t.hours();return((n=a)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(a=a.apply(t)),a.replace("{}",i%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-SG",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";
//! moment.js locale configuration
e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:a?i[n][0]:i[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"ثانیه d%",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function a(e,a,i,o){var s="";switch(i){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"ss":return o?"sekunnin":"sekuntia";case"m":return o?"minuutin":"minuutti";case"mm":s=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":s=o?"tunnin":"tuntia";break;case"d":return o?"päivän":"päivä";case"dd":s=o?"päivän":"päivää";break;case"M":return o?"kuukauden":"kuukausi";case"MM":s=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":s=o?"vuoden":"vuotta"}return s=function(e,a){return e<10?a?n[e]:t[e]:e}(e,o)+" "+s}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ga",{months:["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Méitheamh","Iúil","Lúnasa","Meán Fómhair","Deaireadh Fómhair","Samhain","Nollaig"],monthsShort:["Eaná","Feab","Márt","Aibr","Beal","Méit","Iúil","Lúna","Meán","Deai","Samh","Noll"],monthsParseExact:!0,weekdays:["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Satharn"],weekdaysShort:["Dom","Lua","Mái","Céa","Déa","hAo","Sat"],weekdaysMin:["Do","Lu","Má","Ce","Dé","hA","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné aig] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d mí",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voranim",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?i[n][0]:i[n][1]}e.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પેહલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a=e+" ";switch(n){case"ss":return a+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return a+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return a+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return a+=1===e?"dan":"dana";case"MM":return a+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return a+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,a){var i=e;switch(n){case"s":return a||t?"néhány másodperc":"néhány másodperce";case"ss":return i+(a||t)?" másodperc":" másodperce";case"m":return"egy"+(a||t?" perc":" perce");case"mm":return i+(a||t?" perc":" perce");case"h":return"egy"+(a||t?" óra":" órája");case"hh":return i+(a||t?" óra":" órája");case"d":return"egy"+(a||t?" nap":" napja");case"dd":return i+(a||t?" nap":" napja");case"M":return"egy"+(a||t?" hónap":" hónapja");case"MM":return i+(a||t?" hónap":" hónapja");case"y":return"egy"+(a||t?" év":" éve");case"yy":return i+(a||t?" év":" éve")}return""}function a(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return a.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return a.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,a,i){var o=e+" ";switch(a){case"s":return n||i?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?o+(n||i?"sekúndur":"sekúndum"):o+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?o+(n||i?"mínútur":"mínútum"):n?o+"mínúta":o+"mínútu";case"hh":return t(e)?o+(n||i?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?o+"dagar":o+(i?"daga":"dögum"):n?o+"dagur":o+(i?"dag":"degi");case"M":return n?"mánuður":i?"mánuð":"mánuði";case"MM":return t(e)?n?o+"mánuðir":o+(i?"mánuði":"mánuðum"):n?o+"mánuður":o+(i?"mánuð":"mánuði");case"y":return n||i?"ár":"ári";case"yy":return t(e)?o+(n||i?"ár":"árum"):o+(n||i?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()<this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()<e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:{standalone:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),format:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(წამი|წუთი|საათი|წელი)/.test(e)?e.replace(/ი$/,"ში"):e+"ში"},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,n){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[១២៣៤៥៦៧៨៩០]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},a=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];e.defineLocale("ku",{months:a,monthsShort:a,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(e){return/ئێواره‌/.test(e)},meridiem:function(e,t,n){return e<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return n(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return n(e)}return n(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return n(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return n(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,a){return t?i(n)[0]:a?i(n)[1]:i(n)[2]}function a(e){return e%10==0||e>10&&e<20}function i(e){return t[e].split("_")}function o(e,t,o,s){var r=e+" ";return 1===e?r+n(0,t,o[0],s):t?r+(a(e)?i(o)[1]:i(o)[0]):s?r+i(o)[1]:r+(a(e)?i(o)[1]:i(o)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(e,t,n,a){return t?"kelios sekundės":a?"kelių sekundžių":"kelias sekundes"},ss:o,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function a(e,a,i){return e+" "+n(t[i],e,a)}function i(e,a,i){return n(t[i],e,a)}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(e,t){return t?"dažas sekundes":"dažām sekundēm"},ss:a,m:i,mm:a,h:i,hh:a,d:i,dd:a,M:i,MM:a,y:i,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,a){var i=t.words[a];return 1===a.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){switch(n){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}e.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,n){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function a(e,t,n,a){var i="";if(t)switch(n){case"s":i="काही सेकंद";break;case"ss":i="%d सेकंद";break;case"m":i="एक मिनिट";break;case"mm":i="%d मिनिटे";break;case"h":i="एक तास";break;case"hh":i="%d तास";break;case"d":i="एक दिवस";break;case"dd":i="%d दिवस";break;case"M":i="एक महिना";break;case"MM":i="%d महिने";break;case"y":i="एक वर्ष";break;case"yy":i="%d वर्षे"}else switch(n){case"s":i="काही सेकंदां";break;case"ss":i="%d सेकंदां";break;case"m":i="एका मिनिटा";break;case"mm":i="%d मिनिटां";break;case"h":i="एका तासा";break;case"hh":i="%d तासां";break;case"d":i="एका दिवसा";break;case"dd":i="%d दिवसां";break;case"M":i="एका महिन्या";break;case"MM":i="%d महिन्यां";break;case"y":i="एका वर्षा";break;case"yy":i="%d वर्षां"}return i.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात्री"===t?e<4?e:e+12:"सकाळी"===t?e:"दुपारी"===t?e>=10?e:e+12:"सायंकाळी"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात्री":e<10?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),a=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),a=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,a){return e?/-MMM-/.test(a)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function a(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var i=e+" ";switch(n){case"ss":return i+(a(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return i+(a(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return i+(a(e)?"godziny":"godzin");case"MM":return i+(a(e)?"miesiące":"miesięcy");case"yy":return i+(a(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,a){return e?""===a?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(a)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº"})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a=" ";return(e%100>=20||e>=100&&e%100==0)&&(a=" de "),e+a+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a,i;return"m"===n?t?"минута":"минуту":e+" "+(a=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),a%10==1&&a%100!=11?i[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?i[1]:i[2])}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:t,m:t,mm:t,h:"час",hh:t,d:"день",dd:t,M:"месяц",MM:t,y:"год",yy:t},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function a(e){return e>1&&e<5}function i(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"pár sekúnd":"pár sekundami";case"ss":return t||i?o+(a(e)?"sekundy":"sekúnd"):o+"sekundami";case"m":return t?"minúta":i?"minútu":"minútou";case"mm":return t||i?o+(a(e)?"minúty":"minút"):o+"minútami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?o+(a(e)?"hodiny":"hodín"):o+"hodinami";case"d":return t||i?"deň":"dňom";case"dd":return t||i?o+(a(e)?"dni":"dní"):o+"dňami";case"M":return t||i?"mesiac":"mesiacom";case"MM":return t||i?o+(a(e)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return t||i?"rok":"rokom";case"yy":return t||i?o+(a(e)?"roky":"rokov"):o+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i=e+" ";switch(n){case"s":return t||a?"nekaj sekund":"nekaj sekundami";case"ss":return i+=1===e?t?"sekundo":"sekundi":2===e?t||a?"sekundi":"sekundah":e<5?t||a?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||a?"minuti":"minutama":e<5?t||a?"minute":"minutami":t||a?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||a?"uri":"urama":e<5?t||a?"ure":"urami":t||a?"ur":"urami";case"d":return t||a?"en dan":"enim dnem";case"dd":return i+=1===e?t||a?"dan":"dnem":2===e?t||a?"dni":"dnevoma":t||a?"dni":"dnevi";case"M":return t||a?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||a?"mesec":"mesecem":2===e?t||a?"meseca":"mesecema":e<5?t||a?"mesece":"meseci":t||a?"mesecev":"meseci";case"y":return t||a?"eno leto":"enim letom";case"yy":return i+=1===e?t||a?"leto":"letom":2===e?t||a?"leti":"letoma":e<5?t||a?"leta":"leti":t||a?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,a){var i=t.words[a];return 1===a.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,a){var i=t.words[a];return 1===a.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"дан",dd:t.translate,M:"месец",MM:t.translate,y:"годину",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t?e:"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};e.defineLocale("tg",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Пагоҳ соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?e>=11?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,a,i){var o=function(e){var n=Math.floor(e%1e3/100),a=Math.floor(e%100/10),i=e%10,o="";return n>0&&(o+=t[n]+"vatlh"),a>0&&(o+=(""!==o?" ":"")+t[a]+"maH"),i>0&&(o+=(""!==o?" ":"")+t[i]),""===o?"pagh":o}(e);switch(a){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa’ tup",mm:n,h:"wa’ rep",hh:n,d:"wa’ jaj",dd:n,M:"wa’ jar",MM:n,y:"wa’ DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var a=e%10;return e+(t[a]||t[e%100-a]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n,a){var i={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return a?i[n][0]:t?i[n][0]:i[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var a=100*e+t;return a<600?"يېرىم كېچە":a<900?"سەھەر":a<1130?"چۈشتىن بۇرۇن":a<1230?"چۈش":a<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var a,i;return"m"===n?t?"хвилина":"хвилину":"h"===n?t?"година":"годину":e+" "+(a=+e,i={ss:t?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:t?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:t?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n].split("_"),a%10==1&&a%100!=11?i[0]:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?i[1]:i[2])}function n(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:n("[Сьогодні "),nextDay:n("[Завтра "),lastDay:n("[Вчора "),nextWeek:n("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[Минулої] dddd [").call(this);case 1:case 2:case 4:return n("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:t,m:t,mm:t,h:"годину",hh:t,d:"день",dd:t,M:"місяць",MM:t,y:"рік",yy:t},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(13))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(13))},,,,,,,,,function(e,t,n){"use strict";var a=n(0),i=n.n(a),o=n(3),s=n.n(o),r=n(4),l=n(5),c=n(44),d=n(16),u=s.a.Router.extend({initialize:function(e,t){this.page=e,this.options=t},executeUseRouter:function(e){var t=Object(r.getAppRoot)();return e.startsWith(t)&&(e=e.replace(t,"/")),this.push(e)},push:function(e,t){(t=t||{}).__identifer=Math.random().toString(36).substr(2),e+=-1==e.indexOf("?")?"?":"&";var n=i.a.param(t,!0);e+=n,Object(l.a)().params=t,this.navigate(e,{trigger:!0}),window.history.replaceState(window.history.state,"",window.location.pathname.replace(n,""))},execute:function(e,t,n){Object(l.a)().debug("router execute:",e,t,n);var a=c.a.parse(t.pop());t.push(a),e&&(this.authenticate(t,n)?e.apply(this,t):this.access_denied())},authenticate:function(e,t){return!0},access_denied:function(){this.page.display(new d.a.Message({status:"danger",message:"You must be logged in with proper credentials to make this request.",persistent:!0}))}});t.a=u},function(e,t,n){"use strict";var a=n(40),i=n(253),o=n(57),s=n(254),r=n(4),l=n(5),c={props:["history"],created:function(){this.root=Object(r.getAppRoot)()},computed:{urlView:function(){return"".concat(Object(r.getAppRoot)(),"histories/view?id=").concat(this.history.id)},urlShowStructure:function(){return"".concat(Object(r.getAppRoot)(),"histories/show_structure?id=").concat(this.history.id)},urlSharing:function(){return"".concat(Object(r.getAppRoot)(),"histories/sharing?id=").concat(this.history.id)}},methods:{onSwitch:function(){Object(l.a)().currHistoryPanel.switchToHistory(this.history.id)}}},d=n(6),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-link",{staticClass:"history-dropdown font-weight-bold",attrs:{id:"history-dropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n        "+e._s(e.history.name)+"\n    ")]),e._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"history-dropdown"}},[n("a",{staticClass:"dropdown-item",attrs:{href:e.urlView}},[e._v("View")]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:e.onSwitch}},[e._v("Switch To")]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlShowStructure}},[e._v("Structure")]),e._v(" "),n("a",{staticClass:"dropdown-item",attrs:{href:e.urlSharing}},[e._v("Sharing")])])],1)}),[],!1,null,null,null).exports,h=n(82),p=n(47);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={components:{WorkflowInvocationState:i.a,LoadingSpan:o.a,WorkflowDropdown:s.a,HistoryDropdown:u},props:{invocationItems:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0},noInvocationsMessage:{type:String},headerMessage:{type:String,default:""},ownerGrid:{type:Boolean,default:!0}},data:function(){return{invocationItemsModel:[],invocationFields:[{key:"details",label:""},{key:"workflow_id",label:"Workflow"},{key:"history_id",label:"History"},{key:"id",label:"Invocation ID"},{key:"state"},{key:"update_time",label:"Last Update"},{key:"create_time",label:"Invocation Time"}],status:""}},computed:f({},Object(p.c)(["getWorkflowByInstanceId","getHistoryById"]),{invocationItemsComputed:function(){return this.computeItems(this.invocationItems)}}),methods:f({},Object(h.b)(["fetchWorkflowForInstanceId","fetchHistoryForId"]),{editLink:function(e){return Object(a.c)()+"workflow/editor?id="+this.getWorkflowByInstanceId(e).id},computeItems:function(e){var t=this;return e.map((function(e){return t.ownerGrid&&(t.fetchWorkflowForInstanceId(e.workflow_id),t.fetchHistoryForId(e.history_id)),{id:e.id,create_time:e.create_time,update_time:e.update_time,workflow_id:e.workflow_id,history_id:e.history_id,state:e.state,_showDetails:!1}}))},swapRowDetails:function(e){e.toggleDetails()},handleError:function(e){console.error(e)}})},v=Object(d.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),e.headerMessage?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n        "+e._s(e.headerMessage)+"\n    ")]):e._e(),e._v(" "),e.loading?n("b-alert",{attrs:{variant:"info",show:""}},[n("loading-span",{attrs:{message:"Loading workflow invocation job data"}})],1):n("div",[e.invocationItemsComputed.length?n("b-table",{attrs:{fields:e.invocationFields,items:e.invocationItemsComputed,hover:"",striped:"","caption-top":"",busy:e.loading},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                These invocations are not finished scheduling - one or more steps are waiting on others steps to be\n                complete before the full structure of the jobs in the workflow can be determined.\n            ")]},proxy:!0},{key:"row-details",fn:function(e){return[n("b-card",[n("workflow-invocation-state",{attrs:{"invocation-id":e.item.id,"provide-context":!1}})],1)]}},{key:"cell(details)",fn:function(t){return[t.detailsShowing?e._e():n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-sm fa fa-chevron-down",attrs:{title:"Show Invocation Details"},on:{click:function(n){return n.stopPropagation(),e.swapRowDetails(t)}}}),e._v(" "),t.detailsShowing?n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"btn-sm fa fa-chevron-up",attrs:{title:"Hide Invocation Details"},on:{click:function(n){return n.stopPropagation(),e.swapRowDetails(t)}}}):e._e()]}},{key:"cell(workflow_id)",fn:function(t){return[e.ownerGrid&&e.getWorkflowByInstanceId(t.item.workflow_id)?n("div",[n("workflow-dropdown",{attrs:{workflow:e.getWorkflowByInstanceId(t.item.workflow_id)}})],1):n("div",[e._v("\n                    "+e._s(t.item.workflow_id)+"\n                ")])]}},{key:"cell(history_id)",fn:function(t){return[e.ownerGrid&&e.getHistoryById(t.item.history_id)?n("div",[n("history-dropdown",{attrs:{history:e.getHistoryById(t.item.history_id)}})],1):n("div",[e._v("\n                    "+e._s(t.item.history_id)+"\n                ")])]}}]),model:{value:e.invocationItemsModel,callback:function(t){e.invocationItemsModel=t},expression:"invocationItemsModel"}}):n("b-alert",{attrs:{variant:"secondary",show:""}},[e._v("\n            "+e._s(e.noInvocationsMessage)+"\n        ")])],1)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{staticClass:"mb-3"},[t("span",{attrs:{id:"invocations-title"}},[this._v("Workflow Invocations")])])}],!1,null,null,null);t.a=v.exports},function(e,t,n){"use strict";var a=n(10),i=n.n(a),o=n(11),s=n(18),r=n(5),l=n(40);o.default.use(s.a);var c={props:{registration_warning_message:{type:String,required:!1},server_mail_configured:{type:Boolean,required:!1},mailing_join_addr:{type:String,required:!1},redirect:{type:String,required:!1},terms_url:{type:String,required:!1}},data:function(){var e=Object(r.a)();return{disableCreate:!1,email:null,password:null,username:null,confirm:null,subscribe:null,messageText:null,messageVariant:null,session_csrf_token:e.session_csrf_token,isAdmin:e.user.isAdmin()}},computed:{messageShow:function(){return null!=this.messageText},showRegistrationWarning:function(){return null!=this.registration_warning_message}},methods:{toggleLogin:function(){this.$root.toggleLogin&&this.$root.toggleLogin()},submit:function(e){var t=this;this.disableCreate=!0;var n=Object(l.b)();i.a.post("".concat(n,"user/create"),this.$data).then((function(e){e.data.message&&e.data.status&&alert(e.data.message),window.location=t.redirect||n})).catch((function(e){t.disableCreate=!1,t.messageVariant="danger";var n=e.response.data&&e.response.data.err_msg;t.messageText=n||"Registration failed for an unknown reason."}))}}},d=n(6),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row justify-content-md-center"},[n("div",{staticClass:"col",class:{"col-lg-6":!e.isAdmin}},[n("b-alert",{attrs:{show:e.showRegistrationWarning,variant:"info"},domProps:{innerHTML:e._s(e.registration_warning_message)}}),e._v(" "),n("b-alert",{attrs:{show:e.messageShow,variant:e.messageVariant},domProps:{innerHTML:e._s(e.messageText)}}),e._v(" "),n("b-form",{attrs:{id:"registration"},on:{submit:function(t){return t.preventDefault(),e.submit()}}},[n("b-card",{attrs:{"no-body":"",header:"Create a Galaxy account"}},[n("b-card-body",[n("b-form-group",{attrs:{label:"Email Address"}},[n("b-form-input",{attrs:{name:"email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Password"}},[n("b-form-input",{attrs:{name:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Confirm password"}},[n("b-form-input",{attrs:{name:"confirm",type:"password"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"Public name"}},[n("b-form-input",{attrs:{name:"username",type:"text"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),n("b-form-text",[e._v("Your public name is an identifier that will be used to generate addresses for\n                                information you share publicly. Public names must be at least three characters in\n                                length and contain only lower-case letters, numbers, dots, underscores, and dashes\n                                ('.', '_', '-').")])],1),e._v(" "),e.mailing_join_addr&&e.server_mail_configured?n("b-form-group",{attrs:{label:"Subscribe to mailing list"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.subscribe,expression:"subscribe"}],attrs:{name:"subscribe",type:"checkbox"},domProps:{checked:Array.isArray(e.subscribe)?e._i(e.subscribe,null)>-1:e.subscribe},on:{change:function(t){var n=e.subscribe,a=t.target,i=!!a.checked;if(Array.isArray(n)){var o=e._i(n,null);a.checked?o<0&&(e.subscribe=n.concat([null])):o>-1&&(e.subscribe=n.slice(0,o).concat(n.slice(o+1)))}else e.subscribe=i}}})]):e._e(),e._v(" "),n("b-button",{attrs:{name:"create",type:"submit",disabled:e.disableCreate}},[e._v("Create")])],1),e._v(" "),e.isAdmin?e._e():n("b-card-footer",[e._v("\n                        Already have an account?\n                        "),n("a",{attrs:{id:"login-toggle",href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.preventDefault(),e.toggleLogin(t)}}},[e._v("Log in here.")])])],1)],1)],1),e._v(" "),e.terms_url?n("div",{staticClass:"col"},[n("b-embed",{attrs:{type:"iframe",src:e.terms_url,aspect:"1by1"}})],1):e._e()])])}),[],!1,null,null,null);t.a=u.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,function(e,t,n){var a={"./af":271,"./af.js":271,"./ar":272,"./ar-dz":273,"./ar-dz.js":273,"./ar-kw":274,"./ar-kw.js":274,"./ar-ly":275,"./ar-ly.js":275,"./ar-ma":276,"./ar-ma.js":276,"./ar-sa":277,"./ar-sa.js":277,"./ar-tn":278,"./ar-tn.js":278,"./ar.js":272,"./az":279,"./az.js":279,"./be":280,"./be.js":280,"./bg":281,"./bg.js":281,"./bm":282,"./bm.js":282,"./bn":283,"./bn.js":283,"./bo":284,"./bo.js":284,"./br":285,"./br.js":285,"./bs":286,"./bs.js":286,"./ca":287,"./ca.js":287,"./cs":288,"./cs.js":288,"./cv":289,"./cv.js":289,"./cy":290,"./cy.js":290,"./da":291,"./da.js":291,"./de":292,"./de-at":293,"./de-at.js":293,"./de-ch":294,"./de-ch.js":294,"./de.js":292,"./dv":295,"./dv.js":295,"./el":296,"./el.js":296,"./en-SG":297,"./en-SG.js":297,"./en-au":298,"./en-au.js":298,"./en-ca":299,"./en-ca.js":299,"./en-gb":300,"./en-gb.js":300,"./en-ie":301,"./en-ie.js":301,"./en-il":302,"./en-il.js":302,"./en-nz":303,"./en-nz.js":303,"./en-sg":304,"./en-sg.js":304,"./eo":305,"./eo.js":305,"./es":306,"./es-do":307,"./es-do.js":307,"./es-us":308,"./es-us.js":308,"./es.js":306,"./et":309,"./et.js":309,"./eu":310,"./eu.js":310,"./fa":311,"./fa.js":311,"./fi":312,"./fi.js":312,"./fo":313,"./fo.js":313,"./fr":314,"./fr-ca":315,"./fr-ca.js":315,"./fr-ch":316,"./fr-ch.js":316,"./fr.js":314,"./fy":317,"./fy.js":317,"./ga":318,"./ga.js":318,"./gd":319,"./gd.js":319,"./gl":320,"./gl.js":320,"./gom-latn":321,"./gom-latn.js":321,"./gu":322,"./gu.js":322,"./he":323,"./he.js":323,"./hi":324,"./hi.js":324,"./hr":325,"./hr.js":325,"./hu":326,"./hu.js":326,"./hy-am":327,"./hy-am.js":327,"./id":328,"./id.js":328,"./is":329,"./is.js":329,"./it":330,"./it-ch":331,"./it-ch.js":331,"./it.js":330,"./ja":332,"./ja.js":332,"./jv":333,"./jv.js":333,"./ka":334,"./ka.js":334,"./kk":335,"./kk.js":335,"./km":336,"./km.js":336,"./kn":337,"./kn.js":337,"./ko":338,"./ko.js":338,"./ku":339,"./ku.js":339,"./ky":340,"./ky.js":340,"./lb":341,"./lb.js":341,"./lo":342,"./lo.js":342,"./lt":343,"./lt.js":343,"./lv":344,"./lv.js":344,"./me":345,"./me.js":345,"./mi":346,"./mi.js":346,"./mk":347,"./mk.js":347,"./ml":348,"./ml.js":348,"./mn":349,"./mn.js":349,"./mr":350,"./mr.js":350,"./ms":351,"./ms-my":352,"./ms-my.js":352,"./ms.js":351,"./mt":353,"./mt.js":353,"./my":354,"./my.js":354,"./nb":355,"./nb.js":355,"./ne":356,"./ne.js":356,"./nl":357,"./nl-be":358,"./nl-be.js":358,"./nl.js":357,"./nn":359,"./nn.js":359,"./pa-in":360,"./pa-in.js":360,"./pl":361,"./pl.js":361,"./pt":362,"./pt-br":363,"./pt-br.js":363,"./pt.js":362,"./ro":364,"./ro.js":364,"./ru":365,"./ru.js":365,"./sd":366,"./sd.js":366,"./se":367,"./se.js":367,"./si":368,"./si.js":368,"./sk":369,"./sk.js":369,"./sl":370,"./sl.js":370,"./sq":371,"./sq.js":371,"./sr":372,"./sr-cyrl":373,"./sr-cyrl.js":373,"./sr.js":372,"./ss":374,"./ss.js":374,"./sv":375,"./sv.js":375,"./sw":376,"./sw.js":376,"./ta":377,"./ta.js":377,"./te":378,"./te.js":378,"./tet":379,"./tet.js":379,"./tg":380,"./tg.js":380,"./th":381,"./th.js":381,"./tl-ph":382,"./tl-ph.js":382,"./tlh":383,"./tlh.js":383,"./tr":384,"./tr.js":384,"./tzl":385,"./tzl.js":385,"./tzm":386,"./tzm-latn":387,"./tzm-latn.js":387,"./tzm.js":386,"./ug-cn":388,"./ug-cn.js":388,"./uk":389,"./uk.js":389,"./ur":390,"./ur.js":390,"./uz":391,"./uz-latn":392,"./uz-latn.js":392,"./uz.js":391,"./vi":393,"./vi.js":393,"./x-pseudo":394,"./x-pseudo.js":394,"./yo":395,"./yo.js":395,"./zh-cn":396,"./zh-cn.js":396,"./zh-hk":397,"./zh-hk.js":397,"./zh-tw":398,"./zh-tw.js":398};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=469},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(202);n.n(a).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(223),n(234),e.exports=n(1021)},function(e,t,n){"use strict";var a=n(447);n.n(a).a},function(e,t,n){"use strict";var a=n(448);n.n(a).a},function(e,t,n){"use strict";var a=n(449);n.n(a).a},function(e,t,n){"use strict";var a=n(450);n.n(a).a},function(e,t,n){"use strict";var a=n(451);n.n(a).a},function(e,t,n){"use strict";var a=n(452);n.n(a).a},function(e,t,n){"use strict";var a=n(453);n.n(a).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(40),i=n(5),o=n(2),s=n.n(o),r=n(183),l=n(50),c=n(44),d=n(407),u=n(4),h=n(10),p=n.n(h),m={name:"Message",props:{message:{type:String,required:!0},status:{type:String,default:"done"}}},f=n(6),_=Object(f.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return this.message?t("div",{class:[this.status+"message"]},[this._v(this._s(this.message))]):this._e()}),[],!1,null,null,null).exports,g={props:{isLoaded:{type:Boolean},title:{type:String},columns:{type:Array},rows:{type:Array}}},v=(n(951),Object(f.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._t("title",[e._v(e._s(e.title))])],2),e._v(" "),n("div",{staticClass:"card-body"},[n("table",{staticClass:"manage-table colored",attrs:{border:"0",cellspacing:"0",cellpadding:"0",width:"100%"}},[e._t("columns",e._l(e.columns,(function(t){return n("th",{key:t.dataIndex,attrs:{bgcolor:"#D8D8D8"}},[e._v(e._s(t.text))])}))),e._v(" "),e._t("rows",[e._l(e.rows,(function(t,a){return[n("tr",{class:[a%2==0?"tr":"odd_row"]},e._l(e.columns,(function(a){return n("td",{key:a.dataIndex},[e._v(e._s(t[a.dataIndex]))])})),0)]}))])],2),e._v(" "),void 0===e.isLoaded||e.isLoaded?e._e():n("div",{style:{textAlign:"center",padding:"7px 0"}},[e._v("\n            Loading...\n        ")])])])}),[],!1,null,null,null).exports),y={props:{isLoaded:{type:Boolean,required:!0},rows:{type:Array,required:!0}},data:function(){return{columns:[{text:"Name",dataIndex:"name"},{text:"Filename",dataIndex:"filename"},{text:"Tool data path",dataIndex:"tool_data_path"},{text:"Errors",dataIndex:"errors"}]}},components:{"base-grid":v},methods:{handleTableNameClick:function(e){this.$emit("changeview",e.target.text)}}},b=Object(f.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-grid",{attrs:{"is-loaded":e.isLoaded,columns:e.columns,id:"data-tables-grid"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Current data table registry contains "+e._s(e.rows.length)+" data tables ")]},proxy:!0},{key:"rows",fn:function(){return[e._l(e.rows,(function(t,a){return[n("tr",{key:t.id,class:[a%2==0?"tr":"odd_row"]},[n("td",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:e.handleTableNameClick}},[e._v(e._s(t.name))])]),e._v(" "),n("td",[e._v(e._s(t.filename))]),e._v(" "),n("td",[e._v(e._s(t.tool_data_path))]),e._v(" "),n("td",[e._v(e._s(t.errors))])])]}))]},proxy:!0}])})}),[],!1,null,null,null).exports,w={props:{dataManagerTableName:{type:String,required:!0},dataManagerColumns:{type:Array,required:!0},dataManagerItems:{type:Array,required:!0}},methods:{handleReloadButtonClick:function(e){this.$emit("reloaddatamanager",this.dataManagerTableName)}}},k={data:function(){return{currentView:"data-tables-grid",isLoaded:!1,dataTables:[],dataManagerTableName:"",dataManagerColumns:[],dataManagerItems:[],message:"",status:""}},components:{message:_,"data-tables-grid":b,"data-manager-grid":Object(f.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"tabletip"},[n("thead",[n("tr",[n("th",{staticStyle:{"font-size":"120%"},attrs:{colspan:e.dataManagerColumns.length}},[e._v("\n                Data Manager: "+e._s(e.dataManagerTableName)+"\n                "),n("a",{staticClass:"icon-btn",attrs:{href:"javascript:void(0)",title:"Reload "+e.dataManagerTableName+" tool data table"},on:{click:e.handleReloadButtonClick}},[n("span",{staticClass:"fa fa-refresh"})])])]),e._v(" "),n("tr",e._l(e.dataManagerColumns,(function(t){return n("th",[e._v(e._s(t))])})),0)]),e._v(" "),e._l(e.dataManagerItems,(function(t){return n("tbody",{key:t.value},[n("tr",e._l(e.dataManagerColumns,(function(a){return n("td",[e._v(e._s(t[a]))])})),0)])}))],2)}),[],!1,null,null,null).exports},computed:{currentProps:function(){return"data-tables-grid"===this.currentView?{isLoaded:this.isLoaded,rows:this.dataTables}:{dataManagerTableName:this.dataManagerTableName,dataManagerColumns:this.dataManagerColumns,dataManagerItems:this.dataManagerItems}}},methods:{showDataManager:function(e){var t=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/tool_data_table_items"),{params:{table_name:e}}).then((function(n){t.message=n.data.message,t.status=n.data.status,"error"!==n.data.status&&"warning"!==n.data.status&&(t.dataManagerTableName=e,t.dataManagerColumns=n.data.data.columns,t.dataManagerItems=n.data.data.items,t.currentView="data-manager-grid")})).catch((function(e){console.error(e)}))},reloadDataManager:function(e){var t=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/reload_tool_data_table"),{params:{table_name:e}}).then((function(e){t.message=e.data.message,t.status=e.data.status,"error"!==e.data.status&&"warning"!==e.data.status&&(t.dataManagerItems=e.data.data.items)})).catch((function(e){console.error(e)}))}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"admin/data_tables_list")).then((function(t){e.isLoaded=!0,e.dataTables=t.data.data,e.message=t.data.message,e.status=t.data.status})).catch((function(e){console.error(e)}))}},M=Object(f.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("message",{attrs:{message:e.message,status:e.status}}),e._v(" "),"error"!==e.status?n(e.currentView,e._b({tag:"component",on:{changeview:e.showDataManager,reloaddatamanager:e.reloadDataManager}},"component",e.currentProps,!1)):e._e()],1)}),[],!1,null,null,null).exports,x={components:{Message:_,BaseGrid:v},data:function(){return{showAllColumns:!1,keys:[],dataTypes:[],message:"",status:""}},methods:{prettyColumns:function(){return[{text:"Extension",dataIndex:"extension"},{text:"Type",dataIndex:"type"},{text:"MIME Type",dataIndex:"mimetype"},{text:"Display in Upload",dataIndex:"display_in_upload"}]}},computed:{columns:function(){var e=this.prettyColumns();if(this.keys.length>0&&this.showAllColumns){var t=this.keys,n=!0,a=!1,i=void 0;try{for(var o,s=function(){var e=o.value;t=t.filter((function(t){return t!==e.dataIndex}))},r=e[Symbol.iterator]();!(n=(o=r.next()).done);n=!0)s()}catch(e){a=!0,i=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw i}}e=t.reduce((function(e,t){var n=t[0].toUpperCase();return n+=t.slice(1).replace(/_/g," "),e.push({text:n,dataIndex:t}),e}),e)}return e},isDataLoaded:function(){return""!==status||this.dataTypes.length>0}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"admin/data_types_list")).then((function(t){e.keys=t.data.keys,e.dataTypes=t.data.data,e.message=t.data.message,e.status=t.data.status})).catch((function(e){console.error(e)}))}},L=Object(f.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Message",{attrs:{message:e.message,status:e.status}}),e._v(" "),"error"!==e.status?n("BaseGrid",{attrs:{columns:e.columns,rows:e.dataTypes,"is-loaded":e.isDataLoaded,id:"data-types-grid"},scopedSlots:e._u([{key:"title",fn:function(){return[n("p",[e._v("Current data types registry contains "+e._s(e.dataTypes.length)+" data types.")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllColumns,expression:"showAllColumns"}],attrs:{type:"checkbox",id:"showAllColumns"},domProps:{checked:Array.isArray(e.showAllColumns)?e._i(e.showAllColumns,null)>-1:e.showAllColumns},on:{change:function(t){var n=e.showAllColumns,a=t.target,i=!!a.checked;if(Array.isArray(n)){var o=e._i(n,null);a.checked?o<0&&(e.showAllColumns=n.concat([null])):o>-1&&(e.showAllColumns=n.slice(0,o).concat(n.slice(o+1)))}else e.showAllColumns=i}}}),e._v(" "),n("label",{attrs:{for:"showAllColumns"}},[e._v("Show all columns")])]},proxy:!0}],null,!1,1742876801)}):e._e()],1)}),[],!1,null,null,null).exports,T=n(203),S=n(109),D=n(110),C={components:{JobMetrics:S.a,JobParameters:D.a},props:{commandLine:{type:String,required:!0},jobId:{type:String,required:!0}}},j=(n(952),Object(f.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",[n("h5",[e._v("Command Line")]),e._v(" "),n("pre",{staticClass:"text-white bg-dark"},[n("code",{staticClass:"break-word"},[e._v(e._s(e.commandLine))])]),e._v(" "),n("h5",[e._v("Job Parameters")]),e._v(" "),n("job-parameters",{attrs:{"job-id":e.jobId,"include-title":!1}}),e._v(" "),n("h5",[e._v("Job Metrics")]),e._v(" "),n("job-metrics",{attrs:{"job-id":e.jobId,"include-title":!1}})],1)}),[],!1,null,"37ef07e0",null).exports),Y={data:function(){return{jobLock:!1,jobLockDisplay:!1}},watch:{jobLock:function(e){this.handleJobLock(p.a.put("".concat(Object(u.getAppRoot)(),"api/job_lock"),{active:this.jobLock}))}},methods:{initJobLock:function(){this.handleJobLock(p.a.get("".concat(Object(u.getAppRoot)(),"api/job_lock")))},handleJobLock:function(e){var t=this;e.then((function(e){t.jobLock=e.data.active,t.jobLockDisplay=e.data.active})).catch((function(e){console.error(e)}))}},created:function(){this.initJobLock()}},O=Object(f.a)(Y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-group",{attrs:{label:"Administrative Job Lock","label-for":"prevent-job-dispatching"}},[n("b-form-checkbox",{attrs:{id:"prevent-job-dispatching",switch:""},model:{value:e.jobLock,callback:function(t){e.jobLock=t},expression:"jobLock"}},[e._v("\n        Job dispatching is currently\n        "),n("strong",[e._v(e._s(e.jobLockDisplay?"locked":"unlocked"))])])],1)}),[],!1,null,null,null).exports;function A(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H={components:{UtcDate:T.a,JobDetails:j,JobLock:O},data:function(){return{jobsItems:[],jobsItemsModel:[],recentJobsItems:[],jobsFields:[{key:"job_info",label:"Job ID",sortable:!0},{key:"user"},{key:"tool_id",label:"Tool",tdClass:["break-word"]},{key:"state"},{key:"job_runner_name",label:"Job Runner"},{key:"job_runner_external_id",label:"PID/Cluster ID",sortable:!0}],cutoff:180,cutoffDisplay:180,selectedStopJobIds:[],selectedJobId:null,allSelected:!1,indeterminate:!1,stopMessage:"",filter:"",message:"",status:"",loading:!0,busy:!0}},watch:{selectedStopJobIds:function(e){0===e.length?(this.indeterminate=!1,this.allSelected=!1):e.length===this.jobsItemsModel.length?(this.indeterminate=!1,this.allSelected=!0):(this.indeterminate=!0,this.allSelected=!1)}},methods:{update:function(){var e=this;this.busy=!0;var t=[];t.push("cutoff=".concat(this.cutoff)),t=t.join("&"),p.a.get("".concat(Object(u.getAppRoot)(),"admin/jobs_list?").concat(t)).then((function(t){e.jobsItems=t.data.jobs,e.recentJobsItems=t.data.recent_jobs,e.cutoffDisplay=t.data.cutoff,e.message=t.data.message,e.status=t.data.status,e.loading=!1,e.busy=!1})).catch((function(t){e.message=t.response.data.err_msg,e.status="error",console.log(t.response)}))},onRefresh:function(){this.update()},onStopJobs:function(){var e=this;p.a.all(this.selectedStopJobIds.map((function(t){return function(e,t){var n="".concat(Object(u.getAppRoot)(),"api/jobs/").concat(e);return p.a.delete(n,{data:{message:t}})}(t,e.stopMessage)}))).then((function(t){e.update(),e.selectedStopJobIds=[],e.stopMessage=""}))},clickJobInfo:function(e){this.selectedJobId=e,this.$refs["job-info-modal"].show()},resetModalContents:function(){this.selectedJobId=null},showRowDetails:function(e,t,n){"A"!=n.target.nodeName&&(e._showDetails=!e._showDetails)},translateState:function(e){return{ok:"success",error:"danger",new:"primary",queued:"secondary",running:"info",upload:"dark"}[e]||"primary"},computeItems:function(e){var t=this;return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{_showDetails:!1,_cellVariants:{state:t.translateState(e.state)}})}))},computeFields:function(e){return Array.from(e).slice(0)},toggleAll:function(e){this.selectedStopJobIds=e?this.jobsItemsModel.reduce((function(e,t){return[].concat(A(e),[t.id])}),[]):[]},galaxyKwdToBootstrap:function(e){var t="info";""!==e&&(t=e);var n={done:"success",info:"info",warning:"warning",error:"danger"};return t in n?n[t]:t}},computed:{jobsItemsComputed:function(){return this.computeItems(this.jobsItems)},recentJobsItemsComputed:function(){return this.computeItems(this.recentJobsItems)},jobsFieldsComputed:function(){var e=this.jobsFields.slice(0);return e.splice(0,0,{key:"selected",label:""}),e.splice(2,0,{key:"update_time",label:"Last Update",sortable:!0}),this.computeFields(e)},recentJobsFieldsComputed:function(){var e=this.jobsFields.slice(0);return e.splice(2,0,{key:"update_time",label:"Finished",sortable:!0}),this.computeFields(e)},selectedJobUrl:function(){return"".concat(Object(u.getAppRoot)(),"admin/job_info?jobid=").concat(this.selectedJobId)}},created:function(){this.update()}},$=(n(953),Object(f.a)(H,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-container",{staticClass:"mb-3"},[n("b-row",[n("b-col",{attrs:{md:"6"}},[n("h2",[n("span",{attrs:{id:"jobs-title"}},[e._v("Jobs")])])]),e._v(" "),n("b-col",[n("job-lock")],1)],1)],1),e._v(" "),""!==this.message?n("b-alert",{attrs:{variant:e.galaxyKwdToBootstrap(e.status),show:""}},[e._v("\n        "+e._s(e.message)+"\n    ")]):e._e(),e._v(" "),n("b-alert",{attrs:{variant:"info",show:""}},[n("p",[e._v("\n            Unfinished and recently finished jobs are displayed on this page. The 'cutoff' input box will do two\n            things -- it will limit the display of unfinished jobs to only those jobs that have not had their job\n            state updated recently, and it will limit the recently finished jobs list to only displaying jobs that\n            have finished since the cutoff.\n        ")]),e._v('\n        If any jobs are displayed, you may choose to stop them. Your stop message will be displayed to the user as:\n        "This job was stopped by an administrator: '),n("strong",[e._v("<YOUR MESSAGE>")]),e._v(' For more information or\n        help, report this error".\n    ')]),e._v(" "),e.loading?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n        Waiting for data\n    ")]):n("div",[n("b-container",{staticClass:"mb-3"},[n("b-row",[n("b-col",{attrs:{md:"6"}},[n("b-form",{attrs:{name:"jobs"},on:{submit:function(t){return t.preventDefault(),e.onRefresh(t)}}},[n("b-form-group",{attrs:{id:"cutoff",label:"Update Jobs","label-for":"cutoff-seconds",description:"Cutoff in seconds"}},[n("b-input-group",[n("b-form-input",{attrs:{id:"cutoff",type:"number",placeholder:"180"},model:{value:e.cutoff,callback:function(t){e.cutoff=t},expression:"cutoff"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{type:"submit"}},[e._v("Refresh")])],1)],1)],1)],1)],1)],1),e._v(" "),n("b-row",[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{label:"Filter Jobs","label-for":"filter-regex",description:"Search for strings or regular expressions"}},[n("b-input-group",{attrs:{id:"filter-regex"}},[n("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filter=""}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1),e._v(" "),n("b-col",[e.jobsItemsComputed.length?n("b-card",{attrs:{header:"Stop Selected Jobs"}},[n("b-form",{on:{submit:function(t){return t.preventDefault(),e.onStopJobs(t)}}},[n("b-form-group",{attrs:{"label-for":"stop-message",description:"will be displayed to the user"}},[n("b-input-group",[n("b-form-input",{attrs:{id:"stop-message",placeholder:"Stop message",required:""},model:{value:e.stopMessage,callback:function(t){e.stopMessage=t},expression:"stopMessage"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)],1)],1):e._e()],1)],1)],1),e._v(" "),e.jobsItemsComputed.length?n("b-table",{attrs:{fields:e.jobsFieldsComputed,items:e.jobsItemsComputed,filter:e.filter,hover:"",responsive:"",striped:"","caption-top":"",busy:e.busy},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                Unfinished Jobs: These jobs are unfinished and have had their state updated in the previous\n                "+e._s(e.cutoffDisplay)+" seconds.\n            ")]},proxy:!0},{key:"head(selected)",fn:function(){return[n("b-form-checkbox",{attrs:{indeterminate:e.indeterminate},on:{change:e.toggleAll},model:{value:e.allSelected,callback:function(t){e.allSelected=t},expression:"allSelected"}})]},proxy:!0},{key:"cell(selected)",fn:function(t){return[n("b-form-checkbox",{key:t.index,attrs:{checked:e.allSelected,value:t.item.id},model:{value:e.selectedStopJobIds,callback:function(t){e.selectedStopJobIds=t},expression:"selectedStopJobIds"}})]}},{key:"cell(job_info)",fn:function(t){return[n("b-link",{attrs:{href:t.value.info_url},on:{click:function(n){return n.preventDefault(),e.clickJobInfo(t.value.id)}}},[e._v("\n                    "+e._s(t.value.id)+"\n                ")])]}},{key:"row-details",fn:function(e){return[n("job-details",{attrs:{"command-line":e.item.command_line,"job-id":e.item.jobId}})]}}]),model:{value:e.jobsItemsModel,callback:function(t){e.jobsItemsModel=t},expression:"jobsItemsModel"}}):n("b-alert",{attrs:{variant:"secondary",show:""}},[e._v("\n            There are no unfinished jobs to show with current cutoff time.\n        ")]),e._v(" "),e.recentJobsItemsComputed.length?n("b-table",{attrs:{fields:e.recentJobsFieldsComputed,items:e.recentJobsItemsComputed,filter:e.filter,hover:"",responsive:"",striped:"","caption-top":"",busy:e.busy},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                Recent Jobs: These jobs have completed in the previous "+e._s(e.cutoffDisplay)+" seconds.\n            ")]},proxy:!0},{key:"cell(job_info)",fn:function(t){return[n("b-link",{attrs:{href:t.value.info_url},on:{click:function(n){return n.preventDefault(),e.clickJobInfo(t.value.id)}}},[e._v("\n                    "+e._s(t.value.id)+"\n                ")])]}},{key:"cell(update_time)",fn:function(e){return[n("utc-date",{attrs:{date:e.value,mode:"elapsed"}})]}},{key:"row-details",fn:function(e){return[n("job-details",{attrs:{"command-line":e.item.command_line,"job-id":e.item.id}})]}}])}):n("b-alert",{attrs:{variant:"secondary",show:""}},[e._v("\n            There are no recently finished jobs to show with current cutoff time.\n        ")]),e._v(" "),n("b-modal",{ref:"job-info-modal",attrs:{scrollable:"","hide-header":"","ok-only":""},on:{hidden:e.resetModalContents}},[n("div",{staticClass:"info-frame-container"},[n("iframe",{attrs:{src:e.selectedJobUrl}})])])],1)],1)}),[],!1,null,null,null).exports),P=n(408),R=n(26);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){V(o,a,i,s,r,"next",e)}function r(e){V(o,a,i,s,r,"throw",e)}s(void 0)}))}}function W(){var e="".concat(Object(u.getAppRoot)(),"api/display_applications");return p.a.get(e)}function B(e){var t="".concat(Object(u.getAppRoot)(),"api/display_applications/reload");return p.a.post(t,{ids:e})}function q(){var e="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories?uninstalled=False");return p.a.get(e)}function J(e){var t="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories/reset_metadata_on_selected_installed_repositories?repository_ids=").concat(e);return p.a.post(t)}function G(){return(G=U(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n="".concat(Object(u.getAppRoot)(),"api/dependency_resolvers/unused_paths"),e.prev=2,e.next=5,p.a.get(n,{params:t});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function K(){return(K=U(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object(u.getAppRoot)(),"api/dependency_resolvers/unused_paths"),e.prev=1,e.next=4,p.a.put(n,{paths:t});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(R.b)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Q(){return(Q=U(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||{},a="".concat(Object(u.getAppRoot)(),"api/dependency_resolvers/toolbox"),e.prev=2,e.next=5,p.a.get(a,{params:n});case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function X(){return(X=U(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=z({},n,{tool_ids:t}),i="".concat(Object(u.getAppRoot)(),"api/dependency_resolvers/toolbox/install"),e.prev=2,e.next=5,p.a.post(i,a);case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Z(){return(Z=U(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=z({},n,{tool_ids:t}),i="".concat(Object(u.getAppRoot)(),"api/dependency_resolvers/toolbox/uninstall"),e.prev=2,e.next=5,p.a.post(i,a);case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ee(){return(ee=U(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t||{},a="".concat(Object(u.getAppRoot)(),"api/container_resolvers/toolbox"),e.prev=2,e.next=5,p.a.get(a,{params:n});case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function te(){return(te=U(regeneratorRuntime.mark((function e(t,n){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n||{},i="".concat(Object(u.getAppRoot)(),"api/container_resolvers/toolbox/install"),t&&t.length>0&&(a.tool_ids=t||[]),e.prev=3,e.next=6,p.a.post(i,a);case 6:return o=e.sent,e.abrupt("return",o.data);case 10:e.prev=10,e.t0=e.catch(3),Object(R.b)(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}var ne={components:{Invocations:P.a},data:function(){return{invocationItems:[],loading:!0}},created:function(){var e,t=this;(e="".concat(Object(u.getAppRoot)(),"api/invocations"),p.a.get(e,{params:{include_terminal:"false"}})).then((function(e){t.invocationItems=e.data,t.loading=!1})).catch(this.handleError)},methods:{handleError:function(e){console.error(e)}}},ae=Object(f.a)(ne,(function(){var e=this.$createElement;return(this._self._c||e)("invocations",{attrs:{"invocation-items":this.invocationItems,loading:this.loading,"header-message":"Workflow invocations that are still being scheduled are displayed on this page.","no-invocations-message":"There are no scheduling workflow invocations to show currently.","owner-grid":!1}})}),[],!1,null,null,null).exports,ie=n(11),oe=n(18),se=n(1),re=n.n(se),le=n(57),ce={components:{LoadingSpan:le.a},props:{loading:{type:Boolean,required:!0},loadingMessage:{type:String,required:!0},error:{type:String,default:null}}},de=Object(f.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):n("div",[e._t("header"),e._v(" "),e.loading?n("loading-span",{attrs:{message:e.loadingMessage}}):n("div",[e._t("actions"),e._v(" "),e._t("body"),e._v(" "),e._t("actions")],2)],2)])}),[],!1,null,null,null).exports,ue={props:{object:{type:Object,required:!0}},computed:{asJson:function(){return JSON.stringify(this.object)}}},he=Object(f.a)(ue,(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"fa fa-code",attrs:{title:this.asJson}})}),[],!1,null,null,null).exports,pe={components:{DisplayRaw:he},props:{dependencyResolver:{type:Object},compact:{type:Boolean,default:!1}},computed:{resolverType:function(){return this.dependencyResolver&&this.dependencyResolver.resolver_type}}},me=Object(f.a)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"dependency-resolver"},[e.dependencyResolver?n("span",["conda"==e.dependencyResolver.resolver_type?n("span",[e._v("\n            A Conda dependency resolver was used with prefix "),n("tt",[e._v(e._s(e.dependencyResolver.prefix))]),e._v(" and channels\n            "),n("tt",[e._v(e._s(e.dependencyResolver.ensure_channels))]),e._v(".\n            "),e.dependencyResolver.use_local?n("span",[e._v("\n                Local Conda packages are enabled for this resolver (this is not best practice for production but may\n                be useful for development).\n            ")]):n("span",[e._v("\n                Local Conda packages are disabled for this resolver (this is best practice for production).\n            ")])],1):n("span",[e._v("\n            A dependency resolver of type "+e._s(e.dependencyResolver.resolver_type)+" was used to resolve these\n            dependencies.\n        ")]),e._v(" "),n("display-raw",{attrs:{object:e.dependencyResolver}})],1):n("span",[e._v("\n        no dependency resolver\n    ")])])}),[],!1,null,null,null).exports,fe={props:{requirement:{type:Object,required:!0}}},_e=Object(f.a)(fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"requirement"},[n("b",{staticClass:"requirement-name"},[e._v(e._s(e.requirement.name))]),e._v(" "),e.requirement.version?n("span",{staticClass:"requirement-version"},[e._v("@"+e._s(e.requirement.version))]):e._e()])}),[],!1,null,null,null).exports,ge={components:{Requirement:_e},props:{requirements:{type:Array,required:!0}}},ve=Object(f.a)(ge,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"requirements-cell"},[0==this.requirements.length?t("span",[t("i",[this._v("no requirements defined")])]):this._l(this.requirements,(function(e,n){return t("div",{key:n},[t("requirement",{attrs:{requirement:e}})],1)}))],2)}),[],!1,null,null,null).exports,ye={conda:"The Conda package manager will be used for resolution. ",galaxy_package:"A manually configured Galaxy package directory will be used for resolution. ",tool_shed_packages:"Legacy Tool Shed package installations will be used for resolution. ",docker:"Resolution of dependencies is assumed to be handled by specified Docker container. ",singularity:"Resolution of dependencies is assumed to be handled by specified Singularity container. "};function be(e){var t;t=e.exact?"This dependency is assumed to exactly match the requirement ":"Ignoring version information this dependency is assumed to match the requirement ";var n=e.name||"";return e.version&&(n+=" at version ".concat(e.version)),"".concat(t).concat(n,". ")}var we={components:{DisplayRaw:he},props:{status:{type:Object,required:!0},allStatuses:{type:Array,default:null},compact:{type:Boolean,default:!0}},computed:{merged:function(){return"MergedCondaDependency"==this.status.model_class||"ContainerDependency"==this.status.model_class},mergedMultiple:function(){return this.merged&&null!=this.allStatuses&&this.allStatuses.length>1},description:function(){var e=this.status.dependency_type,t=ye[e]||"The dependency resolver ".concat(e," will be used for resolution.");if("conda"==e&&(t+="The Conda environment found at ".concat(this.status.environment_path," will be used for resolution. ")),this.mergedMultiple){var n=!0,a=!1,i=void 0;try{for(var o,s=this.allStatuses[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){t+=be(o.value)}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}else this.status.name&&(t+=be(this.status));return t},title:function(){return this.compact?this.description:""}}},ke=Object(f.a)(we,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"dependency-status"},[e.status.dependency_type?n("span",{attrs:{title:e.title}},[n("b",[n("span",{staticClass:"fa fa-check text-success"}),e._v(e._s(e.status.dependency_type)+"\n            "),e.mergedMultiple?n("span",[e._v("(merged)")]):e._e()]),e._v(" "),e.compact?e._e():n("span",[e._v(e._s(e.description)+" "),n("display-raw",{attrs:{object:e.status}})],1)]):n("b",[n("span",{staticClass:"fa fa-times text-danger"}),n("i",[e._v("unresolved")])])])}),[],!1,null,null,null).exports,Me={components:{StatusDisplay:ke},props:{statuses:{type:Array,required:!0},compact:{type:Boolean,default:!0}},computed:{merged:function(){return this.statuses.length>=1&&"MergedCondaDependency"==this.statuses[0].model_class}}},xe=Object(f.a)(Me,(function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"dependency-statuses"},[0==this.statuses.length?t("b",[t("span",{staticClass:"fa fa-times text-danger"}),t("i",[this._v("unresolved")])]):this.merged?t("span",[t("status-display",{attrs:{status:this.statuses[0],"all-statuses":this.statuses}})],1):this._l(this.statuses,(function(e,n){return t("div",{key:n},[t("status-display",{attrs:{status:e}})],1)}))],2)}),[],!1,null,null,null).exports,Le={components:{DisplayRaw:he},props:{containerDescription:{type:Object},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.description:""},description:function(){return"This is a ".concat(this.containerDescription.type," container. ").concat(this.shellDescription)},shellDescription:function(){return"This container uses shell [".concat(this.containerDescription.shell,"].")},identifier:function(){return this.containerDescription&&this.containerDescription.identifier},externalUrl:function(){var e=this.identifier;return e&&e.startsWith("quay.io")?"http://"+e:null}}},Te=Object(f.a)(Le,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"container-description"},[e.containerDescription?n("span",{attrs:{title:e.title}},[e.externalUrl?n("a",{staticClass:"icon-btn",attrs:{href:e.externalUrl}},[n("span",{staticClass:"fa fa-link"})]):e._e(),e._v("\n        "+e._s(e.containerDescription.identifier)+"\n        "),e.compact?e._e():n("span",[n("i",[e._v(e._s(e.description))]),e._v(" "),n("display-raw",{attrs:{object:e.containerDescription}})],1)]):n("span",[n("i",[e._v("no container resolved")])])])}),[],!1,null,null,null).exports,Se={explicit:"This explicit container resolver looks for containers annotated as part of the tool description - independent of tool requirements and Galaxy configuration.",mulled:"The mulled container resolver fetches pre-built Docker containers based on hashing a tool's requirements.",mulled_singularity:"The mulled_singularity container resolver fetches pre-built Singularity containers based on hashing a tool requirements.",cached_mulled:"The cached_mulled container resolver finds mulled containers cached on the Galaxy server and discovered with `docker images`.",cached_mulled_singularity:"The cached_mulled_singularity container resolver finds mulled containers cached in a directory mounted by the Galaxy server.",build_mulled:"",build_mulled_cached:""},De={components:{DisplayRaw:he},props:{containerResolver:{type:Object},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.description:""},description:function(){var e=Se[this.resolverType]||"Container resolver of type ".concat(this.resolverType,".");return"".concat(e)},resolverType:function(){return this.containerResolver&&this.containerResolver.resolver_type}}},Ce=Object(f.a)(De,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"container-resolver"},[e.containerResolver?n("span",{attrs:{title:e.title}},[e._v("\n        "+e._s(e.resolverType)+"\n        "),e.compact?e._e():n("span",[n("i",[e._v(e._s(e.description))]),e._v(" "),n("display-raw",{attrs:{object:e.containerResolver}})],1)]):e.compact?n("span"):n("span",[n("i",[e._v("no container resolver")])])])}),[],!1,null,null,null).exports,je={props:{toolId:{type:String,required:!0},toolVersion:{type:String,default:null}},computed:{showVersion:function(){return this.toolVersion&&!this.toolId.endsWith(this.toolVersion)}}},Ye=Object(f.a)(je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"tool-display"},[n("b",{staticClass:"tool-id"},[e._v(e._s(e.toolId))]),e.showVersion?n("span",[e._v("@"+e._s(e.toolVersion))]):e._e()])}),[],!1,null,null,null).exports,Oe={components:{ToolDisplay:Ye},props:{toolIds:{type:Array,required:!0},compact:{type:Boolean,default:!0}},computed:{title:function(){return this.compact?this.toolIds.join(", "):""}}},Ae=Object(f.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tools",attrs:{title:e.title}},[1==e.toolIds.length?n("span",[n("tool-display",{attrs:{"tool-id":e.toolIds[0]}})],1):e.compact?n("span",[e._v(" "+e._s(e.toolIds.length)+" tools ")]):e._l(e.toolIds,(function(e,t){return n("div",{key:t},[n("tool-display",{attrs:{"tool-id":e}})],1)}))],2)}),[],!1,null,null,null).exports,Ie={components:{ContainerDescription:Te,ContainerResolver:Ce,DependencyIndexWrapper:de,DependencyResolver:me,Requirements:ve,StatusDisplay:ke,Statuses:xe,ToolDisplay:Ye,Tools:Ae},created:function(){this.root=Object(u.getAppRoot)(),this.load()},computed:{hasSelection:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.items[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){if(a.value.selected)return!0}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}},methods:{showRowDetails:function(e,t,n){"A"!=n.target.nodeName&&(e._showDetails=!e._showDetails)},handleError:function(e){this.error=e}}},Ee={components:{ContainerDescription:Te,ContainerResolver:Ce,Requirements:ve,StatusDisplay:ke,ToolDisplay:Ye,Tools:Ae},props:{resolution:{type:Object,required:!0}},computed:{singleTool:function(){return null!=this.resolution.tool_id}}},He=Object(f.a)(Ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e.singleTool||1==e.resolution.tool_ids.length?n("span",[e._v("Tool")]):n("span",[e._v("Tools")])]),e._v(" "),n("div",{staticClass:"col-8"},[e.singleTool?n("div",[n("tool-display",{attrs:{"tool-id":e.resolution.tool_id}})],1):n("div",[n("tools",{attrs:{"tool-ids":e.resolution.tool_ids,compact:!1}})],1)])]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n            Requirements\n        ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("requirements",{attrs:{requirements:e.resolution.requirements}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n            Status Display\n        ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("status-display",{attrs:{status:e.resolution.status,compact:!1}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n            Container\n        ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("container-description",{attrs:{"container-description":e.resolution.status.container_description,compact:!1}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n            Container Resolver\n        ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("container-resolver",{attrs:{"container-resolver":e.resolution.status.container_resolver,compact:!1}})],1)])])}),[],!1,null,null,null).exports;ie.default.use(oe.a);var $e=re.a.keys(Se).map((function(e){return{value:e,text:e}}));$e.splice(0,0,{value:null,text:"*any*"});var Pe={mixins:[Ie],components:{ContainerResolutionDetails:He},data:function(){return{error:null,loading:!0,fields:[{key:"selected",label:""},{key:"tool"},{key:"requirement",label:"Requirements"},{key:"resolution"},{key:"resolver"},{key:"container"}],containerType:null,containerTypeOptions:[{value:null,text:"*any*"},{value:"docker",text:"Docker"},{value:"singularity",text:"Singularity"}],resolverType:null,resolverTypeOptions:$e,filterResolution:null,filterResolverType:null,filterContainerType:null,resolutions:[]}},methods:{load:function(){var e=this;this.loading=!0,function(e){return ee.apply(this,arguments)}(this.apiParams()).then((function(t){e.resolutions=t,e.loading=!1})).catch(this.handleError)},installSelected:function(){var e=this;this.loading=!0,function(e,t){return te.apply(this,arguments)}(this.selectedToolIds(),this.apiParams()).then((function(t){e.resolutions=t,e.loading=!1})).catch(this.handleError)},apiParams:function(){var e={};return this.containerType&&(e.container_type=this.containerType),this.resolverType&&(e.resolver_type=this.resolverType),e},selectedToolIds:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,o=this.items[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.selected){var r=s.tool;r&&e.push(r[0])}}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}},watch:{containerType:function(e){this.load()},resolverType:function(e){this.load()},filterResolution:function(e){"unresolved"==e&&(this.filterResolverType=null,this.filterContainerType=null)}},computed:{items:function(){var e=this;return this.resolutions.filter((function(t){return("unresolved"!=e.filterResolution||null==t.status.dependency_type)&&(("resolved"!=e.filterResolution||null!=t.status.dependency_type)&&(!(e.filterContainerType&&(!t.status.container_description||t.status.container_description.type!=e.filterContainerType))&&!(e.filterResolverType&&(!t.status.container_description||t.status.container_resolver.resolver_type!=e.filterResolverType))))})).map((function(e){return{selected:!1,requirements:e.requirements,status:e.status,tool_id:e.tool_id,_showDetails:!1}}))}}},Re=Object(f.a)(Pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dependency-index-wrapper",{attrs:{error:e.error,loading:e.loading,"loading-message":"Loading container resolution information"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-row",{staticClass:"m-1"},[n("b-form",{attrs:{inline:""}},[n("b",[e._v("Resolution:")]),e._v(" "),n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-container-type"}},[e._v("Resolve containers of type")]),e._v(" "),n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-container-type",options:e.containerTypeOptions},model:{value:e.containerType,callback:function(t){e.containerType=t},expression:"containerType"}}),e._v(" "),n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-resolver-type"}},[e._v("using resolvers of type")]),e._v(" "),n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-resolver-type",options:e.resolverTypeOptions},model:{value:e.resolverType,callback:function(t){e.resolverType=t},expression:"resolverType"}})],1)],1),e._v(" "),n("b-row",{staticClass:"m-1"},[n("b-form",{attrs:{inline:""}},[n("b",[e._v("Filter:")]),e._v(" "),n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolution"}},[e._v("Resolution")]),e._v(" "),n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolution"},model:{value:e.filterResolution,callback:function(t){e.filterResolution=t},expression:"filterResolution"}},[n("option",{domProps:{value:null}},[e._v("*any*")]),e._v(" "),n("option",{attrs:{value:"unresolved"}},[e._v("Unresolved")]),e._v(" "),n("option",{attrs:{value:"resolved"}},[e._v("Resolved")])]),e._v(" "),"unresolved"!=e.filterResolution?n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-container-type"}},[e._v("Containers of type")]):e._e(),e._v(" "),"unresolved"!=e.filterResolution?n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-container-type",options:e.containerTypeOptions},model:{value:e.filterContainerType,callback:function(t){e.filterContainerType=t},expression:"filterContainerType"}}):e._e(),e._v(" "),"unresolved"!=e.filterResolution?n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolver-type"}},[e._v("Resolvers of type")]):e._e(),e._v(" "),"unresolved"!=e.filterResolution?n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolver-type",options:e.resolverTypeOptions},model:{value:e.filterResolverType,callback:function(t){e.filterResolverType=t},expression:"filterResolverType"}}):e._e()],1)],1)]},proxy:!0},{key:"actions",fn:function(){return[n("b-row",{staticClass:"m-1"},[n("b-button",{staticClass:"mb-2 mr-sm-2 mb-sm-0",on:{click:e.installSelected}},[n("span",{staticClass:"fa fa-plus"}),e._v("\n                Attempt Build\n            ")])],1)]},proxy:!0},{key:"body",fn:function(){return[n("b-table",{attrs:{id:"containers-table",striped:"",fields:e.fields,items:e.items},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[n("b-form-checkbox",{model:{value:t.item.selected,callback:function(n){e.$set(t.item,"selected",n)},expression:"data.item.selected"}})]}},{key:"cell(requirement)",fn:function(e){return[n("requirements",{attrs:{requirements:e.item.requirements}})]}},{key:"cell(resolution)",fn:function(e){return[n("status-display",{attrs:{status:e.item.status}})]}},{key:"cell(container)",fn:function(e){return[n("container-description",{attrs:{"container-description":e.item.status.container_description}})]}},{key:"cell(resolver)",fn:function(e){return[n("container-resolver",{attrs:{"container-resolver":e.item.status.container_resolver}})]}},{key:"cell(tool)",fn:function(e){return[n("tool-display",{attrs:{"tool-id":e.item.tool_id}})]}},{key:"row-details",fn:function(e){return[n("container-resolution-details",{attrs:{resolution:e.item}})]}}])})]},proxy:!0}])})}),[],!1,null,null,null).exports;function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={components:{ContainerResolutionDetails:He,DependencyResolver:me,Requirement:_e,Requirements:ve,StatusDisplay:ke,ToolDisplay:Ye,Tools:Ae},props:{resolution:{type:Object,required:!0}},computed:{singleTool:function(){return null!=this.resolution.tool_id},isContainerResolution:function(){return this.resolution.status.length>=1&&"ContainerDependency"==this.resolution.status[0].model_class},containerResolution:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.resolution,{status:this.resolution.status[0]})},separateDetails:function(){return this.resolution.status.length>1&&"MergedCondaDependency"!=this.resolution.status[0].model_class}}},Ve=Object(f.a)(Fe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isContainerResolution?n("div",[n("container-resolution-details",{attrs:{resolution:e.containerResolution}})],1):n("b-card",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e.singleTool||1==e.resolution.tool_ids.length?n("span",[e._v("Tool")]):n("span",[e._v("Tools")])]),e._v(" "),n("div",{staticClass:"col-8"},[e.singleTool?n("div",[n("tool-display",{attrs:{"tool-id":e.resolution.tool_id}})],1):n("div",[n("tools",{attrs:{"tool-ids":e.resolution.tool_ids,compact:!1}})],1)])]),e._v(" "),0==e.resolution.status.length?n("div",{staticClass:"row"},[n("i",[n("b",[e._v("No requirements to resolve, no explicit dependency resolution configured.")])])]):e.separateDetails?n("div",e._l(e.resolution.requirements,(function(t,a){return n("span",{key:a},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("requirement",{attrs:{requirement:e.resolution.requirements[a]}})],1),e._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n                            Status\n                        ")]),e._v(" "),n("div",{staticClass:"col"},[n("status-display",{attrs:{status:e.resolution.status[a],compact:!1}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n                            Dependency Resolver\n                        ")]),e._v(" "),n("div",{staticClass:"col"},[n("dependency-resolver",{attrs:{"dependency-resolver":e.resolution.status[a].dependency_resolver}})],1)])])])])})),0):n("span",[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n                Requirements\n            ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("requirements",{attrs:{requirements:e.resolution.requirements}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n                Status\n            ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("status-display",{attrs:{status:e.resolution.status[0],compact:!1,"all-statuses":e.resolution.status}})],1)]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[e._v("\n                Dependency Resolver\n            ")]),e._v(" "),n("div",{staticClass:"col-8"},[n("dependency-resolver",{attrs:{"dependency-resolver":e.resolution.status[0].dependency_resolver}})],1)])])])}),[],!1,null,null,null).exports;function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ie.default.use(oe.a);var qe=re.a.keys({conda:"",tool_shed_packages:"",galaxy_packages:"",lmod:"",module:""}).map((function(e){return{value:e,text:e}}));qe.splice(0,0,{value:null,text:"*any*"});var Je={mixins:[Ie],components:{ResolutionDetails:Ve},data:function(){return{expandToolIds:!1,error:null,loading:!0,resolverType:null,resolverTypeOptions:qe,baseFields:[{key:"selected",label:""},{key:"requirement"},{key:"resolution"}],filterResolution:null,requirements:[]}},watch:{resolverType:function(e){this.load()}},computed:{fields:function(){var e=this.baseFields.slice();return this.expandToolIds?e.splice(1,0,{key:"tool",label:"Tool"}):e.splice(3,0,{key:"tools",label:"Tools"}),e},items:function(){var e=this,t=this.requirements.filter((function(t){if(e.filterResolution){var n=0==t.status.length,a=!0,i=!1,o=void 0;try{for(var s,r=t.status[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value;console.log(l),n=n||null==l.dependency_type}}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}if("resolved"==e.filterResolution&&n)return!1;if("unresolved"==e.filterResolution&&!n)return!1}return!0})).map((function(e){return{selected:!1,requirements:e.requirements,status:e.status,tool_ids:e.tool_ids,_showDetails:!1}}));if(this.expandToolIds){var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var l=s.value,c=!0,d=!1,u=void 0;try{for(var h,p=l.tool_ids[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var m=h.value;n.push(We({},l,{tool:m}))}}catch(e){d=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}}}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}t=n}return t},selectedToolIds:function(){var e=[],t=!0,n=!1,a=void 0;try{for(var i,o=this.items[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.selected){var r=s.tool_ids;r&&e.push(r[0])}}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}},methods:{load:function(){var e=this;this.loading=!0,function(e){return Q.apply(this,arguments)}(this.apiParams()).then((function(t){e.requirements=t,e.loading=!1})).catch(this.handleError)},apiParams:function(){var e={};return this.expandToolIds&&(e.index_by="tools"),this.resolverType&&(e.resolver_type=this.resolverType),e},installSelected:function(){var e=this;this.loading=!0,function(e,t){return X.apply(this,arguments)}(this.selectedToolIds).then((function(){e.load()})).catch(this.handleError)},uninstallSelected:function(){var e=this;this.loading=!0,function(e,t){return Z.apply(this,arguments)}(this.selectedToolIds).then((function(){e.load()})).catch(this.handleError)},setExpandToolIds:function(e){this.expandToolIds=e,this.load()}}},Ge=Object(f.a)(Je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dependency-index-wrapper",{attrs:{error:e.error,loading:e.loading,"loading-message":"Loading tool requirement resolution information"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-row",{staticClass:"m-1"},[n("b-form",{attrs:{inline:""}},[n("b",[e._v("Resolution:")]),e._v(" "),n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-resolver-type"}},[e._v("Using resolvers of type")]),e._v(" "),n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-resolver-type",options:e.resolverTypeOptions},model:{value:e.resolverType,callback:function(t){e.resolverType=t},expression:"resolverType"}})],1)],1),e._v(" "),n("b-row",{staticClass:"m-1"},[n("b-form",{attrs:{inline:""}},[n("b",[e._v("Filter:")]),e._v(" "),n("label",{staticClass:"mr-sm-2",attrs:{for:"manage-filter-resolution"}},[e._v("Resolution")]),e._v(" "),n("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"manage-filter-resolution"},model:{value:e.filterResolution,callback:function(t){e.filterResolution=t},expression:"filterResolution"}},[n("option",{domProps:{value:null}},[e._v("*any*")]),e._v(" "),n("option",{attrs:{value:"unresolved"}},[e._v("Unresolved")]),e._v(" "),n("option",{attrs:{value:"resolved"}},[e._v("Resolved")])])],1)],1)]},proxy:!0},{key:"body",fn:function(){return[n("b-table",{attrs:{id:"requirements-table",striped:"",fields:e.fields,items:e.items},on:{"row-clicked":e.showRowDetails},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[n("b-form-checkbox",{model:{value:t.item.selected,callback:function(n){e.$set(t.item,"selected",n)},expression:"data.item.selected"}})]}},{key:"cell(requirement)",fn:function(e){return[n("requirements",{attrs:{requirements:e.item.requirements}})]}},{key:"cell(resolution)",fn:function(e){return[n("statuses",{attrs:{statuses:e.item.status}})]}},{key:"cell(tools)",fn:function(e){return[n("tools",{attrs:{"tool-ids":e.item.tool_ids}})]}},{key:"cell(tool)",fn:function(e){return[n("tool-display",{attrs:{"tool-id":e.item.tool}})]}},{key:"row-details",fn:function(e){return[n("resolution-details",{attrs:{resolution:e.item}})]}}])})]},proxy:!0},{key:"actions",fn:function(){return[n("b-row",{staticClass:"m-1"},[n("b-button",{staticClass:"m-1",on:{click:e.installSelected}},[n("span",{staticClass:"fa fa-plus"}),e._v(" "),e._v("\n                Install\n            ")]),e._v(" "),n("b-button",{staticClass:"m-1",on:{click:e.uninstallSelected}},[n("span",{staticClass:"fa fa-minus"}),e._v(" "),e._v("\n                Uninstall\n            ")]),e._v(" "),e.expandToolIds?e._e():n("b-button",{staticClass:"m-1",on:{click:function(t){return e.setExpandToolIds(!0)}}},[n("span",{staticClass:"fa fa-chevron-down"}),e._v("\n                Expand Tools\n            ")]),e._v(" "),e.expandToolIds?n("b-button",{staticClass:"m-1",on:{click:function(t){return e.setExpandToolIds(!1)}}},[n("span",{staticClass:"fa fa-chevron-up"}),e._v("\n                Group by Requirements\n            ")]):e._e()],1)]},proxy:!0}])})}),[],!1,null,null,null).exports,Ke={components:{DependencyIndexWrapper:de},data:function(){return{error:null,loading:!0,fields:[{key:"selected",label:""},{key:"path"}],paths:[]}},created:function(){this.load()},computed:{items:function(){return this.paths.map((function(e){return{path:e,selected:!1,_showDetails:!1}}))},hasSelectedPaths:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.items[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){if(a.value.selected)return!0}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return!1}},methods:{load:function(){var e=this;(function(){return G.apply(this,arguments)})().then((function(t){e.paths=t,e.loading=!1})).catch(this.handleError)},deleteSelected:function(){var e=this,t=[],n=!0,a=!1,i=void 0;try{for(var o,s=this.items[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;r.selected&&t.push(r.path)}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}this.loading=!0,function(e){return K.apply(this,arguments)}(t).then((function(){e.load()})).catch(this.handleError)},handleError:function(e){this.error=e}}},Qe=Object(f.a)(Ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dependency-index-wrapper",{attrs:{loading:e.loading,error:e.error,"loading-message":"Loading tool dependency resolver information"},scopedSlots:e._u([{key:"body",fn:function(){return[n("b-table",{attrs:{id:"unused-paths-table",striped:"",fields:e.fields,items:e.items},scopedSlots:e._u([{key:"cell(selected)",fn:function(t){return[n("b-form-checkbox",{model:{value:t.item.selected,callback:function(n){e.$set(t.item,"selected",n)},expression:"data.item.selected"}})]}}])})]},proxy:!0},{key:"actions",fn:function(){return[n("div",[n("b-button",{on:{click:e.deleteSelected}},[e._v("\n                Delete Selected Environments\n            ")])],1)]},proxy:!0}])})}),[],!1,null,null,null).exports;ie.default.use(oe.a);var Xe={components:{ContainerIndex:Re,ResolutionIndex:Ge,UnusedIndex:Qe},data:function(){return{mode:"dependencies"}},methods:{setMode:function(e){this.mode=e}}},Ze=Object(f.a)(Xe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-nav",{attrs:{tabs:""}},[n("b-nav-item",{attrs:{active:"dependencies"==e.mode},on:{click:function(t){return e.setMode("dependencies")}}},[e._v("Dependencies")]),e._v(" "),n("b-nav-item",{attrs:{active:"containers"==e.mode},on:{click:function(t){return e.setMode("containers")}}},[e._v("Containers")]),e._v(" "),n("b-nav-item",{attrs:{active:"unused"==e.mode},on:{click:function(t){return e.setMode("unused")}}},[e._v("Unused")])],1),e._v(" "),"dependencies"==e.mode?n("resolution-index"):"containers"==e.mode?n("container-index"):"unused"==e.mode?n("unused-index"):e._e()],1)}),[],!1,null,null,null).exports,et=Object(u.getAppRoot)(),tt={props:{isRepoInstalled:{type:Boolean,required:!0},isToolShedInstalled:{type:Boolean,required:!0}},methods:{useRouter:function(e){Object(i.a)().page.router.push(e.target.pathname.slice(et.length))}},computed:{migrationStagesUrl:function(){return"".concat(et,"admin/review_tool_migration_stages")},adminDataTypesUrl:function(){return"".concat(et,"admin/data_types")},adminDataTablesUrl:function(){return"".concat(et,"admin/data_tables")},adminDisplayApplicationsUrl:function(){return"".concat(et,"admin/display_applications")},adminJobsUrl:function(){return"".concat(et,"admin/jobs")},adminManageMetadata:function(){return"".concat(et,"admin/reset_metadata")},adminDMUrl:function(){return"".concat(et,"admin/data_manager")},adminUsersUrl:function(){return"".concat(et,"admin/users")},adminQuotasUrl:function(){return"".concat(et,"admin/quotas")},adminGroupsUrl:function(){return"".concat(et,"admin/groups")},adminRolesUrl:function(){return"".concat(et,"admin/roles")},adminFormsUrl:function(){return"".concat(et,"admin/forms")},adminToolshedUrl:function(){return"".concat(et,"admin/toolshed")},adminToolVersionsUrl:function(){return"".concat(et,"admin/tool_versions")}}},nt=Object(f.a)(tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Administration")]),e._v("\n    Please visit\n\n    "),n("a",{attrs:{href:"https://galaxyproject.org/admin",target:"_blank"}},[e._v("the Galaxy administration hub")]),e._v(" to learn how to keep\n    your Galaxy in best shape.\n\n    "),n("h4",[e._v("Server")]),e._v(" "),n("ul",[n("li",[n("strong",[n("a",{attrs:{href:e.adminDataTypesUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Data Types")])]),e._v("\n            - See all datatypes available in this Galaxy.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminDataTablesUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Data Tables")])]),e._v("\n            - See all data tables available in this Galaxy.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminDisplayApplicationsUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Display Applications")])]),e._v("\n            - See all display applications configured in this Galaxy.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminJobsUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Jobs")])]),e._v("\n            - Display all jobs that are currently not finished (i.e., their state is new, waiting, queued, or\n            running). Administrators are able to cleanly stop long-running jobs.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminDMUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Local Data")])]),e._v("\n            - Manage the reference (and other) data that is stored within Tool Data Tables. See\n            "),n("a",{attrs:{href:"https://galaxyproject.org/admin/tools/data-managers",target:"_blank"}},[e._v("wiki")]),e._v(" for details.\n        ")])]),e._v(" "),n("h4",[e._v("User Management")]),e._v(" "),n("ul",[n("li",[n("strong",[n("a",{attrs:{href:e.adminUsersUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Users")])]),e._v("\n            - The primary user management interface, displaying information associated with each user and providing\n            operations for resetting passwords, updating user information, impersonating a user, and more.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminQuotasUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Quotas")])]),e._v("\n            - Manage user space quotas. See\n            "),n("a",{attrs:{href:"https://galaxyproject.org/admin/disk-quotas",target:"_blank"}},[e._v("wiki")]),e._v(" for details.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminGroupsUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Groups")])]),e._v("\n            - A view of all groups along with the members of the group and the roles associated with each group.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminRolesUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Roles")])]),e._v("\n            - A view of all non-private roles along with the role type, and the users and groups that are\n            associated, with the role. Also includes a view of the data library datasets that are associated with\n            the role and the permissions applied to each dataset.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminFormsUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Forms")])]),e._v("\n            - Manage local form definitions.\n        ")])]),e._v(" "),n("h4",[e._v("Tool Management")]),e._v(" "),n("ul",[e.isToolShedInstalled?n("li",[n("strong",[n("a",{attrs:{href:e.adminToolshedUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Install and Uninstall")])]),e._v("\n            - Search and install new tools and other Galaxy utilities from the Tool Shed. See\n            "),n("a",{attrs:{href:"https://galaxyproject.org/admin/tools/add-tool-from-toolshed-tutorial",target:"_blank"}},[e._v("the tutorial")]),e._v(".\n        ")]):e._e(),e._v(" "),e.isRepoInstalled?n("li",[n("strong",[n("a",{attrs:{href:e.adminManageMetadata},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("Manage Metadata")])]),e._v("\n            - Select on which repositories you want to reset metadata.\n        ")]):e._e(),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.adminToolVersionsUrl},on:{click:function(t){return t.preventDefault(),e.useRouter(t)}}},[e._v("View Lineage")])]),e._v("\n            - A view of a version lineages for all installed tools. Useful for debugging.\n        ")]),e._v(" "),n("li",[n("strong",[n("a",{attrs:{href:e.migrationStagesUrl}},[e._v("View Migration Stages")])]),e._v("\n            - See the list of migration stages that moved sets of tools from the distribution to the Tool Shed.\n        ")])])])}),[],!1,null,null,null).exports,at={computed:{toolShedLink:function(){return"".concat(Object(u.getAppRoot)(),"admin_toolshed/browse_tool_sheds")}}},it=Object(f.a)(at,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{staticClass:"mb-3"},[n("h2",{attrs:{id:"data-managers-title"}},[e._v("Local Data")]),e._v(" "),n("p",[e._v("\n            Data Managers are used to manage Galaxy's local data. They can be installed manually, or via the\n            "),n("b-link",{attrs:{href:e.toolShedLink,target:"galaxy_main"}},[e._v("ToolShed")]),e._v(". For more comprehensive information\n            "),n("b-link",{attrs:{href:"https://galaxyproject.org/admin/tools/data-managers/",target:"_blank"}},[e._v("See the Wiki")]),e._v(".\n        ")],1)]),e._v(" "),n("router-view")],1)}),[],!1,null,null,null).exports,ot=n(508),st={props:{message:{type:String,default:""},status:{type:String,default:""},variant:{type:String,default:"done"},dismissible:Boolean,dismissLabel:String,show:[Boolean,Number],fade:Boolean},computed:{galaxyKwdToBootstrap:function(){var e=this.variant;""!==this.status&&(e=this.status);var t={done:"success",info:"info",warning:"warning",error:"danger"};return e in t?t[e]:e},showP:function(){return this.show?this.show:!(""===this.message&&!this.$slots.default)}}},rt=Object(f.a)(st,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("b-alert",e._b({attrs:{variant:e.galaxyKwdToBootstrap,show:e.showP}},"b-alert",e.$props,!1),[e._t("default",[e._v(" "+e._s(e.message)+" ")])],2)}),[],!1,null,null,null).exports,lt={components:{Alert:rt},data:function(){return{dataManagers:[],dataTables:[],filter:"",viewOnly:!1,message:"",status:"",loading:!0}},computed:{dataManagersFiltered:function(){var e=this;return this.dataManagers.filter((function(t){return t.name.match(new RegExp(e.filter,"i"))}))},dataTablesFiltered:function(){var e=this;return this.dataTables.filter((function(t){return t.name.match(new RegExp(e.filter,"i"))}))}},methods:{kebabCase:function(e){return e.toLowerCase().replace(/ /g,"-")}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/data_managers_list")).then((function(t){e.dataManagers=t.data.dataManagers,e.dataTables=t.data.dataTables,e.viewOnly=t.data.viewOnly,e.message=t.data.message,e.status=t.data.status,e.loading=!1})).catch((function(e){console.error(e)}))}},ct=Object(f.a)(lt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?n("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?n("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.dataManagers&&!e.dataManagers.length?n("div",[n("Alert",{attrs:{variant:"primary"}},[n("h4",{staticClass:"alert-heading"},[e._v("None installed")]),e._v("\n            You do not currently have any Data Managers installed.\n        ")])],1):e.dataManagers&&e.dataTables?n("div",[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filter=""}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1)],1)],1),e._v(" "),n("b-card-group",{attrs:{columns:""}},[n("b-card",{attrs:{"no-body":"",header:"Installed Data Managers",id:"data-managers-card"}},[n("b-list-group",{attrs:{flush:""}},e._l(e.dataManagersFiltered,(function(t,a){return n("b-list-group-item",{key:a},[n("b-button-group",{attrs:{vertical:""}},[n("b-button",{attrs:{href:t.toolUrl,target:"_blank",variant:"primary",id:e.kebabCase(t.name)}},[n("div",[e._v(e._s(t.name))]),e._v(" "),t.description?n("div",[n("i",[e._v(e._s(t.description))])]):e._e()]),e._v(" "),n("b-button",{attrs:{to:{name:"DataManagerJobs",params:{id:encodeURIComponent(t.id)}},id:e.kebabCase(t.name)+"-jobs"}},[e._v("\n                                Jobs\n                            ")])],1)],1)})),1)],1),e._v(" "),n("b-card",{attrs:{"no-body":"",header:"Tool Data Tables"}},[n("b-list-group",{attrs:{flush:""}},e._l(e.dataTablesFiltered,(function(t,a){return n("b-list-group-item",{key:a,attrs:{to:{name:"DataManagerTable",params:{name:t.name}},id:e.kebabCase(t.name)+"-table",variant:!0===t.managed?"primary":"link"}},[e._v("\n                        "+e._s(t.name)+"\n                        "),!0===t.managed?n("b-badge",{attrs:{variant:"primary",pill:""}},[n("span",{staticClass:"fa fa-exchange"})]):e._e()],1)})),1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports,dt={components:{Alert:rt},props:{id:{type:String,required:!0}},data:function(){return{dataManager:[],jobs:[],fields:[{key:"id",label:"Job ID",sortable:!0},{key:"user"},{key:"updateTime",label:"Last Update",sortable:!0},{key:"state"},{key:"actions"},{key:"jobRunnerName",label:"Job Runner"},{key:"jobRunnerExternalId",label:"PID/Cluster ID",sortable:!0}],showCommandLine:!0,filter:"",viewOnly:!1,message:"",status:"",loading:!0}},computed:{breadcrumbItems:function(){return[{text:"Data Managers",to:"/"},{text:this.dataManager.name+" ( "+this.dataManager.description+" )",href:this.dataManager.toolUrl,target:"_blank"},{text:"Jobs",active:!0}]},tableFields:function(){var e=this.fields.slice(0);return this.showCommandLine&&e.splice(5,0,{key:"commandLine",tdClass:["code","command-line"]}),e},tableItems:function(){var e=this.jobs.slice(0),t=!0,n=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;switch(s.updateTime=s.updateTime.replace("T","\n"),s.state){case"ok":s._cellVariants={state:"success"};break;case"error":s._cellVariants={state:"danger"};break;case"deleted":s._cellVariants={state:"warning"};break;case"running":s._cellVariants={state:"info"};break;case"waiting":case"queued":s._cellVariants={state:"primary"};break;case"paused":s._cellVariants={state:"secondary"}}}}catch(e){n=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/jobs_list?id=").concat(decodeURIComponent(this.id))).then((function(t){e.dataManager=t.data.dataManager,e.jobs=t.data.jobs,e.viewOnly=t.data.viewOnly,e.message=t.data.message,e.status=t.data.status,e.loading=!1})).catch((function(e){console.error(e)}))}},ut=(n(954),Object(f.a)(dt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.dataManager&&!e.loading?n("b-breadcrumb",{attrs:{items:e.breadcrumbItems,id:"breadcrumb"}}):e._e(),e._v(" "),n("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?n("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?n("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.jobs&&!e.jobs.length?n("Alert",{attrs:{message:"There are no jobs for this data manager.",variant:"primary"}}):e.jobs?n("div",[n("b-container",{staticClass:"mb-3",attrs:{fluid:""}},[n("b-row",[n("b-col",{attrs:{md:"6"}},[n("b-form-group",{attrs:{description:"Search for strings or regular expressions"}},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Type to Search"},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.filter=""}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[e._v("Clear (esc)")])],1)],1)],1)],1)],1),e._v(" "),n("b-row",[n("b-col",[n("b-button",{attrs:{pressed:e.showCommandLine,variant:"outline-secondary"},on:{"update:pressed":function(t){e.showCommandLine=t}}},[e._v("\n                        "+e._s(e.showCommandLine?"Hide":"Show")+" Command Line\n                    ")])],1)],1)],1),e._v(" "),n("b-table",{attrs:{fields:e.tableFields,items:e.tableItems,filter:e.filter,hover:"",responsive:"",striped:"",id:"jobs-table"},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[n("b-button-group",[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Rerun",target:"_top",href:e.jobs[t.index].runUrl}},[n("span",{staticClass:"fa fa-refresh"})]),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View Info",to:{name:"DataManagerJob",params:{id:e.jobs[t.index].encId}},id:"job-"+e.jobs[t.index].encId}},[n("span",{staticClass:"fa fa-info-circle"})]),e._v(" "),e.showCommandLine?e._e():n("b-button",{attrs:{pressed:t.detailsShowing},on:{click:function(e){return e.stopPropagation(),t.toggleDetails()},"update:pressed":function(n){return e.$set(t,"detailsShowing",n)}}},[e._v("\n                        "+e._s(t.detailsShowing?"Hide":"Show")+" Command Line\n                    ")])],1)]}},{key:"row-details",fn:function(t){return[n("b-card",{scopedSlots:e._u([{key:"footer",fn:function(){return[n("b-button",{staticClass:"mt-3",on:{click:t.toggleDetails}},[e._v("Hide Info")])]},proxy:!0}],null,!0)},[n("h5",[e._v("Command Line")]),e._v(" "),n("pre",{staticClass:"code"},[n("code",{staticClass:"command-line"},[e._v(e._s(t.item.commandLine))])])])]}}])})],1):e._e()],1)}),[],!1,null,null,null).exports);function ht(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var pt={components:{Alert:rt},props:{id:{type:String,required:!0}},data:function(){return{jobId:Number,exitCode:Number,runUrl:"#",dataManager:[],hdaInfo:[],dataManagerOutput:[],errorMessages:[],fields:[{key:"created"},{key:"fileSize",label:"Filesize"},{key:"fileName",label:"Full path",tdClass:"table-cell-break-word"}],viewOnly:!1,message:"",status:"",loading:!0}},computed:{breadcrumbItems:function(){return[{text:"Data Managers",to:"/"},{text:this.dataManager.name+" ( "+this.dataManager.description+" )",href:this.dataManager.toolUrl,target:"_blank"},{text:"Jobs",to:{name:"DataManagerJobs",params:{id:this.dataManager.id}}},{text:"Job "+this.jobId,active:!0}]}},methods:{outputFields:function(e){return Object.keys(e).reduce((function(e,t){return[].concat(ht(e),[{key:t,label:t}])}),[])}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/job_info?id=").concat(this.id)).then((function(t){e.jobId=t.data.jobId,e.exitCode=t.data.exitCode,e.runUrl=t.data.runUrl,e.dataManager=t.data.dataManager,e.hdaInfo=t.data.hdaInfo,e.dataManagerOutput=t.data.dataManagerOutput,e.errorMessages=t.data.errorMessages,e.viewOnly=t.data.viewOnly,e.message=t.data.message,e.status=t.data.status,e.loading=!1})).catch((function(e){console.error(e)}))}},mt=(n(955),Object(f.a)(pt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.dataManager&&e.jobId&&!e.loading?n("b-breadcrumb",{attrs:{items:e.breadcrumbItems,id:"breadcrumb"}}):e._e(),e._v(" "),n("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e._l(e.errorMessages,(function(e,t){return n("Alert",{key:t,attrs:{message:e,variant:"error"}})})),e._v(" "),e.viewOnly?n("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?n("Alert",{attrs:{message:"Waiting for data",variant:"info"}}):e.dataManager?n("b-container",[n("b-row",[n("b-col",[n("b-card",{staticClass:"mb-3",attrs:{"header-bg-variant":"primary","header-text-variant":"white","border-variant":"primary",id:"data-manager-card"},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-container",[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Rerun",href:e.runUrl}},[n("span",{staticClass:"fa fa-refresh"})])],1),e._v(" "),n("b-col",[n("b",[e._v(e._s(e.dataManager.name))]),e._v(" "),n("i",[e._v(e._s(e.dataManager.description))])])],1)],1)]},proxy:!0}])},[e._v(" "),e._l(e.hdaInfo,(function(t,a){return n("b-card",{key:a,staticClass:"mb-4",attrs:{id:"data-card-"+a},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-table",{attrs:{fields:e.fields,items:[t],"caption-top":"",small:"",stacked:""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[n("b-container",[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"View complete info",href:e.hdaInfo[a].infoUrl,target:"galaxy_main"}},[n("span",{staticClass:"fa fa-info-circle"})])],1),e._v(" "),n("b-col",[n("b",[e._v(e._s(t.name))])])],1)],1)]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)},[e._v(" "),e._l(e.dataManagerOutput[a],(function(t,a){return n("b-table",{key:a,attrs:{fields:e.outputFields(t[1][0]),items:t[1],small:"",stacked:"",hover:"",striped:""},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("\n                                Data Table: "),n("b",[e._v(e._s(t[0]))])]},proxy:!0}],null,!0)})}))],2)}))],2)],1)],1)],1):e._e()],2)}),[],!1,null,null,null).exports);var ft={components:{Alert:rt},props:{name:{type:String,required:!0}},data:function(){return{dataTable:{},viewOnly:!1,message:"",status:"",loading:!0}},computed:{dataTableName:function(){return this.dataTable&&this.dataTable.name?this.dataTable.name:"null"},buttonLabel:function(){return"Reload ".concat(this.dataTableName," tool data table")},breadcrumbItems:function(){return[{text:"Tool Data Tables",to:"/"},{text:this.dataTableName}]}},methods:{fields:function(e){return e.reduce((function(e,t,n){return Object.assign(e,(o={label:t},(i=n)in(a={})?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a));var a,i,o}),{})},reload:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/reload_tool_data_tables?table_name=").concat(this.dataTableName)).then((function(t){t.data.dataTable&&(e.dataTable=t.data.dataTable),e.message=t.data.message,e.status=t.data.status})).catch((function(e){console.error(e)}))}},created:function(){var e=this;p.a.get("".concat(Object(u.getAppRoot)(),"data_manager/tool_data_table_info?table_name=").concat(this.name)).then((function(t){e.dataTable=t.data.dataTable,e.viewOnly=t.data.viewOnly,e.message=t.data.message,e.status=t.data.status,e.loading=!1})).catch((function(e){console.error(e)}))}},_t=Object(f.a)(ft,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.dataTable&&!e.loading?n("b-breadcrumb",{attrs:{items:e.breadcrumbItems,id:"breadcrumb"}}):e._e(),e._v(" "),n("Alert",{attrs:{message:e.message,variant:e.status}}),e._v(" "),e.viewOnly?n("Alert",{attrs:{message:"Not implemented",variant:"dark"}}):e.loading?n("Alert",{attrs:{message:"Waiting for data",status:"info"}}):e.dataTable&&!e.dataTable.data.length?n("Alert",{attrs:{message:"There are currently no entries in this tool data table.",variant:"primary"}}):e.dataTable?n("b-container",[n("b-row",[n("b-col",[n("b-card",{attrs:{id:"data-table-card",flush:""},scopedSlots:e._u([{key:"header",fn:function(){return[n("b-container",[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"auto"}},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.buttonLabel},on:{click:function(t){return e.reload()}}},[n("span",{staticClass:"fa fa-refresh"})])],1),e._v(" "),n("b-col",[n("b",[e._v(e._s(e.dataTableName))])])],1)],1)]},proxy:!0}])},[e._v(" "),n("b-table",{attrs:{fields:e.fields(this.dataTable.columns),items:e.dataTable.data,small:"",hover:"",striped:""}})],1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null).exports;ie.default.use(ot.a);var gt=new ot.a({mode:"history",base:"".concat(Object(u.getAppRoot)(),"admin/data_manager"),routes:[{path:"/",name:"DataManager",component:ct},{path:"/jobs/:id",name:"DataManagerJobs",component:ut,props:!0},{path:"/job/:id",name:"DataManagerJob",component:mt,props:!0},{path:"/table/:name",name:"DataManagerTable",component:_t,props:!0},{path:"*",redirect:"/"}]}),vt=Object(f.a)(gt,void 0,void 0,!1,null,null,null).exports,yt=n(409),bt={data:function(){return{errorStack:[],errorStackLoaded:!1,errorStackAttributes:[{key:"time",sortable:!0},{key:"phase",sortable:!0},{key:"file",sortable:!0},{key:"error"}],messageText:null}},computed:{errorStackVisible:function(){return this.errorStack.length>0},messageVisible:function(){return null!=this.messageText},infoVisible:function(){return!this.errorStackVisible&&this.errorStackLoaded}},created:function(){var e,t=this;(e="".concat(Object(u.getAppRoot)(),"api/tools/error_stack"),p.a.get(e)).then((function(e){t.errorStack=e.data,t.errorStackLoaded=!0})).catch((function(e){var n=e&&e.response&&e.response.data&&e.response.data.err_msg;t.messageText=n||"Request failed for an unknown reason."}))}},wt=Object(f.a)(bt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{show:e.messageVisible,variant:"danger"}},[e._v(" "+e._s(e.messageText)+" ")]),e._v(" "),n("b-alert",{attrs:{show:e.infoVisible,variant:"info"}},[e._v(" No errors available. ")]),e._v(" "),e.errorStackVisible?n("b-table",{attrs:{striped:"",fields:e.errorStackAttributes,items:e.errorStack}}):e._e()],1)}),[],!1,null,null,null).exports;ie.default.use(oe.a);var kt={props:{icon:{type:String},tooltip:{type:String},plural:{type:String},success:{type:String},fields:{type:Array},getter:{type:Function},setter:{type:Function}},data:function(){return{items:[],busy:!1,messageText:null,messageVariant:null}},computed:{tooltipAll:function(){return"".concat(this.tooltip," all")},itemsIndex:function(){return this.items.reduce((function(e,t){return e[t.id]=t,e}),{})},itemsAll:function(){return this.items.map((function(e){return e.id}))},itemsVisible:function(){return this.items.length>0},itemsLength:function(){return this.items.length},messageVisible:function(){return null!=this.messageText}},created:function(){var e=this;this.messageText=null,this.getter().then((function(t){e.items=t.data,e.itemsVisible||(e.messageVariant="warning",e.messageText="No ".concat(e.plural," available."))})).catch((function(t){e._errorMessage(t)}))},methods:{executeAll:function(){this.execute(this.itemsAll)},execute:function(e){var t=this;this.busy=!0,this.messageVariant="warning",this.messageText="Executing request. Please wait...",this._highlightRows(this.itemsAll,"default"),this.setter(e).then((function(e){var n=e.data;n&&(t.messageVariant="info",t.messageText=n.message,t._highlightRows(n.failed,"danger"),t._highlightRows(n[t.success],"success")),t.busy=!1})).catch((function(e){t._errorMessage(e),t.busy=!1}))},_highlightRows:function(e,t){if(e){var n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value,l=this.itemsIndex[r];l&&(l._rowVariant=t)}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}},_errorMessage:function(e){var t=e&&e.response&&e.response.data&&e.response.data.err_msg;this.messageText=t||"Request failed for an unknown reason.",this.messageVariant="danger"}}},Mt=Object(f.a)(kt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{show:e.messageVisible,variant:e.messageVariant}},[e._v(" "+e._s(e.messageText)+" ")]),e._v(" "),e.itemsVisible?n("div",{staticClass:"card-header"},[e._v("\n        There are "+e._s(e.itemsLength)+"\n        "),n("b-button",{attrs:{size:"sm",disabled:e.busy,title:e.tooltipAll,"data-placement":"bottom"},on:{click:function(t){return t.preventDefault(),e.executeAll()}}},[n("span",{class:e.icon})]),e._v("\n        "+e._s(e.plural)+" available.\n    ")],1):e._e(),e._v(" "),e.itemsVisible?n("b-table",{attrs:{striped:"",fields:e.fields,items:e.items},scopedSlots:e._u([{key:"cell(execute)",fn:function(t){return[n("b-button",{attrs:{size:"sm",disabled:e.busy,title:e.tooltip,"data-placement":"bottom"},on:{click:function(n){return n.preventDefault(),e.execute([t.item.id])}}},[n("span",{class:e.icon})])]}},{key:"cell(links)",fn:function(t){return e._l(t.item.links,(function(t){return n("li",{key:t.name},[e._v("\n                "+e._s(t.name)+"\n            ")])}))}}],null,!1,2172873526)}):e._e()],1)}),[],!1,null,null,null).exports,xt={components:{BaseList:Mt},data:function(){return{fields:[{key:"execute",label:"Refresh"},{key:"name",sortable:!0},{key:"id",sortable:!0},{key:"version"},{key:"links"}],getter:W,setter:B}}},Lt=Object(f.a)(xt,(function(){var e=this.$createElement;return(this._self._c||e)("BaseList",{attrs:{fields:this.fields,icon:"fa fa-refresh",tooltip:"Refresh",plural:"display applications",success:"reloaded",getter:this.getter,setter:this.setter}})}),[],!1,null,null,null).exports,Tt={components:{BaseList:Mt},data:function(){return{fields:[{key:"execute",label:"Reset"},{key:"name",label:"Metadata",sortable:!0},{key:"owner",sortable:!0},{key:"ctx_rev",label:"Revision"}],getter:q,setter:J}}},St=Object(f.a)(Tt,(function(){var e=this.$createElement;return(this._self._c||e)("BaseList",{attrs:{fields:this.fields,icon:"fa fa-trash-o",tooltip:"Reset",plural:"metadata entries",success:"successful",getter:this.getter,setter:this.setter}})}),[],!1,null,null,null).exports;function Dt(e,t,n,a,i,o,s){try{var r=e[o](s),l=r.value}catch(e){return void n(e)}r.done?t(l):Promise.resolve(l).then(a,i)}function Ct(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){Dt(o,a,i,s,r,"next",e)}function r(e){Dt(o,a,i,s,r,"throw",e)}s(void 0)}))}}function jt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a,o,s,r,l,c,d,h,m;return t=e,(n=[{key:"getCategories",value:(m=Ct(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="tool_shed_url=".concat(t,"&controller=categories"),a="".concat(Object(u.getAppRoot)(),"api/tool_shed/request?").concat(n),e.prev=2,e.next=5,p.a.get(a);case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return m.apply(this,arguments)})},{key:"getRepositories",value:(h=Ct(regeneratorRuntime.mark((function e(t){var n,a,i,o,s,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._getParamsString(t),a="".concat(Object(u.getAppRoot)(),"api/tool_shed/request?controller=repositories&").concat(n),e.prev=2,e.next=5,p.a.get(a);case 5:return i=e.sent,o=i.data,(s=o.hits.map((function(e){return e.repository}))).forEach((function(e){e.owner=e.repo_owner_username,e.times_downloaded=r._formatCount(e.times_downloaded),e.repository_url="".concat(o.hostname,"repository?repository_id=").concat(e.id)})),e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(2),Object(R.b)(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(e){return h.apply(this,arguments)})},{key:"getRepository",value:(d=Ct(regeneratorRuntime.mark((function e(t,n){var a,i,o,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="tool_shed_url=".concat(t,"&id=").concat(n,"&controller=repositories&action=metadata"),i="".concat(Object(u.getAppRoot)(),"api/tool_shed/request?").concat(a),e.prev=2,e.next=5,p.a.get(i);case 5:if(o=e.sent,s=o.data,0!==(r=Object.keys(s).map((function(e){return s[e]}))).length){e.next=10;break}throw"Repository does not contain any installable revisions.";case 10:return r.sort((function(e,t){return t.numeric_revision-e.numeric_revision})),r.forEach((function(e){Array.isArray(e.tools)&&(e.profile=e.tools.reduce((function(e,t){return t.profile>e?t.profile:e}),null))})),e.abrupt("return",r);case 15:e.prev=15,e.t0=e.catch(2),Object(R.b)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(e,t){return d.apply(this,arguments)})},{key:"getRepositoryByName",value:(c=Ct(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="tool_shed_url=".concat(t,"&name=").concat(n,"&owner=").concat(a),o="".concat(Object(u.getAppRoot)(),"api/tool_shed/request?controller=repositories&").concat(i),e.prev=2,e.next=5,p.a.get(o);case 5:if(!((s=e.sent).data.length>0)){e.next=13;break}return(r=s.data[0]).repository_url="".concat(t,"repository?repository_id=").concat(r.id),e.abrupt("return",r);case 13:throw"Repository details not found.";case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),Object(R.b)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])}))),function(e,t,n){return c.apply(this,arguments)})},{key:"getInstalledRepositories",value:(l=Ct(regeneratorRuntime.mark((function e(){var t,n,a,o,s,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=Object(i.a)(),a="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories/?uninstalled=False"),e.prev=3,e.next=6,p.a.get(a);case 6:return o=e.sent,s=this._groupByNameOwner(o.data,t.filter),this._fixToolshedUrls(s,n.config.tool_shed_urls),e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(3),Object(R.b)(e.t0);case 15:case"end":return e.stop()}}),e,this,[[3,12]])}))),function(){return l.apply(this,arguments)})},{key:"getInstalledRepositoriesByName",value:(r=Ct(regeneratorRuntime.mark((function e(t,n){var a,i,o,s,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="name=".concat(t,"&owner=").concat(n),i="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories?").concat(a),e.prev=2,e.next=5,p.a.get(i);case 5:return o=e.sent,s=o.data,r={},s.forEach((function(e){var t={status:e.status,installed:!e.deleted&&!e.uninstalled};r[e.changeset_revision]=r[e.installed_changeset_revision]=t})),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(2),Object(R.b)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),function(e,t){return r.apply(this,arguments)})},{key:"installRepository",value:(s=Ct(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories"),e.prev=1,e.next=4,p.a.post(n,t);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(1),Object(R.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(e){return s.apply(this,arguments)})},{key:"uninstallRepository",value:(o=Ct(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).reduce((function(e,n){return"".concat(e).concat(n,"=").concat(t[n],"&")}),""),a="".concat(Object(u.getAppRoot)(),"api/tool_shed_repositories?").concat(n),e.prev=2,e.next=5,p.a.delete(a);case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2),Object(R.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return o.apply(this,arguments)})},{key:"_groupByNameOwner",value:function(e,t){var n={},a=[];return e.forEach((function(e){var i="".concat(e.name,"_").concat(e.owner);t&&!t(e)||n[i]||(n[i]=!0,a.push(e))})),a}},{key:"_fixToolshedUrls",value:function(e,t){e.forEach((function(e){var n=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var r=o.value;if(r.includes(e.tool_shed)){e.tool_shed_url=r;break}}}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}}))}},{key:"_formatCount",value:function(e){return e>1e3?">".concat(Math.floor(e/1e3),"k"):e}},{key:"_getParamsString",value:function(e){return e?Object.keys(e).reduce((function(t,n){return"".concat(t).concat(n,"=").concat(e[n],"&")}),""):""}}])&&jt(t.prototype,n),a&&jt(t,a),e}();ie.default.use(oe.a);var Ot={props:["toolshedUrl","loading"],components:{LoadingSpan:le.a},data:function(){return{categories:[],fields:[{key:"name",label:"Category",sortable:!0},{key:"description",sortable:!1},{key:"repositories",sortable:!0}]}},created:function(){this.services=new Yt,this.load()},watch:{toolshedUrl:function(){this.load()}},methods:{load:function(){var e=this;this.$emit("onLoading",!0),this.services.getCategories(this.toolshedUrl).then((function(t){e.categories=t;e.$emit("onTotal",e.categories.reduce((function(e,t){return e+t.repositories}),0)),e.$emit("onLoading",!1)})).catch((function(t){e.$emit("onError",t),e.$emit("onLoading",!1)}))},onCategory:function(e){this.$emit("onCategory","category:'".concat(e,"'"))}}},At=Object(f.a)(Ot,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?n("loading-span",{attrs:{message:"Loading categories"}}):n("b-table",{attrs:{striped:"",items:e.categories,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("b-link",{staticClass:"font-weight-bold",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(n){return e.onCategory(t.value)}}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}}])})],1)}),[],!1,null,null,null).exports;function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}ie.default.use(oe.a);var Et={props:["repo","changesetRevision","requiresPanel","toolshedUrl","modalStatic"],data:function(){return{modalShow:!0,advancedShow:!1,installToolDependencies:!0,installRepositoryDependencies:!0,installResolverDependencies:!0,toolConfigs:[],toolConfig:null,toolSections:[],toolSection:null}},computed:{advancedTitle:function(){return this.advancedShow?"Hide":"Show"},modalTitle:function(){return"Installing '".concat(this.repo.name,"'")},showConfig:function(){return this.toolConfigs.length>1}},created:function(){this.load()},methods:{findSection:function(e){var t=["",""];if(e){var n=this.toolSections.find((function(t){return t.name.toLowerCase().trim()==e.toLowerCase().trim()}));n?t[0]=n.id:t[1]=e}return t},load:function(){var e=Object(i.a)(),t=e.config.toolbox;t&&(this.toolSections=t.filter((function(e){return e.elems}))),this.toolConfigs=e.config.tool_dynamic_configs||[],this.toolConfigs.length>0&&(this.toolConfig=this.toolConfigs[0])},onAdvanced:function(){this.advancedShow=!this.advancedShow},onOk:function(){var e=It(this.findSection(this.toolSection),2),t=e[0],n=e[1];this.$emit("ok",{tool_shed_url:this.toolshedUrl,name:this.repo.name,owner:this.repo.owner,changeset_revision:this.changesetRevision,new_tool_panel_section_label:n,tool_panel_section_id:t,shed_tool_conf:this.toolConfig,install_resolver_dependencies:this.installResolverDependencies,install_tool_dependencies:this.installToolDependencies,install_repository_dependencies:this.installRepositoryDependencies})},onHide:function(){this.$emit("hide")}}},Ht=Object(f.a)(Et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"repo-install-settings",static:e.modalStatic},on:{ok:e.onOk,hide:e.onHide},scopedSlots:e._u([{key:"modal-header",fn:function(){return[n("h4",{staticClass:"title m-0"},[e._v("\n            "+e._s(e.modalTitle)+"\n        ")])]},proxy:!0}]),model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e._v(" "),n("div",{staticClass:"description mb-1"},[e._v("\n        "+e._s(e.repo.long_description||e.repo.description)+"\n    ")]),e._v(" "),n("div",{staticClass:"revision text-muted small mb-3"},[e._v(e._s(e.repo.owner)+" rev. "+e._s(e.changesetRevision))]),e._v(" "),e.requiresPanel?n("b-form-group",{attrs:{label:"Target Section:",description:"Choose an existing tool panel section or create a new section to contain the installed tools (optional)."}},[n("b-form-input",{attrs:{list:"sectionSelect"},model:{value:e.toolSection,callback:function(t){e.toolSection=t},expression:"toolSection"}}),e._v(" "),n("datalist",{attrs:{id:"sectionSelect"}},e._l(e.toolSections,(function(t){return n("option",{key:t.name},[e._v("\n                "+e._s(t.name)+"\n            ")])})),0)],1):e._e(),e._v(" "),n("b-link",{attrs:{variant:"primary"},on:{click:e.onAdvanced}},[e._v(" "+e._s(e.advancedTitle)+" advanced settings. ")]),e._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"advanced-collapse"},model:{value:e.advancedShow,callback:function(t){e.advancedShow=t},expression:"advancedShow"}},[n("b-card",[e.showConfig?n("b-form-group",{attrs:{label:"Tool Configuration:",description:"Choose a tool configuration."}},e._l(e.toolConfigs,(function(t){return n("b-form-radio",{key:t,attrs:{value:t},model:{value:e.toolConfig,callback:function(t){e.toolConfig=t},expression:"toolConfig"}},[e._v("\n                    "+e._s(t)+"\n                ")])})),1):e._e(),e._v(" "),n("b-form-group",{attrs:{label:"Dependencies:",description:"Choose how to handle dependencies."}},[n("b-form-checkbox",{model:{value:e.installResolverDependencies,callback:function(t){e.installResolverDependencies=t},expression:"installResolverDependencies"}},[e._v("\n                    Install resolvable dependencies\n                ")]),e._v(" "),n("b-form-checkbox",{model:{value:e.installRepositoryDependencies,callback:function(t){e.installRepositoryDependencies=t},expression:"installRepositoryDependencies"}},[e._v("\n                    Install repository dependencies\n                ")]),e._v(" "),n("b-form-checkbox",{model:{value:e.installToolDependencies,callback:function(t){e.installToolDependencies=t},expression:"installToolDependencies"}},[e._v("\n                    Install tool dependencies\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;ie.default.use(oe.a);var $t={props:["installed","status"],data:function(){return{buttonClass:"btn-sm text-nowrap"}},computed:{installState:function(){return!this.status||"Uninstalled"==this.status},uninstallState:function(){return"Installed"==this.status},errorState:function(){return"Error"==this.status}},methods:{onInstall:function(){this.$emit("onInstall")},onUninstall:function(){this.$emit("onUninstall")},onCancel:function(){window.confirm("Do you want to reset this repository?")&&this.$emit("onUninstall")}}},Pt=Object(f.a)($t,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.installState?n("b-button",{class:e.buttonClass,attrs:{variant:"primary"},on:{click:e.onInstall}},[e._v("\n        Install\n    ")]):n("div",[e.uninstallState?n("b-button",{class:e.buttonClass,attrs:{variant:"danger"},on:{click:e.onUninstall}},[e._v("\n            Uninstall\n        ")]):n("b-button",{class:e.buttonClass,attrs:{variant:"info"},on:{click:e.onCancel}},[e.errorState?e._e():n("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),n("span",[e._v(e._s(e.status))])])],1)],1)}),[],!1,null,null,null).exports,Rt={props:["tools"],data:function(){return{clsExpanded:"bg-transparent border-bottom",clsCollapsed:"bg-transparent",clsFirstColumn:"p-0 w-50 text-left",clsSecondColumn:"p-0 w-50 text-center",expanded:!1,preview:2}},computed:{clsRow:function(){return this.expanded?this.clsExpanded:this.clsCollapsed},canExpand:function(){return this.tools&&this.tools.length>this.preview},visibleTools:function(){return this.canExpand&&!this.expanded?this.tools.slice(0,this.preview):this.tools}},methods:{onExpand:function(){this.expanded=!this.expanded}}},Nt=Object(f.a)(Rt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.tools?n("table",{staticClass:"table table-borderless"},[n("tbody",[e.canExpand&&e.expanded?n("tr",{staticClass:"bg-transparent"},[n("td",{class:e.clsFirstColumn},[n("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onExpand(t)}}},[n("span",{staticClass:"fa fa-angle-double-up"}),e._v(" "),n("span",[e._v("Show less")])])]),e._v(" "),n("td",{class:e.clsSecondColumn})]):e._e(),e._v(" "),e._l(e.visibleTools,(function(t){return n("tr",{key:t.guid,class:e.clsRow},[n("td",{class:e.clsFirstColumn},[e._v("\n                "+e._s(t.id)+"\n            ")]),e._v(" "),n("td",{class:e.clsSecondColumn},[e._v("\n                "+e._s(t.version)+"\n            ")])])})),e._v(" "),e.canExpand&&!e.expanded?n("tr",{staticClass:"bg-transparent"},[n("td",{class:e.clsFirstColumn},[n("a",{attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onExpand(t)}}},[n("span",{staticClass:"fa fa-angle-double-down"}),e._v(" "),n("span",[e._v("Show more")])])]),e._v(" "),n("td",{class:e.clsSecondColumn})]):e._e()],2)]):n("span",[e._v("-")])}),[],!1,null,null,null).exports;function zt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}ie.default.use(oe.a);var Ft={components:{InstallationSettings:Ht,InstallationButton:Pt,RepositoryTools:Nt},props:["repo","toolshedUrl"],data:function(){return{repoChecked:"fa fa-check text-success",repoUnchecked:"fa fa-times text-danger",selectedChangeset:null,selectedRequiresPanel:!1,repoTable:[],repoFields:[{key:"numeric_revision",label:"Revision"},{key:"tools",label:"Tools and Versions"},{key:"profile",label:"Requires"},{key:"missing_test_components",label:"Tests"},{key:"actions",label:""}],showSettings:!1,error:null,loading:!0,delay:2e3}},created:function(){this.services=new Yt,this.load()},destroyed:function(){this.clearTimeout()},methods:{clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timeout&&clearTimeout(this.timeout)})),setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;this.clearTimeout(),this.timeout=setTimeout((function(){e.loadInstalledRepositories()}),this.delay)})),load:function(){var e=this;this.services.getRepository(this.toolshedUrl,this.repo.id).then((function(t){e.repoTable=t,e.loadInstalledRepositories()})).catch((function(t){e.error=t,e.loading=!1}))},loadInstalledRepositories:function(){var e=this;this.services.getInstalledRepositoriesByName(this.repo.name,this.repo.owner).then((function(t){var n=!1;e.repoTable.forEach((function(e){var a=t[e.changeset_revision];if(a&&a.status!==e.status)return e.status=a.status,e.installed=a.installed,n=!0,!1})),n&&(e.repoTable=zt(e.repoTable)),e.setTimeout(),e.loading=!1})).catch((function(t){e.error=t,e.loading=!1}))},onOk:function(e){var t=this;this.services.installRepository(e).then((function(e){t.showSettings=!1})).catch((function(e){console.log(e)}))},onHide:function(){this.showSettings=!1},setupRepository:function(e){this.selectedChangeset=e.changeset_revision,this.selectedRequiresPanel=e.includes_tools_for_display_in_tool_panel||"repository_suite_definition"==e.repository.type,this.showSettings=!0},uninstallRepository:function(e){var t=this;this.services.uninstallRepository({tool_shed_url:this.toolshedUrl,name:this.repo.name,owner:this.repo.owner,changeset_revision:e.changeset_revision}).catch((function(e){t.error=e}))}}},Vt=Object(f.a)(Ft,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",[n("div",{staticClass:"mb-1"},[e._v(e._s(e.repo.long_description))]),e._v(" "),n("div",{staticClass:"mb-3"},[n("b-link",{attrs:{href:e.repo.repository_url,target:"_blank"}},[e._v("Show additional details and dependencies.")])],1),e._v(" "),n("div",[e.loading?n("span",[n("span",{staticClass:"fa fa-spinner fa-spin"}),e._v(" "),n("span",{staticClass:"loading-message"},[e._v("Loading repository details...")])]):n("div",[e.error?n("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n                "+e._s(e.error)+"\n            ")]):n("div",{staticClass:"border rounded"},[n("b-table",{staticClass:"text-center m-0",attrs:{borderless:"",items:e.repoTable,fields:e.repoFields},scopedSlots:e._u([{key:"cell(numeric_revision)",fn:function(t){return[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.value))])]}},{key:"cell(tools)",fn:function(e){return[n("RepositoryTools",{attrs:{tools:e.value}})]}},{key:"cell(profile)",fn:function(t){return[e._v("\n                        "+e._s(t.value?"+"+t.value:"-")+"\n                    ")]}},{key:"cell(missing_test_components)",fn:function(t){return[t.value?n("span",{class:e.repoUnchecked}):n("span",{class:e.repoChecked})]}},{key:"cell(actions)",fn:function(t){return[n("InstallationButton",{attrs:{installed:t.item.installed,status:t.item.status},on:{onInstall:function(n){return e.setupRepository(t.item)},onUninstall:function(n){return e.uninstallRepository(t.item)}}})]}}])}),e._v(" "),e.showSettings?n("InstallationSettings",{attrs:{repo:e.repo,"toolshed-url":e.toolshedUrl,"changeset-revision":e.selectedChangeset,"requires-panel":e.selectedRequiresPanel},on:{hide:e.onHide,ok:e.onOk}}):e._e()],1)],1)])])}),[],!1,null,null,null).exports;ie.default.use(oe.a);var Ut={components:{LoadingSpan:le.a,RepositoryDetails:Vt},props:["query","scrolled","toolshedUrl"],data:function(){return{repositories:[],fields:[{key:"name"},{key:"owner",label:"Owner"},{key:"times_downloaded",label:"Downloaded"},{key:"last_updated",label:"Updated"}],page:1,pageSize:50,pageState:0,error:null}},watch:{toolshedUrl:function(){this.load()},query:function(){this.load()},scrolled:function(){this.scrolled&&0===this.pageState&&this.load(this.page+1)}},computed:{pageLoading:function(){return 1===this.pageState},noResultsFound:function(){return 0===this.repositories.length&&!this.pageLoading}},created:function(){this.services=new Yt,this.load()},methods:{load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.pageState=1,1==t&&(this.repositories=[]),this.services.getRepositories({tool_shed_url:this.toolshedUrl,q:this.query,page:this.page,page_size:this.pageSize}).then((function(t){e.repositories=e.repositories.concat(t),t.length<e.pageSize?e.pageState=2:e.pageState=0})).catch((function(t){e.$emit("onError",t)}))}}},Wt=Object(f.a)(Ut,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-table",{attrs:{striped:"",id:"shed-search-results",items:e.repositories,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("b-link",{staticClass:"font-weight-bold",attrs:{href:"javascript:void(0)",role:"button"},on:{click:t.toggleDetails}},[e._v("\n                "+e._s(t.item.name)+"\n            ")]),e._v(" "),n("div",[e._v(e._s(t.item.description))])]}},{key:"row-details",fn:function(t){return[n("RepositoryDetails",{attrs:{repo:t.item,"toolshed-url":e.toolshedUrl}})]}}])}),e._v(" "),e.noResultsFound?n("div",{staticClass:"unavailable-message"},[e._v("\n        No matching repositories found.\n    ")]):e._e(),e._v(" "),e.pageLoading?n("loading-span",{attrs:{message:"Loading repositories"}}):e._e()],1)}),[],!1,null,null,null).exports;ie.default.use(oe.a);var Bt={props:["toolshedUrl","toolshedUrls","loading","total"],computed:{showDropdown:function(){return this.toolshedUrls.length>1}},methods:{onToolshed:function(e){this.$emit("onToolshed",e)}}},qt=(n(956),{props:["query","scrolled"],components:{Categories:At,Repositories:Wt,ServerSelection:Object(f.a)(Bt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",{staticClass:"m-1 text-muted"},[n("span",{staticClass:"description"},[e._v(" "+e._s(e.total)+" repositories available at ")]),e._v(" "),e.showDropdown?n("span",{staticClass:"dropdown"},[n("b-link",{staticClass:"font-weight-bold",attrs:{id:"dropdownToolshedUrl","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v("\n            "+e._s(e.toolshedUrl)+"\n            "),n("span",{staticClass:"fa fa-caret-down"})]),e._v(" "),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownToolshedUrl"}},e._l(e.toolshedUrls,(function(t){return n("a",{key:t,staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"button"},on:{click:function(n){return n.preventDefault(),e.onToolshed(t)}}},[e._v(e._s(t))])})),0)],1):n("span",[n("b-link",{staticClass:"font-weight-bold",attrs:{href:e.toolshedUrl,target:"_blank"}},[e._v("\n            "+e._s(e.toolshedUrl)+"\n        ")])],1)])}),[],!1,null,"8be7fc92",null).exports},data:function(){return{toolshedUrl:null,toolshedUrls:[],queryLength:3,loading:!1,total:0,error:null,tabCurrent:"true",tabOptions:[{text:"Search All",value:!0},{text:"Installed Only",value:!1}]}},created:function(){this.configureToolsheds()},computed:{queryEmpty:function(){return!this.query||this.query.length<this.queryLength}},methods:{configureToolsheds:function(){var e=Object(i.a)();this.toolshedUrls=e.config.tool_shed_urls,this.toolshedUrls&&0!=this.toolshedUrls.length?this.toolshedUrl=this.toolshedUrls[0]:this.setError("Toolshed registry is empty, no servers found.")},setError:function(e){this.error=e},setQuery:function(e){this.$emit("onQuery",e)},setToolshed:function(e){this.error=null,this.toolshedUrl=e},setTotal:function(e){this.total=e},setLoading:function(e){this.loading=e}}}),Jt=Object(f.a)(qt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ServerSelection",{attrs:{"toolshed-url":e.toolshedUrl,"toolshed-urls":e.toolshedUrls,total:e.total,loading:e.loading},on:{onToolshed:e.setToolshed}}),e._v(" "),e.error?n("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):n("div",[e.queryEmpty?e._e():n("Repositories",{attrs:{query:e.query,scrolled:e.scrolled,"toolshed-url":e.toolshedUrl},on:{onError:e.setError}}),e._v(" "),n("Categories",{directives:[{name:"show",rawName:"v-show",value:e.queryEmpty,expression:"queryEmpty"}],attrs:{"toolshed-url":e.toolshedUrl,loading:e.loading},on:{onCategory:e.setQuery,onTotal:e.setTotal,onError:e.setError,onLoading:e.setLoading}})],1)],1)}),[],!1,null,null,null).exports;ie.default.use(oe.a);var Gt={components:{InstallationButton:Pt},data:function(){return{delay:5e3,loading:!0,error:null,items:[],fields:["name","status"]}},computed:{showItems:function(){return this.items.length>0},showEmpty:function(){return!this.loading&&0===this.items.length}},created:function(){this.root=Object(u.getAppRoot)(),this.services=new Yt({root:this.root}),this.load()},destroyed:function(){this.clearTimeout()},methods:{setTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;this.clearTimeout(),this.timeout=setTimeout((function(){e.load()}),this.delay)})),clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timeout&&clearTimeout(this.timeout)})),load:function(){var e=this;this.services.getInstalledRepositories({filter:function(e){return"Installed"!==e.status}}).then((function(t){e.items=t,e.loading=!1,e.setTimeout()})).catch((function(t){e.error=t}))},onQuery:function(e){this.$emit("onQuery",e)},uninstallRepository:function(e){var t=this;this.services.uninstallRepository(e).catch((function(e){t.error=e}))}}},Kt=(n(957),Object(f.a)(Gt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("b-alert",{attrs:{variant:"danger",show:""}},[e._v("\n        "+e._s(e.error)+"\n    ")]):e._e(),e._v(" "),e.showItems?n("b-card",{staticClass:"my-2",attrs:{"no-body":""}},[n("h5",{staticClass:"m-3"},[e._v("Currently installing...")]),e._v(" "),n("b-table",{staticClass:"mx-3 mb-0",attrs:{"sticky-header":"","thead-class":"installation-monitor-header",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("b-link",{on:{click:function(n){return e.onQuery(t.item.name)}}},[e._v(" "+e._s(t.item.name)+" ("+e._s(t.item.owner)+") ")])]}},{key:"cell(status)",fn:function(t){return[n("InstallationButton",{staticClass:"float-right",attrs:{status:t.item.status},on:{onUninstall:function(n){return e.uninstallRepository(t.item)}}})]}}],null,!1,2869746301)})],1):e._e(),e._v(" "),e.showEmpty?n("b-alert",{attrs:{variant:"info",show:""}},[e._v("\n        Currently there are no installing repositories.\n    ")]):e._e()],1)}),[],!1,null,null,null).exports),Qt={props:["repo"],components:{LoadingSpan:le.a,RepositoryDetails:Vt},data:function(){return{loading:!0,toolshedRepository:null,error:null}},created:function(){this.root=Object(u.getAppRoot)(),this.services=new Yt({root:this.root}),this.load()},methods:{load:function(){var e=this;this.loading=!0,this.services.getRepositoryByName(this.repo.tool_shed_url,this.repo.name,this.repo.owner).then((function(t){e.toolshedRepository=t,e.loading=!1})).catch((function(t){e.error=t}))}}},Xt=Object(f.a)(Qt,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.error?t("div",{staticClass:"alert alert-danger",attrs:{show:""}},[this._v(this._s(this.error))]):t("div",[this.loading?t("span",[t("b-card",[t("loading-span",{attrs:{message:"Loading installed repository details"}})],1)],1):t("div",[t("RepositoryDetails",{attrs:{repo:this.toolshedRepository,"toolshed-url":this.repo.tool_shed_url}})],1)])])}),[],!1,null,null,null).exports;ie.default.use(oe.a);var Zt={components:{LoadingSpan:le.a,Monitor:Kt,RepositoryDetails:Xt},props:["filter"],data:function(){var e=this;return{error:null,fields:[{key:"name",sortable:!0,sortByFormatted:function(t,n,a){return"".concat(e.isLatest(a),"_").concat(t)}},{key:"owner",sortable:!0}],loading:!0,message:null,messageVariant:null,nRepositories:0,repositories:[],showMonitor:!1,sortBy:"name"}},computed:{showNotFound:function(){return 0===this.nRepositories&&this.filter},showNotAvailable:function(){return 0===this.nRepositories&&!this.filter},showMessage:function(){return!!this.message}},created:function(){this.root=Object(u.getAppRoot)(),this.services=new Yt({root:this.root}),this.load()},methods:{isLatest:function(e){var t=e.tool_shed_status&&e.tool_shed_status.latest_installable_revision;return"false"!=String(t).toLowerCase()},load:function(){var e=this;this.loading=!0,this.services.getInstalledRepositories().then((function(t){e.repositories=t,e.nRepositories=t.length,e.loading=!1})).catch((function(t){e.error=t}))},filtered:function(e){this.nRepositories=e.length},toggleMonitor:function(){this.showMonitor=!this.showMonitor},onQuery:function(e){this.$emit("onQuery",e)}}},en={components:{SearchList:Jt,InstalledList:Object(f.a)(Zt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.error?n("div",{staticClass:"alert alert-danger",attrs:{show:""}},[e._v(e._s(e.error))]):n("div",[e.loading?n("loading-span",{attrs:{message:"Loading installed repositories"}}):n("div",[n("b-alert",{attrs:{variant:e.messageVariant,show:e.showMessage}},[e._v(e._s(e.message))]),e._v(" "),n("div",{staticClass:"m-1"},[n("span",{staticClass:"installed-message text-muted"},[e._v("\n                    "+e._s(e.repositories.length)+" repositories installed on this instance.\n                ")]),e._v(" "),n("b-link",{staticClass:"font-weight-bold",on:{click:e.toggleMonitor}},[e.showMonitor?n("span",[n("span",{staticClass:"fa fa-angle-double-up"}),e._v(" "),n("span",[e._v("Hide installation progress.")])]):n("span",[n("span",{staticClass:"fa fa-angle-double-down"}),e._v(" "),n("span",[e._v("Show installation progress.")])])])],1),e._v(" "),e.showMonitor?n("Monitor",{on:{onQuery:e.onQuery}}):e._e(),e._v(" "),n("b-table",{attrs:{id:"repository-table",striped:"",fields:e.fields,"sort-by":e.sortBy,items:e.repositories,filter:e.filter},on:{filtered:e.filtered},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[n("b-link",{staticClass:"font-weight-bold",attrs:{href:"#",role:"button"},on:{click:t.toggleDetails}},[e.isLatest(t.item)?e._e():n("div",[n("b-badge",{staticClass:"mb-2",attrs:{variant:"danger"}},[e._v("\n                                Newer version available!\n                            ")])],1),e._v(" "),n("div",{staticClass:"name"},[e._v(e._s(t.item.name))])]),e._v(" "),n("div",[e._v(e._s(t.item.description))])]}},{key:"row-details",fn:function(e){return[n("RepositoryDetails",{attrs:{repo:e.item}})]}}])}),e._v(" "),e.showNotFound?n("div",[e._v("\n                No matching entries found for: "),n("span",{staticClass:"font-weight-bold"},[e._v(e._s(this.filter))]),e._v(".\n            ")]):e._e(),e._v(" "),e.showNotAvailable?n("div",[e._v("\n                No installed repositories found.\n            ")]):e._e()],1)],1)])}),[],!1,null,null,null).exports},data:function(){return{queryInput:null,queryDelay:1e3,queryTimer:null,queryLength:3,query:null,scrolled:!1,loading:!1,total:0,error:null,tabValue:!0,tabOptions:[{text:"Search All",value:!0},{text:"Installed Only",value:!1}]}},watch:{tabValue:function(){this.setQuery("")}},computed:{queryEmpty:function(){return!this.query||this.query.length<this.queryLength}},methods:{clearTimer:function(){this.queryTimer&&clearTimeout(this.queryTimer)},delayQuery:function(e){var t=this;this.clearTimer(),e?this.queryTimer=setTimeout((function(){t.setQuery(e)}),this.queryDelay):this.setQuery(e)},setError:function(e){this.error=e},setQuery:function(e){this.clearTimer(),this.query=this.queryInput=e},onScroll:function(e){var t=e.target,n=t.scrollTop,a=t.clientHeight,i=t.scrollHeight;this.scrolled=n+a>=i}}},tn=Object(f.a)(en,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"overflow-auto h-100 p-1",on:{scroll:e.onScroll}},[e.error?n("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):n("div",[n("b-input-group",{staticClass:"mb-3"},[n("b-input",{attrs:{id:"toolshed-repo-search",placeholder:"Search Repositories"},on:{input:e.delayQuery,change:e.setQuery,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.setQuery()}},model:{value:e.queryInput,callback:function(t){e.queryInput=t},expression:"queryInput"}}),e._v(" "),n("b-input-group-append",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"clear search (esc)"}},[n("b-btn",{on:{click:function(t){return e.setQuery()}}},[n("i",{staticClass:"fa fa-times"})])],1)],1),e._v(" "),n("b-form-radio-group",{staticClass:"mb-3",attrs:{options:e.tabOptions},model:{value:e.tabValue,callback:function(t){e.tabValue=t},expression:"tabValue"}}),e._v(" "),e.tabValue?n("div",[n("SearchList",{attrs:{query:e.query,scrolled:e.scrolled},on:{onQuery:e.setQuery,onError:e.setError}})],1):n("div",[n("InstalledList",{attrs:{filter:e.queryInput},on:{onQuery:e.setQuery}})],1)],1)])}),[],!1,null,null,null).exports,nn=n(92),an=function(e,t){var n=Object(a.b)();return d.a.extend({routes:{"(/)admin(/)":"show_home","(/)admin(/)users":"show_users","(/)admin(/)users(/)create":"show_users_create","(/)admin(/)roles":"show_roles","(/)admin(/)groups":"show_groups","(/)admin(/)toolshed":"show_toolshed","(/)admin(/)error_stack":"show_error_stack","(/)admin(/)display_applications":"show_display_applications","(/)admin(/)tool_versions":"show_tool_versions","(/)admin(/)quotas":"show_quotas","(/)admin(/)forms":"show_forms","(/)admin(/)form(/)(:form_id)":"show_form","(/)admin/data_tables":"show_data_tables","(/)admin/data_types":"show_data_types","(/)admin/jobs":"show_jobs","(/)admin/invocations":"show_invocations","(/)admin/toolbox_dependencies":"show_toolbox_dependencies","(/)admin/data_manager*path":"show_data_manager","(/)admin(/)reset_metadata":"show_reset_metadata","*notFound":"not_found"},authenticate:function(){var e=Object(i.a)();return e.user&&e.user.id&&e.user.get("is_admin")},not_found:function(){window.location.reload()},show_home:function(){this._display_vue_helper(nt,{isRepoInstalled:t.settings.is_repo_installed,isToolShedInstalled:t.settings.is_tool_shed_installed})},show_users:function(){this._show_grid_view("admin/users_list")},show_users_create:function(){this._display_vue_helper(yt.a,{redirect:"/admin/users",registration_warning_message:t.config.registration_warning_message,mailing_join_addr:t.config.mailing_join_addr,server_mail_configured:t.config.server_mail_configured})},show_roles:function(){this._show_grid_view("admin/roles_list")},show_groups:function(){this._show_grid_view("admin/groups_list")},show_toolshed:function(){this._display_vue_helper(tn)},show_tool_versions:function(){this._show_grid_view("admin/tool_versions_list")},show_quotas:function(){this._show_grid_view("admin/quotas_list")},_show_grid_view:function(e){var t=Object(i.a)();this.page.display(new l.a({url_base:"".concat(n).concat(e),url_data:t.params}))},_display_vue_helper:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ie.default.extend(e),a=document.createElement("div");this.page.display(a),new n({store:nn.a,propsData:t}).$mount(a)},show_data_tables:function(){this._display_vue_helper(M)},show_data_types:function(){this._display_vue_helper(L)},show_jobs:function(){this._display_vue_helper($)},show_invocations:function(){this._display_vue_helper(ae)},show_toolbox_dependencies:function(){this._display_vue_helper(Ze)},show_error_stack:function(){this._display_vue_helper(wt)},show_display_applications:function(){this._display_vue_helper(Lt)},show_reset_metadata:function(){this._display_vue_helper(St)},show_data_manager:function(e){var t=Object(i.a)();console.log("show_data_manager");var n=document.createElement("div");this.page.display(n),t.debug("show_data_manager: path='"+e+"'"),vt.replace(e||"/"),new ie.default({router:vt,render:function(e){return e(it)}}).$mount(n)},show_forms:function(){this._show_grid_view("forms/forms_list")},show_form:function(e){var t="?id=".concat(c.a.get("id")),n={reset_user_password:{title:s()("Reset passwords"),url:"admin/reset_user_password".concat(t),icon:"fa-user",submit_title:"Save new password",redirect:"admin/users"},manage_roles_and_groups_for_user:{url:"admin/manage_roles_and_groups_for_user".concat(t),icon:"fa-users",redirect:"admin/users"},manage_users_and_groups_for_role:{url:"admin/manage_users_and_groups_for_role".concat(t),redirect:"admin/roles"},manage_users_and_roles_for_group:{url:"admin/manage_users_and_roles_for_group".concat(t),redirect:"admin/groups"},manage_users_and_groups_for_quota:{url:"admin/manage_users_and_groups_for_quota".concat(t),redirect:"admin/quotas"},create_role:{url:"admin/create_role",redirect:"admin/roles"},create_group:{url:"admin/create_group",redirect:"admin/groups"},create_quota:{url:"admin/create_quota",redirect:"admin/quotas"},rename_role:{url:"admin/rename_role".concat(t),redirect:"admin/roles"},rename_group:{url:"admin/rename_group".concat(t),redirect:"admin/groups"},rename_quota:{url:"admin/rename_quota".concat(t),redirect:"admin/quotas"},edit_quota:{url:"admin/edit_quota".concat(t),redirect:"admin/quotas"},set_quota_default:{url:"admin/set_quota_default".concat(t),redirect:"admin/quotas"},create_form:{url:"forms/create_form",redirect:"admin/forms"},edit_form:{url:"forms/edit_form".concat(t),redirect:"admin/forms"}};this.page.display(new r.a.View(n[e]))}})},on=n(0),sn=n.n(on),rn=n(3),ln=n.n(rn),cn=ln.a.View.extend({initialize:function(e,t){this.page=e,this.root=t.root,this.config=t.config,this.settings=t.settings,this.model=new ln.a.Model({title:"Galaxy version ".concat(Object(i.a)().config.version_major)}),this.categories=new ln.a.Collection([{title:s()("Server"),items:[{title:s()("Data Types"),url:"admin/data_types",target:"__use_router__",id:"admin-link-datatypes"},{title:s()("Data Tables"),url:"admin/data_tables",target:"__use_router__",id:"admin-link-data-tables"},{title:s()("Display Applications"),url:"admin/display_applications",target:"__use_router__",id:"admin-link-display-applications"},{title:s()("Jobs"),url:"admin/jobs",target:"__use_router__",id:"admin-link-jobs"},{title:s()("Workflow Invocations"),url:"admin/invocations",target:"__use_router__",id:"admin-link-invocations"},{title:s()("Local Data"),url:"admin/data_manager",target:"__use_router__",id:"admin-link-local-data"}]},{title:s()("User Management"),items:[{title:s()("Users"),url:"admin/users",target:"__use_router__",id:"admin-link-users"},{title:s()("Quotas"),url:"admin/quotas",target:"__use_router__",enabled:this.config.enable_quotas,id:"admin-link-quotas"},{title:s()("Groups"),url:"admin/groups",target:"__use_router__",id:"admin-link-groups"},{title:s()("Roles"),url:"admin/roles",target:"__use_router__",id:"admin-link-roles"},{title:s()("Forms"),url:"admin/forms",target:"__use_router__",id:"admin-link-forms"}]},{title:s()("Tool Management"),items:[{title:s()("Install and Uninstall"),url:"admin/toolshed",target:"__use_router__",id:"admin-link-toolshed",enabled:this.settings.is_tool_shed_installed},{title:s()("Manage Metadata"),url:"admin/reset_metadata",id:"admin-link-metadata",enabled:this.settings.is_repo_installed,target:"__use_router__"},{title:s()("Manage Whitelist"),url:"admin/sanitize_whitelist",id:"admin-link-whitelist"},{title:s()("Manage Dependencies"),url:"admin/toolbox_dependencies",target:"__use_router__",id:"admin-link-manage-dependencies"},{title:s()("Manage Dependencies (legacy)"),url:"admin/manage_tool_dependencies"},{title:s()("View Lineage"),url:"admin/tool_versions",target:"__use_router__",id:"admin-link-tool-versions"},{title:s()("View Migration Stages"),url:"admin/review_tool_migration_stages",id:"admin-link-migrations"},{title:s()("View Error Logs"),url:"admin/error_stack",id:"admin-link-error-stack",target:"__use_router__"}]}]),this.setElement(this._template())},render:function(){var e=this;this.$el.empty(),this.categories.each((function(t){var n=sn()(e._templateSection(t.attributes)),a=n.find(".toolSectionBody");re.a.each(t.get("items"),(function(t){if(void 0===t.enabled||t.enabled){var n=sn()("<a/>").attr({href:e.root+t.url}).text(s()(t.title));t.id&&n.attr("id",t.id),"__use_router__"==t.target?n.on("click",(function(n){n.preventDefault(),e.page.router.push(t.url)})):n.attr("target","galaxy_main"),a.append(sn()("<div/>").addClass("toolTitle").append(n))}})),e.$el.append(n)}))},_templateSection:function(e){return'<div class="toolSectionWrapper">\n                    <div class="toolSectionTitle pt-1 px-3">'.concat(s()(e.title),'</div>\n                    <div class="toolSectionBody"/>\n                </div>')},_template:function(){return'<div class="toolMenuContainer"/>'},toString:function(){return"adminPanel"}}),dn=n(8),un=n(210);Object(a.a)((function(e,t){var n=t.options;console.log("Admin custom page setup"),Object.assign(n.config,{active_view:"admin"});var a=Object.assign({},n,{Left:cn,Router:an(0,n)});dn.a.setWindowTitle("Administration"),e.page=new un.a.View(a)})),window.addEventListener("load",(function(){return Object(a.d)("admin")}))}]);